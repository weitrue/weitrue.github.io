<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>ã€LeetCodeã€‘æ’åºç®—æ³•</title>
    <link href="/2021/03/10/lt-sort/"/>
    <url>/2021/03/10/lt-sort/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Leetcode</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>Python</tag>
      
      <tag>LeetCode</tag>
      
      <tag>Go</tag>
      
      <tag>scala</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€LeetCodeã€‘æ ‘ç»“æ„ç›¸å…³</title>
    <link href="/2021/03/08/lt-tree/"/>
    <url>/2021/03/08/lt-tree/</url>
    
    <content type="html"><![CDATA[<a id="more"></a>]]></content>
    
    
    <categories>
      
      <category>Leetcode</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>Python</tag>
      
      <tag>LeetCode</tag>
      
      <tag>Go</tag>
      
      <tag>scala</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€LeetCodeã€‘çº¿æ€§è¡¨ç›¸å…³é—®é¢˜</title>
    <link href="/2021/03/05/lt-linkedList/"/>
    <url>/2021/03/05/lt-linkedList/</url>
    
    <content type="html"><![CDATA[<h3 id="çº¿æ€§è¡¨ç›¸å…³"><a href="#çº¿æ€§è¡¨ç›¸å…³" class="headerlink" title="çº¿æ€§è¡¨ç›¸å…³"></a><a id="more"></a>çº¿æ€§è¡¨ç›¸å…³</h3><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problemset/all/">https://leetcode-cn.com/problemset/all/</a></p><h4 id="é“¾è¡¨ç›¸å…³"><a href="#é“¾è¡¨ç›¸å…³" class="headerlink" title="é“¾è¡¨ç›¸å…³"></a>é“¾è¡¨ç›¸å…³</h4><h5 id="é“¾è¡¨è®¿é—®"><a href="#é“¾è¡¨è®¿é—®" class="headerlink" title="é“¾è¡¨è®¿é—®"></a>é“¾è¡¨è®¿é—®</h5><h6 id="141-ç¯å½¢é“¾è¡¨"><a href="#141-ç¯å½¢é“¾è¡¨" class="headerlink" title="141. ç¯å½¢é“¾è¡¨"></a><a href="https://leetcode-cn.com/problems/linked-list-cycle/">141. ç¯å½¢é“¾è¡¨</a></h6><p>ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œåˆ¤æ–­é“¾è¡¨ä¸­æ˜¯å¦æœ‰ç¯ã€‚</p><p>å¦‚æœé“¾è¡¨ä¸­æœ‰æŸä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡è¿ç»­è·Ÿè¸ª next æŒ‡é’ˆå†æ¬¡åˆ°è¾¾ï¼Œåˆ™é“¾è¡¨ä¸­å­˜åœ¨ç¯ã€‚ ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œæˆ‘ä»¬ä½¿ç”¨æ•´æ•° pos æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°é“¾è¡¨ä¸­çš„ä½ç½®ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰ã€‚ å¦‚æœ pos æ˜¯ -1ï¼Œåˆ™åœ¨è¯¥é“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚æ³¨æ„ï¼špos ä¸ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ï¼Œä»…ä»…æ˜¯ä¸ºäº†æ ‡è¯†é“¾è¡¨çš„å®é™…æƒ…å†µã€‚</p><p>å¦‚æœé“¾è¡¨ä¸­å­˜åœ¨ç¯ï¼Œåˆ™è¿”å› true ã€‚ å¦åˆ™ï¼Œè¿”å› false ã€‚</p><p>è§£é¢˜æ€è·¯</p><pre><code class="hljs angelscript"><span class="hljs-number">1.</span>å¿«æ…¢æŒ‡é’ˆï¼Œç›¸é‡é—®é¢˜<span class="hljs-number">2.</span>å€ŸåŠ©å“ˆå¸Œï¼ˆSetï¼‰</code></pre><p><code>Java</code></p><pre><code class="hljs Java"><span class="hljs-comment">/*</span><span class="hljs-comment"> * Author: Wang P</span><span class="hljs-comment"> * Version: 1.0.0</span><span class="hljs-comment"> * Date: 2021-03-04 17:27:34</span><span class="hljs-comment"> * Description:</span><span class="hljs-comment"> **/</span> <span class="hljs-keyword">package</span> com.weitrue.leetcode.editor.cn;<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LinkedListCycle</span></span>&#123;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span></span>&#123;        Solution s = <span class="hljs-keyword">new</span> LinkedListCycle().<span class="hljs-function">new <span class="hljs-title">Solution</span><span class="hljs-params">()</span></span>;    &#125;        <span class="hljs-comment">//Given head, the head of a linked list, determine if the linked list has a cycl</span>    <span class="hljs-comment">//e in it.</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// There is a cycle in a linked list if there is some node in the list that can</span>    <span class="hljs-comment">//be reached again by continuously following the next pointer. Internally, pos is</span>    <span class="hljs-comment">//used to denote the index of the node that tail&#x27;s next pointer is connected to. N</span>    <span class="hljs-comment">//ote that pos is not passed as a parameter.</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Return true if there is a cycle in the linked list. Otherwise, return false.</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Example 1:</span>    <span class="hljs-comment">//Input: head = [3,2,0,-4], pos = 1</span>    <span class="hljs-comment">//Output: true</span>    <span class="hljs-comment">//Explanation: There is a cycle in the linked list, where the tail connects to t</span>    <span class="hljs-comment">//he 1st node (0-indexed).</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Example 2:</span>    <span class="hljs-comment">//Input: head = [1,2], pos = 0</span>    <span class="hljs-comment">//Output: true</span>    <span class="hljs-comment">//Explanation: There is a cycle in the linked list, where the tail connects to t</span>    <span class="hljs-comment">//he 0th node.</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Example 3:</span>    <span class="hljs-comment">//Input: head = [1], pos = -1</span>    <span class="hljs-comment">//Output: false</span>    <span class="hljs-comment">//Explanation: There is no cycle in the linked list.</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Constraints:</span>    <span class="hljs-comment">// The number of the nodes in the list is in the range [0, 104].</span>    <span class="hljs-comment">// -105 &lt;= Node.val &lt;= 105</span>    <span class="hljs-comment">// pos is -1 or a valid index in the linked-list.</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Follow up: Can you solve it using O(1) (i.e. constant) memory?</span>    <span class="hljs-comment">// Related Topics é“¾è¡¨ åŒæŒ‡é’ˆ</span>    <span class="hljs-comment">// ğŸ‘ 970 ğŸ‘ 0</span>  <span class="hljs-comment">// leetcode submit region begin(Prohibit modification and deletion)</span>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ListNode</span> </span>&#123;        <span class="hljs-keyword">int</span> val;        ListNode next;        ListNode(<span class="hljs-keyword">int</span> x) &#123;            val = x;            next = <span class="hljs-keyword">null</span>;        &#125;    &#125;    <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>&#123;        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">hasCycle</span><span class="hljs-params">(ListNode head)</span> </span>&#123;            <span class="hljs-keyword">if</span> (head == <span class="hljs-keyword">null</span> ||  head.next == <span class="hljs-keyword">null</span>) &#123;                <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;            &#125;            ListNode p = head, q = head;            <span class="hljs-keyword">do</span> &#123;                p = p.next;                q = q.next.next;            &#125;            <span class="hljs-keyword">while</span> (q != <span class="hljs-keyword">null</span> &amp;&amp; q.next != <span class="hljs-keyword">null</span> &amp;&amp; p != q);            <span class="hljs-keyword">return</span> p == q;        &#125;    &#125;    <span class="hljs-comment">//leetcode submit region end(Prohibit modification and deletion)</span>&#125;</code></pre><p><code>Golang</code></p><pre><code class="hljs golang"><span class="hljs-keyword">package</span> leetcode<span class="hljs-comment">/**</span><span class="hljs-comment"> * Author: Wang P</span><span class="hljs-comment"> * Version: 1.0.0</span><span class="hljs-comment"> * Date: 2021-03-05 11:03:59</span><span class="hljs-comment"> * Description:</span><span class="hljs-comment"> **/</span><span class="hljs-comment">//Given head, the head of a linked list, determine if the linked list has a cycl</span><span class="hljs-comment">//e in it. </span><span class="hljs-comment">//</span><span class="hljs-comment">// There is a cycle in a linked list if there is some node in the list that can </span><span class="hljs-comment">//be reached again by continuously following the next pointer. Internally, pos is </span><span class="hljs-comment">//used to denote the index of the node that tail&#x27;s next pointer is connected to. N</span><span class="hljs-comment">//ote that pos is not passed as a parameter. </span><span class="hljs-comment">//</span><span class="hljs-comment">// Return true if there is a cycle in the linked list. Otherwise, return false. </span><span class="hljs-comment">// </span><span class="hljs-comment">// Example 1: </span><span class="hljs-comment">//Input: head = [3,2,0,-4], pos = 1</span><span class="hljs-comment">//Output: true</span><span class="hljs-comment">//Explanation: There is a cycle in the linked list, where the tail connects to t</span><span class="hljs-comment">//he 1st node (0-indexed).</span><span class="hljs-comment">// </span><span class="hljs-comment">// Example 2: </span><span class="hljs-comment">//Input: head = [1,2], pos = 0</span><span class="hljs-comment">//Output: true</span><span class="hljs-comment">//Explanation: There is a cycle in the linked list, where the tail connects to t</span><span class="hljs-comment">//he 0th node.</span><span class="hljs-comment">// </span><span class="hljs-comment">// Example 3: </span><span class="hljs-comment">//Input: head = [1], pos = -1</span><span class="hljs-comment">//Output: false</span><span class="hljs-comment">//Explanation: There is no cycle in the linked list.</span><span class="hljs-comment">// </span><span class="hljs-comment">// Constraints: </span><span class="hljs-comment">// The number of the nodes in the list is in the range [0, 104]. </span><span class="hljs-comment">// -105 &lt;= Node.val &lt;= 105 </span><span class="hljs-comment">// pos is -1 or a valid index in the linked-list. </span><span class="hljs-comment">// Follow up: Can you solve it using O(1) (i.e. constant) memory? </span><span class="hljs-comment">// Related Topics é“¾è¡¨ åŒæŒ‡é’ˆ </span><span class="hljs-comment">// ğŸ‘ 971 ğŸ‘ 0</span><span class="hljs-comment">//leetcode submit region begin(Prohibit modification and deletion)</span><span class="hljs-comment">// Definition for singly-linked list.</span><span class="hljs-keyword">type</span> ListNode <span class="hljs-keyword">struct</span> &#123;   Val <span class="hljs-keyword">int</span>   Next *ListNode&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">hasCycle</span><span class="hljs-params">(head *ListNode)</span> <span class="hljs-title">bool</span></span> &#123;<span class="hljs-keyword">if</span> head == <span class="hljs-literal">nil</span> || head.Next == <span class="hljs-literal">nil</span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>&#125;p := head.Nextq := head.Next.Next<span class="hljs-keyword">for</span> q != <span class="hljs-literal">nil</span> &amp;&amp; q.Next != <span class="hljs-literal">nil</span> &amp;&amp; p != q&#123;p = p.Nextq = q.Next.Next&#125;    <span class="hljs-keyword">return</span> p == q&#125;<span class="hljs-comment">//leetcode submit region end(Prohibit modification and deletion)</span></code></pre><p><code>Python</code></p><pre><code class="hljs Python"><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">Module Description: 141-ç¯å½¢é“¾è¡¨</span><span class="hljs-string">Solutionï¼š</span><span class="hljs-string">Date: 2021-03-05 10:38:59</span><span class="hljs-string">Author: Wang P</span><span class="hljs-string">Problem:# ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œåˆ¤æ–­é“¾è¡¨ä¸­æ˜¯å¦æœ‰ç¯ã€‚ </span><span class="hljs-string"># </span><span class="hljs-string">#  å¦‚æœé“¾è¡¨ä¸­æœ‰æŸä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡è¿ç»­è·Ÿè¸ª next æŒ‡é’ˆå†æ¬¡åˆ°è¾¾ï¼Œåˆ™é“¾è¡¨ä¸­å­˜åœ¨ç¯ã€‚ ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œæˆ‘ä»¬ä½¿ç”¨æ•´æ•° pos æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°é“¾è¡¨ä¸­çš„</span><span class="hljs-string"># ä½ç½®ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰ã€‚ å¦‚æœ pos æ˜¯ -1ï¼Œåˆ™åœ¨è¯¥é“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚æ³¨æ„ï¼špos ä¸ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ï¼Œä»…ä»…æ˜¯ä¸ºäº†æ ‡è¯†é“¾è¡¨çš„å®é™…æƒ…å†µã€‚ </span><span class="hljs-string"># </span><span class="hljs-string">#  å¦‚æœé“¾è¡¨ä¸­å­˜åœ¨ç¯ï¼Œåˆ™è¿”å› true ã€‚ å¦åˆ™ï¼Œè¿”å› false ã€‚ </span><span class="hljs-string"># </span><span class="hljs-string">#  è¿›é˜¶ï¼š </span><span class="hljs-string">#  ä½ èƒ½ç”¨ O(1)ï¼ˆå³ï¼Œå¸¸é‡ï¼‰å†…å­˜è§£å†³æ­¤é—®é¢˜å—ï¼Ÿ </span><span class="hljs-string"># </span><span class="hljs-string">#  ç¤ºä¾‹ 1ï¼š </span><span class="hljs-string">#  è¾“å…¥ï¼šhead = [3,2,0,-4], pos = 1</span><span class="hljs-string"># è¾“å‡ºï¼štrue</span><span class="hljs-string"># è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹ã€‚</span><span class="hljs-string">#  </span><span class="hljs-string">#  ç¤ºä¾‹ 2ï¼š </span><span class="hljs-string">#  è¾“å…¥ï¼šhead = [1,2], pos = 0</span><span class="hljs-string"># è¾“å‡ºï¼štrue</span><span class="hljs-string"># è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚</span><span class="hljs-string">#  </span><span class="hljs-string">#  ç¤ºä¾‹ 3ï¼š </span><span class="hljs-string">#  è¾“å…¥ï¼šhead = [1], pos = -1</span><span class="hljs-string"># è¾“å‡ºï¼šfalse</span><span class="hljs-string"># è§£é‡Šï¼šé“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚</span><span class="hljs-string">#  </span><span class="hljs-string">#  æç¤ºï¼š  </span><span class="hljs-string">#  é“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°ç›®èŒƒå›´æ˜¯ [0, 104] </span><span class="hljs-string">#  -105 &lt;= Node.val &lt;= 105 </span><span class="hljs-string">#  pos ä¸º -1 æˆ–è€…é“¾è¡¨ä¸­çš„ä¸€ä¸ª æœ‰æ•ˆç´¢å¼• ã€‚ </span><span class="hljs-string">#  </span><span class="hljs-string">#  Related Topics é“¾è¡¨ åŒæŒ‡é’ˆ </span><span class="hljs-string">#  ğŸ‘ 971 ğŸ‘ 0</span><span class="hljs-string"></span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-comment"># leetcode submit region begin(Prohibit modification and deletion)</span><span class="hljs-comment"># Definition for singly-linked list.</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ListNode</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, x</span>):</span>        self.val = x        self.<span class="hljs-built_in">next</span> = <span class="hljs-literal">None</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">hasCycle</span>(<span class="hljs-params">self, head: ListNode</span>) -&gt; bool:</span>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> head:            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>        p = ListNode(<span class="hljs-number">-1</span>)        p.<span class="hljs-built_in">next</span> = head        p, q = head, head.<span class="hljs-built_in">next</span>        <span class="hljs-keyword">while</span> q <span class="hljs-keyword">and</span> q.<span class="hljs-built_in">next</span>:            p = p.<span class="hljs-built_in">next</span>            q = q.<span class="hljs-built_in">next</span>.<span class="hljs-built_in">next</span>            <span class="hljs-keyword">if</span> p == q:                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>        <span class="hljs-comment"># leetcode submit region end(Prohibit modification and deletion)</span></code></pre><h6 id="142-ç¯å½¢é“¾è¡¨-II"><a href="#142-ç¯å½¢é“¾è¡¨-II" class="headerlink" title="142. ç¯å½¢é“¾è¡¨ II"></a><a href="https://leetcode-cn.com/problems/linked-list-cycle-ii/">142. ç¯å½¢é“¾è¡¨ II</a></h6><p>ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œè¿”å›é“¾è¡¨å¼€å§‹å…¥ç¯çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚ å¦‚æœé“¾è¡¨æ— ç¯ï¼Œåˆ™è¿”å› nullã€‚</p><p>ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œæˆ‘ä»¬ä½¿ç”¨æ•´æ•° pos æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°é“¾è¡¨ä¸­çš„ä½ç½®ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰ã€‚ å¦‚æœ pos æ˜¯ -1ï¼Œåˆ™åœ¨è¯¥é“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚æ³¨æ„ï¼Œpos ä»…ä»…æ˜¯ç”¨äºæ ‡è¯†ç¯çš„æƒ…å†µï¼Œå¹¶ä¸ä¼šä½œä¸ºå‚æ•°ä¼ é€’åˆ°å‡½æ•°ä¸­ã€‚</p><p>è¯´æ˜ï¼šä¸å…è®¸ä¿®æ”¹ç»™å®šçš„é“¾è¡¨ã€‚</p><p>è¿›é˜¶ï¼š</p><p>ä½ æ˜¯å¦å¯ä»¥ä½¿ç”¨ O(1) ç©ºé—´è§£å†³æ­¤é¢˜ï¼Ÿ</p><p><img src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/12/07/circularlinkedlist.png"></p><pre><div class="caption"><span>1ï¼š</span></div><code class="hljs ç¤ºä¾‹">è¾“å…¥ï¼šhead &#x3D; [3,2,0,-4], pos &#x3D; 1è¾“å‡ºï¼šè¿”å›ç´¢å¼•ä¸º 1 çš„é“¾è¡¨èŠ‚ç‚¹è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹ã€‚</code></pre><p><img src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/12/07/circularlinkedlist_test2.png"></p><pre><div class="caption"><span>2ï¼š</span></div><code class="hljs ç¤ºä¾‹">è¾“å…¥ï¼šhead &#x3D; [1,2], pos &#x3D; 0è¾“å‡ºï¼šè¿”å›ç´¢å¼•ä¸º 0 çš„é“¾è¡¨èŠ‚ç‚¹è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚</code></pre><p><img src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/12/07/circularlinkedlist_test3.png"></p><pre><div class="caption"><span>3ï¼š</span></div><code class="hljs ç¤ºä¾‹">è¾“å…¥ï¼šhead &#x3D; [1], pos &#x3D; -1è¾“å‡ºï¼šè¿”å› nullè§£é‡Šï¼šé“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚</code></pre><p><strong>æç¤ºï¼š</strong></p><ul><li>é“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°ç›®èŒƒå›´åœ¨èŒƒå›´ <code>[0, 104]</code> å†…</li><li><code>-105 &lt;= Node.val &lt;= 105</code></li><li><code>pos</code> çš„å€¼ä¸º <code>-1</code> æˆ–è€…é“¾è¡¨ä¸­çš„ä¸€ä¸ªæœ‰æ•ˆç´¢å¼•</li></ul><p>è§£é¢˜æ€è·¯</p><pre><code class="hljs coq"><span class="hljs-number">1.</span>å¿«æ…¢æŒ‡é’ˆï¼Œç›¸é‡åï¼Œhead-&gt;å…¥ç¯çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹è·ç¦»=ç›¸é‡ç‚¹-&gt;å…¥ç¯çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹è·ç¦»<span class="hljs-number">2.</span>å€ŸåŠ©å“ˆå¸Œï¼ˆ<span class="hljs-keyword">Set</span>ï¼‰</code></pre><p><code>Java</code></p><pre><code class="hljs Java"><span class="hljs-comment">/*</span><span class="hljs-comment"> * Author: Wang P</span><span class="hljs-comment"> * Version: 1.0.0</span><span class="hljs-comment"> * Date: 2021-03-04 19:03:31</span><span class="hljs-comment"> * Description: 142-Linked List Cycle II</span><span class="hljs-comment"> **/</span> <span class="hljs-keyword">package</span> com.weitrue.leetcode.editor.cn;<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LinkedListCycleIi</span></span>&#123;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span></span>&#123;        Solution s = <span class="hljs-keyword">new</span> LinkedListCycleIi().<span class="hljs-function">new <span class="hljs-title">Solution</span><span class="hljs-params">()</span></span>;    &#125;        <span class="hljs-comment">//Given a linked list, return the node where the cycle begins. If there is no cy</span>    <span class="hljs-comment">//cle, return null.</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// There is a cycle in a linked list if there is some node in the list that can</span>    <span class="hljs-comment">//be reached again by continuously following the next pointer. Internally, pos is</span>    <span class="hljs-comment">//used to denote the index of the node that tail&#x27;s next pointer is connected to. N</span>    <span class="hljs-comment">//ote that pos is not passed as a parameter.</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Notice that you should not modify the linked list.</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Example 1:</span>    <span class="hljs-comment">//Input: head = [3,2,0,-4], pos = 1</span>    <span class="hljs-comment">//Output: tail connects to node index 1</span>    <span class="hljs-comment">//Explanation: There is a cycle in the linked list, where tail connects to the s</span>    <span class="hljs-comment">//econd node.</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Example 2:</span>    <span class="hljs-comment">//Input: head = [1,2], pos = 0</span>    <span class="hljs-comment">//Output: tail connects to node index 0</span>    <span class="hljs-comment">//Explanation: There is a cycle in the linked list, where tail connects to the f</span>    <span class="hljs-comment">//irst node.</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Example 3:</span>    <span class="hljs-comment">//Input: head = [1], pos = -1</span>    <span class="hljs-comment">//Output: no cycle</span>    <span class="hljs-comment">//Explanation: There is no cycle in the linked list.</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Constraints:</span>    <span class="hljs-comment">// The number of the nodes in the list is in the range [0, 104].</span>    <span class="hljs-comment">// -105 &lt;= Node.val &lt;= 105</span>    <span class="hljs-comment">// pos is -1 or a valid index in the linked-list.</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Follow up: Can you solve it using O(1) (i.e. constant) memory?</span>    <span class="hljs-comment">// Related Topics é“¾è¡¨ åŒæŒ‡é’ˆ</span>    <span class="hljs-comment">// ğŸ‘ 897 ğŸ‘ 0</span>     <span class="hljs-comment">// leetcode submit region begin(Prohibit modification and deletion)</span>     <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ListNode</span> </span>&#123;         <span class="hljs-keyword">int</span> val;         ListNode next;         ListNode(<span class="hljs-keyword">int</span> x) &#123;             val = x;             next = <span class="hljs-keyword">null</span>;         &#125;     &#125;    <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>&#123;        <span class="hljs-function"><span class="hljs-keyword">public</span> ListNode <span class="hljs-title">detectCycle</span><span class="hljs-params">(ListNode head)</span> </span>&#123;            <span class="hljs-keyword">if</span>(head == <span class="hljs-keyword">null</span> || head.next == <span class="hljs-keyword">null</span>)&#123;                <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;            &#125;            ListNode p = head, q = head;            <span class="hljs-keyword">do</span> &#123;                p = p.next;                q = q.next.next;            &#125; <span class="hljs-keyword">while</span> (q != <span class="hljs-keyword">null</span> &amp;&amp; q.next != <span class="hljs-keyword">null</span> &amp;&amp; p != q);            <span class="hljs-keyword">if</span> (p != q) &#123;                <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;            &#125;            q = head;            <span class="hljs-keyword">while</span> (p != q) &#123;                p = p.next;                q = q.next;            &#125;            <span class="hljs-keyword">return</span> q;        &#125;    &#125;    <span class="hljs-comment">//leetcode submit region end(Prohibit modification and deletion)</span>&#125;</code></pre><p><code>Golang</code></p><pre><code class="hljs golang"><span class="hljs-keyword">package</span> leetcode<span class="hljs-comment">/**</span><span class="hljs-comment"> * Author: Wang P</span><span class="hljs-comment"> * Version: 1.0.0</span><span class="hljs-comment"> * Date: 2021-03-05 11:14:26</span><span class="hljs-comment"> * Description:</span><span class="hljs-comment"> **/</span><span class="hljs-comment">//Given a linked list, return the node where the cycle begins. If there is no cy</span><span class="hljs-comment">//cle, return null. </span><span class="hljs-comment">//</span><span class="hljs-comment">// There is a cycle in a linked list if there is some node in the list that can </span><span class="hljs-comment">//be reached again by continuously following the next pointer. Internally, pos is </span><span class="hljs-comment">//used to denote the index of the node that tail&#x27;s next pointer is connected to. N</span><span class="hljs-comment">//ote that pos is not passed as a parameter. </span><span class="hljs-comment">//</span><span class="hljs-comment">// Notice that you should not modify the linked list. </span><span class="hljs-comment">//</span><span class="hljs-comment">// Example 1: </span><span class="hljs-comment">//Input: head = [3,2,0,-4], pos = 1</span><span class="hljs-comment">//Output: tail connects to node index 1</span><span class="hljs-comment">//Explanation: There is a cycle in the linked list, where tail connects to the s</span><span class="hljs-comment">//econd node.</span><span class="hljs-comment">// </span><span class="hljs-comment">// Example 2: </span><span class="hljs-comment">//Input: head = [1,2], pos = 0</span><span class="hljs-comment">//Output: tail connects to node index 0</span><span class="hljs-comment">//Explanation: There is a cycle in the linked list, where tail connects to the f</span><span class="hljs-comment">//irst node.</span><span class="hljs-comment">// </span><span class="hljs-comment">// Example 3: </span><span class="hljs-comment">//Input: head = [1], pos = -1</span><span class="hljs-comment">//Output: no cycle</span><span class="hljs-comment">//Explanation: There is no cycle in the linked list.</span><span class="hljs-comment">// </span><span class="hljs-comment">// Constraints: </span><span class="hljs-comment">// The number of the nodes in the list is in the range [0, 104]. </span><span class="hljs-comment">// -105 &lt;= Node.val &lt;= 105 </span><span class="hljs-comment">// pos is -1 or a valid index in the linked-list. </span><span class="hljs-comment">// Follow up: Can you solve it using O(1) (i.e. constant) memory? </span><span class="hljs-comment">// Related Topics é“¾è¡¨ åŒæŒ‡é’ˆ </span><span class="hljs-comment">// ğŸ‘ 898 ğŸ‘ 0</span><span class="hljs-comment">//leetcode submit region begin(Prohibit modification and deletion)</span><span class="hljs-comment">/**</span><span class="hljs-comment"> * Definition for singly-linked list.</span><span class="hljs-comment"> * type ListNode struct &#123;</span><span class="hljs-comment"> *     Val int</span><span class="hljs-comment"> *     Next *ListNode</span><span class="hljs-comment"> * &#125;</span><span class="hljs-comment"> */</span><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">detectCycle</span><span class="hljs-params">(head *ListNode)</span> *<span class="hljs-title">ListNode</span></span> &#123;<span class="hljs-keyword">if</span> head == <span class="hljs-literal">nil</span> || head.Next == <span class="hljs-literal">nil</span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>&#125;p := head.Nextq := head.Next.Next<span class="hljs-keyword">for</span> q != <span class="hljs-literal">nil</span> &amp;&amp; q.Next != <span class="hljs-literal">nil</span> &amp;&amp; p != q&#123;q = q.Next.Nextp = p.Next&#125;<span class="hljs-keyword">if</span> p != q &#123;<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>&#125;q = head<span class="hljs-keyword">for</span> p != q &#123;p = p.Nextq = q.Next&#125;<span class="hljs-keyword">return</span> q&#125;<span class="hljs-comment">//leetcode submit region end(Prohibit modification and deletion)</span></code></pre><p><code>Python</code></p><pre><code class="hljs Python"><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">Module Description: 142-ç¯å½¢é“¾è¡¨ II</span><span class="hljs-string">Solutionï¼š</span><span class="hljs-string">Date: 2021-03-05 10:47:28</span><span class="hljs-string">Author: Wang P</span><span class="hljs-string">Problem: ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œè¿”å›é“¾è¡¨å¼€å§‹å…¥ç¯çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚ å¦‚æœé“¾è¡¨æ— ç¯ï¼Œåˆ™è¿”å› nullã€‚</span><span class="hljs-string"># </span><span class="hljs-string">#  ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œæˆ‘ä»¬ä½¿ç”¨æ•´æ•° pos æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°é“¾è¡¨ä¸­çš„ä½ç½®ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰ã€‚ å¦‚æœ pos æ˜¯ -1ï¼Œåˆ™åœ¨è¯¥é“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚æ³¨æ„ï¼Œpo</span><span class="hljs-string"># s ä»…ä»…æ˜¯ç”¨äºæ ‡è¯†ç¯çš„æƒ…å†µï¼Œå¹¶ä¸ä¼šä½œä¸ºå‚æ•°ä¼ é€’åˆ°å‡½æ•°ä¸­ã€‚ </span><span class="hljs-string"># </span><span class="hljs-string">#  è¯´æ˜ï¼šä¸å…è®¸ä¿®æ”¹ç»™å®šçš„é“¾è¡¨ã€‚ </span><span class="hljs-string"># </span><span class="hljs-string">#  è¿›é˜¶ï¼š</span><span class="hljs-string">#  ä½ æ˜¯å¦å¯ä»¥ä½¿ç”¨ O(1) ç©ºé—´è§£å†³æ­¤é¢˜ï¼Ÿ </span><span class="hljs-string">#</span><span class="hljs-string">#  ç¤ºä¾‹ 1ï¼š</span><span class="hljs-string"># è¾“å…¥ï¼šhead = [3,2,0,-4], pos = 1</span><span class="hljs-string"># è¾“å‡ºï¼šè¿”å›ç´¢å¼•ä¸º 1 çš„é“¾è¡¨èŠ‚ç‚¹</span><span class="hljs-string"># è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹ã€‚</span><span class="hljs-string">#</span><span class="hljs-string">#  ç¤ºä¾‹ 2ï¼š</span><span class="hljs-string"># è¾“å…¥ï¼šhead = [1,2], pos = 0</span><span class="hljs-string"># è¾“å‡ºï¼šè¿”å›ç´¢å¼•ä¸º 0 çš„é“¾è¡¨èŠ‚ç‚¹</span><span class="hljs-string"># è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚</span><span class="hljs-string">#</span><span class="hljs-string">#  ç¤ºä¾‹ 3ï¼š</span><span class="hljs-string"># è¾“å…¥ï¼šhead = [1], pos = -1</span><span class="hljs-string"># è¾“å‡ºï¼šè¿”å› null</span><span class="hljs-string"># è§£é‡Šï¼šé“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚</span><span class="hljs-string">#</span><span class="hljs-string">#  æç¤ºï¼š</span><span class="hljs-string">#  é“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°ç›®èŒƒå›´åœ¨èŒƒå›´ [0, 104] å†… </span><span class="hljs-string">#  -105 &lt;= Node.val &lt;= 105 </span><span class="hljs-string">#  pos çš„å€¼ä¸º -1 æˆ–è€…é“¾è¡¨ä¸­çš„ä¸€ä¸ªæœ‰æ•ˆç´¢å¼• </span><span class="hljs-string">#  </span><span class="hljs-string">#  Related Topics é“¾è¡¨ åŒæŒ‡é’ˆ </span><span class="hljs-string">#  ğŸ‘ 898 ğŸ‘ 0</span><span class="hljs-string"></span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-comment"># leetcode submit region begin(Prohibit modification and deletion)</span><span class="hljs-comment"># Definition for singly-linked list.</span><span class="hljs-comment">#</span><span class="hljs-comment">#</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ListNode</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, x</span>):</span>        self.val = x        self.<span class="hljs-built_in">next</span> = <span class="hljs-literal">None</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">detectCycle</span>(<span class="hljs-params">self, head: ListNode</span>) -&gt; ListNode:</span>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> head <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> head.<span class="hljs-built_in">next</span>:            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>        p, q = head.<span class="hljs-built_in">next</span>, head.<span class="hljs-built_in">next</span>.<span class="hljs-built_in">next</span>        <span class="hljs-keyword">while</span> q <span class="hljs-keyword">and</span> q.<span class="hljs-built_in">next</span> <span class="hljs-keyword">and</span> p != q:            p = p.<span class="hljs-built_in">next</span>            q = q.<span class="hljs-built_in">next</span>.<span class="hljs-built_in">next</span>        <span class="hljs-keyword">if</span> p != q:            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>        q = head        <span class="hljs-keyword">while</span> p != q:            p = p.<span class="hljs-built_in">next</span>            q = q.<span class="hljs-built_in">next</span>        <span class="hljs-keyword">return</span> q        <span class="hljs-comment"># leetcode submit region end(Prohibit modification and deletion)</span></code></pre><h6 id="202-å¿«ä¹æ•°"><a href="#202-å¿«ä¹æ•°" class="headerlink" title="202. å¿«ä¹æ•°"></a><a href="https://leetcode-cn.com/problems/happy-number/">202. å¿«ä¹æ•°</a></h6><p>ç¼–å†™ä¸€ä¸ªç®—æ³•æ¥åˆ¤æ–­ä¸€ä¸ªæ•° n æ˜¯ä¸æ˜¯å¿«ä¹æ•°ã€‚</p><p>ã€Œå¿«ä¹æ•°ã€å®šä¹‰ä¸ºï¼š</p><p>å¯¹äºä¸€ä¸ªæ­£æ•´æ•°ï¼Œæ¯ä¸€æ¬¡å°†è¯¥æ•°æ›¿æ¢ä¸ºå®ƒæ¯ä¸ªä½ç½®ä¸Šçš„æ•°å­—çš„å¹³æ–¹å’Œã€‚<br>ç„¶åé‡å¤è¿™ä¸ªè¿‡ç¨‹ç›´åˆ°è¿™ä¸ªæ•°å˜ä¸º 1ï¼Œä¹Ÿå¯èƒ½æ˜¯ æ— é™å¾ªç¯ ä½†å§‹ç»ˆå˜ä¸åˆ° 1ã€‚<br>å¦‚æœ å¯ä»¥å˜ä¸º  1ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°å°±æ˜¯å¿«ä¹æ•°ã€‚<br>å¦‚æœ n æ˜¯å¿«ä¹æ•°å°±è¿”å› true ï¼›ä¸æ˜¯ï¼Œåˆ™è¿”å› false ã€‚</p><p>è§£é¢˜æ€è·¯</p><pre><code class="hljs angelscript"><span class="hljs-number">1.</span>é“¾è¡¨æ˜¯å¦æœ‰ç¯é—®é¢˜</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><pre><code class="hljs angelscript">è¾“å…¥ï¼š<span class="hljs-number">19</span>è¾“å‡ºï¼š<span class="hljs-literal">true</span>è§£é‡Šï¼š<span class="hljs-number">12</span> + <span class="hljs-number">92</span> = <span class="hljs-number">82</span><span class="hljs-number">82</span> + <span class="hljs-number">22</span> = <span class="hljs-number">68</span><span class="hljs-number">62</span> + <span class="hljs-number">82</span> = <span class="hljs-number">100</span><span class="hljs-number">12</span> + <span class="hljs-number">02</span> + <span class="hljs-number">02</span> = <span class="hljs-number">1</span></code></pre><p>ç¤ºä¾‹ 2ï¼š</p><pre><code class="hljs angelscript">è¾“å…¥ï¼šn = <span class="hljs-number">2</span>è¾“å‡ºï¼š<span class="hljs-literal">false</span>æç¤ºï¼š<span class="hljs-number">1</span> &lt;= n &lt;= <span class="hljs-number">231</span> - <span class="hljs-number">1</span></code></pre><p><code>Java</code></p><pre><code class="hljs java"><span class="hljs-comment">/*</span><span class="hljs-comment"> * Author: Wang P</span><span class="hljs-comment"> * Version: 1.0.0</span><span class="hljs-comment"> * Date: 2021-03-04 17:56:08</span><span class="hljs-comment"> * Description:</span><span class="hljs-comment"> **/</span><span class="hljs-keyword">package</span> com.weitrue.leetcode.editor.cn;<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HappyNumber</span></span>&#123;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span></span>&#123;        Solution s = <span class="hljs-keyword">new</span> HappyNumber().<span class="hljs-function">new <span class="hljs-title">Solution</span><span class="hljs-params">()</span></span>;        <span class="hljs-keyword">int</span> sum = <span class="hljs-number">0</span>;        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;=<span class="hljs-number">100000</span>; i++) &#123;            <span class="hljs-keyword">if</span> (s.isHappy(i)) &#123;                sum++;            &#125;        &#125;        System.out.println(sum);    &#125;    <span class="hljs-comment">//Write an algorithm to determine if a number n is happy.</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// A happy number is a number defined by the following process:</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Starting with any positive integer, replace the number by the sum of the squares of its digits.</span>    <span class="hljs-comment">// Repeat the process until the number equals 1 (where it will stay), or it loops endlessly in a cycle which does not include 1.</span>    <span class="hljs-comment">// Those numbers for which this process ends in 1 are happy.</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Return true if n is a happy number, and false if not.</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Example 1:</span>    <span class="hljs-comment">//Input: n = 19</span>    <span class="hljs-comment">//Output: true</span>    <span class="hljs-comment">//Explanation:</span>    <span class="hljs-comment">//12 + 92 = 82</span>    <span class="hljs-comment">//82 + 22 = 68</span>    <span class="hljs-comment">//62 + 82 = 100</span>    <span class="hljs-comment">//12 + 02 + 02 = 1</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Example 2:</span>    <span class="hljs-comment">//Input: n = 2</span>    <span class="hljs-comment">//Output: false</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Constraints:</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// 1 &lt;= n &lt;= 231 - 1</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Related Topics å“ˆå¸Œè¡¨ æ•°å­¦</span>    <span class="hljs-comment">// ğŸ‘ 542 ğŸ‘ 0</span>    <span class="hljs-comment">//leetcode submit region begin(Prohibit modification and deletion)</span>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>&#123;            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getNext</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n)</span> </span>&#123;                <span class="hljs-keyword">int</span> x = <span class="hljs-number">0</span>;                <span class="hljs-keyword">while</span>(n &gt; <span class="hljs-number">0</span>) &#123;                    x += (n % <span class="hljs-number">10</span>) * (n % <span class="hljs-number">10</span>);                    n = n / <span class="hljs-number">10</span>;                &#125;                <span class="hljs-keyword">return</span> x;            &#125;            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isHappy</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n)</span> </span>&#123;                <span class="hljs-keyword">int</span> p = n, q = n;                <span class="hljs-keyword">do</span>&#123;                    p = getNext(p);                    q = getNext(getNext(q));                &#125; <span class="hljs-keyword">while</span> (p != q &amp;&amp; q!= <span class="hljs-number">1</span>);                <span class="hljs-keyword">return</span> q == <span class="hljs-number">1</span>;            &#125;    &#125;    <span class="hljs-comment">//leetcode submit region end(Prohibit modification and deletion)</span>&#125;</code></pre><p><code>Golang</code></p><pre><code class="hljs golang"><span class="hljs-keyword">package</span> leetcode<span class="hljs-comment">/**</span><span class="hljs-comment"> * Author: Wang P</span><span class="hljs-comment"> * Version: 1.0.0</span><span class="hljs-comment"> * Date: 2021-03-05 12:56:41</span><span class="hljs-comment"> * Description: //Write an algorithm to determine if a number n is happy.</span><span class="hljs-comment">//</span><span class="hljs-comment">// A happy number is a number defined by the following process:</span><span class="hljs-comment">//</span><span class="hljs-comment">// Starting with any positive integer, replace the number by the sum of the squa</span><span class="hljs-comment">//res of its digits.</span><span class="hljs-comment">// Repeat the process until the number equals 1 (where it will stay), or it loop</span><span class="hljs-comment">//s endlessly in a cycle which does not include 1.</span><span class="hljs-comment">// Those numbers for which this process ends in 1 are happy.</span><span class="hljs-comment">//</span><span class="hljs-comment">// Return true if n is a happy number, and false if not.</span><span class="hljs-comment">//</span><span class="hljs-comment">// Example 1:</span><span class="hljs-comment">//Input: n = 19</span><span class="hljs-comment">//Output: true</span><span class="hljs-comment">//Explanation:</span><span class="hljs-comment">//12 + 92 = 82</span><span class="hljs-comment">//82 + 22 = 68</span><span class="hljs-comment">//62 + 82 = 100</span><span class="hljs-comment">//12 + 02 + 02 = 1</span><span class="hljs-comment">//</span><span class="hljs-comment">// Example 2:</span><span class="hljs-comment">//Input: n = 2</span><span class="hljs-comment">//Output: false</span><span class="hljs-comment">//</span><span class="hljs-comment">// Constraints:</span><span class="hljs-comment">// 1 &lt;= n &lt;= 231 - 1</span><span class="hljs-comment">//</span><span class="hljs-comment">// Related Topics å“ˆå¸Œè¡¨ æ•°å­¦</span><span class="hljs-comment">// ğŸ‘ 547 ğŸ‘ 0</span><span class="hljs-comment"> **/</span><span class="hljs-comment">//leetcode submit region begin(Prohibit modification and deletion)</span><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">IsHappy</span><span class="hljs-params">(n <span class="hljs-keyword">int</span>)</span> <span class="hljs-title">bool</span></span> &#123;p, q := getNext(n), getNext(getNext(n))<span class="hljs-keyword">for</span> p != q &amp;&amp; q != <span class="hljs-number">1</span> &#123;p = getNext(p)q = getNext(getNext(q))&#125;<span class="hljs-keyword">return</span> q == <span class="hljs-number">1</span>&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">getNext</span><span class="hljs-params">(n <span class="hljs-keyword">int</span>)</span> <span class="hljs-title">int</span></span> &#123;x := <span class="hljs-number">0</span><span class="hljs-keyword">for</span> n &gt; <span class="hljs-number">0</span> &#123;x += (n % <span class="hljs-number">10</span>) * (n % <span class="hljs-number">10</span>)n = n / <span class="hljs-number">10</span>&#125;<span class="hljs-keyword">return</span> x&#125;<span class="hljs-comment">//leetcode submit region end(Prohibit modification and deletion)</span></code></pre><p><code>Python</code></p><pre><code class="hljs Python"><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">Module Description: 202-å¿«ä¹æ•°</span><span class="hljs-string">Solutionï¼š</span><span class="hljs-string">Date: 2021-03-05 12:02:33</span><span class="hljs-string">Author: Wang P</span><span class="hljs-string">Problem:# ç¼–å†™ä¸€ä¸ªç®—æ³•æ¥åˆ¤æ–­ä¸€ä¸ªæ•° n æ˜¯ä¸æ˜¯å¿«ä¹æ•°ã€‚ </span><span class="hljs-string"># </span><span class="hljs-string">#  ã€Œå¿«ä¹æ•°ã€å®šä¹‰ä¸ºï¼š </span><span class="hljs-string">#  å¯¹äºä¸€ä¸ªæ­£æ•´æ•°ï¼Œæ¯ä¸€æ¬¡å°†è¯¥æ•°æ›¿æ¢ä¸ºå®ƒæ¯ä¸ªä½ç½®ä¸Šçš„æ•°å­—çš„å¹³æ–¹å’Œã€‚ </span><span class="hljs-string">#  ç„¶åé‡å¤è¿™ä¸ªè¿‡ç¨‹ç›´åˆ°è¿™ä¸ªæ•°å˜ä¸º 1ï¼Œä¹Ÿå¯èƒ½æ˜¯ æ— é™å¾ªç¯ ä½†å§‹ç»ˆå˜ä¸åˆ° 1ã€‚ </span><span class="hljs-string">#  å¦‚æœ å¯ä»¥å˜ä¸º 1ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°å°±æ˜¯å¿«ä¹æ•°ã€‚ </span><span class="hljs-string">#  å¦‚æœ n æ˜¯å¿«ä¹æ•°å°±è¿”å› true ï¼›ä¸æ˜¯ï¼Œåˆ™è¿”å› false ã€‚ </span><span class="hljs-string"># </span><span class="hljs-string">#  ç¤ºä¾‹ 1ï¼š </span><span class="hljs-string"># è¾“å…¥ï¼š19</span><span class="hljs-string"># è¾“å‡ºï¼štrue</span><span class="hljs-string"># è§£é‡Šï¼š</span><span class="hljs-string"># 12 + 92 = 82</span><span class="hljs-string"># 82 + 22 = 68</span><span class="hljs-string"># 62 + 82 = 100</span><span class="hljs-string"># 12 + 02 + 02 = 1</span><span class="hljs-string">#  </span><span class="hljs-string">#  ç¤ºä¾‹ 2ï¼š </span><span class="hljs-string"># è¾“å…¥ï¼šn = 2</span><span class="hljs-string"># è¾“å‡ºï¼šfalse</span><span class="hljs-string">#  </span><span class="hljs-string">#  æç¤ºï¼š </span><span class="hljs-string">#  1 &lt;= n &lt;= 231 - 1 </span><span class="hljs-string">#  </span><span class="hljs-string">#  Related Topics å“ˆå¸Œè¡¨ æ•°å­¦ </span><span class="hljs-string">#  ğŸ‘ 548 ğŸ‘ 0</span><span class="hljs-string"></span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-comment"># leetcode submit region begin(Prohibit modification and deletion)</span><span class="hljs-keyword">import</span> math<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">isHappy</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; bool:</span>        p, q = n, self.get_next(n)        <span class="hljs-keyword">while</span> p != q <span class="hljs-keyword">and</span> q != <span class="hljs-number">1</span>:            p = self.get_next(p)            q = self.get_next(self.get_next(q))        <span class="hljs-keyword">return</span> q == <span class="hljs-number">1</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_next</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; int:</span>        x = <span class="hljs-number">0</span>        <span class="hljs-keyword">while</span> n:            n, tmp = <span class="hljs-built_in">divmod</span>(n, <span class="hljs-number">10</span>)            x += (tmp * tmp)        <span class="hljs-keyword">return</span> x<span class="hljs-comment"># leetcode submit region end(Prohibit modification and deletion)</span></code></pre><h5 id="é“¾è¡¨åè½¬"><a href="#é“¾è¡¨åè½¬" class="headerlink" title="é“¾è¡¨åè½¬"></a>é“¾è¡¨åè½¬</h5><h6 id="206-åè½¬é“¾è¡¨"><a href="#206-åè½¬é“¾è¡¨" class="headerlink" title="206. åè½¬é“¾è¡¨"></a><a href="https://leetcode-cn.com/problems/reverse-linked-list/">206. åè½¬é“¾è¡¨</a></h6><p>åè½¬ä¸€ä¸ªå•é“¾è¡¨ã€‚</p><p>ç¤ºä¾‹:</p><pre><code class="hljs angelscript">è¾“å…¥: <span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">3</span>-&gt;<span class="hljs-number">4</span>-&gt;<span class="hljs-number">5</span>-&gt;NULLè¾“å‡º: <span class="hljs-number">5</span>-&gt;<span class="hljs-number">4</span>-&gt;<span class="hljs-number">3</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">1</span>-&gt;NULL</code></pre><p>è¿›é˜¶:<br>ä½ å¯ä»¥è¿­ä»£æˆ–é€’å½’åœ°åè½¬é“¾è¡¨ã€‚ä½ èƒ½å¦ç”¨ä¸¤ç§æ–¹æ³•è§£å†³è¿™é“é¢˜ï¼Ÿ</p><p>è§£é¢˜æ€è·¯</p><pre><code class="hljs plain"></code></pre><p><code>Java</code></p><pre><code class="hljs Java"><span class="hljs-comment">/*</span><span class="hljs-comment"> * Author: Wang P</span><span class="hljs-comment"> * Version: 1.0.0</span><span class="hljs-comment"> * Date: 2021-03-11 17:30:32</span><span class="hljs-comment"> * Description: 206-Reverse Linked List</span><span class="hljs-comment"> **/</span> <span class="hljs-keyword">package</span> com.weitrue.leetcode.editor.cn;<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ReverseLinkedList</span></span>&#123;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span></span>&#123;        Solution s = <span class="hljs-keyword">new</span> ReverseLinkedList().<span class="hljs-function">new <span class="hljs-title">Solution</span><span class="hljs-params">()</span></span>;    &#125;        <span class="hljs-comment">//Given the head of a singly linked list, reverse the list, and return the reversed list.</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Example 1:</span>    <span class="hljs-comment">//Input: head = [1,2,3,4,5]</span>    <span class="hljs-comment">//Output: [5,4,3,2,1]</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Example 2:</span>    <span class="hljs-comment">//Input: head = [1,2]</span>    <span class="hljs-comment">//Output: [2,1]</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Example 3:</span>    <span class="hljs-comment">//Input: head = []</span>    <span class="hljs-comment">//Output: []</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Constraints:</span>    <span class="hljs-comment">// The number of nodes in the list is the range [0, 5000].</span>    <span class="hljs-comment">// -5000 &lt;= Node.val &lt;= 5000</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Follow up: A linked list can be reversed either iteratively or recursively. C</span>    <span class="hljs-comment">//ould you implement both?</span>    <span class="hljs-comment">// Related Topics é“¾è¡¨</span>    <span class="hljs-comment">// ğŸ‘ 1568 ğŸ‘ 0</span>     <span class="hljs-comment">//leetcode submit region begin(Prohibit modification and deletion)</span>    <span class="hljs-comment">/**</span><span class="hljs-comment">     * Definition for singly-linked list.</span><span class="hljs-comment">     */</span>    <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ListNode</span> </span>&#123;        <span class="hljs-keyword">int</span> val;        ListNode next;        ListNode() &#123;&#125;        ListNode(<span class="hljs-keyword">int</span> val) &#123; <span class="hljs-keyword">this</span>.val = val; &#125;        ListNode(<span class="hljs-keyword">int</span> val, ListNode next) &#123; <span class="hljs-keyword">this</span>.val = val; <span class="hljs-keyword">this</span>.next = next; &#125;    &#125;    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>&#123;        <span class="hljs-function"><span class="hljs-keyword">public</span> ListNode <span class="hljs-title">reverseList</span><span class="hljs-params">(ListNode head)</span> </span>&#123;            ListNode pre = <span class="hljs-keyword">null</span>, cur = head, next = <span class="hljs-keyword">null</span>;            <span class="hljs-keyword">while</span> (cur != <span class="hljs-keyword">null</span>) &#123;                next = cur.next;                cur.next = pre;                pre = cur;                cur = next;            &#125;            <span class="hljs-keyword">return</span> pre;        &#125;    &#125;<span class="hljs-comment">//leetcode submit region end(Prohibit modification and deletion)</span>&#125;</code></pre><p><code>Golang</code></p><pre><code class="hljs Golang"><span class="hljs-keyword">package</span> leetcode<span class="hljs-comment">/**</span><span class="hljs-comment"> * Author: Wang P</span><span class="hljs-comment"> * Version: 1.0.0</span><span class="hljs-comment"> * Date: 2021-03-11 17:46:07</span><span class="hljs-comment"> * Description: //Given the head of a singly linked list, reverse the list, and return the reversed list.</span><span class="hljs-comment">// Example 1:</span><span class="hljs-comment">//Input: head = [1,2,3,4,5]</span><span class="hljs-comment">//Output: [5,4,3,2,1]</span><span class="hljs-comment">//</span><span class="hljs-comment">// Example 2:</span><span class="hljs-comment">//Input: head = [1,2]</span><span class="hljs-comment">//Output: [2,1]</span><span class="hljs-comment">//</span><span class="hljs-comment">// Example 3:</span><span class="hljs-comment">//Input: head = []</span><span class="hljs-comment">//Output: []</span><span class="hljs-comment">//</span><span class="hljs-comment">// Constraints:</span><span class="hljs-comment">// The number of nodes in the list is the range [0, 5000].</span><span class="hljs-comment">// -5000 &lt;= Node.val &lt;= 5000</span><span class="hljs-comment">//</span><span class="hljs-comment">// Follow up: A linked list can be reversed either iteratively or recursively. C</span><span class="hljs-comment">//ould you implement both?</span><span class="hljs-comment">// Related Topics é“¾è¡¨</span><span class="hljs-comment">// ğŸ‘ 1568 ğŸ‘ 0</span><span class="hljs-comment"> **/</span><span class="hljs-comment">//leetcode submit region begin(Prohibit modification and deletion)</span><span class="hljs-comment">/**</span><span class="hljs-comment"> * Definition for singly-linked list.</span><span class="hljs-comment"> */</span><span class="hljs-keyword">type</span> ListNode <span class="hljs-keyword">struct</span> &#123;Val <span class="hljs-keyword">int</span>Next *ListNode&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">reverseList</span><span class="hljs-params">(head *ListNode)</span> *<span class="hljs-title">ListNode</span></span> &#123;<span class="hljs-keyword">var</span> pre, cur, next *ListNode = <span class="hljs-literal">nil</span>, head, <span class="hljs-literal">nil</span><span class="hljs-keyword">for</span> cur != <span class="hljs-literal">nil</span> &#123;next = cur.Nextcur.Next = prepre = curcur = next&#125;<span class="hljs-keyword">return</span> pre&#125;<span class="hljs-comment">//leetcode submit region end(Prohibit modification and deletion)</span></code></pre><p><code>Python</code></p><pre><code class="hljs Python"><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">Module Description: 206-åè½¬é“¾è¡¨</span><span class="hljs-string">Solutionï¼š</span><span class="hljs-string">Date: 2021-03-11 17:45:14</span><span class="hljs-string">Author: Wang P</span><span class="hljs-string">Problem:# åè½¬ä¸€ä¸ªå•é“¾è¡¨ã€‚ </span><span class="hljs-string">        #</span><span class="hljs-string">        #  ç¤ºä¾‹:</span><span class="hljs-string">        #</span><span class="hljs-string">        #  è¾“å…¥: 1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;NULL</span><span class="hljs-string">        # è¾“å‡º: 5-&gt;4-&gt;3-&gt;2-&gt;1-&gt;NULL</span><span class="hljs-string">        #</span><span class="hljs-string">        #  è¿›é˜¶:</span><span class="hljs-string">        # ä½ å¯ä»¥è¿­ä»£æˆ–é€’å½’åœ°åè½¬é“¾è¡¨ã€‚ä½ èƒ½å¦ç”¨ä¸¤ç§æ–¹æ³•è§£å†³è¿™é“é¢˜ï¼Ÿ</span><span class="hljs-string">        #  Related Topics é“¾è¡¨</span><span class="hljs-string">        #  ğŸ‘ 1568 ğŸ‘ 0</span><span class="hljs-string"></span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-comment"># leetcode submit region begin(Prohibit modification and deletion)</span><span class="hljs-comment"># Definition for singly-linked list.</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ListNode</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, val=<span class="hljs-number">0</span>, <span class="hljs-built_in">next</span>=<span class="hljs-literal">None</span></span>):</span>        self.val = val        self.<span class="hljs-built_in">next</span> = <span class="hljs-built_in">next</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reverseList</span>(<span class="hljs-params">self, head: ListNode</span>) -&gt; ListNode:</span>        pre, cur, nex = <span class="hljs-literal">None</span>, head, <span class="hljs-literal">None</span>        <span class="hljs-keyword">while</span> cur:            nex = cur.<span class="hljs-built_in">next</span>            cur.<span class="hljs-built_in">next</span> = pre            pre = cur            cur = nex        <span class="hljs-keyword">return</span> pre<span class="hljs-comment"># leetcode submit region end(Prohibit modification and deletion)</span></code></pre><h6 id="92-åè½¬é“¾è¡¨-II"><a href="#92-åè½¬é“¾è¡¨-II" class="headerlink" title="92. åè½¬é“¾è¡¨ II"></a><a href="https://leetcode-cn.com/problems/reverse-linked-list-ii/">92. åè½¬é“¾è¡¨ II</a></h6><p>åè½¬ä»ä½ç½® m åˆ° n çš„é“¾è¡¨ã€‚è¯·ä½¿ç”¨ä¸€è¶Ÿæ‰«æå®Œæˆåè½¬ã€‚</p><p>è¯´æ˜:<br>1 â‰¤ m â‰¤ n â‰¤ é“¾è¡¨é•¿åº¦ã€‚</p><p>ç¤ºä¾‹:</p><pre><code class="hljs angelscript">è¾“å…¥: <span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">3</span>-&gt;<span class="hljs-number">4</span>-&gt;<span class="hljs-number">5</span>-&gt;NULL, m = <span class="hljs-number">2</span>, n = <span class="hljs-number">4</span>è¾“å‡º: <span class="hljs-number">1</span>-&gt;<span class="hljs-number">4</span>-&gt;<span class="hljs-number">3</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">5</span>-&gt;NULL</code></pre><p>è§£é¢˜æ€è·¯</p><pre><code class="hljs plain"></code></pre><p><code>Java</code></p><pre><code class="hljs Java"></code></pre><p><code>Golang</code></p><pre><code class="hljs Golang"></code></pre><p><code>Python</code></p><pre><code class="hljs Python"></code></pre><h6 id="25-K-ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨"><a href="#25-K-ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨" class="headerlink" title="25. K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨"></a><a href="https://leetcode-cn.com/problems/reverse-nodes-in-k-group/">25. K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨</a></h6><p>ç»™ä½ ä¸€ä¸ªé“¾è¡¨ï¼Œæ¯ k ä¸ªèŠ‚ç‚¹ä¸€ç»„è¿›è¡Œç¿»è½¬ï¼Œè¯·ä½ è¿”å›ç¿»è½¬åçš„é“¾è¡¨ã€‚</p><p>k æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œå®ƒçš„å€¼å°äºæˆ–ç­‰äºé“¾è¡¨çš„é•¿åº¦ã€‚</p><p>å¦‚æœèŠ‚ç‚¹æ€»æ•°ä¸æ˜¯ k çš„æ•´æ•°å€ï¼Œé‚£ä¹ˆè¯·å°†æœ€åå‰©ä½™çš„èŠ‚ç‚¹ä¿æŒåŸæœ‰é¡ºåºã€‚</p><p>è¿›é˜¶ï¼š</p><p>ä½ å¯ä»¥è®¾è®¡ä¸€ä¸ªåªä½¿ç”¨å¸¸æ•°é¢å¤–ç©ºé—´çš„ç®—æ³•æ¥è§£å†³æ­¤é—®é¢˜å—ï¼Ÿ<br>ä½ ä¸èƒ½åªæ˜¯å•çº¯çš„æ”¹å˜èŠ‚ç‚¹å†…éƒ¨çš„å€¼ï¼Œè€Œæ˜¯éœ€è¦å®é™…è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ã€‚</p><p><strong>ç¤ºä¾‹ 1</strong>ï¼š</p><p><img src="https://assets.leetcode.com/uploads/2020/10/03/reverse_ex1.jpg"></p><pre><code class="hljs angelscript">è¾“å…¥ï¼šhead = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>], k = <span class="hljs-number">2</span>è¾“å‡ºï¼š[<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-number">3</span>,<span class="hljs-number">5</span>]</code></pre><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><p><img src="https://assets.leetcode.com/uploads/2020/10/03/reverse_ex2.jpg"></p><pre><code class="hljs angelscript">è¾“å…¥ï¼šhead = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>], k = <span class="hljs-number">3</span>è¾“å‡ºï¼š[<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]</code></pre><p><strong>ç¤ºä¾‹ 3ï¼š</strong></p><pre><code class="hljs angelscript">è¾“å…¥ï¼šhead = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>], k = <span class="hljs-number">1</span>è¾“å‡ºï¼š[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]</code></pre><p><strong>ç¤ºä¾‹ 4ï¼š</strong></p><pre><code class="hljs angelscript">è¾“å…¥ï¼šhead = [<span class="hljs-number">1</span>], k = <span class="hljs-number">1</span>è¾“å‡ºï¼š[<span class="hljs-number">1</span>]</code></pre><p><strong>æç¤ºï¼š</strong></p><ul><li>åˆ—è¡¨ä¸­èŠ‚ç‚¹çš„æ•°é‡åœ¨èŒƒå›´ <code>sz</code> å†…</li><li><code>1 &lt;= sz &lt;= 5000</code></li><li><code>0 &lt;= Node.val &lt;= 1000</code></li><li><code>1 &lt;= k &lt;= sz</code></li></ul><p>è§£é¢˜æ€è·¯</p><pre><code class="hljs plain"></code></pre><p><code>Java</code></p><pre><code class="hljs Java"></code></pre><p><code>Golang</code></p><pre><code class="hljs Golang"></code></pre><p><code>Python</code></p><pre><code class="hljs Python"></code></pre><h6 id="61-æ—‹è½¬é“¾è¡¨"><a href="#61-æ—‹è½¬é“¾è¡¨" class="headerlink" title="61. æ—‹è½¬é“¾è¡¨"></a><a href="https://leetcode-cn.com/problems/rotate-list/">61. æ—‹è½¬é“¾è¡¨</a></h6><p>ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œæ—‹è½¬é“¾è¡¨ï¼Œå°†é“¾è¡¨æ¯ä¸ªèŠ‚ç‚¹å‘å³ç§»åŠ¨ <em>k</em> ä¸ªä½ç½®ï¼Œå…¶ä¸­ <em>k</em> æ˜¯éè´Ÿæ•°ã€‚</p><p><strong>ç¤ºä¾‹ 1:</strong></p><pre><code class="hljs angelscript">è¾“å…¥: <span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">3</span>-&gt;<span class="hljs-number">4</span>-&gt;<span class="hljs-number">5</span>-&gt;NULL, k = <span class="hljs-number">2</span>è¾“å‡º: <span class="hljs-number">4</span>-&gt;<span class="hljs-number">5</span>-&gt;<span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">3</span>-&gt;NULLè§£é‡Š:å‘å³æ—‹è½¬ <span class="hljs-number">1</span> æ­¥: <span class="hljs-number">5</span>-&gt;<span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">3</span>-&gt;<span class="hljs-number">4</span>-&gt;NULLå‘å³æ—‹è½¬ <span class="hljs-number">2</span> æ­¥: <span class="hljs-number">4</span>-&gt;<span class="hljs-number">5</span>-&gt;<span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">3</span>-&gt;NULL</code></pre><p><strong>ç¤ºä¾‹ 2:</strong></p><pre><code class="hljs angelscript">è¾“å…¥: <span class="hljs-number">0</span>-&gt;<span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;NULL, k = <span class="hljs-number">4</span>è¾“å‡º: <span class="hljs-number">2</span>-&gt;<span class="hljs-number">0</span>-&gt;<span class="hljs-number">1</span>-&gt;NULLè§£é‡Š:å‘å³æ—‹è½¬ <span class="hljs-number">1</span> æ­¥: <span class="hljs-number">2</span>-&gt;<span class="hljs-number">0</span>-&gt;<span class="hljs-number">1</span>-&gt;NULLå‘å³æ—‹è½¬ <span class="hljs-number">2</span> æ­¥: <span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">0</span>-&gt;NULLå‘å³æ—‹è½¬ <span class="hljs-number">3</span> æ­¥:Â <span class="hljs-number">0</span>-&gt;<span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;NULLå‘å³æ—‹è½¬ <span class="hljs-number">4</span> æ­¥:Â <span class="hljs-number">2</span>-&gt;<span class="hljs-number">0</span>-&gt;<span class="hljs-number">1</span>-&gt;NULL</code></pre><p>è§£é¢˜æ€è·¯</p><pre><code class="hljs plain"></code></pre><p><code>Java</code></p><pre><code class="hljs Java"></code></pre><p><code>Golang</code></p><pre><code class="hljs Golang"></code></pre><p><code>Python</code></p><pre><code class="hljs Python"></code></pre><h6 id="24-ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹"><a href="#24-ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹" class="headerlink" title="24. ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹"></a><a href="https://leetcode-cn.com/problems/swap-nodes-in-pairs/">24. ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹</a></h6><p>ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œä¸¤ä¸¤äº¤æ¢å…¶ä¸­ç›¸é‚»çš„èŠ‚ç‚¹ï¼Œå¹¶è¿”å›äº¤æ¢åçš„é“¾è¡¨ã€‚</p><p><strong>ä½ ä¸èƒ½åªæ˜¯å•çº¯çš„æ”¹å˜èŠ‚ç‚¹å†…éƒ¨çš„å€¼</strong>ï¼Œè€Œæ˜¯éœ€è¦å®é™…çš„è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><p><img src="https://assets.leetcode.com/uploads/2020/10/03/swap_ex1.jpg"></p><pre><code class="hljs angelscript">è¾“å…¥ï¼šhead = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]è¾“å‡ºï¼š[<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-number">3</span>]</code></pre><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><pre><code class="hljs inform7">è¾“å…¥ï¼šhead = <span class="hljs-comment">[]</span>è¾“å‡ºï¼š<span class="hljs-comment">[]</span></code></pre><p><strong>ç¤ºä¾‹ 3ï¼š</strong></p><pre><code class="hljs angelscript">è¾“å…¥ï¼šhead = [<span class="hljs-number">1</span>]è¾“å‡ºï¼š[<span class="hljs-number">1</span>]</code></pre><p><strong>æç¤ºï¼š</strong></p><ul><li>é“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°ç›®åœ¨èŒƒå›´ <code>[0, 100]</code> å†…</li><li><code>0 &lt;= Node.val &lt;= 100</code></li></ul><p><strong>è¿›é˜¶ï¼š</strong>ä½ èƒ½åœ¨ä¸ä¿®æ”¹é“¾è¡¨èŠ‚ç‚¹å€¼çš„æƒ…å†µä¸‹è§£å†³è¿™ä¸ªé—®é¢˜å—?ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œä»…ä¿®æ”¹èŠ‚ç‚¹æœ¬èº«ã€‚ï¼‰</p><p>è§£é¢˜æ€è·¯</p><pre><code class="hljs plain"></code></pre><p><code>Java</code></p><pre><code class="hljs Java"></code></pre><p><code>Golang</code></p><pre><code class="hljs Golang"></code></pre><p><code>Python</code></p><pre><code class="hljs Python"></code></pre><h5 id="é“¾è¡¨èŠ‚ç‚¹åˆ é™¤"><a href="#é“¾è¡¨èŠ‚ç‚¹åˆ é™¤" class="headerlink" title="é“¾è¡¨èŠ‚ç‚¹åˆ é™¤"></a>é“¾è¡¨èŠ‚ç‚¹åˆ é™¤</h5><h6 id="19-åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬-N-ä¸ªç»“ç‚¹"><a href="#19-åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬-N-ä¸ªç»“ç‚¹" class="headerlink" title="19. åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹"></a><a href="https://leetcode-cn.com/problems/remove-nth-node-from-end-of-list/">19. åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹</a></h6><p>ç»™ä½ ä¸€ä¸ªé“¾è¡¨ï¼Œåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ n ä¸ªç»“ç‚¹ï¼Œå¹¶ä¸”è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚</p><p>è¿›é˜¶ï¼šä½ èƒ½å°è¯•ä½¿ç”¨ä¸€è¶Ÿæ‰«æå®ç°å—ï¼Ÿ</p><p>ç¤ºä¾‹ 1ï¼š</p><pre><code class="hljs angelscript">è¾“å…¥ï¼šhead = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>], n = <span class="hljs-number">2</span>è¾“å‡ºï¼š[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">5</span>]</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><pre><code class="hljs angelscript">è¾“å…¥ï¼šhead = [<span class="hljs-number">1</span>], n = <span class="hljs-number">1</span>è¾“å‡ºï¼š[]</code></pre><p>ç¤ºä¾‹ 3ï¼š</p><pre><code class="hljs angelscript">è¾“å…¥ï¼šhead = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>], n = <span class="hljs-number">1</span>è¾“å‡ºï¼š[<span class="hljs-number">1</span>]</code></pre><p>æç¤ºï¼š</p><pre><code class="hljs angelscript">é“¾è¡¨ä¸­ç»“ç‚¹çš„æ•°ç›®ä¸º sz<span class="hljs-number">1</span> &lt;= sz &lt;= <span class="hljs-number">30</span><span class="hljs-number">0</span> &lt;= Node.val &lt;= <span class="hljs-number">100</span><span class="hljs-number">1</span> &lt;= n &lt;= sz</code></pre><p>è§£é¢˜æ€è·¯</p><pre><code class="hljs plain"></code></pre><p><code>Java</code></p><pre><code class="hljs Java"><span class="hljs-comment">/*</span><span class="hljs-comment"> * Author: Wang P</span><span class="hljs-comment"> * Version: 1.0.0</span><span class="hljs-comment"> * Date: 2021-03-05 12:54:46</span><span class="hljs-comment"> * Description: 19-Remove Nth Node From End of List</span><span class="hljs-comment"> **/</span> <span class="hljs-keyword">package</span> com.weitrue.leetcode.editor.cn;<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RemoveNthNodeFromEndOfList</span></span>&#123;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span></span>&#123;        Solution s = <span class="hljs-keyword">new</span> RemoveNthNodeFromEndOfList().<span class="hljs-function">new <span class="hljs-title">Solution</span><span class="hljs-params">()</span></span>;    &#125;        <span class="hljs-comment">//Given the head of a linked list, remove the nth node from the end of the list </span>    <span class="hljs-comment">//and return its head.</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Follow up: Could you do this in one pass?</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Example 1:</span>    <span class="hljs-comment">//Input: head = [1,2,3,4,5], n = 2</span>    <span class="hljs-comment">//Output: [1,2,3,5]</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Example 2:</span>    <span class="hljs-comment">//Input: head = [1], n = 1</span>    <span class="hljs-comment">//Output: []</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Example 3:</span>    <span class="hljs-comment">//Input: head = [1,2], n = 1</span>    <span class="hljs-comment">//Output: [1]</span>    <span class="hljs-comment">// Constraints:</span>    <span class="hljs-comment">// The number of nodes in the list is sz.</span>    <span class="hljs-comment">// 1 &lt;= sz &lt;= 30</span>    <span class="hljs-comment">// 0 &lt;= Node.val &lt;= 100</span>    <span class="hljs-comment">// 1 &lt;= n &lt;= sz</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Related Topics é“¾è¡¨ åŒæŒ‡é’ˆ</span>    <span class="hljs-comment">// ğŸ‘ 1264 ğŸ‘ 0</span>     <span class="hljs-comment">//leetcode submit region begin(Prohibit modification and deletion)</span>    <span class="hljs-comment">/**</span><span class="hljs-comment">     * Definition for singly-linked list.</span><span class="hljs-comment">     */</span>     <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ListNode</span> </span>&#123;         <span class="hljs-keyword">int</span> val;         ListNode next;         ListNode() &#123;&#125;         ListNode(<span class="hljs-keyword">int</span> val) &#123; <span class="hljs-keyword">this</span>.val = val; &#125;         ListNode(<span class="hljs-keyword">int</span> val, ListNode next) &#123; <span class="hljs-keyword">this</span>.val = val; <span class="hljs-keyword">this</span>.next = next; &#125;     &#125;    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>&#123;        <span class="hljs-function"><span class="hljs-keyword">public</span> ListNode <span class="hljs-title">removeNthFromEnd</span><span class="hljs-params">(ListNode head, <span class="hljs-keyword">int</span> n)</span> </span>&#123;            ListNode hair = <span class="hljs-keyword">new</span> ListNode(<span class="hljs-number">0</span>, head), fast = head, slow = hair;            <span class="hljs-keyword">while</span> (n &gt; <span class="hljs-number">0</span>)&#123;                fast = fast.next;                n--;            &#125;            <span class="hljs-keyword">while</span> (fast != <span class="hljs-keyword">null</span>) &#123;                fast = fast.next;                slow = slow.next;            &#125;            slow.next = slow.next.next;            <span class="hljs-keyword">return</span> hair.next;        &#125;&#125;<span class="hljs-comment">//leetcode submit region end(Prohibit modification and deletion)</span>&#125;</code></pre><p><code>Golang</code></p><pre><code class="hljs Golang"><span class="hljs-keyword">package</span> leetcode<span class="hljs-comment">/**</span><span class="hljs-comment"> * Author: Wang P</span><span class="hljs-comment"> * Version: 1.0.0</span><span class="hljs-comment"> * Date: 2021-03-05 13:43:33</span><span class="hljs-comment"> * Description:</span><span class="hljs-comment"> **/</span><span class="hljs-comment">//Given the head of a linked list, remove the nth node from the end of the list </span><span class="hljs-comment">//and return its head. </span><span class="hljs-comment">//</span><span class="hljs-comment">// Follow up: Could you do this in one pass? </span><span class="hljs-comment">//</span><span class="hljs-comment">// Example 1:</span><span class="hljs-comment">//Input: head = [1,2,3,4,5], n = 2</span><span class="hljs-comment">//Output: [1,2,3,5]</span><span class="hljs-comment">//</span><span class="hljs-comment">// Example 2:</span><span class="hljs-comment">//Input: head = [1], n = 1</span><span class="hljs-comment">//Output: []</span><span class="hljs-comment">//</span><span class="hljs-comment">// Example 3:</span><span class="hljs-comment">//Input: head = [1,2], n = 1</span><span class="hljs-comment">//Output: [1]</span><span class="hljs-comment">// Constraints:</span><span class="hljs-comment">// The number of nodes in the list is sz. </span><span class="hljs-comment">// 1 &lt;= sz &lt;= 30 </span><span class="hljs-comment">// 0 &lt;= Node.val &lt;= 100 </span><span class="hljs-comment">// 1 &lt;= n &lt;= sz </span><span class="hljs-comment">// </span><span class="hljs-comment">// Related Topics é“¾è¡¨ åŒæŒ‡é’ˆ </span><span class="hljs-comment">// ğŸ‘ 1264 ğŸ‘ 0</span><span class="hljs-comment">//leetcode submit region begin(Prohibit modification and deletion)</span><span class="hljs-comment">/**</span><span class="hljs-comment"> * Definition for singly-linked list.</span><span class="hljs-comment"> */</span><span class="hljs-keyword">type</span> ListNode <span class="hljs-keyword">struct</span> &#123;Val <span class="hljs-keyword">int</span>Next *ListNode&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">removeNthFromEnd</span><span class="hljs-params">(head *ListNode, n <span class="hljs-keyword">int</span>)</span> *<span class="hljs-title">ListNode</span></span> &#123;hair := &amp;ListNode&#123;Next:head&#125;fast, slow := head, hair<span class="hljs-keyword">for</span> n &gt; <span class="hljs-number">0</span> &#123;fast = fast.Nextn--&#125;<span class="hljs-keyword">for</span> fast != <span class="hljs-literal">nil</span> &#123;fast = fast.Nextslow = slow.Next&#125;slow.Next = slow.Next.Next<span class="hljs-keyword">return</span> hair.Next&#125;<span class="hljs-comment">//leetcode submit region end(Prohibit modification and deletion)</span></code></pre><p><code>Python</code></p><pre><code class="hljs Python"><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">Module Description: 19-åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹</span><span class="hljs-string">Solutionï¼š</span><span class="hljs-string">Date: 2021-03-05 13:39:13</span><span class="hljs-string">Author: Wang P</span><span class="hljs-string">Problem:# ç»™ä½ ä¸€ä¸ªé“¾è¡¨ï¼Œåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ n ä¸ªç»“ç‚¹ï¼Œå¹¶ä¸”è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚ </span><span class="hljs-string">        #</span><span class="hljs-string">        #  è¿›é˜¶ï¼šä½ èƒ½å°è¯•ä½¿ç”¨ä¸€è¶Ÿæ‰«æå®ç°å—ï¼Ÿ</span><span class="hljs-string"></span><span class="hljs-string">        #  ç¤ºä¾‹ 1ï¼š</span><span class="hljs-string">        # è¾“å…¥ï¼šhead = [1,2,3,4,5], n = 2</span><span class="hljs-string">        # è¾“å‡ºï¼š[1,2,3,5]</span><span class="hljs-string">        #</span><span class="hljs-string">        #  ç¤ºä¾‹ 2ï¼š</span><span class="hljs-string">        # è¾“å…¥ï¼šhead = [1], n = 1</span><span class="hljs-string">        # è¾“å‡ºï¼š[]</span><span class="hljs-string">        #</span><span class="hljs-string">        #  ç¤ºä¾‹ 3ï¼š</span><span class="hljs-string">        # è¾“å…¥ï¼šhead = [1,2], n = 1</span><span class="hljs-string">        # è¾“å‡ºï¼š[1]</span><span class="hljs-string">        #</span><span class="hljs-string">        #  æç¤ºï¼š</span><span class="hljs-string">        #  é“¾è¡¨ä¸­ç»“ç‚¹çš„æ•°ç›®ä¸º sz</span><span class="hljs-string">        #  1 &lt;= sz &lt;= 30</span><span class="hljs-string">        #  0 &lt;= Node.val &lt;= 100</span><span class="hljs-string">        #  1 &lt;= n &lt;= sz</span><span class="hljs-string">        #</span><span class="hljs-string">        #  Related Topics é“¾è¡¨ åŒæŒ‡é’ˆ</span><span class="hljs-string">        #  ğŸ‘ 1264 ğŸ‘ 0</span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-comment"># leetcode submit region begin(Prohibit modification and deletion)</span><span class="hljs-comment"># Definition for singly-linked list.</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ListNode</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, val=<span class="hljs-number">0</span>, <span class="hljs-built_in">next</span>=<span class="hljs-literal">None</span></span>):</span>        self.val = val        self.<span class="hljs-built_in">next</span> = <span class="hljs-built_in">next</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">removeNthFromEnd</span>(<span class="hljs-params">self, head: ListNode, n: <span class="hljs-built_in">int</span></span>) -&gt; ListNode:</span>        hair = ListNode(<span class="hljs-built_in">next</span>=head)        slow, fast = hair, head;        <span class="hljs-keyword">while</span> n &gt; <span class="hljs-number">0</span>:            fast = fast.<span class="hljs-built_in">next</span>            n -= <span class="hljs-number">1</span>        <span class="hljs-keyword">while</span> fast:            fast = fast.<span class="hljs-built_in">next</span>            slow = slow.<span class="hljs-built_in">next</span>        slow.<span class="hljs-built_in">next</span> = slow.<span class="hljs-built_in">next</span>.<span class="hljs-built_in">next</span>        <span class="hljs-keyword">return</span> hair.<span class="hljs-built_in">next</span><span class="hljs-comment"># leetcode submit region end(Prohibit modification and deletion)</span></code></pre><h6 id="83-åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ "><a href="#83-åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ " class="headerlink" title="83. åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ "></a><a href="https://leetcode-cn.com/problems/remove-duplicates-from-sorted-list/">83. åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ </a></h6><p>ç»™å®šä¸€ä¸ª<strong>æ’åº</strong>é“¾è¡¨ï¼Œåˆ é™¤æ‰€æœ‰é‡å¤çš„å…ƒç´ ï¼Œä½¿å¾—æ¯ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ã€‚</p><p>ç¤ºä¾‹ 1:</p><pre><code class="hljs angelscript">è¾“å…¥: <span class="hljs-number">1</span>-&gt;<span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>è¾“å‡º: <span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span></code></pre><p>ç¤ºä¾‹ 2:</p><pre><code class="hljs angelscript">è¾“å…¥: <span class="hljs-number">1</span>-&gt;<span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">3</span>-&gt;<span class="hljs-number">3</span>è¾“å‡º: <span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">3</span></code></pre><p>è§£é¢˜æ€è·¯</p><pre><code class="hljs plain"></code></pre><p><code>Java</code></p><pre><code class="hljs Java"><span class="hljs-comment">/*</span><span class="hljs-comment"> * Author: Wang P</span><span class="hljs-comment"> * Version: 1.0.0</span><span class="hljs-comment"> * Date: 2021-03-05 13:48:45</span><span class="hljs-comment"> * Description: 83-Remove Duplicates from Sorted List</span><span class="hljs-comment"> **/</span> <span class="hljs-keyword">package</span> com.weitrue.leetcode.editor.cn;<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RemoveDuplicatesFromSortedList</span></span>&#123;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span></span>&#123;        Solution s = <span class="hljs-keyword">new</span> RemoveDuplicatesFromSortedList().<span class="hljs-function">new <span class="hljs-title">Solution</span><span class="hljs-params">()</span></span>;    &#125;        <span class="hljs-comment">//Given the head of a sorted linked list, delete all duplicates such that each e</span>    <span class="hljs-comment">//lement appears only once. Return the linked list sorted as well. </span>    <span class="hljs-comment">// Example 1: </span>    <span class="hljs-comment">//Input: head = [1,1,2]</span>    <span class="hljs-comment">//Output: [1,2]</span>    <span class="hljs-comment">// Example 2: </span>    <span class="hljs-comment">//Input: head = [1,1,2,3,3]</span>    <span class="hljs-comment">//Output: [1,2,3]</span>    <span class="hljs-comment">// Constraints: </span>    <span class="hljs-comment">// The number of nodes in the list is in the range [0, 300]. </span>    <span class="hljs-comment">// -100 &lt;= Node.val &lt;= 100 </span>    <span class="hljs-comment">// The list is guaranteed to be sorted in ascending order. </span>    <span class="hljs-comment">// </span>    <span class="hljs-comment">// Related Topics é“¾è¡¨ </span>    <span class="hljs-comment">// ğŸ‘ 488 ğŸ‘ 0</span>     <span class="hljs-comment">//leetcode submit region begin(Prohibit modification and deletion)</span>    <span class="hljs-comment">/**</span><span class="hljs-comment">     * Definition for singly-linked list.</span><span class="hljs-comment">     */</span>    <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ListNode</span> </span>&#123;        <span class="hljs-keyword">int</span> val;        ListNode next;        ListNode() &#123;&#125;        ListNode(<span class="hljs-keyword">int</span> val) &#123; <span class="hljs-keyword">this</span>.val = val; &#125;        ListNode(<span class="hljs-keyword">int</span> val, ListNode next) &#123; <span class="hljs-keyword">this</span>.val = val; <span class="hljs-keyword">this</span>.next = next; &#125;    &#125;    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>&#123;        <span class="hljs-function"><span class="hljs-keyword">public</span> ListNode <span class="hljs-title">deleteDuplicates</span><span class="hljs-params">(ListNode head)</span> </span>&#123;            <span class="hljs-keyword">if</span>(head == <span class="hljs-keyword">null</span>) &#123;                <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;            &#125;            ListNode fast = head.next, slow = head;            <span class="hljs-keyword">while</span> (fast != <span class="hljs-keyword">null</span>) &#123;                <span class="hljs-keyword">if</span> (fast.val == slow.val) &#123;                    slow.next = fast.next;                    fast = slow.next;                &#125;<span class="hljs-keyword">else</span> &#123;                    fast = fast.next;                    slow = slow.next;                &#125;            &#125;            <span class="hljs-keyword">return</span> head;        &#125;&#125;<span class="hljs-comment">//leetcode submit region end(Prohibit modification and deletion)</span>&#125;</code></pre><p><code>Golang</code></p><pre><code class="hljs Golang"><span class="hljs-keyword">package</span> leetcode<span class="hljs-comment">/**</span><span class="hljs-comment"> * Author: Wang P</span><span class="hljs-comment"> * Version: 1.0.0</span><span class="hljs-comment"> * Date: 2021-03-05 13:50:35</span><span class="hljs-comment"> * Description: //Given the head of a sorted linked list, delete all duplicates such that each e</span><span class="hljs-comment">//lement appears only once. Return the linked list sorted as well.</span><span class="hljs-comment">//</span><span class="hljs-comment">// Example 1:</span><span class="hljs-comment">//Input: head = [1,1,2]</span><span class="hljs-comment">//Output: [1,2]</span><span class="hljs-comment">//</span><span class="hljs-comment">// Example 2:</span><span class="hljs-comment">//Input: head = [1,1,2,3,3]</span><span class="hljs-comment">//Output: [1,2,3]</span><span class="hljs-comment">//</span><span class="hljs-comment">// Constraints:</span><span class="hljs-comment">// The number of nodes in the list is in the range [0, 300].</span><span class="hljs-comment">// -100 &lt;= Node.val &lt;= 100</span><span class="hljs-comment">// The list is guaranteed to be sorted in ascending order.</span><span class="hljs-comment">//</span><span class="hljs-comment">// Related Topics é“¾è¡¨</span><span class="hljs-comment">// ğŸ‘ 488 ğŸ‘ 0</span><span class="hljs-comment"> **/</span><span class="hljs-comment">//leetcode submit region begin(Prohibit modification and deletion)</span><span class="hljs-comment">/**</span><span class="hljs-comment"> * Definition for singly-linked list.</span><span class="hljs-comment"> */</span><span class="hljs-keyword">type</span> ListNode <span class="hljs-keyword">struct</span> &#123;Val <span class="hljs-keyword">int</span>Next *ListNode&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">deleteDuplicates</span><span class="hljs-params">(head *ListNode)</span> *<span class="hljs-title">ListNode</span></span> &#123;cur := head<span class="hljs-keyword">for</span> cur != <span class="hljs-literal">nil</span> &amp;&amp; cur.Next != <span class="hljs-literal">nil</span> &#123;<span class="hljs-keyword">if</span> cur.Val == cur.Next.Val &#123;cur.Next = cur.Next.Next&#125;<span class="hljs-keyword">else</span> &#123;cur = cur.Next&#125;&#125;<span class="hljs-keyword">return</span> head&#125;<span class="hljs-comment">//leetcode submit region end(Prohibit modification and deletion)</span></code></pre><p><code>Python</code></p><pre><code class="hljs Python"><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">Module Description: 83-åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ </span><span class="hljs-string">Solutionï¼š</span><span class="hljs-string">Date: 2021-03-05 13:50:26</span><span class="hljs-string">Author: Wang P</span><span class="hljs-string">Problem:# ç»™å®šä¸€ä¸ªæ’åºé“¾è¡¨ï¼Œåˆ é™¤æ‰€æœ‰é‡å¤çš„å…ƒç´ ï¼Œä½¿å¾—æ¯ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ã€‚ </span><span class="hljs-string">        #</span><span class="hljs-string">        #  ç¤ºä¾‹ 1:</span><span class="hljs-string">        #</span><span class="hljs-string">        #  è¾“å…¥: 1-&gt;1-&gt;2</span><span class="hljs-string">        # è¾“å‡º: 1-&gt;2</span><span class="hljs-string">        #</span><span class="hljs-string">        #</span><span class="hljs-string">        #  ç¤ºä¾‹ 2:</span><span class="hljs-string">        #</span><span class="hljs-string">        #  è¾“å…¥: 1-&gt;1-&gt;2-&gt;3-&gt;3</span><span class="hljs-string">        # è¾“å‡º: 1-&gt;2-&gt;3</span><span class="hljs-string">        #  Related Topics é“¾è¡¨</span><span class="hljs-string">        #  ğŸ‘ 488 ğŸ‘ 0</span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-comment"># leetcode submit region begin(Prohibit modification and deletion)</span><span class="hljs-comment"># Definition for singly-linked list.</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ListNode</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, val=<span class="hljs-number">0</span>, <span class="hljs-built_in">next</span>=<span class="hljs-literal">None</span></span>):</span>        self.val = val        self.<span class="hljs-built_in">next</span> = <span class="hljs-built_in">next</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">deleteDuplicates</span>(<span class="hljs-params">self, head: ListNode</span>) -&gt; ListNode:</span>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> head:            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>        fast, slow = head.<span class="hljs-built_in">next</span>, head        <span class="hljs-keyword">while</span> fast:            <span class="hljs-keyword">if</span> fast.val == slow.val:                slow.<span class="hljs-built_in">next</span> = fast.<span class="hljs-built_in">next</span>                fast = slow.<span class="hljs-built_in">next</span>            <span class="hljs-keyword">else</span>:                fast = fast.<span class="hljs-built_in">next</span>                slow = slow.<span class="hljs-built_in">next</span>        <span class="hljs-keyword">return</span> head<span class="hljs-comment"># leetcode submit region end(Prohibit modification and deletion)</span></code></pre><h6 id="82-åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ -II"><a href="#82-åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ -II" class="headerlink" title="82. åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´  II"></a><a href="https://leetcode-cn.com/problems/remove-duplicates-from-sorted-list-ii/">82. åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´  II</a></h6><p>ç»™å®šä¸€ä¸ªæ’åºé“¾è¡¨ï¼Œåˆ é™¤æ‰€æœ‰å«æœ‰é‡å¤æ•°å­—çš„èŠ‚ç‚¹ï¼Œåªä¿ç•™åŸå§‹é“¾è¡¨ä¸­ <em>æ²¡æœ‰é‡å¤å‡ºç°</em> çš„æ•°å­—ã€‚</p><p><strong>ç¤ºä¾‹ 1:</strong></p><pre><code class="hljs angelscript">è¾“å…¥: <span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">3</span>-&gt;<span class="hljs-number">3</span>-&gt;<span class="hljs-number">4</span>-&gt;<span class="hljs-number">4</span>-&gt;<span class="hljs-number">5</span>è¾“å‡º: <span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">5</span></code></pre><p><strong>ç¤ºä¾‹ 2:</strong></p><pre><code class="hljs angelscript">è¾“å…¥: <span class="hljs-number">1</span>-&gt;<span class="hljs-number">1</span>-&gt;<span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">3</span>è¾“å‡º: <span class="hljs-number">2</span>-&gt;<span class="hljs-number">3</span></code></pre><p>è§£é¢˜æ€è·¯</p><pre><code class="hljs plain"></code></pre><p><code>Java</code></p><pre><code class="hljs Java"><span class="hljs-comment">/*</span><span class="hljs-comment"> * Author: Wang P</span><span class="hljs-comment"> * Version: 1.0.0</span><span class="hljs-comment"> * Date: 2021-03-05 13:50:14</span><span class="hljs-comment"> * Description: 82-Remove Duplicates from Sorted List II</span><span class="hljs-comment"> **/</span> <span class="hljs-keyword">package</span> com.weitrue.leetcode.editor.cn;<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RemoveDuplicatesFromSortedListIi</span></span>&#123;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span></span>&#123;        Solution s = <span class="hljs-keyword">new</span> RemoveDuplicatesFromSortedListIi().<span class="hljs-function">new <span class="hljs-title">Solution</span><span class="hljs-params">()</span></span>;    &#125;        <span class="hljs-comment">//Given the head of a sorted linked list, delete all nodes that have duplicate numbers, </span>    <span class="hljs-comment">//leaving only distinct numbers from the original list. Return the linked</span>    <span class="hljs-comment">//list sorted as well.</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Example 1:</span>    <span class="hljs-comment">//Input: head = [1,2,3,3,4,4,5]</span>    <span class="hljs-comment">//Output: [1,2,5]</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Example 2:</span>    <span class="hljs-comment">//Input: head = [1,1,1,2,3]</span>    <span class="hljs-comment">//Output: [2,3]</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Constraints:</span>    <span class="hljs-comment">// The number of nodes in the list is in the range [0, 300].</span>    <span class="hljs-comment">// -100 &lt;= Node.val &lt;= 100</span>    <span class="hljs-comment">// The list is guaranteed to be sorted in ascending order.</span>    <span class="hljs-comment">//</span>    <span class="hljs-comment">// Related Topics é“¾è¡¨</span>    <span class="hljs-comment">// ğŸ‘ 469 ğŸ‘ 0</span>     <span class="hljs-comment">//leetcode submit region begin(Prohibit modification and deletion)</span>    <span class="hljs-comment">/**</span><span class="hljs-comment">     * Definition for singly-linked list.</span><span class="hljs-comment">     */</span>    <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ListNode</span> </span>&#123;        <span class="hljs-keyword">int</span> val;        ListNode next;        ListNode() &#123;&#125;        ListNode(<span class="hljs-keyword">int</span> val) &#123; <span class="hljs-keyword">this</span>.val = val; &#125;        ListNode(<span class="hljs-keyword">int</span> val, ListNode next) &#123; <span class="hljs-keyword">this</span>.val = val; <span class="hljs-keyword">this</span>.next = next; &#125;    &#125;    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>&#123;        <span class="hljs-function"><span class="hljs-keyword">public</span> ListNode <span class="hljs-title">deleteDuplicates</span><span class="hljs-params">(ListNode head)</span> </span>&#123;            ListNode hair = <span class="hljs-keyword">new</span> ListNode(<span class="hljs-number">0</span>, head), fast = head, slow = hair;            <span class="hljs-keyword">while</span> (fast != <span class="hljs-keyword">null</span>) &#123;                <span class="hljs-keyword">while</span> (fast.next != <span class="hljs-keyword">null</span> &amp;&amp; fast.val == fast.next.val) &#123;                    fast = fast.next;                &#125;                <span class="hljs-keyword">if</span> (slow.next == fast) &#123;                    slow = slow.next;                &#125;<span class="hljs-keyword">else</span> &#123;                    slow.next = fast.next;                &#125;                fast = fast.next;            &#125;            <span class="hljs-keyword">return</span> hair.next;        &#125;    &#125;<span class="hljs-comment">//leetcode submit region end(Prohibit modification and deletion)</span>&#125;</code></pre><p><code>Golang</code></p><pre><code class="hljs Golang"><span class="hljs-keyword">package</span> leetcode<span class="hljs-comment">/**</span><span class="hljs-comment"> * Author: Wang P</span><span class="hljs-comment"> * Version: 1.0.0</span><span class="hljs-comment"> * Date: 2021-03-05 13:50:38</span><span class="hljs-comment"> * Description: //Given the head of a sorted linked list, delete all nodes that have duplicate n</span><span class="hljs-comment">//umbers, leaving only distinct numbers from the original list. Return the linked</span><span class="hljs-comment">//list sorted as well.</span><span class="hljs-comment">// Example 1:</span><span class="hljs-comment">//Input: head = [1,2,3,3,4,4,5]</span><span class="hljs-comment">//Output: [1,2,5]</span><span class="hljs-comment">//</span><span class="hljs-comment">// Example 2:</span><span class="hljs-comment">//Input: head = [1,1,1,2,3]</span><span class="hljs-comment">//Output: [2,3]</span><span class="hljs-comment">//</span><span class="hljs-comment">// Constraints:</span><span class="hljs-comment">// The number of nodes in the list is in the range [0, 300].</span><span class="hljs-comment">// -100 &lt;= Node.val &lt;= 100</span><span class="hljs-comment">// The list is guaranteed to be sorted in ascending order.</span><span class="hljs-comment">//</span><span class="hljs-comment">// Related Topics é“¾è¡¨</span><span class="hljs-comment">// ğŸ‘ 469 ğŸ‘ 0</span><span class="hljs-comment"> **/</span><span class="hljs-comment">//leetcode submit region begin(Prohibit modification and deletion)</span><span class="hljs-comment">/**</span><span class="hljs-comment"> * Definition for singly-linked list.</span><span class="hljs-comment"> */</span><span class="hljs-keyword">type</span> ListNode <span class="hljs-keyword">struct</span> &#123;Val <span class="hljs-keyword">int</span>Next *ListNode&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">deleteDuplicates</span><span class="hljs-params">(head *ListNode)</span> *<span class="hljs-title">ListNode</span></span> &#123;hair := &amp;ListNode&#123;Next: head&#125;fast, slow := head, hair<span class="hljs-keyword">for</span> fast != <span class="hljs-literal">nil</span> &#123;<span class="hljs-keyword">for</span> fast.Next != <span class="hljs-literal">nil</span> &amp;&amp; fast.Val == fast.Next.Val &#123;fast = fast.Next&#125;<span class="hljs-keyword">if</span> slow.Next == fast&#123;slow = slow.Next&#125; <span class="hljs-keyword">else</span> &#123;slow.Next = fast.Next&#125;fast = fast.Next&#125;<span class="hljs-keyword">return</span> hair.Next&#125;<span class="hljs-comment">//leetcode submit region end(Prohibit modification and deletion)</span></code></pre><p><code>Python</code></p><pre><code class="hljs Python"><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">Module Description: 82-åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´  II</span><span class="hljs-string">Solutionï¼š</span><span class="hljs-string">Date: 2021-03-05 13:50:50</span><span class="hljs-string">Author: Wang P</span><span class="hljs-string">Problem:# ç»™å®šä¸€ä¸ªæ’åºé“¾è¡¨ï¼Œåˆ é™¤æ‰€æœ‰å«æœ‰é‡å¤æ•°å­—çš„èŠ‚ç‚¹ï¼Œåªä¿ç•™åŸå§‹é“¾è¡¨ä¸­ æ²¡æœ‰é‡å¤å‡ºç° çš„æ•°å­—ã€‚</span><span class="hljs-string">        #  ç¤ºä¾‹ 1:</span><span class="hljs-string">        #  è¾“å…¥: 1-&gt;2-&gt;3-&gt;3-&gt;4-&gt;4-&gt;5</span><span class="hljs-string">        # è¾“å‡º: 1-&gt;2-&gt;5</span><span class="hljs-string">        #  ç¤ºä¾‹ 2:</span><span class="hljs-string">        #  è¾“å…¥: 1-&gt;1-&gt;1-&gt;2-&gt;3</span><span class="hljs-string">        # è¾“å‡º: 2-&gt;3</span><span class="hljs-string">        #  Related Topics é“¾è¡¨</span><span class="hljs-string">        #  ğŸ‘ 469 ğŸ‘ 0</span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-comment"># leetcode submit region begin(Prohibit modification and deletion)</span><span class="hljs-comment"># Definition for singly-linked list.</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ListNode</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, val=<span class="hljs-number">0</span>, <span class="hljs-built_in">next</span>=<span class="hljs-literal">None</span></span>):</span>        self.val = val        self.<span class="hljs-built_in">next</span> = <span class="hljs-built_in">next</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">deleteDuplicates</span>(<span class="hljs-params">self, head: ListNode</span>) -&gt; ListNode:</span>        hair, fast = ListNode(<span class="hljs-built_in">next</span>=head), head        slow = hair        <span class="hljs-keyword">while</span> fast:            <span class="hljs-keyword">while</span> fast.<span class="hljs-built_in">next</span> <span class="hljs-keyword">and</span> fast.val == fast.<span class="hljs-built_in">next</span>.val:                fast = fast.<span class="hljs-built_in">next</span>            <span class="hljs-keyword">if</span> slow.<span class="hljs-built_in">next</span> == fast:                slow = slow.<span class="hljs-built_in">next</span>            <span class="hljs-keyword">else</span>:                slow.<span class="hljs-built_in">next</span> = fast.<span class="hljs-built_in">next</span>            fast = fast.<span class="hljs-built_in">next</span>        <span class="hljs-keyword">return</span> hair.<span class="hljs-built_in">next</span><span class="hljs-comment"># leetcode submit region end(Prohibit modification and deletion)</span></code></pre><h4 id="çº¿ç¨‹æ± ä¸ä»»åŠ¡é˜Ÿåˆ—"><a href="#çº¿ç¨‹æ± ä¸ä»»åŠ¡é˜Ÿåˆ—" class="headerlink" title="çº¿ç¨‹æ± ä¸ä»»åŠ¡é˜Ÿåˆ—"></a>çº¿ç¨‹æ± ä¸ä»»åŠ¡é˜Ÿåˆ—</h4><h4 id="é€’å½’ä¸æ ˆï¼ˆStackï¼‰ï¼šè§£å†³è¡¨è¾¾å¼æ±‚å€¼"><a href="#é€’å½’ä¸æ ˆï¼ˆStackï¼‰ï¼šè§£å†³è¡¨è¾¾å¼æ±‚å€¼" class="headerlink" title="é€’å½’ä¸æ ˆï¼ˆStackï¼‰ï¼šè§£å†³è¡¨è¾¾å¼æ±‚å€¼"></a>é€’å½’ä¸æ ˆï¼ˆStackï¼‰ï¼šè§£å†³è¡¨è¾¾å¼æ±‚å€¼</h4>]]></content>
    
    
    <categories>
      
      <category>Leetcode</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>Python</tag>
      
      <tag>LeetCode</tag>
      
      <tag>Go</tag>
      
      <tag>scala</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€Goã€‘å­¦ä¹ ç¬”è®°</title>
    <link href="/2021/02/07/Golang/"/>
    <url>/2021/02/07/Golang/</url>
    
    <content type="html"><![CDATA[<h3 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a><a id="more"></a>å˜é‡</h3><h4 id="varä¸"><a href="#varä¸" class="headerlink" title="varä¸:="></a>varä¸:=</h4><ul><li>:=æ–¹å¼è¾ƒä¸ºç®€æ´ï¼Œä½†åªèƒ½åœ¨å‡½æ•°å†…ä½¿ç”¨è¯¥æ–¹å¼ï¼Œvaræ–¹å¼æ²¡æœ‰è¿™ä¸ªé™åˆ¶ï¼Œvaræ–¹å¼å®šä¹‰åœ¨æ±‰ä¹¦å¤–çš„å˜é‡å±äºåŒ…å†…éƒ¨çš„å˜é‡</li><li>å‡½æ•°ä¸­ä»¥:=æ–¹å¼å®šä¹‰å˜é‡ä¸ºä¸»</li></ul><h4 id="å†…å»ºå˜é‡ç±»å‹"><a href="#å†…å»ºå˜é‡ç±»å‹" class="headerlink" title="å†…å»ºå˜é‡ç±»å‹"></a>å†…å»ºå˜é‡ç±»å‹</h4><ul><li>bool,string</li><li>(u)int, (u)int8, (u)int16, (u)int32, (u)int, uintptr</li><li>byte, rune</li><li>float32, float64, complex64, complex128</li><li>å˜é‡ç±»å‹å†™åœ¨å˜é‡åä¹‹å</li><li>ç¼–è¯‘å™¨å¯æ¨æµ‹å˜é‡ç±»å‹</li><li>æ²¡æœ‰char, åªæœ‰rune</li><li>åŸç”Ÿæ”¯æŒå¤æ•°ç±»å‹</li></ul><pre><code class="hljs golang"><span class="hljs-keyword">package</span> main<span class="hljs-keyword">import</span> (<span class="hljs-string">&quot;fmt&quot;</span><span class="hljs-string">&quot;math&quot;</span><span class="hljs-string">&quot;math/cmplx&quot;</span>)<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">euler</span><span class="hljs-params">()</span></span>  &#123;<span class="hljs-comment">// æ¬§æ‹‰å…¬å¼ e^(i*Pi) + 1 = 0</span>fmt.Println(cmplx.Exp(<span class="hljs-number">1i</span> * math.Pi) + <span class="hljs-number">1</span>)  fmt.Println(cmplx.Pow(math.E, <span class="hljs-number">1i</span> * math.Pi) + <span class="hljs-number">1</span>)&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;euler()&#125;<span class="hljs-comment">// æ‰“å°å†…å®¹</span>(<span class="hljs-number">0</span>+<span class="hljs-number">1.2246467991473515e-16i</span>)(<span class="hljs-number">0</span>+<span class="hljs-number">1.2246467991473515e-16i</span>)</code></pre><h4 id="å¼ºåˆ¶ç±»å‹è½¬æ¢"><a href="#å¼ºåˆ¶ç±»å‹è½¬æ¢" class="headerlink" title="å¼ºåˆ¶ç±»å‹è½¬æ¢"></a>å¼ºåˆ¶ç±»å‹è½¬æ¢</h4><p>goè¯­è¨€éœ€è¦å¼€å‘æ—¶å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œä¸ä¼šè‡ªåŠ¨éšå¼è½¬æ¢</p><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">triangle</span><span class="hljs-params">()</span></span>  &#123;a, b := <span class="hljs-number">3</span>, <span class="hljs-number">4</span><span class="hljs-keyword">var</span> c <span class="hljs-keyword">int</span> c = math.Sqrt(a*a + b*b)                    <span class="hljs-comment">// ä¼šåœ¨ç¼–è¯‘å‰ideaä¾¿æç¤ºæŠ¥é”™</span>  c = <span class="hljs-keyword">int</span>(math.Sqrt(<span class="hljs-keyword">float64</span>(a * a + b * b)))  <span class="hljs-comment">// æ­£ç¡®å†™æ³•</span>fmt.Println(c)&#125;</code></pre><p>å¸¸é‡æœªå£°æ˜ç±»å‹ï¼Œå…¶ç±»å‹æ˜¯ä¸ç¡®å®šçš„ï¼ˆæ•°å€¼å¯ä»¥ä½œå„ç§ç±»å‹ä½¿ç”¨ï¼‰</p><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">consts</span><span class="hljs-params">()</span></span>  &#123;<span class="hljs-comment">// å¼ºåˆ¶ç±»å‹è½¬æ¢</span><span class="hljs-keyword">const</span> a, b = <span class="hljs-number">3</span>, <span class="hljs-number">4</span><span class="hljs-keyword">var</span> c <span class="hljs-keyword">int</span>c = <span class="hljs-keyword">int</span>(math.Sqrt(a * a + b * b))    <span class="hljs-comment">// a * a + b * b éƒ¨åˆ†å¯ä»¥ä¸ç”¨åŠ ä¸Šå¼ºåˆ¶ç±»å‹è½¬æ¢</span>fmt.Println(c)&#125;</code></pre><p>å¯ä»¥åˆ©ç”¨å¸¸é‡ç”³æ˜æšä¸¾ç±»å‹</p><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">enums</span><span class="hljs-params">()</span></span>  &#123;<span class="hljs-keyword">const</span> (golang = <span class="hljs-literal">iota</span>_javapython)fmt.Println(golang, java, python)&#125;<span class="hljs-comment">// è¾“å‡º</span><span class="hljs-number">0</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span></code></pre><p>å¯ä»¥ä»¥<code>iota</code>ä¸ºåŸºç¡€ï¼Œç”Ÿæˆä¸€ç³»åˆ—æšä¸¾æ•°</p><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">enums</span><span class="hljs-params">()</span></span>  &#123;<span class="hljs-keyword">const</span> (b = <span class="hljs-number">1</span> &lt;&lt; (<span class="hljs-number">10</span> * <span class="hljs-literal">iota</span>)kbmbgbtb)fmt.Println(b, kb, mb, gb, tb)&#125;<span class="hljs-comment">// è¾“å‡º</span><span class="hljs-number">1</span> <span class="hljs-number">1024</span> <span class="hljs-number">1048576</span> <span class="hljs-number">1073741824</span> <span class="hljs-number">1099511627776</span></code></pre><p><a href="https://github.com/weitrue/note/blob/master/go/variable.go">https://github.com/weitrue/note/blob/master/go/variable.go</a></p><h3 id="æŒ‡é’ˆ"><a href="#æŒ‡é’ˆ" class="headerlink" title="æŒ‡é’ˆ"></a>æŒ‡é’ˆ</h3><p>æŒ‡é’ˆä¸èƒ½è¿ç®—</p><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<span class="hljs-keyword">var</span> a <span class="hljs-keyword">int</span> = <span class="hljs-number">2</span><span class="hljs-keyword">var</span> pa *<span class="hljs-keyword">int</span> = &amp;a*pa = <span class="hljs-number">3</span>fmt.Println(a)&#125;<span class="hljs-comment">// è¿è¡Œç»“æœ</span><span class="hljs-number">3</span></code></pre><p>å‚æ•°ä¼ é€’â€”åªæœ‰<em>å€¼ä¼ é€’</em>ä¸€ç§æ–¹å¼</p><pre><code class="hljs go"><span class="hljs-comment">// å†…å»ºç±»å‹å€¼ä¼ é€’</span><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">swapV</span><span class="hljs-params">(a, b <span class="hljs-keyword">int</span>)</span></span> &#123;b, a = a, b&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;a, b := <span class="hljs-number">3</span>, <span class="hljs-number">4</span>swapV(a, b)fmt.Println(a, b)&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">swapR</span><span class="hljs-params">(a, b *<span class="hljs-keyword">int</span>)</span></span> &#123;  <span class="hljs-comment">// è¿™ç§æ–¹å¼ä¸ºäº¤æ¢å˜é‡åœ°å€</span>b, a = a, b&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;a, b := <span class="hljs-number">3</span>, <span class="hljs-number">4</span>swapR(&amp;a, &amp;b)fmt.Println(a, b)&#125;<span class="hljs-comment">// é€šè¿‡äº¤æ¢å˜é‡åœ°å€è¾¾åˆ°å€ä¼ é€’</span><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">swapR</span><span class="hljs-params">(a, b *<span class="hljs-keyword">int</span>)</span></span> &#123;*b, *a = *a, *b&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;a, b := <span class="hljs-number">3</span>, <span class="hljs-number">4</span>swapR(&amp;a, &amp;b)fmt.Println(a, b)&#125;</code></pre><p><a href="https://github.com/weitrue/note/blob/master/go/pointer.go">https://github.com/weitrue/note/blob/master/go/pointer.go</a></p><h3 id="å®¹å™¨"><a href="#å®¹å™¨" class="headerlink" title="å®¹å™¨"></a>å®¹å™¨</h3><h4 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h4><p>æ•°ç»„å®šä¹‰</p><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">define</span><span class="hljs-params">()</span></span>  &#123;<span class="hljs-keyword">var</span> arr1 [<span class="hljs-number">5</span>]<span class="hljs-keyword">int</span>arr2 := [<span class="hljs-number">3</span>]<span class="hljs-keyword">int</span>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>&#125;arr3 := [...]<span class="hljs-keyword">int</span>&#123;<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">10</span>&#125;<span class="hljs-keyword">var</span> grid [<span class="hljs-number">4</span>][<span class="hljs-number">5</span>]<span class="hljs-keyword">bool</span>fmt.Println(arr1, arr2, arr3)fmt.Println(grid)&#125;<span class="hljs-comment">// è¾“å‡º</span>[<span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>] [<span class="hljs-number">1</span> <span class="hljs-number">3</span> <span class="hljs-number">5</span>] [<span class="hljs-number">2</span> <span class="hljs-number">4</span> <span class="hljs-number">6</span> <span class="hljs-number">8</span> <span class="hljs-number">10</span>][[<span class="hljs-literal">false</span> <span class="hljs-literal">false</span> <span class="hljs-literal">false</span> <span class="hljs-literal">false</span> <span class="hljs-literal">false</span>] [<span class="hljs-literal">false</span> <span class="hljs-literal">false</span> <span class="hljs-literal">false</span> <span class="hljs-literal">false</span> <span class="hljs-literal">false</span>] [<span class="hljs-literal">false</span> <span class="hljs-literal">false</span> <span class="hljs-literal">false</span> <span class="hljs-literal">false</span> <span class="hljs-literal">false</span>] [<span class="hljs-literal">false</span> <span class="hljs-literal">false</span> <span class="hljs-literal">false</span> <span class="hljs-literal">false</span> <span class="hljs-literal">false</span>]]</code></pre><p>[5]intå’Œ[10]intæ˜¯ä¸åŒç±»å‹</p><p>è°ƒç”¨func f(arr [10]int)ä¼š<em>æ‹·è´</em>æ•°ç»„</p><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">printArr</span><span class="hljs-params">(arr [5]<span class="hljs-keyword">int</span>)</span></span>  &#123;arr[<span class="hljs-number">0</span>] = <span class="hljs-number">100</span><span class="hljs-keyword">for</span> i, v := <span class="hljs-keyword">range</span> arr &#123;fmt.Println(i, v)&#125;&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">arrTest</span><span class="hljs-params">()</span></span>  &#123;<span class="hljs-keyword">var</span> arr1 [<span class="hljs-number">5</span>]<span class="hljs-keyword">int</span>arr2 := [...]<span class="hljs-keyword">int</span>&#123;<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">10</span>&#125;fmt.Println()printArr(arr2)fmt.Println()<span class="hljs-keyword">for</span> i, v := <span class="hljs-keyword">range</span> arr1 &#123;fmt.Println(i, v)&#125;&#125;<span class="hljs-comment">// è¾“å‡º</span><span class="hljs-number">0</span> <span class="hljs-number">100</span><span class="hljs-number">1</span> <span class="hljs-number">0</span><span class="hljs-number">2</span> <span class="hljs-number">0</span><span class="hljs-number">3</span> <span class="hljs-number">0</span><span class="hljs-number">4</span> <span class="hljs-number">0</span><span class="hljs-number">0</span> <span class="hljs-number">100</span><span class="hljs-number">1</span> <span class="hljs-number">4</span><span class="hljs-number">2</span> <span class="hljs-number">6</span><span class="hljs-number">3</span> <span class="hljs-number">8</span><span class="hljs-number">4</span> <span class="hljs-number">10</span><span class="hljs-number">0</span> <span class="hljs-number">0</span><span class="hljs-number">1</span> <span class="hljs-number">0</span><span class="hljs-number">2</span> <span class="hljs-number">0</span><span class="hljs-number">3</span> <span class="hljs-number">0</span><span class="hljs-number">4</span> <span class="hljs-number">0</span></code></pre><p>è‹¥è¦æ”¹å˜æ•°ç»„çš„å€¼ éœ€è¦ä¼ å…¥æ•°ç»„çš„åœ°å€ï¼Œå› æ­¤goè¯­è¨€ä¸€èˆ¬ä¸ä½¿ç”¨æ•°ç»„</p><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">printArrR</span><span class="hljs-params">(arr *[5]<span class="hljs-keyword">int</span>)</span></span>  &#123;arr[<span class="hljs-number">0</span>] = <span class="hljs-number">100</span><span class="hljs-keyword">for</span> i, v := <span class="hljs-keyword">range</span> arr &#123;fmt.Println(i, v)&#125;&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">arrTest</span><span class="hljs-params">()</span></span>  &#123;<span class="hljs-keyword">var</span> arr1 [<span class="hljs-number">5</span>]<span class="hljs-keyword">int</span>printArrR(&amp;arr1)fmt.Println()fmt.Println(arr1)&#125;<span class="hljs-comment">// è¾“å‡º</span><span class="hljs-number">0</span> <span class="hljs-number">100</span><span class="hljs-number">1</span> <span class="hljs-number">0</span><span class="hljs-number">2</span> <span class="hljs-number">0</span><span class="hljs-number">3</span> <span class="hljs-number">0</span><span class="hljs-number">4</span> <span class="hljs-number">0</span>[<span class="hljs-number">100</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>]</code></pre><p><a href="https://github.com/weitrue/note/blob/master/go/collections/array.go">https://github.com/weitrue/note/blob/master/go/collections/array.go</a></p><h4 id="åˆ‡ç‰‡"><a href="#åˆ‡ç‰‡" class="headerlink" title="åˆ‡ç‰‡"></a>åˆ‡ç‰‡</h4><ul><li><p>sliceå¯ä»¥å‘åæ‰©å±•ï¼Œä½†ä¸èƒ½å‘å‰æ‰©å±•</p></li><li><p>s[i]ä¸å¯è¶…è¶Šlen(s)ï¼Œå‘åæ‰©å±•ä¸å¯ä»¥è¶…è¶Šåº•å±‚æ•°ç»„cap(s)</p></li></ul><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">slice</span><span class="hljs-params">()</span></span> &#123;arr := [...]<span class="hljs-keyword">int</span>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>&#125;s1 := arr[<span class="hljs-number">2</span>: <span class="hljs-number">6</span>]fmt.Println(s1)s2 := s1[<span class="hljs-number">3</span>: <span class="hljs-number">5</span>]fmt.Println(s2)  s3 := s1[<span class="hljs-number">3</span>:<span class="hljs-number">6</span>]fmt.Println(s3)&#125;<span class="hljs-comment">//è¾“å‡º</span>[<span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span>][<span class="hljs-number">6</span> <span class="hljs-number">7</span>]<span class="hljs-built_in">panic</span>: runtime error: slice bounds out of <span class="hljs-keyword">range</span> [:<span class="hljs-number">6</span>] with capacity <span class="hljs-number">5</span>goroutine <span class="hljs-number">1</span> [running]:main.sliceDefine()        ~/Projects/golang/src/offer/note/slices.<span class="hljs-keyword">go</span>:<span class="hljs-number">20</span> +<span class="hljs-number">0x164</span>main.main()        ~/Projects/golang/src/offer/note/ab_test_func.<span class="hljs-keyword">go</span>:<span class="hljs-number">28</span> +<span class="hljs-number">0x20</span></code></pre><p><img src="/images/Golang/slice.png"></p><ul><li><p>å‘sliceæ·»åŠ å…ƒç´ ï¼Œå¦‚æœè¶…è¶Šcapï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ†é…æ›´å¤§çš„åº•å±‚æ•°ç»„</p></li><li><p>ç”±äºå€¼ä¼ é€’çš„åŸå› ï¼Œå¿…é¡»æ¥æ”¶appendçš„è¿”å›å€¼<code>s=append(s, val)</code></p></li></ul><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">sliceAppend</span><span class="hljs-params">()</span></span> &#123;arr := [...]<span class="hljs-keyword">int</span>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>&#125;s1 := arr[<span class="hljs-number">2</span>: <span class="hljs-number">6</span>]fmt.Println(s1, <span class="hljs-built_in">cap</span>(s1), <span class="hljs-built_in">len</span>(s1))s2 := s1[<span class="hljs-number">3</span>: <span class="hljs-number">5</span>]fmt.Println(s2)s3 := <span class="hljs-built_in">append</span>(s2, <span class="hljs-number">10</span>)s4 := <span class="hljs-built_in">append</span>(s3, <span class="hljs-number">11</span>)s5 := <span class="hljs-built_in">append</span>(s4, <span class="hljs-number">12</span>)fmt.Println(<span class="hljs-string">&quot;s3, s4, s5=&quot;</span>, s3, s4, s5)fmt.Println(arr)    s6 := <span class="hljs-built_in">append</span>(s1, <span class="hljs-number">10</span>)s7 := <span class="hljs-built_in">append</span>(s6, <span class="hljs-number">11</span>)s8 := <span class="hljs-built_in">append</span>(s7, <span class="hljs-number">12</span>)fmt.Println(<span class="hljs-string">&quot;s6, s7, s8=&quot;</span>, s6, s7, s8)fmt.Println(<span class="hljs-string">&quot;cap(s6), cap(s7), cap(s8) =&quot;</span>, <span class="hljs-built_in">cap</span>(s6), <span class="hljs-built_in">cap</span>(s7), <span class="hljs-built_in">cap</span>(s8))fmt.Println(arr)&#125;<span class="hljs-comment">// è¾“å‡º</span>[<span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span>] <span class="hljs-number">6</span> <span class="hljs-number">4</span>[<span class="hljs-number">6</span> <span class="hljs-number">7</span>]s3, s4, s5= [<span class="hljs-number">6</span> <span class="hljs-number">7</span> <span class="hljs-number">10</span>] [<span class="hljs-number">6</span> <span class="hljs-number">7</span> <span class="hljs-number">10</span> <span class="hljs-number">11</span>] [<span class="hljs-number">6</span> <span class="hljs-number">7</span> <span class="hljs-number">10</span> <span class="hljs-number">11</span> <span class="hljs-number">12</span>]<span class="hljs-built_in">cap</span>(s3), <span class="hljs-built_in">cap</span>(s4), <span class="hljs-built_in">cap</span>(s5) = <span class="hljs-number">3</span> <span class="hljs-number">6</span> <span class="hljs-number">6</span>[<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span> <span class="hljs-number">7</span> <span class="hljs-number">10</span>]s6, s7, s8= [<span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span> <span class="hljs-number">10</span>] [<span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span> <span class="hljs-number">10</span> <span class="hljs-number">11</span>] [<span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span> <span class="hljs-number">10</span> <span class="hljs-number">11</span> <span class="hljs-number">12</span>]<span class="hljs-built_in">cap</span>(s6), <span class="hljs-built_in">cap</span>(s7), <span class="hljs-built_in">cap</span>(s8) = <span class="hljs-number">6</span> <span class="hljs-number">6</span> <span class="hljs-number">12</span>[<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span> <span class="hljs-number">10</span> <span class="hljs-number">11</span>]</code></pre><ul><li>Zero value for slice is nil</li></ul><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">sliceDefine</span><span class="hljs-params">()</span></span> &#123;<span class="hljs-keyword">var</span> s []<span class="hljs-keyword">int</span><span class="hljs-keyword">for</span> i :=<span class="hljs-number">0</span>; i &lt;<span class="hljs-number">10</span>; i++ &#123;fmt.Printf(<span class="hljs-string">&quot;%v, cap(s) = %d, len(s) = %d\n&quot;</span>, s, <span class="hljs-built_in">cap</span>(s), <span class="hljs-built_in">len</span>(s))s = <span class="hljs-built_in">append</span>(s, <span class="hljs-number">2</span>*i + <span class="hljs-number">1</span>)&#125;s1 := []<span class="hljs-keyword">int</span>&#123;<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>&#125;fmt.Printf(<span class="hljs-string">&quot;%v, cap(s1) = %d, len(s1) = %d\n&quot;</span>, s1, <span class="hljs-built_in">cap</span>(s1), <span class="hljs-built_in">len</span>(s1))s2 := <span class="hljs-built_in">make</span>([]<span class="hljs-keyword">int</span>, <span class="hljs-number">8</span>)fmt.Printf(<span class="hljs-string">&quot;%v, cap(s2) = %d, len(s2) = %d\n&quot;</span>, s2, <span class="hljs-built_in">cap</span>(s2), <span class="hljs-built_in">len</span>(s2))s3 := <span class="hljs-built_in">make</span>([]<span class="hljs-keyword">int</span>, <span class="hljs-number">8</span>, <span class="hljs-number">32</span>)fmt.Printf(<span class="hljs-string">&quot;%v, cap(s3) = %d, len(s3) = %d\n&quot;</span>, s3, <span class="hljs-built_in">cap</span>(s3), <span class="hljs-built_in">len</span>(s3))<span class="hljs-comment">// æ‹·è´</span><span class="hljs-built_in">copy</span>(s2, s1)fmt.Printf(<span class="hljs-string">&quot;%v, cap(s2) = %d, len(s2) = %d\n&quot;</span>, s2, <span class="hljs-built_in">cap</span>(s2), <span class="hljs-built_in">len</span>(s2))<span class="hljs-comment">// åˆ é™¤ æ²¡æœ‰å†…å»ºå‡½æ•°ï¼Œåªèƒ½é€šè¿‡æˆªå–+append</span>s4 := <span class="hljs-built_in">append</span>(s2[:<span class="hljs-number">2</span>], s2[<span class="hljs-number">3</span>:]...)fmt.Printf(<span class="hljs-string">&quot;%v, cap(s4) = %d, len(s4) = %d\n&quot;</span>, s4, <span class="hljs-built_in">cap</span>(s4), <span class="hljs-built_in">len</span>(s4))&#125;<span class="hljs-comment">//è¾“å‡º</span>[], <span class="hljs-built_in">cap</span>(s) = <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(s) = <span class="hljs-number">0</span>[<span class="hljs-number">1</span>], <span class="hljs-built_in">cap</span>(s) = <span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(s) = <span class="hljs-number">1</span>[<span class="hljs-number">1</span> <span class="hljs-number">3</span>], <span class="hljs-built_in">cap</span>(s) = <span class="hljs-number">2</span>, <span class="hljs-built_in">len</span>(s) = <span class="hljs-number">2</span>[<span class="hljs-number">1</span> <span class="hljs-number">3</span> <span class="hljs-number">5</span>], <span class="hljs-built_in">cap</span>(s) = <span class="hljs-number">4</span>, <span class="hljs-built_in">len</span>(s) = <span class="hljs-number">3</span>[<span class="hljs-number">1</span> <span class="hljs-number">3</span> <span class="hljs-number">5</span> <span class="hljs-number">7</span>], <span class="hljs-built_in">cap</span>(s) = <span class="hljs-number">4</span>, <span class="hljs-built_in">len</span>(s) = <span class="hljs-number">4</span>[<span class="hljs-number">1</span> <span class="hljs-number">3</span> <span class="hljs-number">5</span> <span class="hljs-number">7</span> <span class="hljs-number">9</span>], <span class="hljs-built_in">cap</span>(s) = <span class="hljs-number">8</span>, <span class="hljs-built_in">len</span>(s) = <span class="hljs-number">5</span>[<span class="hljs-number">1</span> <span class="hljs-number">3</span> <span class="hljs-number">5</span> <span class="hljs-number">7</span> <span class="hljs-number">9</span> <span class="hljs-number">11</span>], <span class="hljs-built_in">cap</span>(s) = <span class="hljs-number">8</span>, <span class="hljs-built_in">len</span>(s) = <span class="hljs-number">6</span>[<span class="hljs-number">1</span> <span class="hljs-number">3</span> <span class="hljs-number">5</span> <span class="hljs-number">7</span> <span class="hljs-number">9</span> <span class="hljs-number">11</span> <span class="hljs-number">13</span>], <span class="hljs-built_in">cap</span>(s) = <span class="hljs-number">8</span>, <span class="hljs-built_in">len</span>(s) = <span class="hljs-number">7</span>[<span class="hljs-number">1</span> <span class="hljs-number">3</span> <span class="hljs-number">5</span> <span class="hljs-number">7</span> <span class="hljs-number">9</span> <span class="hljs-number">11</span> <span class="hljs-number">13</span> <span class="hljs-number">15</span>], <span class="hljs-built_in">cap</span>(s) = <span class="hljs-number">8</span>, <span class="hljs-built_in">len</span>(s) = <span class="hljs-number">8</span>[<span class="hljs-number">1</span> <span class="hljs-number">3</span> <span class="hljs-number">5</span> <span class="hljs-number">7</span> <span class="hljs-number">9</span> <span class="hljs-number">11</span> <span class="hljs-number">13</span> <span class="hljs-number">15</span> <span class="hljs-number">17</span>], <span class="hljs-built_in">cap</span>(s) = <span class="hljs-number">16</span>, <span class="hljs-built_in">len</span>(s) = <span class="hljs-number">9</span>[<span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span>], <span class="hljs-built_in">cap</span>(s1) = <span class="hljs-number">3</span>, <span class="hljs-built_in">len</span>(s1) = <span class="hljs-number">3</span>[<span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>], <span class="hljs-built_in">cap</span>(s2) = <span class="hljs-number">8</span>, <span class="hljs-built_in">len</span>(s2) = <span class="hljs-number">8</span>[<span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>], <span class="hljs-built_in">cap</span>(s3) = <span class="hljs-number">32</span>, <span class="hljs-built_in">len</span>(s3) = <span class="hljs-number">8</span>[<span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>], <span class="hljs-built_in">cap</span>(s2) = <span class="hljs-number">8</span>, <span class="hljs-built_in">len</span>(s2) = <span class="hljs-number">8</span>[<span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>], <span class="hljs-built_in">cap</span>(s4) = <span class="hljs-number">8</span>, <span class="hljs-built_in">len</span>(s4) = <span class="hljs-number">7</span></code></pre><p><a href="https://github.com/weitrue/note/blob/master/go/collections/slices.go">https://github.com/weitrue/note/blob/master/go/collections/slices.go</a></p><h4 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h4><ul><li><p>åˆ›å»º<code>make(map[type]type)</code></p></li><li><p>keyä¸å­˜åœ¨æ—¶ï¼Œè·å–valueç±»å‹çš„åˆå§‹å€¼ï¼Œéœ€è¦<code>if value, ok := m[key]; ok &#123;...&#125;</code> åˆ¤æ–­æ˜¯å¦å­˜åœ¨key</p></li><li><p>mapä½¿ç”¨å“ˆå¸Œè¡¨ï¼Œå¿…é¡»å¯ä»¥æ¯”è¾ƒç›¸ç­‰</p></li><li><p>é™¤äº†slice, map,functionçš„å†…å»ºç±»å‹éƒ½å¯ä»¥ä½œä¸ºmapçš„key,Structç±»å‹ä¸åŒ…å«ä¸Šè¿°å­—æ®µæ—¶ï¼Œä¹Ÿå¯ä½œä¸ºkey</p></li></ul><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">mapDefine</span><span class="hljs-params">()</span></span>  &#123;m := <span class="hljs-keyword">map</span>[<span class="hljs-keyword">int</span>]<span class="hljs-keyword">string</span>&#123;<span class="hljs-number">1</span>: <span class="hljs-string">&quot;aa&quot;</span>,<span class="hljs-number">2</span>: <span class="hljs-string">&quot;bb&quot;</span>,&#125;<span class="hljs-keyword">if</span> v, ok := m[<span class="hljs-number">3</span>]; ok &#123;fmt.Println(v)&#125; <span class="hljs-keyword">else</span> &#123;<span class="hljs-built_in">panic</span>(<span class="hljs-string">&quot;key not exists&quot;</span>)&#125;&#125;<span class="hljs-comment">//è¾“å‡º</span><span class="hljs-built_in">panic</span>: key not existsgoroutine <span class="hljs-number">1</span> [running]:main.mapDefine()        /Users/wangpeng/Projects/golang/src/offer/note/maps.<span class="hljs-keyword">go</span>:<span class="hljs-number">20</span> +<span class="hljs-number">0x1f6</span>main.main()        /Users/wangpeng/Projects/golang/src/offer/note/ab_test_func.<span class="hljs-keyword">go</span>:<span class="hljs-number">32</span> +<span class="hljs-number">0x20</span></code></pre><p><a href="https://github.com/weitrue/note/blob/master/go/collections/maps.go">https://github.com/weitrue/note/blob/master/go/collections/maps.go</a></p><h4 id="Rune"><a href="#Rune" class="headerlink" title="Rune"></a>Rune</h4><p>å­—ç¬¦ä¸²åœ¨UTF-8ç¼–ç ä¸­ï¼Œä¸€ä¸ªä¸­æ–‡å ä¸‰ä¸ªå­—èŠ‚ï¼Œ</p><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">strByte</span><span class="hljs-params">(s <span class="hljs-keyword">string</span>)</span></span>  &#123;<span class="hljs-keyword">if</span> s == <span class="hljs-string">&quot;&quot;</span> &#123;s = <span class="hljs-string">&quot;yes,æˆ‘å–œæ¬¢ä½ ï¼&quot;</span>&#125;<span class="hljs-keyword">for</span> i, ch := <span class="hljs-keyword">range</span> []<span class="hljs-keyword">byte</span>(s) &#123;fmt.Printf(<span class="hljs-string">&quot;(%d, %X)&quot;</span>, i, ch)&#125;fmt.Println()  <span class="hljs-keyword">for</span> i, ch := <span class="hljs-keyword">range</span> s &#123; <span class="hljs-comment">// ch is a rune å…¶å®æ˜¯å°†sè¿›è¡Œutf-8è§£ç ï¼Œè§£ç åçš„å­—ç¬¦ä¼šè½¬æˆunicode,ç„¶åæ”¾å…¥runeä¸­</span>fmt.Printf(<span class="hljs-string">&quot;(%d, %X)&quot;</span>, i, ch)&#125;fmt.Println()  bytes := []<span class="hljs-keyword">byte</span>(s)<span class="hljs-keyword">for</span> <span class="hljs-built_in">len</span>(bytes) &gt;<span class="hljs-number">0</span> &#123;ch, size := utf8.DecodeRune(bytes)bytes = bytes[size:]fmt.Printf(<span class="hljs-string">&quot;%c &quot;</span>, ch)&#125;fmt.Println()<span class="hljs-keyword">for</span> i, ch := <span class="hljs-keyword">range</span> []<span class="hljs-keyword">rune</span>(s) &#123;fmt.Printf(<span class="hljs-string">&quot;(%d, %X)&quot;</span>, i, ch)&#125;&#125;<span class="hljs-comment">// è¾“å‡º</span>(<span class="hljs-number">0</span>, <span class="hljs-number">79</span>)(<span class="hljs-number">1</span>, <span class="hljs-number">65</span>)(<span class="hljs-number">2</span>, <span class="hljs-number">73</span>)(<span class="hljs-number">3</span>, <span class="hljs-number">2</span>C)(<span class="hljs-number">4</span>, E6)(<span class="hljs-number">5</span>, <span class="hljs-number">88</span>)(<span class="hljs-number">6</span>, <span class="hljs-number">91</span>)(<span class="hljs-number">7</span>, E5)(<span class="hljs-number">8</span>, <span class="hljs-number">96</span>)(<span class="hljs-number">9</span>, <span class="hljs-number">9</span>C)(<span class="hljs-number">10</span>, E6)(<span class="hljs-number">11</span>, AC)(<span class="hljs-number">12</span>, A2)(<span class="hljs-number">13</span>, E4)(<span class="hljs-number">14</span>, BD)(<span class="hljs-number">15</span>, A0)(<span class="hljs-number">16</span>, EF)(<span class="hljs-number">17</span>, BC)(<span class="hljs-number">18</span>, <span class="hljs-number">81</span>)(<span class="hljs-number">0</span>, <span class="hljs-number">79</span>)(<span class="hljs-number">1</span>, <span class="hljs-number">65</span>)(<span class="hljs-number">2</span>, <span class="hljs-number">73</span>)(<span class="hljs-number">3</span>, <span class="hljs-number">2</span>C)(<span class="hljs-number">4</span>, <span class="hljs-number">6211</span>)(<span class="hljs-number">7</span>, <span class="hljs-number">559</span>C)(<span class="hljs-number">10</span>, <span class="hljs-number">6</span>B22)(<span class="hljs-number">13</span>, <span class="hljs-number">4</span>F60)(<span class="hljs-number">16</span>, FF01)y e s , æˆ‘ å–œ æ¬¢ ä½  ï¼(<span class="hljs-number">0</span>, <span class="hljs-number">79</span>)(<span class="hljs-number">1</span>, <span class="hljs-number">65</span>)(<span class="hljs-number">2</span>, <span class="hljs-number">73</span>)(<span class="hljs-number">3</span>, <span class="hljs-number">2</span>C)(<span class="hljs-number">4</span>, <span class="hljs-number">6211</span>)(<span class="hljs-number">5</span>, <span class="hljs-number">559</span>C)(<span class="hljs-number">6</span>, <span class="hljs-number">6</span>B22)(<span class="hljs-number">7</span>, <span class="hljs-number">4</span>F60)(<span class="hljs-number">8</span>, FF01)</code></pre><p>å› æ­¤åœ¨éœ€è¦ä½¿ç”¨rune</p><pre><code class="hljs go"><span class="hljs-comment">/**</span><span class="hljs-comment"> * Version: 1.0.0</span><span class="hljs-comment"> * Description: è·å–å­—ç¬¦ä¸²ä¸­ä¸é‡å¤å­—ä¸²æœ€å¤§é•¿åº¦</span><span class="hljs-comment"> **/</span><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">maxNoRepeated</span><span class="hljs-params">(s <span class="hljs-keyword">string</span>)</span> <span class="hljs-title">int</span></span> &#123;  <span class="hljs-comment">// ä»…æ”¯æŒè‹±æ–‡å­—ç¬¦</span><span class="hljs-comment">// å­—ç¬¦ä¸‹æ ‡æ˜ å°„</span>  chNotRepeatIndex := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-keyword">byte</span>] <span class="hljs-keyword">int</span>)<span class="hljs-comment">// æœ€é•¿ä¸²èµ·å§‹ä½ç½®</span>  start := <span class="hljs-number">0</span>  <span class="hljs-comment">// æœ€é•¿ä¸²é•¿åº¦</span>maxLength := <span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i, ch := <span class="hljs-keyword">range</span> []<span class="hljs-keyword">byte</span>(s) &#123; <span class="hljs-keyword">if</span> lastI, ok := chNotRepeatIndex[ch]; ok &amp;&amp; lastI &gt;= start &#123; start = lastI + <span class="hljs-number">1</span>&#125;<span class="hljs-keyword">if</span> i - start + <span class="hljs-number">1</span> &gt; maxLength &#123;maxLength = i - start + <span class="hljs-number">1</span>&#125;chNotRepeatIndex[ch] = i &#125; <span class="hljs-keyword">return</span> maxLength&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">maxNoRepeatedChn</span><span class="hljs-params">(s <span class="hljs-keyword">string</span>)</span> <span class="hljs-title">int</span></span> &#123;  <span class="hljs-comment">// é€šè¿‡rune</span>chNotRepeatIndex := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-keyword">rune</span>] <span class="hljs-keyword">int</span>)start := <span class="hljs-number">0</span>maxLength := <span class="hljs-number">0</span><span class="hljs-keyword">for</span> i, ch := <span class="hljs-keyword">range</span> []<span class="hljs-keyword">rune</span>(s) &#123;<span class="hljs-keyword">if</span> lastI, ok := chNotRepeatIndex[ch]; ok &amp;&amp; lastI &gt;= start &#123;start = lastI + <span class="hljs-number">1</span>&#125;<span class="hljs-keyword">if</span> i - start + <span class="hljs-number">1</span> &gt; maxLength &#123;maxLength = i - start + <span class="hljs-number">1</span>&#125;chNotRepeatIndex[ch] = i&#125;<span class="hljs-keyword">return</span> maxLength&#125;</code></pre><p><a href="https://github.com/weitrue/note/blob/master/go/collections/strings.go">https://github.com/weitrue/note/blob/master/go/collections/strings.go</a></p><h3 id="é¢å‘å¯¹è±¡"><a href="#é¢å‘å¯¹è±¡" class="headerlink" title="é¢å‘å¯¹è±¡"></a>é¢å‘å¯¹è±¡</h3><p>ä»…<em>æ”¯æŒå°è£…</em>ï¼Œä¸æ”¯æŒç»§æ‰¿å’Œå¤šæ€</p><pre><code class="hljs go"><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><span class="hljs-keyword">type</span> Node <span class="hljs-keyword">struct</span> &#123;Value       <span class="hljs-keyword">int</span>Left, Right *Node&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(node Node)</span> <span class="hljs-title">Print</span><span class="hljs-params">()</span></span> &#123;fmt.Print(node.Value, <span class="hljs-string">&quot; &quot;</span>)&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(node *Node)</span> <span class="hljs-title">SetValue</span><span class="hljs-params">(value <span class="hljs-keyword">int</span>)</span></span> &#123;  <span class="hljs-comment">// æ¥æ”¶è€…ä½¿ç”¨æŒ‡é’ˆæ‰å¯ä»¥æ”¹å˜ç»“æ„å†…å®¹</span><span class="hljs-keyword">if</span> node == <span class="hljs-literal">nil</span> &#123;fmt.Println(<span class="hljs-string">&quot;Setting Value to nil node. Ignored.&quot;</span>)<span class="hljs-keyword">return</span>&#125;node.Value = value&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(node Node)</span> <span class="hljs-title">SetValueNotUpdate</span><span class="hljs-params">(value <span class="hljs-keyword">int</span>)</span></span> &#123;  <span class="hljs-comment">// å€¼ä¼ é€’ nodeå†…å®¹æ— æ³•æ”¹å˜</span><span class="hljs-keyword">if</span> &amp;node == <span class="hljs-literal">nil</span> &#123;fmt.Println(<span class="hljs-string">&quot;Setting Value to nil node. Ignored.&quot;</span>)<span class="hljs-keyword">return</span>&#125;node.Value = value&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">CreateNode</span><span class="hljs-params">(value <span class="hljs-keyword">int</span>)</span> *<span class="hljs-title">Node</span></span> &#123;  <span class="hljs-comment">// è¿”å›å±€éƒ¨å˜é‡åœ°å€ï¼Œè¿™æ ·å˜é‡ä¼šåœ¨å †ä¸­å£°æ˜ï¼Œå¯ä»¥ä¼ åˆ°å¤–éƒ¨</span><span class="hljs-keyword">return</span> &amp;Node&#123;Value: value&#125;&#125;</code></pre><p>æ–¹æ³•æœ‰æ¥æ”¶è€…ï¼ˆå€¼/æŒ‡é’ˆæ¥æ”¶è€…ï¼‰ï¼Œéœ€è¦æ”¹å˜å†…å®¹å¿…é¡»ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…ï¼Œç»“æ„ä½“è¿‡å¤§è€ƒè™‘ç”¨æŒ‡é’ˆæ¥æ”¶è€…</p><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;  node := Node&#123;&#125;node.Print()node.SetValueNotUpdate(<span class="hljs-number">10</span>)node.Print()node.SetValue(<span class="hljs-number">10</span>)node.Print()&#125;<span class="hljs-comment">// è¾“å‡º</span><span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">10</span></code></pre><p>nilä¹Ÿå¯ä»¥è°ƒç”¨æ–¹æ³•</p><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;  <span class="hljs-keyword">var</span> pNode *NodepNode.SetValue(<span class="hljs-number">30</span>)&#125;<span class="hljs-comment">// è¾“å‡º</span>Setting Value to <span class="hljs-literal">nil</span> node. Ignored.</code></pre><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;  <span class="hljs-keyword">var</span> pNode *NodepNode.SetValueNotUpdate(<span class="hljs-number">20</span>)&#125;<span class="hljs-comment">// è¾“å‡º</span><span class="hljs-built_in">panic</span>: runtime error: invalid memory address or <span class="hljs-literal">nil</span> pointer dereference[signal SIGSEGV: segmentation violation code=<span class="hljs-number">0x1</span> addr=<span class="hljs-number">0x0</span> pc=<span class="hljs-number">0x109d0af</span>]goroutine <span class="hljs-number">1</span> [running]:main.main()        ï½/Projects/golang/src/offer/note/ab_test_func.<span class="hljs-keyword">go</span>:<span class="hljs-number">50</span> +<span class="hljs-number">0x1f</span></code></pre><p><a href="https://github.com/weitrue/note/blob/master/go/object/tree.go">https://github.com/weitrue/note/blob/master/go/object/tree.go</a></p><h4 id="å°è£…ä¸åŒ…"><a href="#å°è£…ä¸åŒ…" class="headerlink" title="å°è£…ä¸åŒ…"></a>å°è£…ä¸åŒ…</h4><p>é¦–å­—æ¯å¤§å†™:publicï¼Œé¦–å­—æ¯å°å†™:private</p><p>ä¸ºç»“æ„ä½“å®šä¹‰çš„æ–¹æ³•éœ€è¦æ”¾åœ¨ä¸€ä¸ªåŒ…ä¸‹ï¼ˆå¯ä»¥æ˜¯ä¸åŒçš„æ–‡ä»¶ï¼‰</p><p>æ‰©å……ç³»ç»Ÿç±»å‹æˆ–è€…è‡ªå®šä¹‰ç±»å‹æ–¹å¼ï¼šå®šä¹‰åˆ«åå’Œä½¿ç”¨ç»„åˆ</p><pre><code class="hljs go"><span class="hljs-keyword">type</span> Queue []<span class="hljs-keyword">int</span><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(q *Queue)</span><span class="hljs-title">Push</span><span class="hljs-params">(val <span class="hljs-keyword">int</span>)</span> <span class="hljs-title">error</span></span> &#123;*q = <span class="hljs-built_in">append</span>(*q, val)<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(q *Queue)</span><span class="hljs-title">Pop</span><span class="hljs-params">()</span> <span class="hljs-params">(<span class="hljs-keyword">int</span>,<span class="hljs-keyword">bool</span>)</span></span> &#123;<span class="hljs-keyword">if</span> q.IsEmpty() &#123;<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>, <span class="hljs-literal">false</span>&#125;head := (*q)[<span class="hljs-number">0</span>]*q = (*q)[<span class="hljs-number">1</span>:]<span class="hljs-keyword">return</span> head, <span class="hljs-literal">true</span>&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(q *Queue)</span><span class="hljs-title">IsEmpty</span><span class="hljs-params">()</span> <span class="hljs-title">bool</span></span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(*q) == <span class="hljs-number">0</span>&#125;</code></pre><pre><code class="hljs go"><span class="hljs-keyword">type</span> Node <span class="hljs-keyword">struct</span> &#123;Value       <span class="hljs-keyword">int</span>Left, Right *Node&#125;<span class="hljs-keyword">type</span> MyNode <span class="hljs-keyword">struct</span> &#123;node *Node&#125;</code></pre><p><a href="https://github.com/weitrue/note/blob/master/go/object/queue.go">https://github.com/weitrue/note/blob/master/go/object/queue.go</a></p><h3 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h3><h4 id="é¸­å­ç±»å‹"><a href="#é¸­å­ç±»å‹" class="headerlink" title="é¸­å­ç±»å‹"></a>é¸­å­ç±»å‹</h4><p>æ¥å£ç”±ä½¿ç”¨è€…å®šä¹‰</p><p>â€‹    Pythonçš„åœ¨è¿è¡Œæ—¶æ‰èƒ½çŸ¥é“è¢«è°ƒç”¨çš„å¯¹è±¡æ˜¯å¦å®ç°æŸä¸ªæ–¹æ³•</p><p>â€‹    Javaä¸­ç¼–è¯‘å‰ï¼Œè°ƒç”¨çš„å¯¹è±¡å°±å¿…é¡»å®ç°æ¥å£æ‰€æœ‰æ–¹æ³•</p><p>æ¥å£å˜é‡è‡ªå¸¦æŒ‡é’ˆï¼ˆå‚æ•°ä¼ é€’ä¹Ÿæ˜¯å€¼ä¼ é€’ï¼‰ï¼Œå› æ­¤å‡ ä¹ä¸éœ€è¦ä½¿ç”¨æ¥å£æŒ‡é’ˆ    </p><p><img src="/images/Golang/interface.png"></p><pre><code class="hljs go"><span class="hljs-comment">// offer/note/interfaces/mock/duck.go</span><span class="hljs-keyword">package</span> mock<span class="hljs-keyword">type</span> Duck <span class="hljs-keyword">struct</span> &#123;Name <span class="hljs-keyword">string</span>&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(d *Duck)</span> <span class="hljs-title">GetName</span><span class="hljs-params">()</span> <span class="hljs-title">string</span></span> &#123;  <span class="hljs-comment">// å®ç°è€…æ²¡æœ‰æŒ‡æ˜å®ç°äº†å“ªä¸ªæ¥å£</span><span class="hljs-keyword">if</span> d.Name != <span class="hljs-string">&quot;&quot;</span> &#123;<span class="hljs-keyword">return</span> d.Name&#125; <span class="hljs-keyword">else</span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-string">&quot;è¿™æ˜¯ä¸€ä¸ªé¸­å­ï¼&quot;</span>&#125;&#125;<span class="hljs-comment">// offer/note/interfaces/duckI.go</span><span class="hljs-keyword">package</span> interfaces<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><span class="hljs-keyword">type</span> DuckI <span class="hljs-keyword">interface</span> &#123;  <span class="hljs-comment">// ä½¿ç”¨æ¥å£è€… å®šä¹‰æ–¹æ³•</span>GetName() <span class="hljs-keyword">string</span>&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">FindDuck</span><span class="hljs-params">(d DuckI)</span></span>  &#123; <span class="hljs-comment">// æ¥å£å˜é‡è‡ªå¸¦æŒ‡é’ˆ</span>name := d.GetName()fmt.Println(name)&#125;<span class="hljs-comment">// offer/note/main.go</span><span class="hljs-keyword">package</span> main<span class="hljs-keyword">import</span> (<span class="hljs-string">&quot;offer/note/interfaces&quot;</span><span class="hljs-string">&quot;offer/note/interfaces/mock&quot;</span>)<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;  interfaces.FindDuck(&amp;mock.Duck&#123;&#125;)  interfaces.FindDuck(&amp;mock.Duck&#123;Name:<span class="hljs-string">&quot;è¿™æ˜¯ä¸€åªå‡é¸­å­&quot;</span>&#125;)&#125;<span class="hljs-comment">// è¾“å‡º</span>è¿™æ˜¯ä¸€ä¸ªé¸­å­ï¼è¿™æ˜¯ä¸€åªå‡é¸­å­</code></pre><h4 id="ä»»ä½•ç±»å‹"><a href="#ä»»ä½•ç±»å‹" class="headerlink" title="ä»»ä½•ç±»å‹"></a>ä»»ä½•ç±»å‹</h4><p><code>interface&#123;&#125;</code></p><pre><code class="hljs go"><span class="hljs-keyword">type</span> Queue []<span class="hljs-keyword">interface</span>&#123;&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(q *Queue)</span><span class="hljs-title">Push</span><span class="hljs-params">(val <span class="hljs-keyword">interface</span>&#123;&#125;)</span> <span class="hljs-title">error</span></span> &#123;*q = <span class="hljs-built_in">append</span>(*q, val)<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(q *Queue)</span><span class="hljs-title">Pop</span><span class="hljs-params">()</span> <span class="hljs-params">(<span class="hljs-keyword">interface</span>&#123;&#125;,<span class="hljs-keyword">bool</span>)</span></span> &#123;<span class="hljs-keyword">if</span> q.IsEmpty() &#123;<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>, <span class="hljs-literal">false</span>&#125;head := (*q)[<span class="hljs-number">0</span>]*q = (*q)[<span class="hljs-number">1</span>:]<span class="hljs-keyword">return</span> head, <span class="hljs-literal">true</span>&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(q *Queue)</span><span class="hljs-title">IsEmpty</span><span class="hljs-params">()</span> <span class="hljs-title">bool</span></span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(*q) == <span class="hljs-number">0</span>&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;  q := interfaces.Queue&#123;&#125;_ = q.Push(<span class="hljs-string">&quot;asd&quot;</span>)_ = q.Push(<span class="hljs-number">123</span>)<span class="hljs-keyword">if</span> v, ok := q.Pop(); ok &#123;fmt.Println(v)&#125;<span class="hljs-keyword">if</span> v, ok := q.Pop(); ok &#123;fmt.Println(v)&#125;&#125;<span class="hljs-comment">// è¾“å‡º</span>asd<span class="hljs-number">123</span></code></pre><h4 id="ç»„åˆ"><a href="#ç»„åˆ" class="headerlink" title="ç»„åˆ"></a>ç»„åˆ</h4><pre><code class="hljs go"><span class="hljs-comment">// offer/note/interfaces/animals.go</span><span class="hljs-keyword">package</span> animal<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><span class="hljs-keyword">type</span> AnimalsI <span class="hljs-keyword">interface</span> &#123;DuckIBehaviorI&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">DuckBehavior</span><span class="hljs-params">(a AnimalsI)</span></span>  &#123;name := a.GetName()dark := a.Shout(<span class="hljs-string">&quot;å‘±å‘±ä¹±å«&quot;</span>)fmt.Println(name, dark)  fmt.Println(a.String())&#125;<span class="hljs-comment">// offer/note/interfaces/behaviorI.go</span><span class="hljs-keyword">package</span> animal<span class="hljs-keyword">type</span> BehaviorI <span class="hljs-keyword">interface</span> &#123;Shout(dark <span class="hljs-keyword">string</span>) <span class="hljs-keyword">string</span>&#125;<span class="hljs-comment">// offer/note/interfaces/duckI.go</span><span class="hljs-keyword">package</span> animal<span class="hljs-keyword">type</span> DuckI <span class="hljs-keyword">interface</span> &#123;GetName() <span class="hljs-keyword">string</span>&#125;<span class="hljs-comment">// offer/note/interfaces/mock/duck.go</span><span class="hljs-keyword">package</span> mock<span class="hljs-keyword">type</span> Duck <span class="hljs-keyword">struct</span> &#123;name <span class="hljs-keyword">string</span>bark <span class="hljs-keyword">string</span>&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(d *Duck)</span> <span class="hljs-title">GetName</span><span class="hljs-params">()</span> <span class="hljs-title">string</span></span> &#123;<span class="hljs-keyword">if</span> d.name != <span class="hljs-string">&quot;&quot;</span> &#123;<span class="hljs-keyword">return</span> d.name&#125; <span class="hljs-keyword">else</span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-string">&quot;è¿™æ˜¯ä¸€ä¸ªé¸­å­&quot;</span>&#125;&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(d *Duck)</span> <span class="hljs-title">Shout</span><span class="hljs-params">(dark <span class="hljs-keyword">string</span>)</span> <span class="hljs-title">string</span></span> &#123;<span class="hljs-keyword">if</span> d.bark == <span class="hljs-string">&quot;&quot;</span>&#123;<span class="hljs-keyword">return</span> <span class="hljs-string">&quot;å‘±å‘±å‘±å‘±çš„å«&quot;</span>&#125;<span class="hljs-keyword">else</span> &#123;<span class="hljs-keyword">return</span> dark&#125;&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(d *Duck)</span> <span class="hljs-title">String</span><span class="hljs-params">()</span> <span class="hljs-title">string</span></span> &#123;<span class="hljs-keyword">return</span> fmt.Sprintf(<span class="hljs-string">&quot;Duck: &#123; name = %s, bark = %s &#125;&quot;</span>, d.name, d.bark)&#125;<span class="hljs-comment">// è¾“å‡º</span>è¿™æ˜¯ä¸€ä¸ªé¸­å­ å‘±å‘±å‘±å‘±çš„å«Duck: &#123; name = , bark =  &#125;</code></pre><p><a href="https://github.com/weitrue/note/tree/master/go/interfaces">https://github.com/weitrue/note/tree/master/go/interfaces</a></p><h4 id="å¸¸ç”¨æ¥å£"><a href="#å¸¸ç”¨æ¥å£" class="headerlink" title="å¸¸ç”¨æ¥å£"></a>å¸¸ç”¨æ¥å£</h4><ul><li><code>Stringer</code>ç›¸å½“äºtoString()</li></ul><pre><code class="hljs go"><span class="hljs-keyword">type</span> Stringer <span class="hljs-keyword">interface</span> &#123;String() <span class="hljs-keyword">string</span>&#125;</code></pre><ul><li><code>Reader</code></li><li><code>Writer</code></li></ul><pre><code class="hljs go"><span class="hljs-comment">// io/io.go</span><span class="hljs-comment">// Reader is the interface that wraps the basic Read method.</span><span class="hljs-comment">//</span><span class="hljs-comment">// Read reads up to len(p) bytes into p. It returns the number of bytes</span><span class="hljs-comment">// read (0 &lt;= n &lt;= len(p)) and any error encountered. Even if Read</span><span class="hljs-comment">// returns n &lt; len(p), it may use all of p as scratch space during the call.</span><span class="hljs-comment">// If some data is available but not len(p) bytes, Read conventionally</span><span class="hljs-comment">// returns what is available instead of waiting for more.</span><span class="hljs-comment">//</span><span class="hljs-comment">// When Read encounters an error or end-of-file condition after</span><span class="hljs-comment">// successfully reading n &gt; 0 bytes, it returns the number of</span><span class="hljs-comment">// bytes read. It may return the (non-nil) error from the same call</span><span class="hljs-comment">// or return the error (and n == 0) from a subsequent call.</span><span class="hljs-comment">// An instance of this general case is that a Reader returning</span><span class="hljs-comment">// a non-zero number of bytes at the end of the input stream may</span><span class="hljs-comment">// return either err == EOF or err == nil. The next Read should</span><span class="hljs-comment">// return 0, EOF.</span><span class="hljs-comment">//</span><span class="hljs-comment">// Callers should always process the n &gt; 0 bytes returned before</span><span class="hljs-comment">// considering the error err. Doing so correctly handles I/O errors</span><span class="hljs-comment">// that happen after reading some bytes and also both of the</span><span class="hljs-comment">// allowed EOF behaviors.</span><span class="hljs-comment">//</span><span class="hljs-comment">// Implementations of Read are discouraged from returning a</span><span class="hljs-comment">// zero byte count with a nil error, except when len(p) == 0.</span><span class="hljs-comment">// Callers should treat a return of 0 and nil as indicating that</span><span class="hljs-comment">// nothing happened; in particular it does not indicate EOF.</span><span class="hljs-comment">//</span><span class="hljs-comment">// Implementations must not retain p.</span><span class="hljs-keyword">type</span> Reader <span class="hljs-keyword">interface</span> &#123;Read(p []<span class="hljs-keyword">byte</span>) (n <span class="hljs-keyword">int</span>, err error)&#125;<span class="hljs-comment">// Writer is the interface that wraps the basic Write method.</span><span class="hljs-comment">//</span><span class="hljs-comment">// Write writes len(p) bytes from p to the underlying data stream.</span><span class="hljs-comment">// It returns the number of bytes written from p (0 &lt;= n &lt;= len(p))</span><span class="hljs-comment">// and any error encountered that caused the write to stop early.</span><span class="hljs-comment">// Write must return a non-nil error if it returns n &lt; len(p).</span><span class="hljs-comment">// Write must not modify the slice data, even temporarily.</span><span class="hljs-comment">//</span><span class="hljs-comment">// Implementations must not retain p.</span><span class="hljs-keyword">type</span> Writer <span class="hljs-keyword">interface</span> &#123;Write(p []<span class="hljs-keyword">byte</span>) (n <span class="hljs-keyword">int</span>, err error)&#125;<span class="hljs-comment">// ReadWriter is the interface that groups the basic Read and Write methods.</span><span class="hljs-keyword">type</span> ReadWriter <span class="hljs-keyword">interface</span> &#123;ReaderWriter&#125;</code></pre><h3 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h3><ul><li>å‡½æ•°å¯ä»¥æœ‰å¤šä¸ªè¿”å›å€¼ï¼Œå¹¶ä¸”è¿™äº›è¿”å›å€¼å¯ä»¥èµ·åˆ«åï¼ˆåˆ«åå¤šç”¨äºç®€å•å‡½æ•°ï¼‰ï¼Œåˆ«åä¸è°ƒç”¨è€…çš„ç”³æ˜å˜é‡å¹¶æ— å…³è”</li></ul><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">eval</span><span class="hljs-params">(a, b <span class="hljs-keyword">int</span>, op <span class="hljs-keyword">string</span>)</span> <span class="hljs-params">(<span class="hljs-keyword">int</span>, error)</span></span> &#123;<span class="hljs-keyword">switch</span> op &#123;<span class="hljs-keyword">case</span> <span class="hljs-string">&quot;+&quot;</span>:<span class="hljs-keyword">return</span>  a + b, <span class="hljs-literal">nil</span><span class="hljs-keyword">case</span> <span class="hljs-string">&quot;-&quot;</span>:<span class="hljs-keyword">return</span> a - b, <span class="hljs-literal">nil</span><span class="hljs-keyword">case</span> <span class="hljs-string">&quot;*&quot;</span>:<span class="hljs-keyword">return</span> a * b, <span class="hljs-literal">nil</span><span class="hljs-keyword">case</span> <span class="hljs-string">&quot;/&quot;</span>:r, _ := div(a, b)<span class="hljs-keyword">return</span> r, <span class="hljs-literal">nil</span><span class="hljs-keyword">default</span>:<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>, fmt.Errorf(<span class="hljs-string">&quot;unsupported operation&quot;</span>)&#125;&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">div</span><span class="hljs-params">(a, b <span class="hljs-keyword">int</span>)</span> <span class="hljs-params">(q, r <span class="hljs-keyword">int</span>)</span></span> &#123;<span class="hljs-keyword">return</span> a/b, a%b&#125;</code></pre><ul><li><em>ä¸€ç­‰å…¬æ°‘</em> :å˜é‡ã€å‚æ•°ã€è¿”å›å€¼å‡å¯ä»¥æ˜¯å‡½æ•°</li></ul><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<span class="hljs-keyword">import</span> (<span class="hljs-string">&quot;fmt&quot;</span><span class="hljs-string">&quot;math&quot;</span><span class="hljs-string">&quot;reflect&quot;</span><span class="hljs-string">&quot;runtime&quot;</span>)<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">apply</span><span class="hljs-params">(op <span class="hljs-keyword">func</span>(<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>)</span> <span class="hljs-title">float64</span>, <span class="hljs-title">a</span>, <span class="hljs-title">b</span> <span class="hljs-title">int</span>) <span class="hljs-title">float64</span></span> &#123;<span class="hljs-comment">//</span>p := reflect.ValueOf(op).Pointer()opName := runtime.FuncForPC(p).Name()fmt.Printf(<span class="hljs-string">&quot;Calling function %s with params (%d, %d)\n&quot;</span>, opName, a, b)<span class="hljs-keyword">return</span> op(<span class="hljs-keyword">int</span>(a), <span class="hljs-keyword">int</span>(b))&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">pow</span><span class="hljs-params">(a, b <span class="hljs-keyword">int</span>)</span> <span class="hljs-title">float64</span></span> &#123;<span class="hljs-keyword">return</span> math.Pow(<span class="hljs-keyword">float64</span>(a), <span class="hljs-keyword">float64</span>(b))&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;fmt.Println(apply(pow, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>))<span class="hljs-comment">// åŒ¿åå‡½æ•°æ–¹å¼</span>fmt.Println(apply(<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(f, f2 <span class="hljs-keyword">int</span>)</span> <span class="hljs-title">float64</span></span> &#123;<span class="hljs-keyword">return</span> math.Pow(<span class="hljs-keyword">float64</span>(f), <span class="hljs-keyword">float64</span>(f2))&#125;, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>))&#125;<span class="hljs-comment">// æ‰“å°ç»“æœ</span>Calling function main.pow with params (<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)<span class="hljs-number">81</span>Calling function main.main.func1 with params (<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)<span class="hljs-number">81</span></code></pre><ul><li>å¯å˜å‚æ•°åˆ—è¡¨ï¼Œç±»ä¼¼äºPythonä¸­çš„*args</li></ul><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">sum</span><span class="hljs-params">(nums ...<span class="hljs-keyword">int</span>)</span> <span class="hljs-title">int</span></span> &#123;<span class="hljs-comment">// å‡½æ•°å¯å˜å‚æ•°åˆ—è¡¨</span>sum := <span class="hljs-number">0</span><span class="hljs-keyword">for</span> i := <span class="hljs-keyword">range</span> nums &#123;sum += nums[i]&#125;<span class="hljs-keyword">return</span> sum&#125;</code></pre><p><a href="https://github.com/weitrue/note/blob/master/go/functions/func.go">https://github.com/weitrue/note/blob/master/go/functions/func.go</a></p><h4 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h4><p><img src="/images/Golang/func.png"></p><p>å…¶ä¸­ï¼Œ<code>func(i int)</code>ä¸­<code>i</code>ä¸ºå±€éƒ¨å˜é‡ï¼Œ<code>sum</code>ä¸ºè‡ªç”±å˜é‡</p><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">adder</span><span class="hljs-params">()</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-keyword">int</span>)</span> <span class="hljs-title">int</span></span> &#123;sum := <span class="hljs-number">0</span><span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(i <span class="hljs-keyword">int</span>)</span> <span class="hljs-title">int</span></span> &#123;sum += i<span class="hljs-keyword">return</span> sum&#125;&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">TestAdder</span><span class="hljs-params">()</span></span>  &#123;a := adder()<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span> ; i++ &#123;fmt.Printf(<span class="hljs-string">&quot;0 + ... + %d = %d \n&quot;</span>, i, a(i))&#125;&#125;<span class="hljs-comment">// è¾“å‡º</span><span class="hljs-number">0</span> + ... + <span class="hljs-number">0</span> = <span class="hljs-number">0</span> <span class="hljs-number">0</span> + ... + <span class="hljs-number">1</span> = <span class="hljs-number">1</span> <span class="hljs-number">0</span> + ... + <span class="hljs-number">2</span> = <span class="hljs-number">3</span> <span class="hljs-number">0</span> + ... + <span class="hljs-number">3</span> = <span class="hljs-number">6</span> <span class="hljs-number">0</span> + ... + <span class="hljs-number">4</span> = <span class="hljs-number">10</span> <span class="hljs-number">0</span> + ... + <span class="hljs-number">5</span> = <span class="hljs-number">15</span> <span class="hljs-number">0</span> + ... + <span class="hljs-number">6</span> = <span class="hljs-number">21</span> <span class="hljs-number">0</span> + ... + <span class="hljs-number">7</span> = <span class="hljs-number">28</span> <span class="hljs-number">0</span> + ... + <span class="hljs-number">8</span> = <span class="hljs-number">36</span> <span class="hljs-number">0</span> + ... + <span class="hljs-number">9</span> = <span class="hljs-number">45</span> <span class="hljs-comment">// æ­£ç»Ÿå‡½æ•°å¼ç¼–ç¨‹</span><span class="hljs-keyword">type</span> iAdder <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(<span class="hljs-keyword">int</span>)</span> <span class="hljs-params">(<span class="hljs-keyword">int</span>, iAdder)</span></span><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">iAdd</span><span class="hljs-params">(base <span class="hljs-keyword">int</span>)</span> <span class="hljs-title">iAdder</span></span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(v <span class="hljs-keyword">int</span>)</span> <span class="hljs-params">(<span class="hljs-keyword">int</span>, iAdder)</span></span> &#123;<span class="hljs-keyword">return</span> base +v, iAdd(base+v)&#125;&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">TestAdder</span><span class="hljs-params">()</span></span> &#123;a2 := iAdd(<span class="hljs-number">0</span>)<span class="hljs-keyword">var</span> s <span class="hljs-keyword">int</span><span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt;<span class="hljs-number">10</span>; i++ &#123;s, a2 = a2(i)fmt.Printf(<span class="hljs-string">&quot;0 + ... + %d = %d \n&quot;</span>, i, s)&#125;&#125;<span class="hljs-comment">// è¾“å‡º</span><span class="hljs-number">0</span> + ... + <span class="hljs-number">1</span> = <span class="hljs-number">1</span> <span class="hljs-number">0</span> + ... + <span class="hljs-number">2</span> = <span class="hljs-number">3</span> <span class="hljs-number">0</span> + ... + <span class="hljs-number">3</span> = <span class="hljs-number">6</span> <span class="hljs-number">0</span> + ... + <span class="hljs-number">4</span> = <span class="hljs-number">10</span> <span class="hljs-number">0</span> + ... + <span class="hljs-number">5</span> = <span class="hljs-number">15</span> <span class="hljs-number">0</span> + ... + <span class="hljs-number">6</span> = <span class="hljs-number">21</span> <span class="hljs-number">0</span> + ... + <span class="hljs-number">7</span> = <span class="hljs-number">28</span> <span class="hljs-number">0</span> + ... + <span class="hljs-number">8</span> = <span class="hljs-number">36</span> <span class="hljs-number">0</span> + ... + <span class="hljs-number">9</span> = <span class="hljs-number">45</span></code></pre><p><a href="https://github.com/weitrue/note/blob/master/go/functions/closure.go">https://github.com/weitrue/note/blob/master/go/functions/closure.go</a></p><h5 id="Pythonä¸­çš„é—­åŒ…"><a href="#Pythonä¸­çš„é—­åŒ…" class="headerlink" title="Pythonä¸­çš„é—­åŒ…"></a>Pythonä¸­çš„é—­åŒ…</h5><p>PythonåŸç”Ÿæ”¯æŒé—­åŒ…</p><p><code>__closure__</code>å¯ä»¥æŸ¥çœ‹é—­åŒ…å†…å®¹</p><pre><code class="hljs Python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">adder</span>():</span>    s = <span class="hljs-number">0</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">f</span>(<span class="hljs-params">v: <span class="hljs-built_in">int</span></span>):</span>        <span class="hljs-keyword">nonlocal</span> s        s += v        <span class="hljs-keyword">return</span> s    <span class="hljs-keyword">return</span> f<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:    a = adder()    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):        print(i, a(i), a.__closure__)        <span class="hljs-comment"># è¾“å‡º</span><span class="hljs-number">0</span> <span class="hljs-number">0</span> (&lt;cell at <span class="hljs-number">0x7f9048e7d3d0</span>: <span class="hljs-built_in">int</span> <span class="hljs-built_in">object</span> at <span class="hljs-number">0x106eb6290</span>&gt;,)<span class="hljs-number">1</span> <span class="hljs-number">1</span> (&lt;cell at <span class="hljs-number">0x7f9048e7d3d0</span>: <span class="hljs-built_in">int</span> <span class="hljs-built_in">object</span> at <span class="hljs-number">0x106eb62b0</span>&gt;,)<span class="hljs-number">2</span> <span class="hljs-number">3</span> (&lt;cell at <span class="hljs-number">0x7f9048e7d3d0</span>: <span class="hljs-built_in">int</span> <span class="hljs-built_in">object</span> at <span class="hljs-number">0x106eb62f0</span>&gt;,)<span class="hljs-number">3</span> <span class="hljs-number">6</span> (&lt;cell at <span class="hljs-number">0x7f9048e7d3d0</span>: <span class="hljs-built_in">int</span> <span class="hljs-built_in">object</span> at <span class="hljs-number">0x106eb6350</span>&gt;,)<span class="hljs-number">4</span> <span class="hljs-number">10</span> (&lt;cell at <span class="hljs-number">0x7f9048e7d3d0</span>: <span class="hljs-built_in">int</span> <span class="hljs-built_in">object</span> at <span class="hljs-number">0x106eb63d0</span>&gt;,)<span class="hljs-number">5</span> <span class="hljs-number">15</span> (&lt;cell at <span class="hljs-number">0x7f9048e7d3d0</span>: <span class="hljs-built_in">int</span> <span class="hljs-built_in">object</span> at <span class="hljs-number">0x106eb6470</span>&gt;,)<span class="hljs-number">6</span> <span class="hljs-number">21</span> (&lt;cell at <span class="hljs-number">0x7f9048e7d3d0</span>: <span class="hljs-built_in">int</span> <span class="hljs-built_in">object</span> at <span class="hljs-number">0x106eb6530</span>&gt;,)<span class="hljs-number">7</span> <span class="hljs-number">28</span> (&lt;cell at <span class="hljs-number">0x7f9048e7d3d0</span>: <span class="hljs-built_in">int</span> <span class="hljs-built_in">object</span> at <span class="hljs-number">0x106eb6610</span>&gt;,)<span class="hljs-number">8</span> <span class="hljs-number">36</span> (&lt;cell at <span class="hljs-number">0x7f9048e7d3d0</span>: <span class="hljs-built_in">int</span> <span class="hljs-built_in">object</span> at <span class="hljs-number">0x106eb6710</span>&gt;,)<span class="hljs-number">9</span> <span class="hljs-number">45</span> (&lt;cell at <span class="hljs-number">0x7f9048e7d3d0</span>: <span class="hljs-built_in">int</span> <span class="hljs-built_in">object</span> at <span class="hljs-number">0x106eb6830</span>&gt;,)</code></pre><h5 id="Javaä¸­çš„é—­åŒ…"><a href="#Javaä¸­çš„é—­åŒ…" class="headerlink" title="Javaä¸­çš„é—­åŒ…"></a>Javaä¸­çš„é—­åŒ…</h5><p>1.8ä»¥åï¼Œå¯ä»¥ä½¿ç”¨Functionæ¥å£å’ŒLambdaè¡¨è¾¾å¼å¯ä»¥åˆ›å»ºå‡½æ•°å¯¹è±¡ï¼›</p><p>1.8ä¹‹å‰ï¼Œå¯ä»¥ä½¿ç”¨Lambdaè¡¨è¾¾å¼æˆ–è€…åŒ¿åå†…éƒ¨ç±»ä¹Ÿå¯ä»¥å®ç°é—­åŒ…ï¼›</p><pre><code class="hljs Java"><span class="hljs-keyword">import</span> javax.xml.ws.Holder;<span class="hljs-keyword">import</span> java.util.function.Function;<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyTest</span> </span>&#123;    <span class="hljs-keyword">final</span> Holder&lt;Integer&gt; sum = <span class="hljs-keyword">new</span> Holder&lt;&gt;(<span class="hljs-number">0</span>);    <span class="hljs-keyword">public</span>  Function&lt;Integer, Integer&gt;testClosure()&#123;        <span class="hljs-comment">// é—­åŒ…  ä½¿ç”¨Functionæ¥å£å’ŒLambdaè¡¨è¾¾å¼å¯ä»¥åˆ›å»ºå‡½æ•°å¯¹è±¡</span>        <span class="hljs-keyword">return</span> (Integer value) -&gt; &#123;            sum.value += value;            <span class="hljs-keyword">return</span> sum.value;        &#125;;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;        MyTest mt = <span class="hljs-keyword">new</span> MyTest();        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;            System.out.println(i +<span class="hljs-string">&quot;, &quot;</span>+ mt.testClosure().apply(<span class="hljs-keyword">new</span> Integer(i)));        &#125;    &#125;&#125;</code></pre><h4 id="é—­åŒ…åº”ç”¨"><a href="#é—­åŒ…åº”ç”¨" class="headerlink" title="é—­åŒ…åº”ç”¨"></a>é—­åŒ…åº”ç”¨</h4><h6 id="ä¸ºå‡½æ•°å®ç°æ¥å£"><a href="#ä¸ºå‡½æ•°å®ç°æ¥å£" class="headerlink" title="ä¸ºå‡½æ•°å®ç°æ¥å£"></a>ä¸ºå‡½æ•°å®ç°æ¥å£</h6><h6 id="å®ç°å‡½æ•°éå†äºŒå‰æ ‘"><a href="#å®ç°å‡½æ•°éå†äºŒå‰æ ‘" class="headerlink" title="å®ç°å‡½æ•°éå†äºŒå‰æ ‘"></a>å®ç°å‡½æ•°éå†äºŒå‰æ ‘</h6><h3 id="defer-recoveråœ¨ç®€å•webæœåŠ¡åº”ç”¨"><a href="#defer-recoveråœ¨ç®€å•webæœåŠ¡åº”ç”¨" class="headerlink" title="defer/recoveråœ¨ç®€å•webæœåŠ¡åº”ç”¨"></a>defer/recoveråœ¨ç®€å•webæœåŠ¡åº”ç”¨</h3><p>ä»£ç ç»“æ„<img src="/images/Golang/web.jpg"></p><p><a href="https://github.com/weitrue/note/tree/master/go/web/">https://github.com/weitrue/note/tree/master/go/web/</a></p><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p><em>è¡¨æ ¼é©±åŠ¨</em>æµ‹è¯•</p><pre><code class="hljs golang"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">TestMaxNoRepeatedZhn</span><span class="hljs-params">(t *testing.T)</span></span> &#123;tests := []<span class="hljs-keyword">struct</span>&#123;s <span class="hljs-keyword">string</span>ans <span class="hljs-keyword">int</span>&#125;&#123;&#123;<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-number">1</span>&#125;,&#123;<span class="hljs-string">&quot;yes, æˆ‘çˆ±gogogo&quot;</span>, <span class="hljs-number">9</span>&#125;,&#123;<span class="hljs-string">&quot;abcadcb&quot;</span>, <span class="hljs-number">4</span>&#125;,&#123;<span class="hljs-string">&quot;é»‘åŒ–è‚¥æŒ¥å‘å‘ç°ä¼šèŠ±é£ç°åŒ–è‚¥æŒ¥å‘å‘é»‘ä¼šé£èŠ±&quot;</span>, <span class="hljs-number">8</span>&#125;,&#125;<span class="hljs-keyword">for</span> _, tt := <span class="hljs-keyword">range</span> tests &#123;act := MaxNoRepeatedZhn(tt.s)<span class="hljs-keyword">if</span> act != tt.ans &#123;t.Errorf(<span class="hljs-string">&quot;get %d for input %s , but expect %d&quot;</span>, act, tt.s, tt.ans)&#125;&#125;&#125;<span class="hljs-comment">// è¾“å‡º</span>=== RUN   TestMaxNoRepeatedZhn--- PASS: TestMaxNoRepeatedZhn (<span class="hljs-number">0.00</span>s)PASS</code></pre><h4 id="è¦†ç›–æµ‹è¯•"><a href="#è¦†ç›–æµ‹è¯•" class="headerlink" title="è¦†ç›–æµ‹è¯•"></a>è¦†ç›–æµ‹è¯•</h4><p><code>go tool cover</code></p><pre><code class="hljs zsh">Usage of <span class="hljs-string">&#x27;go tool cover&#x27;</span>:Given a coverage profile produced by <span class="hljs-string">&#x27;go test&#x27;</span>:        go <span class="hljs-built_in">test</span> -coverprofile=c.outOpen a web browser displaying annotated <span class="hljs-built_in">source</span> code:        go tool cover -html=c.out    <span class="hljs-comment"># å¸¸ç”¨</span>Write out an HTML file instead of launching a web browser:        go tool cover -html=c.out -o coverage.htmlDisplay coverage percentages to stdout <span class="hljs-keyword">for</span> each <span class="hljs-keyword">function</span>:        go tool cover -func=c.outFinally, to generate modified <span class="hljs-built_in">source</span> code with coverage annotations(what go <span class="hljs-built_in">test</span> -cover does):        go tool cover -mode=<span class="hljs-built_in">set</span> -var=CoverageVariableName program.goFlags:  -V    <span class="hljs-built_in">print</span> version and <span class="hljs-built_in">exit</span>  -func string        output coverage profile information <span class="hljs-keyword">for</span> each <span class="hljs-keyword">function</span>  -html string        generate HTML representation of coverage profile  -mode string        coverage mode: <span class="hljs-built_in">set</span>, count, atomic  -o string        file <span class="hljs-keyword">for</span> output; default: stdout  -var string        name of coverage variable to generate (default <span class="hljs-string">&quot;GoCover&quot;</span>)  Only one of -html, -func, or -mode may be <span class="hljs-built_in">set</span>.</code></pre><h4 id="Benchmark"><a href="#Benchmark" class="headerlink" title="Benchmark"></a><code>Benchmark</code></h4><pre><code class="hljs golang"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">BenchmarkMaxNoRepeatedZhn</span><span class="hljs-params">(b *testing.B)</span></span> &#123;s := <span class="hljs-string">&quot;é»‘åŒ–è‚¥æŒ¥å‘å‘ç°ä¼šèŠ±é£ç°åŒ–è‚¥æŒ¥å‘å‘é»‘ä¼šé£èŠ±&quot;</span>ans := <span class="hljs-number">8</span><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; b.N; i++ &#123;act := MaxNoRepeatedZhn(s)<span class="hljs-keyword">if</span> act != ans &#123;b.Errorf(<span class="hljs-string">&quot;get %d for input %s , but expect %d&quot;</span>, act, s, ans)&#125;&#125;&#125;<span class="hljs-comment">// è¾“å‡º</span>goos: darwingoarch: amd64pkg: offer/note/collectionsBenchmarkMaxNoRepeatedZhnBenchmarkMaxNoRepeatedZhn<span class="hljs-number">-8</span>    <span class="hljs-number">1097594</span>      <span class="hljs-number">1024</span> ns/opPASS</code></pre><p><a href="https://github.com/weitrue/note/collections/strings_test.go">https://github.com/weitrue/note/collections/strings_test.go</a></p><h4 id="pprofæ€§èƒ½æµ‹è¯•"><a href="#pprofæ€§èƒ½æµ‹è¯•" class="headerlink" title="pprofæ€§èƒ½æµ‹è¯•"></a>pprofæ€§èƒ½æµ‹è¯•</h4><pre><code class="hljs zsh">xxx@xxxdeMacBook-Pro î‚° ~/Projects/golang/src/offer/note/collections master Â±âœš go <span class="hljs-built_in">test</span> -bench . -cpuprofile cpu.outgoos: darwingoarch: amd64pkg: offer/note/collectionsBenchmarkMaxNoRepeatedZhn-8      1286594               934 ns/opPASSok      offer/note/collections  2.656sxxx@xxxdeMacBook-Pro î‚° ~/Projects/golang/src/offer/note/collections master Â±âœš go tool pprof cpu.out               Type: cpuTime: Mar 2, 2021 at 6:03pm (CST)Duration: 2.34s, Total samples = 2.05s (87.57%)Entering interactive mode (<span class="hljs-built_in">type</span> <span class="hljs-string">&quot;help&quot;</span> <span class="hljs-keyword">for</span> commands, <span class="hljs-string">&quot;o&quot;</span> <span class="hljs-keyword">for</span> options)(pprof) webfailed to execute dot. Is Graphviz installed? Error: <span class="hljs-built_in">exec</span>: <span class="hljs-string">&quot;dot&quot;</span>: executable file not found <span class="hljs-keyword">in</span> <span class="hljs-variable">$PATH</span>(pprof)</code></pre><p>â˜<code>failed to execute dot. Is Graphviz installed? Error: exec: &quot;dot&quot;: executable file not found in $PATH</code>æ˜¯å› ä¸ºç”µè„‘æœªå®‰è£…ç”Ÿæˆ.svgæ–‡ä»¶çš„å·¥å…·<code>Graphviz</code></p><h5 id="å®‰è£…Graphviz"><a href="#å®‰è£…Graphviz" class="headerlink" title="å®‰è£…Graphviz"></a>å®‰è£…<code>Graphviz</code></h5><pre><code class="hljs zsh">brew install graphvizxxx@xxxdeMacBook-Pro î‚° ~/Projects/golang/src/github.com î‚° brew install graphvizError:  homebrew-core is a shallow <span class="hljs-built_in">clone</span>.  homebrew-cask is a shallow <span class="hljs-built_in">clone</span>.To `brew update`, first run:  git -C /usr/<span class="hljs-built_in">local</span>/Homebrew/Library/Taps/homebrew/homebrew-core fetch --unshallow  git -C /usr/<span class="hljs-built_in">local</span>/Homebrew/Library/Taps/homebrew/homebrew-cask fetch --unshallowThese commands may take a few minutes to run due to the large size of the repositories.This restriction has been made on GitHub<span class="hljs-string">&#x27;s request because updating shallow</span><span class="hljs-string">clones is an extremely expensive operation due to the tree layout and traffic of</span><span class="hljs-string">Homebrew/homebrew-core and Homebrew/homebrew-cask. We don&#x27;</span>t <span class="hljs-keyword">do</span> this <span class="hljs-keyword">for</span> youautomatically to avoid repeatedly performing an expensive unshallow operation <span class="hljs-keyword">in</span>CI systems (<span class="hljs-built_in">which</span> should instead be fixed to not use shallow clones). Sorry <span class="hljs-keyword">for</span>the inconvenience!==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/libpng-1.6.37.big_sur.bottle.tar.gz<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/freetype-2.10.4.big_sur.bottle.tar.gz<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/fontconfig-2.13.1.big_sur.bottle.tar.gz<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/jpeg-9d.big_sur.bottle.tar.gz<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/libtiff-4.1.0_1.big_sur.bottle.tar.gz<span class="hljs-comment">#########################################                                 58.1%</span>curl: (56) LibreSSL SSL_read: SSL_ERROR_SYSCALL, errno 54Error: Failed to download resource <span class="hljs-string">&quot;libtiff&quot;</span>Download failed: https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/libtiff-4.1.0_1.big_sur.bottle.tar.gzWarning: Bottle installation failed: building from <span class="hljs-built_in">source</span>.==&gt; Downloading https://download.osgeo.org/libtiff/tiff-4.1.0.tar.gz<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/webp-1.1.0.big_sur.bottle.tar.gz<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/gd-2.3.0.big_sur.bottle.tar.gz<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/libffi-3.3.big_sur.bottle.tar.gz<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/pcre-8.44.big_sur.bottle.tar.gz<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/glib-2.66.2_1.big_sur.bottle.tar.gz<span class="hljs-comment">##########                                                                14.5%</span>curl: (56) LibreSSL SSL_read: SSL_ERROR_SYSCALL, errno 54Error: Failed to download resource <span class="hljs-string">&quot;glib&quot;</span>Download failed: https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/glib-2.66.2_1.big_sur.bottle.tar.gzWarning: Bottle installation failed: building from <span class="hljs-built_in">source</span>.==&gt; Downloading https://raw.githubusercontent.com/Homebrew/formula-patches/6164294a75541c278f3863b111791376caa3ad26/glib/hardcoded-paths.diff<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://download.gnome.org/sources/glib/2.66/glib-2.66.2.tar.xz==&gt; Downloading from https://mirrors.ustc.edu.cn/gnome/sources/glib/2.66/glib-2.66.2.tar.xz<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/jasper-2.0.22.big_sur.bottle.tar.gz==&gt; Downloading from https://d29vzk4ow07wi7.cloudfront.net/ad3715537b3001b9a8924896e5c4e7eb90b21bb37e7171d964de2008edb13910?response-content-disposition=attachment%3Bfilename%3D%22jasper-2.0.22.big_sur.bo<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/netpbm-10.86.17.big_sur.bottle.tar.gz==&gt; Downloading from https://d29vzk4ow07wi7.cloudfront.net/3540b31b88e9d8fc7288de5dac7b96be6f1c6652c604cfd167113bdf07738ca7?response-content-disposition=attachment%3Bfilename%3D%22netpbm-10.86.17.big_sur.<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/gts-0.7.6_2.big_sur.bottle.tar.gz<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/lzo-2.10.big_sur.bottle.tar.gz<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/pixman-0.40.0.big_sur.bottle.tar.gz<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/cairo-1.16.0_3.big_sur.bottle.tar.gz<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/gdk-pixbuf-2.42.0.big_sur.bottle.tar.gz==&gt; Downloading from https://d29vzk4ow07wi7.cloudfront.net/1819bb48f7487d522a69c564dca6fe5dff4da658269f067e47edccddfaab9440?response-content-disposition=attachment%3Bfilename%3D%22gdk-pixbuf-2.42.0.big_su<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/fribidi-1.0.10.big_sur.bottle.tar.gz<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/pkg-config-0.29.2_3.big_sur.bottle.tar.gz<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/gobject-introspection-1.66.1_1.big_sur.bottle.tar.gz<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/graphite2-1.3.14.big_sur.bottle.tar.gz<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/icu4c-67.1.big_sur.bottle.tar.gz<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/harfbuzz-2.7.2.big_sur.bottle.tar.gz<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/pango-1.48.0.big_sur.bottle.tar.gz<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/librsvg-2.50.2.big_sur.bottle.tar.gz<span class="hljs-comment">#####################                                                     29.6%</span>curl: (18) transfer closed with 28187304 bytes remaining to <span class="hljs-built_in">read</span>Error: Failed to download resource <span class="hljs-string">&quot;librsvg&quot;</span>Download failed: https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/librsvg-2.50.2.big_sur.bottle.tar.gzWarning: Bottle installation failed: building from <span class="hljs-built_in">source</span>.==&gt; Downloading https://download.gnome.org/sources/librsvg/2.50/librsvg-2.50.2.tar.xz==&gt; Downloading from https://mirrors.ustc.edu.cn/gnome/sources/librsvg/2.50/librsvg-2.50.2.tar.xz<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/libtool-2.4.6_2.big_sur.bottle.tar.gz<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/graphviz-2.44.1.big_sur.bottle.1.tar.gz<span class="hljs-comment">######################################                                    52.9%</span>curl: (18) transfer closed with 6363689 bytes remaining to <span class="hljs-built_in">read</span>Error: Failed to download resource <span class="hljs-string">&quot;graphviz&quot;</span>Download failed: https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/graphviz-2.44.1.big_sur.bottle.1.tar.gzWarning: Bottle installation failed: building from <span class="hljs-built_in">source</span>.==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/autoconf-2.69.big_sur.bottle.4.tar.gz<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/automake-1.16.3.big_sur.bottle.tar.gz<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/pkg-config-0.29.2_3.big_sur.bottle.tar.gzAlready downloaded: /Users/wangpeng/Library/Caches/Homebrew/downloads/c393e3a39326eab27929f0f2ce40cb425e78bd8812166e6d835a08a8bf0c5f56--pkg-config-0.29.2_3.big_sur.bottle.tar.gz==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/libpng-1.6.37.big_sur.bottle.tar.gzAlready downloaded: /Users/wangpeng/Library/Caches/Homebrew/downloads/3bd2e2a75fbfc893d9acc20eeafc5274e260ed2ca39483ccbb1450a734bc6775--libpng-1.6.37.big_sur.bottle.tar.gz==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/freetype-2.10.4.big_sur.bottle.tar.gzAlready downloaded: /Users/wangpeng/Library/Caches/Homebrew/downloads/1399fc577f7998623378e7bb01f8a716a43eff701304059936d592a76d5a4d31--freetype-2.10.4.big_sur.bottle.tar.gz==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/fontconfig-2.13.1.big_sur.bottle.tar.gzAlready downloaded: /Users/wangpeng/Library/Caches/Homebrew/downloads/3790f4e94c8e7c868307933e3445a1244aadd794adaa6ed5f743533334489f93--fontconfig-2.13.1.big_sur.bottle.tar.gz==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/jpeg-9d.big_sur.bottle.tar.gzAlready downloaded: /Users/wangpeng/Library/Caches/Homebrew/downloads/7ed5b41c2937740eca747a8077502454971fbbe02cfb5cfbd9b9e7379345d0cd--jpeg-9d.big_sur.bottle.tar.gz==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/libtiff-4.1.0_1.big_sur.bottle.tar.gz<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/webp-1.1.0.big_sur.bottle.tar.gzAlready downloaded: /Users/wangpeng/Library/Caches/Homebrew/downloads/1ae441623b4c63d896b5566300b24c06d772ff9f2676d7c9bd692ff6b8e22edb--webp-1.1.0.big_sur.bottle.tar.gz==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/gd-2.3.0.big_sur.bottle.tar.gzAlready downloaded: /Users/wangpeng/Library/Caches/Homebrew/downloads/d71eed744db212a24cc7f607842253aacf0e1d25cd7891c884ec7ffc969162ac--gd-2.3.0.big_sur.bottle.tar.gz==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/libffi-3.3.big_sur.bottle.tar.gzAlready downloaded: /Users/wangpeng/Library/Caches/Homebrew/downloads/49892306006d42a1f69ae4b36ff44b37c8e7170f6cf73a20e97f10bf9fa10e72--libffi-3.3.big_sur.bottle.tar.gz==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/pcre-8.44.big_sur.bottle.tar.gzAlready downloaded: /Users/wangpeng/Library/Caches/Homebrew/downloads/9998b74590fa558f4c346e9770a62495d4aca8e992d0e883435e3574303ee241--pcre-8.44.big_sur.bottle.tar.gz==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/glib-2.66.2_1.big_sur.bottle.tar.gz<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/jasper-2.0.22.big_sur.bottle.tar.gzAlready downloaded: /Users/wangpeng/Library/Caches/Homebrew/downloads/86ba13e63264cbcafb0dbec9e35960e2662f9e4bde0306bd52984bf487e6581a--jasper-2.0.22.big_sur.bottle.tar.gz==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/netpbm-10.86.17.big_sur.bottle.tar.gzAlready downloaded: /Users/wangpeng/Library/Caches/Homebrew/downloads/9f8fa63491038e9bb811b03f09660342641c7f8132169bdb3800631d8d2b189e--netpbm-10.86.17.big_sur.bottle.tar.gz==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/gts-0.7.6_2.big_sur.bottle.tar.gzAlready downloaded: /Users/wangpeng/Library/Caches/Homebrew/downloads/eab94b3870ce0c63232e9a992963c8a32ea53a7efa8a09e639066b40ae0a132b--gts-0.7.6_2.big_sur.bottle.tar.gz==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/lzo-2.10.big_sur.bottle.tar.gzAlready downloaded: /Users/wangpeng/Library/Caches/Homebrew/downloads/0020e09d8a2c473efa8db2af4b402358f5184578c801c7a7650de6c8bedca06a--lzo-2.10.big_sur.bottle.tar.gz==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/pixman-0.40.0.big_sur.bottle.tar.gzAlready downloaded: /Users/wangpeng/Library/Caches/Homebrew/downloads/ddf94c89d763f2c63c00ce2090ff16d5abd832ca0e1e9beb2245da3cc159ce41--pixman-0.40.0.big_sur.bottle.tar.gz==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/cairo-1.16.0_3.big_sur.bottle.tar.gzAlready downloaded: /Users/wangpeng/Library/Caches/Homebrew/downloads/8ad096f68fcc70615ff77f14b50eafbed94e4a261c7860dcda41ba25c7d12f52--cairo-1.16.0_3.big_sur.bottle.tar.gz==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/gdk-pixbuf-2.42.0.big_sur.bottle.tar.gzAlready downloaded: /Users/wangpeng/Library/Caches/Homebrew/downloads/fb191d15b537de812241fe664f4149209c4d58ce3fbdd5e98a292fe495420f39--gdk-pixbuf-2.42.0.big_sur.bottle.tar.gz==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/fribidi-1.0.10.big_sur.bottle.tar.gzAlready downloaded: /Users/wangpeng/Library/Caches/Homebrew/downloads/9013c8a0aeb1d2fee9a999ef14adfb2416fef4e8399d87a65d753d44a586427b--fribidi-1.0.10.big_sur.bottle.tar.gz==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/gobject-introspection-1.66.1_1.big_sur.bottle.tar.gzAlready downloaded: /Users/wangpeng/Library/Caches/Homebrew/downloads/a7f9a1bcb83a7d322e495d163f15b4b8f4d0c05649eeacfcef2681a23b3eb8dd--gobject-introspection-1.66.1_1.big_sur.bottle.tar.gz==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/graphite2-1.3.14.big_sur.bottle.tar.gzAlready downloaded: /Users/wangpeng/Library/Caches/Homebrew/downloads/5ce053636ab73845d956142cfd518a21701d3ec972e73367d204b81619b8b845--graphite2-1.3.14.big_sur.bottle.tar.gz==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/icu4c-67.1.big_sur.bottle.tar.gzAlready downloaded: /Users/wangpeng/Library/Caches/Homebrew/downloads/ddca8d436054c0f9c8c333d2e8dd957ccd3902680baf619e4baed434c9806998--icu4c-67.1.big_sur.bottle.tar.gz==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/harfbuzz-2.7.2.big_sur.bottle.tar.gzAlready downloaded: /Users/wangpeng/Library/Caches/Homebrew/downloads/1aead0f1ab97b4307a9c487a3191213ff63fd200d5eb9be947a11e8ca78df24a--harfbuzz-2.7.2.big_sur.bottle.tar.gz==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/pango-1.48.0.big_sur.bottle.tar.gzAlready downloaded: /Users/wangpeng/Library/Caches/Homebrew/downloads/eded163bf136aa7a73e07f22c8b16f3a406bbd849b865246a95ee89ecd60aa4e--pango-1.48.0.big_sur.bottle.tar.gz==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/librsvg-2.50.2.big_sur.bottle.tar.gz<span class="hljs-comment">###################################################                       71.3%</span>curl: (18) transfer closed with 11492026 bytes remaining to <span class="hljs-built_in">read</span>Error: Failed to download resource <span class="hljs-string">&quot;librsvg&quot;</span>Download failed: https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/librsvg-2.50.2.big_sur.bottle.tar.gzWarning: Bottle installation failed: building from <span class="hljs-built_in">source</span>.==&gt; Downloading https://download.gnome.org/sources/librsvg/2.50/librsvg-2.50.2.tar.xzAlready downloaded: /Users/wangpeng/Library/Caches/Homebrew/downloads/0388827e738392e3705cbb8800e43f279723caf5126ba50c7cd4e1ca5e2af872--librsvg-2.50.2.tar.xz==&gt; Downloading https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles/libtool-2.4.6_2.big_sur.bottle.tar.gzAlready downloaded: /Users/wangpeng/Library/Caches/Homebrew/downloads/59a8e4e9bff6153b4cb25fda4de99648330e04fefdd7e9c98f92fa4d049a9f30--libtool-2.4.6_2.big_sur.bottle.tar.gz==&gt; Downloading https://www2.graphviz.org/Packages/stable/portable_source/graphviz-2.44.1.tar.gz<span class="hljs-comment">####################                                                      28.5%</span><span class="hljs-comment">######################################################################## 100.0%</span>==&gt; Installing dependencies <span class="hljs-keyword">for</span> graphviz: autoconf, automake, pkg-config, libpng, freetype, fontconfig, jpeg, libtiff, webp, gd, libffi, pcre, glib, jasper, netpbm, gts, lzo, pixman, cairo, gdk-pixbuf, fribidi, gobject-introspection, graphite2, icu4c, harfbuzz, pango, librsvg and libtool==&gt; Installing graphviz dependency: autoconf==&gt; Pouring autoconf-2.69.big_sur.bottle.4.tar.gzğŸº  /usr/<span class="hljs-built_in">local</span>/Cellar/autoconf/2.69: 68 files, 3.0MB==&gt; Installing graphviz dependency: automake==&gt; Pouring automake-1.16.3.big_sur.bottle.tar.gzğŸº  /usr/<span class="hljs-built_in">local</span>/Cellar/automake/1.16.3: 131 files, 3.4MB==&gt; Installing graphviz dependency: pkg-config==&gt; Pouring pkg-config-0.29.2_3.big_sur.bottle.tar.gzğŸº  /usr/<span class="hljs-built_in">local</span>/Cellar/pkg-config/0.29.2_3: 11 files, 656.6KB==&gt; Installing graphviz dependency: libpng==&gt; Pouring libpng-1.6.37.big_sur.bottle.tar.gzğŸº  /usr/<span class="hljs-built_in">local</span>/Cellar/libpng/1.6.37: 27 files, 1.3MB==&gt; Installing graphviz dependency: freetype==&gt; Pouring freetype-2.10.4.big_sur.bottle.tar.gzğŸº  /usr/<span class="hljs-built_in">local</span>/Cellar/freetype/2.10.4: 64 files, 2.3MB==&gt; Installing graphviz dependency: fontconfig==&gt; Pouring fontconfig-2.13.1.big_sur.bottle.tar.gz==&gt; Regenerating font cache, this may take a <span class="hljs-keyword">while</span>==&gt; /usr/<span class="hljs-built_in">local</span>/Cellar/fontconfig/2.13.1/bin/fc-cache -frvğŸº  /usr/<span class="hljs-built_in">local</span>/Cellar/fontconfig/2.13.1: 531 files, 3.6MB==&gt; Installing graphviz dependency: jpeg==&gt; Pouring jpeg-9d.big_sur.bottle.tar.gzğŸº  /usr/<span class="hljs-built_in">local</span>/Cellar/jpeg/9d: 21 files, 953.8KB==&gt; Installing graphviz dependency: libtiff==&gt; Pouring libtiff-4.1.0_1.big_sur.bottle.tar.gzğŸº  /usr/<span class="hljs-built_in">local</span>/Cellar/libtiff/4.1.0_1: 247 files, 4.2MB==&gt; Installing graphviz dependency: webp==&gt; Pouring webp-1.1.0.big_sur.bottle.tar.gzğŸº  /usr/<span class="hljs-built_in">local</span>/Cellar/webp/1.1.0: 39 files, 2.4MB==&gt; Installing graphviz dependency: gd==&gt; Pouring gd-2.3.0.big_sur.bottle.tar.gzğŸº  /usr/<span class="hljs-built_in">local</span>/Cellar/gd/2.3.0: 34 files, 1.4MB==&gt; Installing graphviz dependency: libffi==&gt; Pouring libffi-3.3.big_sur.bottle.tar.gz==&gt; Caveatslibffi is keg-only, <span class="hljs-built_in">which</span> means it was not symlinked into /usr/<span class="hljs-built_in">local</span>,because macOS already provides this software and installing another version <span class="hljs-keyword">in</span>parallel can cause all kinds of trouble.For compilers to find libffi you may need to <span class="hljs-built_in">set</span>:  <span class="hljs-built_in">export</span> LDFLAGS=<span class="hljs-string">&quot;-L/usr/local/opt/libffi/lib&quot;</span>  <span class="hljs-built_in">export</span> CPPFLAGS=<span class="hljs-string">&quot;-I/usr/local/opt/libffi/include&quot;</span>For pkg-config to find libffi you may need to <span class="hljs-built_in">set</span>:  <span class="hljs-built_in">export</span> PKG_CONFIG_PATH=<span class="hljs-string">&quot;/usr/local/opt/libffi/lib/pkgconfig&quot;</span>==&gt; SummaryğŸº  /usr/<span class="hljs-built_in">local</span>/Cellar/libffi/3.3: 17 files, 540.2KB==&gt; Installing graphviz dependency: pcre==&gt; Pouring pcre-8.44.big_sur.bottle.tar.gzğŸº  /usr/<span class="hljs-built_in">local</span>/Cellar/pcre/8.44: 204 files, 5.8MB==&gt; Installing graphviz dependency: glib==&gt; Pouring glib-2.66.2_1.big_sur.bottle.tar.gzğŸº  /usr/<span class="hljs-built_in">local</span>/Cellar/glib/2.66.2_1: 436 files, 15.5MB==&gt; Installing graphviz dependency: jasper==&gt; Pouring jasper-2.0.22.big_sur.bottle.tar.gzğŸº  /usr/<span class="hljs-built_in">local</span>/Cellar/jasper/2.0.22: 42 files, 1.5MB==&gt; Installing graphviz dependency: netpbm==&gt; Pouring netpbm-10.86.17.big_sur.bottle.tar.gzğŸº  /usr/<span class="hljs-built_in">local</span>/Cellar/netpbm/10.86.17: 410 files, 17.7MB==&gt; Installing graphviz dependency: gts==&gt; Pouring gts-0.7.6_2.big_sur.bottle.tar.gzğŸº  /usr/<span class="hljs-built_in">local</span>/Cellar/gts/0.7.6_2: 27 files, 1.4MB==&gt; Installing graphviz dependency: lzo==&gt; Pouring lzo-2.10.big_sur.bottle.tar.gzğŸº  /usr/<span class="hljs-built_in">local</span>/Cellar/lzo/2.10: 31 files, 570.7KB==&gt; Installing graphviz dependency: pixman==&gt; Pouring pixman-0.40.0.big_sur.bottle.tar.gzğŸº  /usr/<span class="hljs-built_in">local</span>/Cellar/pixman/0.40.0: 14 files, 1.3MB==&gt; Installing graphviz dependency: cairo==&gt; Pouring cairo-1.16.0_3.big_sur.bottle.tar.gzğŸº  /usr/<span class="hljs-built_in">local</span>/Cellar/cairo/1.16.0_3: 119 files, 5.9MB==&gt; Installing graphviz dependency: gdk-pixbuf==&gt; Pouring gdk-pixbuf-2.42.0.big_sur.bottle.tar.gz==&gt; /usr/<span class="hljs-built_in">local</span>/Cellar/gdk-pixbuf/2.42.0/bin/gdk-pixbuf-query-loaders --update-cacheğŸº  /usr/<span class="hljs-built_in">local</span>/Cellar/gdk-pixbuf/2.42.0: 149 files, 3.8MB==&gt; Installing graphviz dependency: fribidi==&gt; Pouring fribidi-1.0.10.big_sur.bottle.tar.gzğŸº  /usr/<span class="hljs-built_in">local</span>/Cellar/fribidi/1.0.10: 67 files, 669.0KB==&gt; Installing graphviz dependency: gobject-introspection==&gt; Pouring gobject-introspection-1.66.1_1.big_sur.bottle.tar.gzğŸº  /usr/<span class="hljs-built_in">local</span>/Cellar/gobject-introspection/1.66.1_1: 191 files, 12.7MB==&gt; Installing graphviz dependency: graphite2==&gt; Pouring graphite2-1.3.14.big_sur.bottle.tar.gzğŸº  /usr/<span class="hljs-built_in">local</span>/Cellar/graphite2/1.3.14: 18 files, 291.7KB==&gt; Installing graphviz dependency: icu4c==&gt; Pouring icu4c-67.1.big_sur.bottle.tar.gz==&gt; Caveatsicu4c is keg-only, <span class="hljs-built_in">which</span> means it was not symlinked into /usr/<span class="hljs-built_in">local</span>,because macOS provides libicucore.dylib (but nothing <span class="hljs-keyword">else</span>).If you need to have icu4c first <span class="hljs-keyword">in</span> your PATH run:  <span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;export PATH=&quot;/usr/local/opt/icu4c/bin:$PATH&quot;&#x27;</span> &gt;&gt; ~/.zshrc  <span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;export PATH=&quot;/usr/local/opt/icu4c/sbin:$PATH&quot;&#x27;</span> &gt;&gt; ~/.zshrcFor compilers to find icu4c you may need to <span class="hljs-built_in">set</span>:  <span class="hljs-built_in">export</span> LDFLAGS=<span class="hljs-string">&quot;-L/usr/local/opt/icu4c/lib&quot;</span>  <span class="hljs-built_in">export</span> CPPFLAGS=<span class="hljs-string">&quot;-I/usr/local/opt/icu4c/include&quot;</span>For pkg-config to find icu4c you may need to <span class="hljs-built_in">set</span>:  <span class="hljs-built_in">export</span> PKG_CONFIG_PATH=<span class="hljs-string">&quot;/usr/local/opt/icu4c/lib/pkgconfig&quot;</span>==&gt; SummaryğŸº  /usr/<span class="hljs-built_in">local</span>/Cellar/icu4c/67.1: 258 files, 71.8MB==&gt; Installing graphviz dependency: harfbuzz==&gt; Pouring harfbuzz-2.7.2.big_sur.bottle.tar.gzğŸº  /usr/<span class="hljs-built_in">local</span>/Cellar/harfbuzz/2.7.2: 68 files, 6.4MB==&gt; Installing graphviz dependency: pango==&gt; Pouring pango-1.48.0.big_sur.bottle.tar.gzğŸº  /usr/<span class="hljs-built_in">local</span>/Cellar/pango/1.48.0: 64 files, 3MB==&gt; Installing graphviz dependency: librsvg==&gt; Pouring librsvg-2.50.2.big_sur.bottle.tar.gztar: Error opening archive: Failed to open <span class="hljs-string">&#x27;/Users/wangpeng/Library/Caches/Homebrew/downloads/3eb605900a29b02eb026199f14474efc43e313ee2b9de389706c795eebdc24f5--librsvg-2.50.2.big_sur.bottle.tar.gz&#x27;</span>Error: Failure <span class="hljs-keyword">while</span> executing; `tar xof /Users/wangpeng/Library/Caches/Homebrew/downloads/3eb605900a29b02eb026199f14474efc43e313ee2b9de389706c795eebdc24f5--librsvg-2.50.2.big_sur.bottle.tar.gz -C /var/folders/zs/2875szcx7jn6lbmqd0jfbprr0000gn/T/d20210302-22554-102pbtw` exited with 1. Here<span class="hljs-string">&#x27;s the output:</span><span class="hljs-string">tar: Error opening archive: Failed to open &#x27;</span>/Users/wangpeng/Library/Caches/Homebrew/downloads/3eb605900a29b02eb026199f14474efc43e313ee2b9de389706c795eebdc24f5--librsvg-2.50.2.big_sur.bottle.tar.gz<span class="hljs-string">&#x27;</span><span class="hljs-string"></span><span class="hljs-string">Warning: Bottle installation failed: building from source.</span><span class="hljs-string">==&gt; Installing dependencies for librsvg: libssh2 and rust</span><span class="hljs-string">==&gt; Installing librsvg dependency: libssh2</span><span class="hljs-string">==&gt; Pouring libssh2-1.9.0_1.big_sur.bottle.tar.gz</span><span class="hljs-string">tar: Error opening archive: Failed to open &#x27;</span>/Users/wangpeng/Library/Caches/Homebrew/downloads/45db0c196aa97bf6c0a9c6e7787ad2cd0d14d563c03d0f4e0d52392a0f3a1c81--libssh2-1.9.0_1.big_sur.bottle.tar.gz<span class="hljs-string">&#x27;</span><span class="hljs-string">Error: Failure while executing; `tar xof /Users/wangpeng/Library/Caches/Homebrew/downloads/45db0c196aa97bf6c0a9c6e7787ad2cd0d14d563c03d0f4e0d52392a0f3a1c81--libssh2-1.9.0_1.big_sur.bottle.tar.gz -C /var/folders/zs/2875szcx7jn6lbmqd0jfbprr0000gn/T/d20210302-22554-qzrgbb` exited with 1. Here&#x27;</span>s the output:tar: Error opening archive: Failed to open <span class="hljs-string">&#x27;/Users/wangpeng/Library/Caches/Homebrew/downloads/45db0c196aa97bf6c0a9c6e7787ad2cd0d14d563c03d0f4e0d52392a0f3a1c81--libssh2-1.9.0_1.big_sur.bottle.tar.gz&#x27;</span>Warning: Bottle installation failed: building from <span class="hljs-built_in">source</span>.==&gt; Downloading https://libssh2.org/download/libssh2-1.9.0.tar.gz<span class="hljs-comment">######################################################################## 100.0%</span>==&gt; ./configure --prefix=/usr/<span class="hljs-built_in">local</span>/Cellar/libssh2/1.9.0_1 --disable-examples-build --with-openssl --with-libz --with-libssl-prefix=/usr/<span class="hljs-built_in">local</span>/opt/openssl@1.1==&gt; make installğŸº  /usr/<span class="hljs-built_in">local</span>/Cellar/libssh2/1.9.0_1: 184 files, 969.9KB, built <span class="hljs-keyword">in</span> 33 seconds==&gt; Installing librsvg dependency: rust==&gt; Pouring rust-1.47.0.big_sur.bottle.tar.gztar: Error opening archive: Failed to open <span class="hljs-string">&#x27;/Users/wangpeng/Library/Caches/Homebrew/downloads/f1482d118ddb120ff152e8f8aa88afa9bebc5674cc42aebca96249cffbdd8bdb--rust-1.47.0.big_sur.bottle.tar.gz&#x27;</span>Error: Failure <span class="hljs-keyword">while</span> executing; `tar xof /Users/wangpeng/Library/Caches/Homebrew/downloads/f1482d118ddb120ff152e8f8aa88afa9bebc5674cc42aebca96249cffbdd8bdb--rust-1.47.0.big_sur.bottle.tar.gz -C /var/folders/zs/2875szcx7jn6lbmqd0jfbprr0000gn/T/d20210302-22554-16tqegl` exited with 1. Here<span class="hljs-string">&#x27;s the output:</span><span class="hljs-string">tar: Error opening archive: Failed to open &#x27;</span>/Users/wangpeng/Library/Caches/Homebrew/downloads/f1482d118ddb120ff152e8f8aa88afa9bebc5674cc42aebca96249cffbdd8bdb--rust-1.47.0.big_sur.bottle.tar.gz<span class="hljs-string">&#x27;</span><span class="hljs-string"></span><span class="hljs-string">Warning: Bottle installation failed: building from source.</span><span class="hljs-string">==&gt; Downloading https://static.rust-lang.org/dist/rustc-1.47.0-src.tar.gz</span><span class="hljs-string">######################################################################## 100.0%</span><span class="hljs-string">==&gt; ./configure --prefix=/usr/local/Cellar/rust/1.47.0 --release-channel=stable</span><span class="hljs-string">==&gt; make</span><span class="hljs-string">Last 15 lines from /Users/wangpeng/Library/Logs/Homebrew/rust/02.make:</span><span class="hljs-string">error: failed to get `cc` as a dependency of package `bootstrap v0.0.0 (/private/tmp/rust-20210302-29879-dftrmf/rustc-1.47.0-src/src/bootstrap)`</span><span class="hljs-string"></span><span class="hljs-string">Caused by:</span><span class="hljs-string">  failed to fetch `https://github.com/rust-lang/crates.io-index`</span><span class="hljs-string"></span><span class="hljs-string">Caused by:</span><span class="hljs-string">  network failure seems to have happened</span><span class="hljs-string">  if a proxy or similar is necessary `net.git-fetch-with-cli` may help here</span><span class="hljs-string">  https://doc.rust-lang.org/cargo/reference/config.html#netgit-fetch-with-cli</span><span class="hljs-string"></span><span class="hljs-string">Caused by:</span><span class="hljs-string">  http parser error: stream ended at an unexpected time; class=Http (34)</span><span class="hljs-string">failed to run: /private/tmp/rust-20210302-29879-dftrmf/rustc-1.47.0-src/build/x86_64-apple-darwin/stage0/bin/cargo build --manifest-path /private/tmp/rust-20210302-29879-dftrmf/rustc-1.47.0-src/src/bootstrap/Cargo.toml</span><span class="hljs-string">Build completed unsuccessfully in 0:33:17</span><span class="hljs-string">make: *** [all] Error 1</span><span class="hljs-string"></span><span class="hljs-string">READ THIS: https://docs.brew.sh/Troubleshooting</span><span class="hljs-string"></span><span class="hljs-string">These open issues may also help:</span><span class="hljs-string">rust 1.50.0 https://github.com/Homebrew/homebrew-core/pull/70922</span><span class="hljs-string">Rust-dependent formulae on Apple Silicon - upstream issue tracker https://github.com/Homebrew/homebrew-core/issues/68301</span></code></pre><h3 id="æ–‡æ¡£"><a href="#æ–‡æ¡£" class="headerlink" title="æ–‡æ¡£"></a>æ–‡æ¡£</h3><p><code>godoc -http :6060</code>,ç”Ÿæˆç½‘é¡µæ–‡æ¡£</p><p><img src="/images/Golang/doc.jpg"></p><p><img src="/images/Golang/doc1.jpg"></p><p><code>go doc æ–¹æ³•åï¼ˆåŒ…æ‹¬åŒ…åï¼‰</code>,æŸ¥çœ‹æ–¹æ³•æ³¨é‡Š</p><p><img src="/images/Golang/doc2.jpg"></p><p><code>xxx_test.go</code>ç”Ÿæˆç¤ºä¾‹</p><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ExampleQueue_Pop</span><span class="hljs-params">()</span></span> &#123;q := Queue&#123;&#125;_ = q.Push(<span class="hljs-string">&quot;asd&quot;</span>)_ = q.Push(<span class="hljs-number">123</span>)<span class="hljs-keyword">if</span> v, ok := q.Pop(); ok &#123;fmt.Println(v)&#125;<span class="hljs-keyword">if</span> v, ok := q.Pop(); ok &#123;fmt.Println(v)&#125;<span class="hljs-comment">//Output:</span><span class="hljs-comment">//asd</span><span class="hljs-comment">//123</span>&#125;</code></pre><p><img src="/images/Golang/doc_output.jpg"></p><h3 id="goroutine"><a href="#goroutine" class="headerlink" title="goroutine"></a><code>goroutine</code></h3><p><img src="/images/Golang/goroutine.png"></p><h4 id="åç¨‹-Coroutine"><a href="#åç¨‹-Coroutine" class="headerlink" title="åç¨‹ Coroutine"></a>åç¨‹ <code>Coroutine</code></h4><ul><li><p><em>è½»é‡çº§</em>çº¿ç¨‹</p></li><li><p><strong>éæŠ¢å å¼</strong>å¤šä»»åŠ¡å¤„ç†ï¼Œç”±åç¨‹ä¸»åŠ¨äº¤å‡ºæ§åˆ¶æƒ</p></li><li><p>ç¼–è¯‘å™¨/è§£é‡Šå™¨/è™šæ‹Ÿæœºå±‚çš„å¤šä»»åŠ¡</p></li><li><p>å¤šä¸ªåç¨‹å¯ä»¥åœ¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªçº¿ç¨‹ä¸Šè¿è¡Œ</p></li></ul><h5 id="å…¶ä»–è¯­è¨€å¯¹åç¨‹çš„æ”¯æŒ"><a href="#å…¶ä»–è¯­è¨€å¯¹åç¨‹çš„æ”¯æŒ" class="headerlink" title="å…¶ä»–è¯­è¨€å¯¹åç¨‹çš„æ”¯æŒ"></a>å…¶ä»–è¯­è¨€å¯¹åç¨‹çš„æ”¯æŒ</h5><p><code>Java</code>ï¼šæ ‡å‡†åº“ä¸æ”¯æŒ</p><p><code>Python</code>ï¼š3.5ç‰ˆæœ¬å‰ä½¿ç”¨yieldå…³é”®å­—</p><p>â€‹                 3.5ä»¥åï¼Œ <code>async def æ–¹æ³•å</code>å®ç°åç¨‹çš„åŸç”Ÿæ”¯æŒ</p><h5 id="å¯èƒ½åˆ‡æ¢goroutineçš„äº‹ä»¶"><a href="#å¯èƒ½åˆ‡æ¢goroutineçš„äº‹ä»¶" class="headerlink" title="å¯èƒ½åˆ‡æ¢goroutineçš„äº‹ä»¶"></a>å¯èƒ½åˆ‡æ¢<code>goroutine</code>çš„äº‹ä»¶</h5><ul><li><p><code>I/O, Select</code></p></li><li><p><code>channel</code></p></li><li><p>ç­‰å¾…é”</p></li><li><p>å‡½æ•°è°ƒç”¨</p></li><li><p><code>runtime.Gosched()</code></p></li><li><p><code>.e.g</code></p></li></ul><pre><code class="hljs golang"><span class="hljs-keyword">import</span> (<span class="hljs-string">&quot;fmt&quot;</span><span class="hljs-string">&quot;time&quot;</span>)<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Run</span><span class="hljs-params">()</span></span>  &#123;<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i ++ &#123;<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(j <span class="hljs-keyword">int</span>)</span></span> &#123;<span class="hljs-keyword">for</span>&#123;fmt.Println(<span class="hljs-string">&quot;go run from&quot;</span>, j)&#125;&#125;(i)&#125;time.Sleep(time.Minute)&#125;</code></pre><h4 id="channel"><a href="#channel" class="headerlink" title="channel"></a><code>channel</code></h4><p><img src="/images/Golang/channel.png"></p> <pre><code class="hljs golang"><span class="hljs-keyword">import</span> (<span class="hljs-string">&quot;fmt&quot;</span><span class="hljs-string">&quot;time&quot;</span>)<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">works</span><span class="hljs-params">(id <span class="hljs-keyword">int</span>, c <span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span>)</span></span>  &#123;<span class="hljs-comment">// ä¸æ–­çš„ä»channelå–</span><span class="hljs-keyword">for</span>  &#123;fmt.Printf(<span class="hljs-string">&quot;channel %d receive %c\n&quot;</span>, id, &lt;-c)&#125;&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">workIfNotClose</span><span class="hljs-params">(id <span class="hljs-keyword">int</span>, c <span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span>)</span></span>  &#123;<span class="hljs-comment">// æ¥æ”¶æ–¹åˆ¤æ–­channelä¸­æœ‰æ•°æ®å°±ä¸æ–­çš„ä»channelå–</span><span class="hljs-keyword">for</span>  &#123;n, ok := &lt;-c<span class="hljs-keyword">if</span> !ok&#123;<span class="hljs-keyword">break</span>&#125;fmt.Printf(<span class="hljs-string">&quot;channel %d receive %c\n&quot;</span>, id, n)&#125;&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">workIfNotCloseSimple</span><span class="hljs-params">(id <span class="hljs-keyword">int</span>, c <span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span>)</span></span>  &#123;<span class="hljs-comment">// æ¥æ”¶æ–¹åˆ¤æ–­channelä¸­æœ‰æ•°æ®å°±ä¸æ–­çš„ä»channelå–</span><span class="hljs-keyword">for</span> n := <span class="hljs-keyword">range</span> c&#123;fmt.Printf(<span class="hljs-string">&quot;channel %d receive %c\n&quot;</span>, id, n)&#125;&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">createWorks</span><span class="hljs-params">(id <span class="hljs-keyword">int</span>)</span> <span class="hljs-title">chan</span>&lt;- <span class="hljs-title">int</span></span> &#123;c := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span>)<span class="hljs-keyword">go</span> works(id, c)<span class="hljs-keyword">return</span> c&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">first</span><span class="hljs-params">()</span></span>  &#123;<span class="hljs-comment">// åˆ›å»ºchannelç”¨ä¾‹</span><span class="hljs-keyword">var</span> chans [<span class="hljs-number">10</span>]<span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span><span class="hljs-keyword">for</span>  i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++ &#123;chans[i] = <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span>)<span class="hljs-keyword">go</span> works(i, chans[i])&#125;<span class="hljs-comment">// å¾€channelæ”¾</span><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++ &#123;chans[i] &lt;- <span class="hljs-string">&#x27;a&#x27;</span> + i&#125;<span class="hljs-comment">// å¾€channelæ”¾</span><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++ &#123;chans[i] &lt;- <span class="hljs-string">&#x27;A&#x27;</span> + i&#125;&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">second</span><span class="hljs-params">()</span></span>  &#123;<span class="hljs-comment">// åªèƒ½å‘æ•°æ®  chan&lt;- int å°†channel ä½œä¸ºå‡½æ•°è¿”å›å‚æ•°  å³ channelä¹Ÿæ˜¯ä¸€ç­‰å…¬æ°‘</span><span class="hljs-keyword">var</span> chann [<span class="hljs-number">10</span>] <span class="hljs-keyword">chan</span>&lt;- <span class="hljs-keyword">int</span><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++ &#123;chann[i] = createWorks(i)&#125;<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++ &#123;chann[i] &lt;- <span class="hljs-string">&#x27;k&#x27;</span> + i&#125;<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++ &#123;chann[i] &lt;- <span class="hljs-string">&#x27;K&#x27;</span> + i&#125;&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">thirdBufferedChannel</span><span class="hljs-params">()</span></span> &#123;<span class="hljs-comment">// channelç¼“å†²åŒº   å¯ä»¥æ”¾å…¥ä¸å¤§äºç¼“å†²åŒºçš„å¤§å°æ—¶ï¼Œå¯ä»¥ä¸ç”¨å–</span>c := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span>, <span class="hljs-number">4</span>)<span class="hljs-keyword">go</span> works(<span class="hljs-number">0</span>, c)c &lt;- <span class="hljs-string">&#x27;u&#x27;</span>c &lt;- <span class="hljs-string">&#x27;v&#x27;</span>c &lt;- <span class="hljs-string">&#x27;w&#x27;</span>c &lt;- <span class="hljs-string">&#x27;x&#x27;</span>c &lt;- <span class="hljs-string">&#x27;y&#x27;</span>&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">channelClose</span><span class="hljs-params">()</span></span>  &#123;c := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span>, <span class="hljs-number">4</span>)<span class="hljs-keyword">go</span> workIfNotCloseSimple(<span class="hljs-number">0</span>, c)c &lt;- <span class="hljs-string">&#x27;U&#x27;</span>c &lt;- <span class="hljs-string">&#x27;V&#x27;</span>c &lt;- <span class="hljs-string">&#x27;W&#x27;</span><span class="hljs-built_in">close</span>(c)&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ChanDemo</span><span class="hljs-params">()</span></span>  &#123;<span class="hljs-comment">//  channelä¹Ÿæ˜¯ä¸€ç­‰å…¬æ°‘</span>first()second()fmt.Println(<span class="hljs-string">&quot;-----------------&quot;</span>)thirdBufferedChannel()channelClose()time.Sleep(time.Second)&#125;<span class="hljs-comment">// è¾“å‡º</span>channel <span class="hljs-number">7</span> receive hchannel <span class="hljs-number">9</span> receive jchannel <span class="hljs-number">8</span> receive ichannel <span class="hljs-number">5</span> receive fchannel <span class="hljs-number">3</span> receive dchannel <span class="hljs-number">6</span> receive gchannel <span class="hljs-number">4</span> receive echannel <span class="hljs-number">2</span> receive cchannel <span class="hljs-number">1</span> receive bchannel <span class="hljs-number">0</span> receive achannel <span class="hljs-number">0</span> receive A-----------------channel <span class="hljs-number">4</span> receive Echannel <span class="hljs-number">3</span> receive Dchannel <span class="hljs-number">1</span> receive Bchannel <span class="hljs-number">7</span> receive Hchannel <span class="hljs-number">2</span> receive Cchannel <span class="hljs-number">5</span> receive Fchannel <span class="hljs-number">6</span> receive Gchannel <span class="hljs-number">9</span> receive Jchannel <span class="hljs-number">8</span> receive Ichannel <span class="hljs-number">0</span> receive kchannel <span class="hljs-number">1</span> receive lchannel <span class="hljs-number">2</span> receive mchannel <span class="hljs-number">3</span> receive nchannel <span class="hljs-number">4</span> receive ochannel <span class="hljs-number">5</span> receive pchannel <span class="hljs-number">6</span> receive qchannel <span class="hljs-number">7</span> receive rchannel <span class="hljs-number">7</span> receive Rchannel <span class="hljs-number">8</span> receive schannel <span class="hljs-number">8</span> receive Schannel <span class="hljs-number">3</span> receive Nchannel <span class="hljs-number">5</span> receive Pchannel <span class="hljs-number">0</span> receive Kchannel <span class="hljs-number">6</span> receive Qchannel <span class="hljs-number">9</span> receive tchannel <span class="hljs-number">9</span> receive Tchannel <span class="hljs-number">2</span> receive Mchannel <span class="hljs-number">4</span> receive Ochannel <span class="hljs-number">1</span> receive L-----------------channel <span class="hljs-number">0</span> receive uchannel <span class="hljs-number">0</span> receive vchannel <span class="hljs-number">0</span> receive wchannel <span class="hljs-number">0</span> receive xchannel <span class="hljs-number">0</span> receive ychannel <span class="hljs-number">0</span> receive Uchannel <span class="hljs-number">0</span> receive Vchannel <span class="hljs-number">0</span> receive WExiting.</code></pre><h5 id="é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜"><a href="#é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜" class="headerlink" title="é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜"></a>é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜</h5><pre><code class="hljs golang"><span class="hljs-comment">/**</span><span class="hljs-comment"> * Author: Wang P</span><span class="hljs-comment"> * Version: 1.0.0</span><span class="hljs-comment"> * Date: 2021/2/5 ä¸‹åˆ5:05</span><span class="hljs-comment"> * Description:</span><span class="hljs-comment"> **/</span><span class="hljs-keyword">package</span> goroutines<span class="hljs-keyword">import</span> (<span class="hljs-string">&quot;fmt&quot;</span>)<span class="hljs-keyword">type</span> Worker <span class="hljs-keyword">struct</span> &#123;in <span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span>done <span class="hljs-keyword">chan</span> <span class="hljs-keyword">bool</span>&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">doWork</span><span class="hljs-params">(id <span class="hljs-keyword">int</span>, w Worker)</span></span>  &#123;<span class="hljs-comment">// æ¥æ”¶æ–¹åˆ¤æ–­channelä¸­æœ‰æ•°æ®å°±ä¸æ–­çš„ä»channelå–</span><span class="hljs-keyword">for</span> n := <span class="hljs-keyword">range</span> w.in&#123;fmt.Printf(<span class="hljs-string">&quot;channel %d receive %c\n&quot;</span>, id, n)w.done &lt;- <span class="hljs-literal">true</span>&#125;&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">createWorkers</span><span class="hljs-params">(id <span class="hljs-keyword">int</span>)</span> <span class="hljs-title">Worker</span></span> &#123;w := Worker&#123;in: <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span>),done: <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">bool</span>),&#125;<span class="hljs-keyword">go</span> doWork(id, w)<span class="hljs-keyword">return</span> w&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">communicate</span><span class="hljs-params">()</span></span>  &#123;<span class="hljs-comment">// åªèƒ½å‘æ•°æ®  chan&lt;- int å°†channel ä½œä¸ºå‡½æ•°è¿”å›å‚æ•°  å³ channelä¹Ÿæ˜¯ä¸€ç­‰å…¬æ°‘</span><span class="hljs-keyword">var</span> works [<span class="hljs-number">10</span>]Worker<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++ &#123;works[i] = createWorkers(i)&#125;<span class="hljs-keyword">for</span> i, worker := <span class="hljs-keyword">range</span> works&#123;worker.in &lt;- <span class="hljs-string">&#x27;a&#x27;</span> + i&#125;<span class="hljs-keyword">for</span> _, worker := <span class="hljs-keyword">range</span> works&#123;&lt;- worker.done&#125;<span class="hljs-keyword">for</span> i, worker := <span class="hljs-keyword">range</span> works&#123;worker.in &lt;- <span class="hljs-string">&#x27;A&#x27;</span> + i&#125;<span class="hljs-keyword">for</span> _, worker := <span class="hljs-keyword">range</span> works&#123;&lt;- worker.done&#125;&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">doWork2</span><span class="hljs-params">(id <span class="hljs-keyword">int</span>, w Worker)</span></span>  &#123;<span class="hljs-comment">// æ¥æ”¶æ–¹åˆ¤æ–­channelä¸­æœ‰æ•°æ®å°±ä¸æ–­çš„ä»channelå–</span><span class="hljs-keyword">for</span> n := <span class="hljs-keyword">range</span> w.in&#123;fmt.Printf(<span class="hljs-string">&quot;channel %d receive %c\n&quot;</span>, id, n)<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;w.done &lt;- <span class="hljs-literal">true</span>&#125;()&#125;&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">createWorkers2</span><span class="hljs-params">(id <span class="hljs-keyword">int</span>)</span> <span class="hljs-title">Worker</span></span> &#123;w := Worker&#123;in: <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span>),done: <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">bool</span>),&#125;<span class="hljs-keyword">go</span> doWork2(id, w)<span class="hljs-keyword">return</span> w&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">communicateDoneAll</span><span class="hljs-params">()</span></span>  &#123;<span class="hljs-comment">// åªèƒ½å‘æ•°æ®  chan&lt;- int å°†channel ä½œä¸ºå‡½æ•°è¿”å›å‚æ•°  å³ channelä¹Ÿæ˜¯ä¸€ç­‰å…¬æ°‘</span><span class="hljs-keyword">var</span> worksAll [<span class="hljs-number">10</span>]Worker<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++ &#123;worksAll[i] = createWorkers2(i)&#125;<span class="hljs-keyword">for</span> i, worker := <span class="hljs-keyword">range</span> worksAll &#123;worker.in &lt;- <span class="hljs-string">&#x27;j&#x27;</span> + i&#125;<span class="hljs-keyword">for</span> i, worker := <span class="hljs-keyword">range</span> worksAll &#123;worker.in &lt;- <span class="hljs-string">&#x27;J&#x27;</span> + i&#125;<span class="hljs-comment">// ç­‰æ‰€æœ‰ä»»åŠ¡éƒ½å–å®Œ å†ç»“æŸ</span><span class="hljs-keyword">for</span> _, worker := <span class="hljs-keyword">range</span> worksAll &#123;&lt;- worker.done&lt;- worker.done&#125;&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">communicateDemo</span><span class="hljs-params">()</span></span>  &#123;communicate()fmt.Println(<span class="hljs-string">&quot;----------------&quot;</span>)communicateDoneAll()&#125;<span class="hljs-comment">// è¾“å‡º</span>channel <span class="hljs-number">7</span> receive hchannel <span class="hljs-number">5</span> receive fchannel <span class="hljs-number">8</span> receive ichannel <span class="hljs-number">9</span> receive jchannel <span class="hljs-number">2</span> receive cchannel <span class="hljs-number">3</span> receive dchannel <span class="hljs-number">1</span> receive bchannel <span class="hljs-number">0</span> receive achannel <span class="hljs-number">4</span> receive echannel <span class="hljs-number">6</span> receive gchannel <span class="hljs-number">6</span> receive Gchannel <span class="hljs-number">7</span> receive Hchannel <span class="hljs-number">8</span> receive Ichannel <span class="hljs-number">9</span> receive Jchannel <span class="hljs-number">0</span> receive Achannel <span class="hljs-number">1</span> receive Bchannel <span class="hljs-number">2</span> receive Cchannel <span class="hljs-number">3</span> receive Dchannel <span class="hljs-number">5</span> receive Fchannel <span class="hljs-number">4</span> receive E----------------channel <span class="hljs-number">0</span> receive jchannel <span class="hljs-number">1</span> receive kchannel <span class="hljs-number">4</span> receive nchannel <span class="hljs-number">2</span> receive lchannel <span class="hljs-number">3</span> receive mchannel <span class="hljs-number">2</span> receive Lchannel <span class="hljs-number">8</span> receive rchannel <span class="hljs-number">0</span> receive Jchannel <span class="hljs-number">1</span> receive Kchannel <span class="hljs-number">7</span> receive qchannel <span class="hljs-number">5</span> receive ochannel <span class="hljs-number">9</span> receive schannel <span class="hljs-number">3</span> receive Mchannel <span class="hljs-number">5</span> receive Ochannel <span class="hljs-number">6</span> receive pchannel <span class="hljs-number">4</span> receive Nchannel <span class="hljs-number">6</span> receive Pchannel <span class="hljs-number">9</span> receive Schannel <span class="hljs-number">7</span> receive Qchannel <span class="hljs-number">8</span> receive R</code></pre><h5 id="åˆ©ç”¨channeléå†æ ‘"><a href="#åˆ©ç”¨channeléå†æ ‘" class="headerlink" title="åˆ©ç”¨channeléå†æ ‘"></a>åˆ©ç”¨channeléå†æ ‘</h5><pre><code class="hljs golang"><span class="hljs-keyword">package</span> goroutines<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><span class="hljs-keyword">type</span> Node <span class="hljs-keyword">struct</span> &#123;Value       <span class="hljs-keyword">int</span>Left, Right *Node&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">createNode</span><span class="hljs-params">(value <span class="hljs-keyword">int</span>)</span> *<span class="hljs-title">Node</span></span> &#123;<span class="hljs-keyword">return</span> &amp;Node&#123;Value: value&#125;&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(node *Node)</span> <span class="hljs-title">setValue</span><span class="hljs-params">(value <span class="hljs-keyword">int</span>)</span></span> &#123;<span class="hljs-comment">// æ¥æ”¶è€…ä½¿ç”¨æŒ‡é’ˆæ‰å¯ä»¥æ”¹å˜ç»“æ„å†…å®¹</span><span class="hljs-keyword">if</span> node == <span class="hljs-literal">nil</span> &#123;fmt.Println(<span class="hljs-string">&quot;Setting Value to nil node. Ignored.&quot;</span>)<span class="hljs-keyword">return</span>&#125;node.Value = value&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(node *Node)</span> <span class="hljs-title">print</span><span class="hljs-params">()</span></span> &#123;<span class="hljs-keyword">if</span> node == <span class="hljs-literal">nil</span> &#123;<span class="hljs-keyword">return</span>&#125;fmt.Print(node.Value, <span class="hljs-string">&quot; &quot;</span>)&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(node *Node)</span><span class="hljs-title">travelsWithFunc</span><span class="hljs-params">(f <span class="hljs-keyword">func</span>(*Node)</span>)</span> &#123;<span class="hljs-keyword">if</span> node == <span class="hljs-literal">nil</span> &#123;<span class="hljs-keyword">return</span>&#125;node.Left.travelsWithFunc(f)f(node)node.Right.travelsWithFunc(f)&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(node *Node)</span><span class="hljs-title">travelWithChannel</span><span class="hljs-params">()</span> <span class="hljs-title">chan</span> *<span class="hljs-title">Node</span></span>&#123;c := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> *Node)<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;node.travelsWithFunc(<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(node *Node)</span></span> &#123;c &lt;- node&#125;)<span class="hljs-built_in">close</span>(c)&#125;()<span class="hljs-keyword">return</span> c&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">initTree</span><span class="hljs-params">()</span> *<span class="hljs-title">Node</span></span> &#123;<span class="hljs-keyword">var</span> root Noderoot = Node&#123;Value: <span class="hljs-number">3</span>&#125;root.Left = &amp;Node&#123;&#125;root.Right = &amp;Node&#123;<span class="hljs-number">5</span>, <span class="hljs-literal">nil</span>, <span class="hljs-literal">nil</span>&#125;root.Right.Left = <span class="hljs-built_in">new</span>(Node)root.Left.Right = createNode(<span class="hljs-number">2</span>)root.Right.Left.setValue(<span class="hljs-number">4</span>)<span class="hljs-keyword">return</span> &amp;root&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Demo</span><span class="hljs-params">()</span></span>  &#123;t := initTree()<span class="hljs-comment">// è®¡æ•°</span>  nodeCount := <span class="hljs-number">0</span>t.travelsWithFunc(<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(node *Node)</span></span> &#123;nodeCount++&#125;)fmt.Println(<span class="hljs-string">&quot;Node counts&quot;</span>, nodeCount)<span class="hljs-comment">// æ ‘ä¸­æœ€å¤§å€¼</span>  c := t.travelWithChannel()maxNode := <span class="hljs-number">0</span><span class="hljs-comment">// ä»channelä¸­å–</span><span class="hljs-keyword">for</span> n := <span class="hljs-keyword">range</span> c &#123;<span class="hljs-keyword">if</span> maxNode &lt; n.Value &#123;maxNode = n.Value&#125;&#125;fmt.Println(<span class="hljs-string">&quot;Max node:&quot;</span>, maxNode)&#125;</code></pre><h4 id="Selectè°ƒåº¦"><a href="#Selectè°ƒåº¦" class="headerlink" title="Selectè°ƒåº¦"></a><code>Select</code>è°ƒåº¦</h4><pre><code class="hljs golang"><span class="hljs-comment">/**</span><span class="hljs-comment"> * Author: Wang P</span><span class="hljs-comment"> * Version: 1.0.0</span><span class="hljs-comment"> * Date: 2021/2/5 ä¸Šåˆ10:37</span><span class="hljs-comment"> * Description: select</span><span class="hljs-comment"> **/</span><span class="hljs-keyword">package</span> goroutines<span class="hljs-keyword">import</span> (<span class="hljs-string">&quot;fmt&quot;</span><span class="hljs-string">&quot;math/rand&quot;</span><span class="hljs-string">&quot;time&quot;</span>)<span class="hljs-keyword">type</span> SelectWorker <span class="hljs-keyword">struct</span> &#123;id <span class="hljs-keyword">string</span>c <span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span>&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(w *SelectWorker)</span> <span class="hljs-title">setValue</span><span class="hljs-params">(id <span class="hljs-keyword">string</span>)</span></span>  &#123;w.id = id&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">selectNotBlock</span><span class="hljs-params">(c1, c2 <span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span>)</span></span>  &#123;<span class="hljs-keyword">for</span> &#123;<span class="hljs-keyword">select</span> &#123;<span class="hljs-keyword">case</span> n := &lt;- c1:fmt.Printf(<span class="hljs-string">&quot;receice %d from c1\n&quot;</span>, n)<span class="hljs-keyword">case</span> n := &lt;-c2:fmt.Printf(<span class="hljs-string">&quot;receice %d from c2\n&quot;</span>, n)<span class="hljs-keyword">default</span>:fmt.Println(<span class="hljs-string">&quot;not receive anything&quot;</span>)&#125;&#125;&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">selectBlock</span><span class="hljs-params">(c1, c2 <span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span>)</span></span>  &#123;<span class="hljs-keyword">for</span> &#123;<span class="hljs-keyword">select</span> &#123;<span class="hljs-keyword">case</span> n := &lt;- c1:fmt.Printf(<span class="hljs-string">&quot;receice %d from c1\n&quot;</span>, n)<span class="hljs-keyword">case</span> n := &lt;-c2:fmt.Printf(<span class="hljs-string">&quot;receice %d from c2\n&quot;</span>, n)&#125;&#125;&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">selectWorkConditionBlock</span><span class="hljs-params">(rw, sw1, sw2 SelectWorker)</span></span>  &#123;<span class="hljs-keyword">var</span> values []<span class="hljs-keyword">int</span>id := <span class="hljs-string">&quot;&quot;</span>endTime := time.After(time.Second * <span class="hljs-number">10</span>)tick := time.Tick(time.Second)<span class="hljs-keyword">for</span> &#123;activeWorker := SelectWorker&#123;c:  <span class="hljs-literal">nil</span>,&#125;<span class="hljs-keyword">var</span> activeValue <span class="hljs-keyword">int</span><span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(values) &gt;<span class="hljs-number">0</span> &#123;rw.setValue(id)activeWorker = rwactiveValue = values[<span class="hljs-number">0</span>]&#125;<span class="hljs-keyword">select</span> &#123;<span class="hljs-keyword">case</span> n := &lt;-sw1.c:id = sw1.idvalues = <span class="hljs-built_in">append</span>(values, n)<span class="hljs-keyword">case</span> n := &lt;-sw2.c:id = sw2.idvalues = <span class="hljs-built_in">append</span>(values, n)<span class="hljs-keyword">case</span> activeWorker.c &lt;- activeValue:values = values[<span class="hljs-number">1</span>:]<span class="hljs-keyword">case</span> &lt;-time.After(time.Millisecond * <span class="hljs-number">600</span>):  <span class="hljs-comment">// 500æ¯«ç§’æœªäº§ç”Ÿæ•°æ®</span>fmt.Println(<span class="hljs-string">&quot;ç¨‹åºè¶…æ—¶&quot;</span>)<span class="hljs-keyword">case</span> &lt;- tick:fmt.Println(<span class="hljs-string">&quot;queue len = &quot;</span>, <span class="hljs-built_in">len</span>(values))<span class="hljs-keyword">case</span> &lt;- endTime:  <span class="hljs-comment">// ç¨‹åºæ‰§è¡Œåˆ°endTimeæ—¶ç»“æŸ</span>fmt.Println(<span class="hljs-string">&quot;ç¨‹åºæ‰§è¡Œç»“æŸ&quot;</span>)<span class="hljs-keyword">return</span>&#125;&#125;&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">generateChannel</span><span class="hljs-params">()</span> <span class="hljs-title">chan</span> <span class="hljs-title">int</span></span>&#123;c := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span>)<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;i := <span class="hljs-number">0</span><span class="hljs-keyword">for</span> &#123;time.Sleep(time.Duration(rand.Intn(<span class="hljs-number">1000</span>)) * time.Millisecond)c &lt;- ii++&#125;&#125;()<span class="hljs-keyword">return</span> c&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">generateWorkChannel</span><span class="hljs-params">(id <span class="hljs-keyword">string</span>)</span> <span class="hljs-title">SelectWorker</span></span> &#123;w := SelectWorker&#123;id:id,c: <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span>),&#125;<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;i := <span class="hljs-number">0</span><span class="hljs-keyword">for</span> &#123;time.Sleep(time.Duration(rand.Intn(<span class="hljs-number">1000</span>)) * time.Millisecond)w.c &lt;- ii++&#125;&#125;()<span class="hljs-keyword">return</span> w&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">selectWorks</span><span class="hljs-params">(id <span class="hljs-keyword">string</span>, rw SelectWorker)</span></span>  &#123;<span class="hljs-comment">// ä¸æ–­çš„ä»channelå–</span><span class="hljs-keyword">for</span>  &#123;fmt.Printf(<span class="hljs-string">&quot;channel %s from %s receive %d\n&quot;</span>, id, rw.id, &lt;-rw.c)time.Sleep(time.Second)&#125;&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">createSelectWorks</span><span class="hljs-params">(id <span class="hljs-keyword">string</span>)</span> <span class="hljs-title">SelectWorker</span></span> &#123;rw := SelectWorker&#123;c:  <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span>),&#125;<span class="hljs-keyword">go</span> selectWorks(id, rw)<span class="hljs-keyword">return</span> rw&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">channelSelectBlock</span><span class="hljs-params">()</span></span>  &#123;<span class="hljs-keyword">var</span> c1, c2 = generateChannel(), generateChannel()selectBlock(c1, c2)&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">channelSelectWork</span><span class="hljs-params">()</span></span>  &#123;<span class="hljs-keyword">var</span> sw1, sw2 = generateWorkChannel(<span class="hljs-string">&quot;send worker1&quot;</span>), generateWorkChannel(<span class="hljs-string">&quot;send worker2&quot;</span>)rw := createSelectWorks(<span class="hljs-string">&quot;receive work1&quot;</span>)selectWorkConditionBlock(rw, sw1, sw2)&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">selectDemo</span><span class="hljs-params">()</span></span>  &#123;<span class="hljs-comment">//var c1, c2 chan int</span><span class="hljs-comment">//selectNotBlock(c1, c2)</span><span class="hljs-comment">//channelSelectBlock()</span>channelSelectWork()&#125;</code></pre><h4 id="åŒæ­¥æœºåˆ¶"><a href="#åŒæ­¥æœºåˆ¶" class="headerlink" title="åŒæ­¥æœºåˆ¶"></a>åŒæ­¥æœºåˆ¶</h4><ul><li><code>WaitGroup</code></li></ul><p>åŸºäº<code>WaitGroup</code>å®ç°é€šä¿¡æ¥å…±äº«å†…å­˜</p><pre><code class="hljs golang"><span class="hljs-comment">/**</span><span class="hljs-comment"> * Author: Wang P</span><span class="hljs-comment"> * Version: 1.0.0</span><span class="hljs-comment"> * Date: 2021/2/5 ä¸‹åˆ5:37</span><span class="hljs-comment"> * Description: åŸºäºWaitGroupå®ç°é€šä¿¡æ¥å…±äº«å†…å­˜</span><span class="hljs-comment"> **/</span><span class="hljs-keyword">package</span> goroutines<span class="hljs-keyword">import</span> (<span class="hljs-string">&quot;fmt&quot;</span><span class="hljs-string">&quot;sync&quot;</span>)<span class="hljs-keyword">type</span> WorkerWG <span class="hljs-keyword">struct</span> &#123;in <span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span>wg *sync.WaitGroup&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">doWorkWaitDone</span><span class="hljs-params">(id <span class="hljs-keyword">int</span>, w WorkerWG)</span></span>  &#123;<span class="hljs-comment">// æ¥æ”¶æ–¹åˆ¤æ–­channelä¸­æœ‰æ•°æ®å°±ä¸æ–­çš„ä»channelå–</span><span class="hljs-keyword">for</span> n := <span class="hljs-keyword">range</span> w.in&#123;fmt.Printf(<span class="hljs-string">&quot;channel %d receive %c\n&quot;</span>, id, n)w.wg.Done()&#125;&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">createWaitDoneWorkers</span><span class="hljs-params">(id <span class="hljs-keyword">int</span>, wg *sync.WaitGroup)</span> <span class="hljs-title">WorkerWG</span></span> &#123;w := WorkerWG&#123;in: <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span>),wg: wg,&#125;<span class="hljs-keyword">go</span> doWorkWaitDone(id, w)<span class="hljs-keyword">return</span> w&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">communicateWaitDone</span><span class="hljs-params">()</span></span>  &#123;<span class="hljs-comment">// åªèƒ½å‘æ•°æ®  chan&lt;- int å°†channel ä½œä¸ºå‡½æ•°è¿”å›å‚æ•°  å³ channelä¹Ÿæ˜¯ä¸€ç­‰å…¬æ°‘</span><span class="hljs-keyword">var</span> works [<span class="hljs-number">10</span>]WorkerWG<span class="hljs-keyword">var</span> wg sync.WaitGroup<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++ &#123;works[i] = createWaitDoneWorkers(i, &amp;wg)&#125;<span class="hljs-comment">//wg.Add(20)</span><span class="hljs-keyword">for</span> i, worker := <span class="hljs-keyword">range</span> works&#123;worker.in &lt;- <span class="hljs-string">&#x27;a&#x27;</span> + iwg.Add(<span class="hljs-number">1</span>)&#125;<span class="hljs-keyword">for</span> i, worker := <span class="hljs-keyword">range</span> works&#123;worker.in &lt;- <span class="hljs-string">&#x27;A&#x27;</span> + iwg.Add(<span class="hljs-number">1</span>)&#125;wg.Wait()&#125;<span class="hljs-keyword">type</span> WorkerWG2 <span class="hljs-keyword">struct</span> &#123;in <span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span>done <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span>  // å‡½æ•°å¼ç¼–ç¨‹</span>&#125;<span class="hljs-comment">// WorkerWGå°è£…</span><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">doWorkWaitDone2</span><span class="hljs-params">(id <span class="hljs-keyword">int</span>, w WorkerWG2)</span></span>  &#123;<span class="hljs-comment">// æ¥æ”¶æ–¹åˆ¤æ–­channelä¸­æœ‰æ•°æ®å°±ä¸æ–­çš„ä»channelå–</span><span class="hljs-keyword">for</span> n := <span class="hljs-keyword">range</span> w.in&#123;fmt.Printf(<span class="hljs-string">&quot;channel %d receive %c\n&quot;</span>, id, n)w.done()&#125;&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">createWaitDoneWorkers2</span><span class="hljs-params">(id <span class="hljs-keyword">int</span>, wg *sync.WaitGroup)</span> <span class="hljs-title">WorkerWG2</span></span> &#123;w := WorkerWG2&#123;in: <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span>),done: <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;wg.Done()&#125;,&#125;<span class="hljs-keyword">go</span> doWorkWaitDone2(id, w)<span class="hljs-keyword">return</span> w&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">communicateWaitDone2</span><span class="hljs-params">()</span></span>  &#123;<span class="hljs-comment">// åªèƒ½å‘æ•°æ®  chan&lt;- int å°†channel ä½œä¸ºå‡½æ•°è¿”å›å‚æ•°  å³ channelä¹Ÿæ˜¯ä¸€ç­‰å…¬æ°‘</span><span class="hljs-keyword">var</span> works [<span class="hljs-number">10</span>]WorkerWG2<span class="hljs-keyword">var</span> wg sync.WaitGroup<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++ &#123;works[i] = createWaitDoneWorkers2(i, &amp;wg)&#125;wg.Add(<span class="hljs-number">20</span>)<span class="hljs-keyword">for</span> i, worker := <span class="hljs-keyword">range</span> works&#123;worker.in &lt;- <span class="hljs-string">&#x27;a&#x27;</span> + i<span class="hljs-comment">//wg.Add(1)</span>&#125;<span class="hljs-keyword">for</span> i, worker := <span class="hljs-keyword">range</span> works&#123;worker.in &lt;- <span class="hljs-string">&#x27;A&#x27;</span> + i<span class="hljs-comment">//wg.Add(1)</span>&#125;wg.Wait()&#125;<span class="hljs-comment">// è¾“å‡º</span>channel <span class="hljs-number">7</span> receive hchannel <span class="hljs-number">5</span> receive fchannel <span class="hljs-number">6</span> receive gchannel <span class="hljs-number">0</span> receive achannel <span class="hljs-number">8</span> receive ichannel <span class="hljs-number">1</span> receive bchannel <span class="hljs-number">3</span> receive dchannel <span class="hljs-number">2</span> receive cchannel <span class="hljs-number">4</span> receive echannel <span class="hljs-number">9</span> receive jchannel <span class="hljs-number">9</span> receive Jchannel <span class="hljs-number">3</span> receive Dchannel <span class="hljs-number">0</span> receive Achannel <span class="hljs-number">5</span> receive Fchannel <span class="hljs-number">2</span> receive Cchannel <span class="hljs-number">4</span> receive Echannel <span class="hljs-number">6</span> receive Gchannel <span class="hljs-number">1</span> receive Bchannel <span class="hljs-number">7</span> receive Hchannel <span class="hljs-number">8</span> receive Ichannel <span class="hljs-number">9</span> receive jchannel <span class="hljs-number">6</span> receive gchannel <span class="hljs-number">8</span> receive ichannel <span class="hljs-number">4</span> receive echannel <span class="hljs-number">0</span> receive achannel <span class="hljs-number">0</span> receive Achannel <span class="hljs-number">2</span> receive cchannel <span class="hljs-number">3</span> receive dchannel <span class="hljs-number">5</span> receive fchannel <span class="hljs-number">1</span> receive bchannel <span class="hljs-number">1</span> receive Bchannel <span class="hljs-number">7</span> receive hchannel <span class="hljs-number">7</span> receive Hchannel <span class="hljs-number">3</span> receive Dchannel <span class="hljs-number">5</span> receive Fchannel <span class="hljs-number">4</span> receive Echannel <span class="hljs-number">6</span> receive Gchannel <span class="hljs-number">9</span> receive Jchannel <span class="hljs-number">2</span> receive Cchannel <span class="hljs-number">8</span> receive I</code></pre><ul><li><code>Mutux</code></li></ul><pre><code class="hljs golang"><span class="hljs-comment">/**</span><span class="hljs-comment"> * Author: Wang P</span><span class="hljs-comment"> * Version: 1.0.0</span><span class="hljs-comment"> * Date: 2021/2/5 ä¸‹åˆ2:34</span><span class="hljs-comment"> * Description:</span><span class="hljs-comment"> **/</span><span class="hljs-keyword">package</span> goroutines<span class="hljs-keyword">import</span> (<span class="hljs-string">&quot;fmt&quot;</span><span class="hljs-string">&quot;sync&quot;</span><span class="hljs-string">&quot;time&quot;</span>)<span class="hljs-keyword">type</span> AtomicInt <span class="hljs-keyword">struct</span> &#123;value <span class="hljs-keyword">int</span>lock sync.Mutex&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(a *AtomicInt)</span> <span class="hljs-title">increase</span><span class="hljs-params">()</span></span>  &#123;fmt.Println(<span class="hljs-string">&quot;safe Increase&quot;</span>)<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span>&#123;<span class="hljs-comment">//a.lock.Lock()</span><span class="hljs-comment">//defer a.lock.Unlock()</span>a.value++&#125;()&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(a *AtomicInt)</span> <span class="hljs-title">get</span><span class="hljs-params">()</span> <span class="hljs-title">int</span></span> &#123;<span class="hljs-comment">//a.lock.Lock()</span><span class="hljs-comment">//defer a.lock.Unlock()</span><span class="hljs-keyword">return</span> a.value&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">AtomicDemo</span><span class="hljs-params">()</span></span>  &#123; i := AtomicInt&#123;&#125; i.increase() <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123; i.increase() &#125;()time.Sleep(time.Millisecond) fmt.Println(i.get())&#125;<span class="hljs-comment">// è¾“å‡º</span>xxx@xxxdeMacBook-Pro î‚° ~/Projects/golang/src/offer/note î‚° î‚  master Â±âœš î‚° <span class="hljs-keyword">go</span> run -race main.<span class="hljs-keyword">go</span>safe Increasesafe Increase==================WARNING: DATA RACERead at <span class="hljs-number">0x00c000134010</span> by main goroutine:  offer/note/goroutines.(*AtomicInt).get()      /Users/wangpeng/Projects/golang/src/offer/note/goroutines/atomic.<span class="hljs-keyword">go</span>:<span class="hljs-number">33</span> +<span class="hljs-number">0xab</span>  offer/note/goroutines.AtomicDemo()      /Users/wangpeng/Projects/golang/src/offer/note/goroutines/atomic.<span class="hljs-keyword">go</span>:<span class="hljs-number">43</span> +<span class="hljs-number">0xb4</span>  main.main()      /Users/wangpeng/Projects/golang/src/offer/note/main.<span class="hljs-keyword">go</span>:<span class="hljs-number">75</span> +<span class="hljs-number">0x2f</span>Previous write at <span class="hljs-number">0x00c000134010</span> by goroutine <span class="hljs-number">7</span>:  offer/note/goroutines.(*AtomicInt).increase.func1()      /Users/wangpeng/Projects/golang/src/offer/note/goroutines/atomic.<span class="hljs-keyword">go</span>:<span class="hljs-number">26</span> +<span class="hljs-number">0xbd</span>  offer/note/goroutines.(*AtomicInt).increase()      /Users/wangpeng/Projects/golang/src/offer/note/goroutines/atomic.<span class="hljs-keyword">go</span>:<span class="hljs-number">27</span> +<span class="hljs-number">0x9e</span>  offer/note/goroutines.AtomicDemo.func1()      /Users/wangpeng/Projects/golang/src/offer/note/goroutines/atomic.<span class="hljs-keyword">go</span>:<span class="hljs-number">40</span> +<span class="hljs-number">0x38</span>Goroutine <span class="hljs-number">7</span> (finished) created at:  offer/note/goroutines.AtomicDemo()      /Users/wangpeng/Projects/golang/src/offer/note/goroutines/atomic.<span class="hljs-keyword">go</span>:<span class="hljs-number">39</span> +<span class="hljs-number">0x90</span>  main.main()      /Users/wangpeng/Projects/golang/src/offer/note/main.<span class="hljs-keyword">go</span>:<span class="hljs-number">75</span> +<span class="hljs-number">0x2f</span>==================<span class="hljs-number">2</span>Found <span class="hljs-number">1</span> data race(s)exit status <span class="hljs-number">66</span></code></pre><pre><code class="hljs golang"><span class="hljs-comment">/**</span><span class="hljs-comment"> * Author: Wang P</span><span class="hljs-comment"> * Version: 1.0.0</span><span class="hljs-comment"> * Date: 2021/2/5 ä¸‹åˆ2:34</span><span class="hljs-comment"> * Description:</span><span class="hljs-comment"> **/</span><span class="hljs-keyword">package</span> goroutines<span class="hljs-keyword">import</span> (<span class="hljs-string">&quot;fmt&quot;</span><span class="hljs-string">&quot;sync&quot;</span><span class="hljs-string">&quot;time&quot;</span>)<span class="hljs-keyword">type</span> AtomicInt <span class="hljs-keyword">struct</span> &#123;value <span class="hljs-keyword">int</span>lock sync.Mutex&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(a *AtomicInt)</span> <span class="hljs-title">increase</span><span class="hljs-params">()</span></span>  &#123;fmt.Println(<span class="hljs-string">&quot;safe Increase&quot;</span>)<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span>&#123;a.lock.Lock()<span class="hljs-keyword">defer</span> a.lock.Unlock()a.value++&#125;()&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(a *AtomicInt)</span> <span class="hljs-title">get</span><span class="hljs-params">()</span> <span class="hljs-title">int</span></span> &#123;a.lock.Lock()<span class="hljs-keyword">defer</span> a.lock.Unlock()<span class="hljs-keyword">return</span> a.value&#125;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">AtomicDemo</span><span class="hljs-params">()</span></span>  &#123; i := AtomicInt&#123;&#125; i.increase() <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123; i.increase() &#125;()time.Sleep(time.Millisecond) fmt.Println(i.get())&#125;<span class="hljs-comment">// è¾“å‡º</span>xxx@xxxdeMacBook-Pro î‚° ~/Projects/golang/src/offer/note î‚° î‚  master Â±âœš î‚° <span class="hljs-keyword">go</span> run -race main.<span class="hljs-keyword">go</span>safe Increasesafe Increase<span class="hljs-number">2</span></code></pre><ul><li><code>Cond</code></li></ul><h3 id="åŒ…ç®¡ç†"><a href="#åŒ…ç®¡ç†" class="headerlink" title="åŒ…ç®¡ç†"></a>åŒ…ç®¡ç†</h3><h4 id="gopm-è·å–æ— æ³•ä¸‹è½½çš„åŒ…"><a href="#gopm-è·å–æ— æ³•ä¸‹è½½çš„åŒ…" class="headerlink" title="gopm è·å–æ— æ³•ä¸‹è½½çš„åŒ…"></a>gopm è·å–æ— æ³•ä¸‹è½½çš„åŒ…</h4><p><code>go get -v github.com/gpmgo/gopm</code></p><p>å®‰è£…è¸©å‘ï¼š</p><pre><code class="hljs zsh">github.com/codegangsta/cli: github.com/codegangsta/cli@v1.22.5: parsing go.mod:module declares its path as: github.com/urfave/cli        but was required as: github.com/codegangsta/cli</code></pre><p>â€‹    å…³é—­go modå³å¯æˆåŠŸå®‰è£…</p><p>githubåœ°å€ï¼š<a href="https://github.com/gpmgo/gopm">https://github.com/gpmgo/gopm</a></p><p>æ–‡æ¡£è·¯å¾„ï¼š<a href="https://github.com/gpmgo/docs/tree/master/zh-CN">https://github.com/gpmgo/docs/tree/master/zh-CN</a></p>]]></content>
    
    
    <categories>
      
      <category>Golang</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Golang</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€MLã€‘æœºå™¨å­¦ä¹ æ¦‚è¿°ä¸ç®€å•åº”ç”¨</title>
    <link href="/2021/01/11/ml/"/>
    <url>/2021/01/11/ml/</url>
    
    <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ "><a href="#ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ " class="headerlink" title="ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ "></a><a id="more"></a>ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ </h3><h4 id="ç›´è§‚è§†è§’ä¸‹çš„æœºå™¨å­¦ä¹ "><a href="#ç›´è§‚è§†è§’ä¸‹çš„æœºå™¨å­¦ä¹ " class="headerlink" title="ç›´è§‚è§†è§’ä¸‹çš„æœºå™¨å­¦ä¹ "></a>ç›´è§‚è§†è§’ä¸‹çš„æœºå™¨å­¦ä¹ </h4><p>å¤§ä¼—è§†è§’ï¼š</p><p><img src="/images/ml/1.jpg" alt="1"></p><p>ç¨‹åºå‘˜è§†è§’ï¼š</p><p><img src="/images/ml/2.jpg" alt="2"></p><p><img src="/images/ml/2.png" alt="2"></p><p>ç›®å‰æœºå™¨å­¦ä¹ å·²ç»åº”ç”¨åˆ°äº†ç”Ÿæ´»çš„å„ä¸ªæ–¹é¢ã€‚</p><p>ç™¾åº¦æœç´¢ï¼šå…¶èƒŒåæœ‰è¿™å¤æ‚çš„æœºå™¨å­¦ä¹ ç³»ç»Ÿåœ¨åŠªåŠ›åœ°è¿›è¡Œè¿™ä¸ªè·Ÿæˆ‘ä»¬ç›®æ ‡å…³é”®è¯ç›¸å…³çš„æ£€ç´¢ã€æ’åºå·¥ä½œï¼›</p><p>ç¾å›¾ã€ç¾æ‹è¿™æ ·çš„ç…§ç›¸è½¯ä»¶ï¼šä½¿ç”¨äº†æœºå™¨å­¦ä¹ æ¥è¯†åˆ«é¢éƒ¨å¹¶è¿›è¡Œä¸€å®šç¨‹åº¦çš„ç¾åŒ–ï¼›</p><p>åƒåœ¾ç®±é‡Œèººç€çš„åƒåœ¾é‚®ä»¶ï¼šå®ƒä»¬éƒ½ä¸æ˜¯æˆ‘ä»¬ä¸»åŠ¨æ‹–æ‹½ç§»åŠ¨è¿›å»çš„ï¼Œè€Œæ˜¯æœºå™¨å­¦ä¹ å¸®æˆ‘ä»¬è‡ªåŠ¨åœ°è¯†åˆ«äº†åƒåœ¾é‚®ä»¶ï¼›</p><p>äº¬ä¸œã€å¤©çŒ«è´­ç‰©æ—¶ï¼Œæ¨èçš„ä¸€äº›æˆ‘ä»¬æ„Ÿå…´è¶£çš„å•†å“ï¼šä¿ƒæˆæˆ‘ä»¬æ›´åŠ ä¾¿æ·åœ°è´­ä¹°ï¼Œæœºå™¨å­¦ä¹ çš„æ¨èç®—æ³•åœ¨å…¶ä¸­å‘æŒ¥ä½œç”¨ï¼›</p><p>è¿˜æœ‰ï¼Œæ–°é—»çš„æ¨èç³»ç»Ÿã€è¯­éŸ³è¯†åˆ«ã€è‡ªç„¶è¯­è¨€å¤„ç†ã€æ— äººé©¾é©¶ã€æœºå™¨ç¿»è¯‘ç­‰ä¼—å¤šé¢†åŸŸéƒ½æœ‰æœºå™¨å­¦ä¹ çš„å½±å­ã€‚</p><p>ç»´åŸºç™¾ç§‘ï¼š<a href="https://zh.wikipedia.org/wiki/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0">https://zh.wikipedia.org/wiki/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0</a></p><p>ç™¾åº¦ç™¾ç§‘ï¼š<a href="https://baike.baidu.com/item/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/217599">https://baike.baidu.com/item/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/217599</a></p><p>æœºå™¨å­¦ä¹ å®é™…ä¸Šæ˜¯ä¸€é—¨â€æ•™ä¼šâ€è®¡ç®—æœºå­¦ä¹ è€Œä¸éœ€è¦æ˜ç¡®åœ°è¿›è¡Œç¼–ç¨‹çš„ç§‘å­¦ã€‚æ¯”å¦‚ï¼Œæ‰«åœ°æœºå™¨äººï¼Œå®ƒåº”è¯¥æ€æ ·å¸®åŠ©æˆ‘ä»¬æ¸…æ‰«æˆ‘ä»¬çš„æˆ¿å­å‘¢ï¼Ÿä¸€ç§åŠæ³•æ˜¯è®©å®ƒå­¦ä¹ æˆ‘ä»¬å¦‚ä½•æ¸…æ‰«ï¼Œè®©å®ƒçœ‹çœ‹æˆ‘ä»¬éƒ½æ¡èµ·äº†ä»€ä¹ˆä¸œè¥¿ï¼Œç„¶åæŠŠå®ƒä»¬åˆæ”¾åˆ°ä»€ä¹ˆåœ°æ–¹ï¼Œè€Œä¸éœ€è¦ç¼–å†™å›ºå®šçš„ç¨‹åºè®©å®ƒä»¬è¯†åˆ«åƒåœ¾ï¼Œå¹¶å°†å®ƒä»¬ç§»åŠ¨åˆ°å›ºå®šçš„åƒåœ¾æ¡¶ã€‚</p><p>æœºå™¨å­¦ä¹ â€”â€”å®é™…ä¸Šåœ¨å¾ˆå¤šé—®é¢˜ä¸Šéƒ½æ˜¯ä¸€ç§é€šç”¨è§£å†³æ–¹æ¡ˆã€‚</p><p>å®ƒåªéœ€è¦é€šè¿‡å¤§é‡çš„å®ä¾‹å°±å¯ä»¥ä»¥å¾ˆé«˜çš„ç²¾åº¦é€¼è¿‘å‡†ç¡®çš„è§£å†³æ–¹æ¡ˆã€‚å®ƒå¸¦æ¥çš„å¥½å¤„æ˜¯ä¸éœ€è¦ä¸¥æ ¼åœ°å»åˆ†æå…·ä½“é—®é¢˜å¹¶æ„é€ ç²¾ç¡®è§£ï¼Œå®ƒä»¥ä¸€ç§é€šç”¨çš„è§£å†³æ–¹æ¡ˆæ¡†æ¶æ¥å¯¹é—®é¢˜è¿›è¡ŒæŠ½è±¡å»ºæ¨¡ï¼Œå¹¶é€šè¿‡å¤§é‡çš„å®ä¾‹æ¥çº æ­£æ¨¡å‹ä¸­çš„å‚æ•°ï¼Œå¹¶æœ€ç»ˆä»¥è¯¥æ¨¡å‹æ¥é€¼è¿‘ç²¾ç¡®è§£ï¼Œæœ€ç»ˆè¾¾åˆ°åº”ç”¨æ ‡å‡†ã€‚</p><p><img src="/images/ml/1-2.jpg" alt="1-2"></p><h4 id="äººå·¥æ™ºèƒ½ã€æœºå™¨å­¦ä¹ ä¸æ·±åº¦å­¦ä¹ "><a href="#äººå·¥æ™ºèƒ½ã€æœºå™¨å­¦ä¹ ä¸æ·±åº¦å­¦ä¹ " class="headerlink" title="äººå·¥æ™ºèƒ½ã€æœºå™¨å­¦ä¹ ä¸æ·±åº¦å­¦ä¹ "></a>äººå·¥æ™ºèƒ½ã€æœºå™¨å­¦ä¹ ä¸æ·±åº¦å­¦ä¹ </h4><p><img src="/images/ml/2-1.jpg" alt="2-1"></p><p><img src="/images/ml/2-2.jpg" alt="2-2"></p><p><img src="/images/ml/2-3.jpg" alt="2-3"></p><p><img src="/images/ml/2-4.jpg" alt="2-4"></p><p><img src="/images/ml/2-5.jpg" alt="2-5"></p><h4 id="æœºå™¨å­¦ä¹ åˆ†ç±»"><a href="#æœºå™¨å­¦ä¹ åˆ†ç±»" class="headerlink" title="æœºå™¨å­¦ä¹ åˆ†ç±»"></a>æœºå™¨å­¦ä¹ åˆ†ç±»</h4><p>æœºå™¨å­¦ä¹ æ ¹æ®è®­ç»ƒæ–¹æ³•å¤§è‡´å¯ä»¥åˆ†ä¸º3å¤§ç±»ï¼š</p><ol><li>ç›‘ç£å­¦ä¹ </li><li>éç›‘ç£å­¦ä¹ </li><li>å¼ºåŒ–å­¦ä¹ </li></ol><p>é™¤æ­¤ä¹‹å¤–ï¼Œå¤§å®¶å¯èƒ½è¿˜å¬è¿‡â€œåŠç›‘ç£å­¦ä¹ â€ä¹‹ç±»çš„è¯´æ³•ï¼Œä½†æ˜¯é‚£äº›éƒ½æ˜¯åŸºäºä¸Šé¢3ç±»çš„å˜ç§ï¼Œæœ¬è´¨æ²¡æœ‰æ”¹å˜ã€‚</p><h5 id="ç›‘ç£å­¦ä¹ "><a href="#ç›‘ç£å­¦ä¹ " class="headerlink" title="ç›‘ç£å­¦ä¹ "></a>ç›‘ç£å­¦ä¹ </h5><p>ç›‘ç£å­¦ä¹ æ˜¯æŒ‡æˆ‘ä»¬ç»™ç®—æ³•ä¸€ä¸ªæ•°æ®é›†ï¼Œå¹¶ä¸”ç»™å®šæ­£ç¡®ç­”æ¡ˆã€‚æœºå™¨é€šè¿‡æ•°æ®æ¥å­¦ä¹ æ­£ç¡®ç­”æ¡ˆçš„è®¡ç®—æ–¹æ³•ã€‚</p><p><img src="/images/ml/1-31.png" alt="1-31"></p><p><img src="/images/ml/1-312.png" alt="1-312"></p><p>ç›‘ç£å¼å­¦ä¹ é‡‡ç”¨åˆ†ç±»å’Œå›å½’æŠ€æœ¯å¼€å‘é¢„æµ‹æ¨¡å‹ã€‚</p><p>   <strong>åˆ†ç±»æŠ€æœ¯</strong>å¯é¢„æµ‹ç¦»æ•£çš„å“åº” â€” ä¾‹å¦‚ï¼Œç”µå­é‚®ä»¶æ˜¯ä¸æ˜¯åƒåœ¾é‚®ä»¶ï¼Œè‚¿ç˜¤æ˜¯æ¶æ€§è¿˜æ˜¯è‰¯æ€§çš„ã€‚åˆ†ç±»æ¨¡å‹å¯å°†è¾“å…¥æ•°æ®åˆ’åˆ†æˆä¸åŒç±»åˆ«ã€‚å…¸å‹çš„åº”ç”¨åŒ…æ‹¬åŒ»å­¦æˆåƒã€è¯­éŸ³è¯†åˆ«å’Œä¿¡ç”¨è¯„ä¼°ã€‚</p><p>å¦‚æœæ‚¨çš„æ•°æ®èƒ½è¿›è¡Œæ ‡è®°ã€åˆ†ç±»æˆ–åˆ†ä¸ºç‰¹å®šçš„ç»„æˆ–ç±»ï¼Œåˆ™ä½¿ç”¨åˆ†ç±»ã€‚ä¾‹å¦‚ï¼Œç¬”è¿¹è¯†åˆ«çš„åº”ç”¨ç¨‹åºä½¿ç”¨åˆ†ç±»æ¥è¯†åˆ«å­—æ¯å’Œæ•°å­—ã€‚åœ¨å›¾åƒå¤„ç†å’Œè®¡ç®—æœºè§†è§‰ä¸­ï¼Œ<a href="https://ww2.mathworks.cn/discovery/pattern-recognition.html">æ— ç›‘ç£æ¨¡å¼è¯†åˆ«</a>æŠ€æœ¯ç”¨äºå¯¹è±¡æ£€æµ‹å’Œå›¾åƒåˆ†å‰²ã€‚</p><p>  <strong>å›å½’æŠ€æœ¯</strong>å¯é¢„æµ‹è¿ç»­çš„å“åº” â€” ä¾‹å¦‚ï¼Œæ¸©åº¦çš„å˜åŒ–æˆ–ç”µåŠ›éœ€æ±‚ä¸­çš„æ³¢åŠ¨ã€‚å…¸å‹çš„åº”ç”¨åŒ…æ‹¬ç”µåŠ›ç³»ç»Ÿè´Ÿè·é¢„æµ‹å’Œç®—æ³•äº¤æ˜“ã€‚</p><p>å¦‚æœæ‚¨åœ¨å¤„ç†ä¸€ä¸ªæ•°æ®èŒƒå›´ï¼Œæˆ–æ‚¨çš„å“åº”æ€§è´¨æ˜¯ä¸€ä¸ªå®æ•°ï¼ˆæ¯”å¦‚æ¸©åº¦ï¼Œæˆ–ä¸€ä»¶è®¾å¤‡å‘ç”Ÿæ•…éšœå‰çš„è¿è¡Œæ—¶é—´ï¼‰ï¼Œåˆ™ä½¿ç”¨å›å½’æ–¹æ³•ã€‚</p><h5 id="éç›‘ç£å­¦ä¹ "><a href="#éç›‘ç£å­¦ä¹ " class="headerlink" title="éç›‘ç£å­¦ä¹ "></a>éç›‘ç£å­¦ä¹ </h5><p>éç›‘ç£å­¦ä¹ ä¸­ï¼Œç»™å®šçš„æ•°æ®é›†æ²¡æœ‰â€œæ­£ç¡®ç­”æ¡ˆâ€ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯ä¸€æ ·çš„ã€‚æ— ç›‘ç£å­¦ä¹ çš„ä»»åŠ¡æ˜¯ä»ç»™å®šçš„æ•°æ®é›†ä¸­ï¼ŒæŒ–æ˜å‡ºæ½œåœ¨çš„ç»“æ„ã€‚</p><p><img src="/images/ml/1-32.png" alt="1-32"></p><p><img src="/images/ml/1-322.png" alt="1-322"></p><p>  <strong>èšç±»</strong>æ˜¯ä¸€ç§æœ€å¸¸ç”¨çš„æ— ç›‘ç£å­¦ä¹ æŠ€æœ¯ã€‚è¿™ç§æŠ€æœ¯å¯é€šè¿‡æ¢ç´¢æ€§æ•°æ®åˆ†æå‘ç°æ•°æ®ä¸­éšè—çš„æ¨¡å¼æˆ–åˆ†ç»„ã€‚<a href="https://ww2.mathworks.cn/discovery/cluster-analysis.html">èšç±»åˆ†æ</a>çš„åº”ç”¨åŒ…æ‹¬åŸºå› åºåˆ—åˆ†æã€å¸‚åœºè°ƒæŸ¥å’Œå¯¹è±¡è¯†åˆ«ã€‚</p><p>  <strong>é™ç»´</strong>å°±æ˜¯æŒ‡é‡‡ç”¨æŸç§æ˜ å°„æ–¹æ³•ï¼Œå°†åŸé«˜ç»´ç©ºé—´ä¸­çš„æ•°æ®ç‚¹æ˜ å°„åˆ°ä½ç»´åº¦çš„ç©ºé—´ä¸­ã€‚é™ç»´çš„æœ¬è´¨æ˜¯å­¦ä¹ ä¸€ä¸ªæ˜ å°„å‡½æ•° f : x-&gt;yï¼Œå…¶ä¸­xæ˜¯åŸå§‹æ•°æ®ç‚¹çš„è¡¨è¾¾ï¼Œç›®å‰æœ€å¤šä½¿ç”¨å‘é‡è¡¨è¾¾å½¢å¼ã€‚</p><p>ç›®å‰å¤§éƒ¨åˆ†é™ç»´ç®—æ³•å¤„ç†å‘é‡è¡¨è¾¾çš„æ•°æ®ï¼Œä¹Ÿæœ‰ä¸€äº›é™ç»´ç®—æ³•å¤„ç†é«˜é˜¶å¼ é‡è¡¨è¾¾çš„æ•°æ®ã€‚ä¹‹æ‰€ä»¥ä½¿ç”¨é™ç»´åçš„æ•°æ®è¡¨ç¤ºæ˜¯å› ä¸ºåœ¨åŸå§‹çš„é«˜ç»´ç©ºé—´ä¸­ï¼ŒåŒ…å«æœ‰å†—ä½™ä¿¡æ¯ä»¥åŠå™ªéŸ³ä¿¡æ¯ï¼Œåœ¨å®é™…åº”ç”¨ä¾‹å¦‚å›¾åƒè¯†åˆ«ä¸­é€ æˆäº†è¯¯å·®ï¼Œé™ä½äº†å‡†ç¡®ç‡ï¼›è€Œé€šè¿‡é™ç»´,æˆ‘ä»¬å¸Œæœ›å‡å°‘ <a href="http://www.hudong.com/wiki/%E5%86%97%E4%BD%99%E4%BF%A1%E6%81%AF">å†—ä½™ä¿¡æ¯</a> æ‰€é€ æˆçš„è¯¯å·®,æé«˜è¯†åˆ«ï¼ˆæˆ–å…¶ä»–åº”ç”¨ï¼‰çš„ç²¾åº¦ã€‚åˆæˆ–è€…å¸Œæœ›é€šè¿‡é™ç»´ç®—æ³•æ¥å¯»æ‰¾æ•°æ®å†…éƒ¨çš„æœ¬è´¨ç»“æ„ç‰¹å¾ã€‚</p><h5 id="å¼ºåŒ–å­¦ä¹ "><a href="#å¼ºåŒ–å­¦ä¹ " class="headerlink" title="å¼ºåŒ–å­¦ä¹ "></a>å¼ºåŒ–å­¦ä¹ </h5><p>å¼ºåŒ–å­¦ä¹ æ›´æ¥è¿‘ç”Ÿç‰©å­¦ä¹ çš„æœ¬è´¨ï¼Œå› æ­¤æœ‰æœ›è·å¾—æ›´é«˜çš„æ™ºèƒ½ã€‚å®ƒå…³æ³¨çš„æ˜¯æ™ºèƒ½ä½“å¦‚ä½•åœ¨ç¯å¢ƒä¸­é‡‡å–ä¸€ç³»åˆ—è¡Œä¸ºï¼Œä»è€Œè·å¾—æœ€å¤§çš„ç´¯ç§¯å›æŠ¥ã€‚é€šè¿‡å¼ºåŒ–å­¦ä¹ ï¼Œä¸€ä¸ªæ™ºèƒ½ä½“åº”è¯¥çŸ¥é“åœ¨ä»€ä¹ˆçŠ¶æ€ä¸‹åº”è¯¥é‡‡å–ä»€ä¹ˆè¡Œä¸ºã€‚</p><p><img src="/images/ml/1-33.jpg" alt="1-33"></p><h3 id="æ€æ ·ç”±æ•°æ®å’Œç­”æ¡ˆå¾—åˆ°è§„åˆ™ï¼Ÿ"><a href="#æ€æ ·ç”±æ•°æ®å’Œç­”æ¡ˆå¾—åˆ°è§„åˆ™ï¼Ÿ" class="headerlink" title="æ€æ ·ç”±æ•°æ®å’Œç­”æ¡ˆå¾—åˆ°è§„åˆ™ï¼Ÿ"></a>æ€æ ·ç”±æ•°æ®å’Œç­”æ¡ˆå¾—åˆ°è§„åˆ™ï¼Ÿ</h3><h4 id="æ•°æ®æ”¶é›†"><a href="#æ•°æ®æ”¶é›†" class="headerlink" title="æ•°æ®æ”¶é›†"></a>æ•°æ®æ”¶é›†</h4><h5 id="å…¬å¸å†å²æ•°æ®ç§¯ç´¯"><a href="#å…¬å¸å†å²æ•°æ®ç§¯ç´¯" class="headerlink" title="å…¬å¸å†å²æ•°æ®ç§¯ç´¯"></a>å…¬å¸å†å²æ•°æ®ç§¯ç´¯</h5><h5 id="å¸¸è§å…¬å¼€æ•°æ®é›†"><a href="#å¸¸è§å…¬å¼€æ•°æ®é›†" class="headerlink" title="å¸¸è§å…¬å¼€æ•°æ®é›†"></a>å¸¸è§å…¬å¼€æ•°æ®é›†</h5><p><a href="https://www.infoq.cn/article/zCGdpvyxJJl7*ja4RQAZ">https://www.infoq.cn/article/zCGdpvyxJJl7*ja4RQAZ</a></p><p><a href="https://zhuanlan.zhihu.com/p/34497496">https://zhuanlan.zhihu.com/p/34497496</a></p><h5 id="ç½‘ç»œçˆ¬è™«"><a href="#ç½‘ç»œçˆ¬è™«" class="headerlink" title="ç½‘ç»œçˆ¬è™«"></a>ç½‘ç»œçˆ¬è™«</h5><h4 id="ç‰¹å¾è¡¨è¾¾ï¼ˆå»å™ªã€ç‰¹å¾æå–ä¸é€‰æ‹©ï¼‰"><a href="#ç‰¹å¾è¡¨è¾¾ï¼ˆå»å™ªã€ç‰¹å¾æå–ä¸é€‰æ‹©ï¼‰" class="headerlink" title="ç‰¹å¾è¡¨è¾¾ï¼ˆå»å™ªã€ç‰¹å¾æå–ä¸é€‰æ‹©ï¼‰"></a>ç‰¹å¾è¡¨è¾¾ï¼ˆå»å™ªã€ç‰¹å¾æå–ä¸é€‰æ‹©ï¼‰</h4><p>å…¶å®ï¼Œè¯´ç™½äº†ï¼Œå°±æ˜¯æˆ‘ä»¬äººçœ¼å¯è§çš„ç‰¹å¾è½¬åŒ–ä¸ºæ•°å­—ç‰¹å¾ï¼ˆå¯ä»¥ç”¨æ•°å­¦å…¬å¼ï¼‰çš„è¿‡ç¨‹ï¼Œå¹¶ä¸”è¿™ä¸€è¿‡ç¨‹æ˜¯æœºå™¨å­¦ä¹ æœ€é‡è¦çš„ç¯èŠ‚ã€‚</p><p>  <strong>å»å™ª</strong>ï¼šå»é™¤å½±å“æœºå™¨å­¦ä¹ ç»“æœçš„åŸå§‹æ•°æ®ã€‚</p><p>  <strong>åˆ†ç±»å˜é‡ç‰¹å¾æå–</strong>ï¼šæˆ¿ä»·é¢„æµ‹ä¸­æˆ¿å­çš„é¢ç§¯ã€æœå‘ã€ä½ç½®ã€è£…ä¿®ã€æ¥¼å±‚ç­‰ç­‰ï¼Œå®ƒæ˜¯æ ‡è®°çš„å˜é‡ï¼Œä¸æ˜¯è¿ç»­çš„ã€‚</p><p>  <strong>æ–‡å­—ç‰¹å¾æå–</strong>ï¼šå¾ˆå¤šæœºå™¨å­¦ä¹ é—®é¢˜æ¶‰åŠè‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰ï¼Œå¿…ç„¶è¦å¤„ç†æ–‡å­—ä¿¡æ¯ã€‚æ–‡å­—å¿…é¡»è½¬æ¢æˆå¯ä»¥é‡åŒ–çš„ç‰¹å¾å‘é‡ã€‚ä¾‹å¦‚å’±ä»¬å…¬å¸çš„ç ”å‘éƒ¨ç®—æ³•ç»„åšçš„åƒåœ¾å¹¿å‘Šå±è”½å™¨ã€‚</p><p>  <strong>å›¾ç‰‡ç‰¹å¾æå–</strong>ï¼šåšå›¾åƒè¯†åˆ«æ—¶ï¼Œæˆ‘ä»¬äººçœ¼çœ‹åˆ°çš„æ—¶å›¾ç‰‡ï¼Œä½†æ˜¯åœ¨æœºå™¨ä¸­åˆ™æ˜¯ä¸€ä¸ªæ•°å­—è¡¨ç¤ºçš„äºŒç»´çŸ©é˜µã€‚</p><p>  <strong>æ•°æ®æ ‡å‡†åŒ–</strong>ï¼šä¸»è¦ç”¨äºå¯¹æå–åçš„æ•°å­—ç‰¹å¾è¿›è¡Œå¤„ç†ï¼Œå› ä¸ºæå–å¥½çš„æ•°å­—ç‰¹å¾å¯èƒ½ä¼šå·®è·æ¯”è¾ƒå¤§ï¼Œé‚£ä¹ˆè®­ç»ƒæ¨¡å‹æ—¶ï¼Œå¾—åˆ°çš„ç‰¹å¾æƒé‡ä¼šæ¯”è¾ƒå¤§æˆ–è€…æ¯”è¾ƒå°ï¼ŒåŒæ—¶ä¹Ÿå½±å“è®¡ç®—é€Ÿåº¦ã€‚</p><h4 id="æ¨¡å‹é€‰æ‹©"><a href="#æ¨¡å‹é€‰æ‹©" class="headerlink" title="æ¨¡å‹é€‰æ‹©"></a>æ¨¡å‹é€‰æ‹©</h4><p>é€‰æ‹©æ­£ç¡®çš„ç®—æ³•çœ‹ä¼¼éš¾ä»¥é©¾é©­â€”â€”éœ€è¦ä»å‡ åç§ç›‘ç£å¼å’Œéç›‘ç£æœºå™¨å­¦ä¹ ç®—æ³•ä¸­é€‰æ‹©ï¼Œæ¯ç§ç®—æ³•åˆåŒ…å«ä¸åŒçš„å­¦ä¹ æ–¹æ³•ã€‚</p><p>æ²¡æœ‰æœ€ä½³æ–¹æ³•æˆ–ä¸‡å…¨ä¹‹ç­–ã€‚æ‰¾åˆ°æ­£ç¡®çš„ç®—æ³•åªæ˜¯è¯•é”™è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†â€”â€”å³ä½¿æ˜¯ç»éªŒä¸°å¯Œçš„æ•°æ®ç§‘å­¦å®¶ï¼Œä¹Ÿæ— æ³•è¯´å‡ºæŸç§ç®—æ³•æ˜¯å¦æ— éœ€è¯•é”™å³å¯ä½¿ç”¨ã€‚ä½†ç®—æ³•çš„é€‰æ‹©è¿˜å–å†³äºæ‚¨è¦å¤„ç†çš„æ•°æ®çš„å¤§å°å’Œç±»å‹ã€æ‚¨è¦ä»æ•°æ®ä¸­è·å¾—çš„æ´å¯ŸåŠ›ä»¥åŠå¦‚ä½•è¿ç”¨è¿™äº›æ´å¯ŸåŠ›ã€‚</p><p><img src="/images/ml/3-31.png" alt="3-31"></p><h4 id="æ¨¡å‹è®­ç»ƒ"><a href="#æ¨¡å‹è®­ç»ƒ" class="headerlink" title="æ¨¡å‹è®­ç»ƒ"></a>æ¨¡å‹è®­ç»ƒ</h4><p>æˆ¿ä»·é¢„æµ‹ä¸ºä¾‹</p><p><img src="/images/ml/3-4-1.png" alt="3-4-1"></p><p>ç®—æ³•æ¨¡å‹ä»¥ç®€å•å¤šå˜é‡çº¿æ€§å›å½’ä¸ºä¾‹</p><table><thead><tr><th>é¢ç§¯(ã¡)</th><th>å§å®¤æ•°</th><th>å«ç”Ÿé—´æ•°</th><th>æˆ¿é¾„</th><th>å”®ä»·(ç™¾ä¸‡å…ƒ)</th></tr></thead><tbody><tr><td>62.47</td><td>2</td><td>1</td><td>12</td><td>213</td></tr><tr><td>58.05</td><td>1</td><td>1</td><td>20</td><td>180</td></tr><tr><td>55.87</td><td>1</td><td>1</td><td>16</td><td>152</td></tr><tr><td>68.04</td><td>2</td><td>2</td><td>18</td><td>198</td></tr></tbody></table><p><img src="/images/ml/3-4-2.jpg" alt="3-4-2"></p><p>é‚£ä¹ˆï¼Œè¿™é‡Œçš„å‡è®¾å‡½æ•°</p><p><img src="/images/ml/3-4-3.jpg" alt="3-4-3"></p><p>å‡è®¾å€¼ä¸çœŸå®å€¼ä¹‹é—´çš„å·®å°±æ˜¯è¿™ä¸ªæ¨¡å‹çš„è¯¯å·®ï¼ˆä»£ä»·ï¼‰</p><p><img src="/images/ml/3-4-4.jpg" alt="3-4-4"></p><p>å½“ä»£ä»·å‡½æ•°çš„å€¼è¶‹è¿‘äº0æ—¶ï¼Œæ¨¡å‹å°±æ¯”è¾ƒå®Œç¾äº†</p><h4 id="å‚æ•°è°ƒæ•´"><a href="#å‚æ•°è°ƒæ•´" class="headerlink" title="å‚æ•°è°ƒæ•´"></a>å‚æ•°è°ƒæ•´</h4><p>é‚£æ€æ ·èƒ½æ˜¯ä»£ä»·å‡½æ•°æœ€å°åŒ–ï¼Ÿ</p><p>æ¢¯åº¦ä¸‹é™</p><p>å…±è½­æ¢¯åº¦</p><p>æ‹Ÿç‰›é¡¿è¿­ä»£æ³•ï¼ˆBFGSï¼‰</p><p>L-BFGS</p><p>â€¦â€¦</p><p>è¿™é‡Œï¼Œæˆ‘ä»¬å·²æ¢¯åº¦ä¸‹é™æ³•ä¸ºä¾‹ï¼š</p><p><img src="/images/ml/3-4-5.jpg" alt="3-4-5"></p><h4 id><a href="#" class="headerlink" title></a><img src="/images/ml/3-4-6.jpg" alt="3-4-6"></h4><h4 id="æ¨¡å‹è¯„ä¼°"><a href="#æ¨¡å‹è¯„ä¼°" class="headerlink" title="æ¨¡å‹è¯„ä¼°"></a>æ¨¡å‹è¯„ä¼°</h4><p>å¯¹äºåˆ†ç±»é—®é¢˜ï¼š</p><p>æ­£ç¡®ç‡ã€å¬å›ç‡ã€F1å€¼ç­‰ç­‰</p><p><img src="/images/ml/3-4-8.jpg" alt="3-4-8"></p><p><img src="/images/ml/3-4-7.jpg" alt="3-4-7"></p><p>å¯¹äºå›å½’é—®é¢˜ï¼š</p><p><img src="/images/ml/3-4-9.jpg" alt="3-6-3"></p><p><img src="/images/ml/3-4-10.jpg" alt="3-6-4"></p><p>ä¸è¿‡æ‹Ÿåˆå¯¹åº”çš„ï¼Œå°±æœ‰æ¬ æ‹Ÿåˆ</p><h4 id="å®é™…é¢„æµ‹"><a href="#å®é™…é¢„æµ‹" class="headerlink" title="å®é™…é¢„æµ‹"></a>å®é™…é¢„æµ‹</h4><p>ç›´æ¥å°†æ ·æœ¬å‚æ•°å¸¦å…¥hå‡è®¾å‡½æ•°ï¼Œä¾¿å¯ä»¥å¾—åˆ°é¢„æµ‹å€¼</p><h3 id="ç®€å•çº¿æ€§å›å½’å®ç°"><a href="#ç®€å•çº¿æ€§å›å½’å®ç°" class="headerlink" title="ç®€å•çº¿æ€§å›å½’å®ç°"></a>ç®€å•çº¿æ€§å›å½’å®ç°</h3><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<span class="hljs-keyword">import</span> matplotlibmatplotlib.rcParams[<span class="hljs-string">&#x27;font.sans-serif&#x27;</span>] = [<span class="hljs-string">&#x27;SimHei&#x27;</span>]matplotlib.rcParams[<span class="hljs-string">&#x27;font.family&#x27;</span>] = <span class="hljs-string">&#x27;sans-serif&#x27;</span>matplotlib.rcParams[<span class="hljs-string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="hljs-literal">False</span><span class="hljs-keyword">from</span> mpl_toolkits.mplot3d <span class="hljs-keyword">import</span> axes3d<span class="hljs-keyword">from</span> matplotlib <span class="hljs-keyword">import</span> cmimport matplotlib.ticker <span class="hljs-keyword">as</span> mtick<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">loadDataSet</span>(<span class="hljs-params">filename</span>):</span>    X = []    Y = []    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename, <span class="hljs-string">&#x27;rb&#x27;</span>) <span class="hljs-keyword">as</span> f:        <span class="hljs-keyword">for</span> idx, line <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(f):            line = line.decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>).strip()            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> line:                <span class="hljs-keyword">continue</span>            eles = line.split()            <span class="hljs-keyword">if</span> idx == <span class="hljs-number">0</span>:                numFea = <span class="hljs-built_in">len</span>(eles)            eles = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">float</span>, eles))            X.append(eles[:<span class="hljs-number">-1</span>])            Y.append([eles[<span class="hljs-number">-1</span>]])    <span class="hljs-keyword">return</span> np.array(X), np.array(Y)<span class="hljs-comment"># å‡è®¾å‡½æ•°</span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">h</span>(<span class="hljs-params">theta, X</span>):</span>    <span class="hljs-keyword">return</span> np.dot(X, theta)<span class="hljs-comment"># ä»£ä»·å‡½æ•°</span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">J</span>(<span class="hljs-params">theta, X, Y</span>):</span>    m = <span class="hljs-built_in">len</span>(X)    <span class="hljs-keyword">return</span> np.<span class="hljs-built_in">sum</span>(np.dot((h(theta, X) - Y).T, (h(theta, X) - Y)) / (<span class="hljs-number">2</span> * m))<span class="hljs-comment"># æ¢¯åº¦ä¸‹é™æ›´æ–°å…¬å¼</span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">bgd</span>(<span class="hljs-params">alpha, maxloop, epsilon, X, Y</span>):</span>    m, n = X.shape  <span class="hljs-comment"># mæ˜¯æ ·æœ¬æ•°ï¼Œnæ˜¯ç‰¹å¾æ•°(åŒ…æ‹¬äº†å…¨éƒ¨æ˜¯1çš„x0)ï¼Œå…¶å®ä¹Ÿå°±æ˜¯å‚æ•°thetaçš„ä¸ªæ•°</span>    theta = np.zeros((n, <span class="hljs-number">1</span>))  <span class="hljs-comment"># å‚æ•°thetaå…¨éƒ¨åˆå§‹åŒ–ä¸º0</span>    count = <span class="hljs-number">0</span>  <span class="hljs-comment"># è®°å½•è¿­ä»£è½®æ¬¡</span>    converged = <span class="hljs-literal">False</span>  <span class="hljs-comment"># æ˜¯å¦å·²ç»æ”¶æ•›çš„æ ‡å¿—</span>    error = np.inf  <span class="hljs-comment"># å½“å‰çš„ä»£ä»·å‡½æ•°å€¼</span>    errors = [J(theta, X, Y), ]  <span class="hljs-comment"># è®°å½•æ¯ä¸€æ¬¡è¿­ä»£å¾—ä»£ä»·å‡½æ•°å€¼</span>    thetas = &#123;&#125;    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):        thetas[i] = [theta[i, <span class="hljs-number">0</span>], ]  <span class="hljs-comment"># è®°å½•æ¯ä¸€ä¸ªtheta jçš„å†å²æ›´æ–°</span>    <span class="hljs-keyword">while</span> count &lt;= maxloop:        <span class="hljs-keyword">if</span> (converged):            <span class="hljs-keyword">break</span>        count = count + <span class="hljs-number">1</span>        <span class="hljs-comment"># è¿™é‡Œï¼Œæˆ‘ä»¬çš„æ¢¯åº¦è®¡ç®—ç»Ÿä¸€äº†</span>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):            deriv = np.dot(X[:, j].T, (h(theta, X) - Y)).<span class="hljs-built_in">sum</span>() / m            thetas[j].append(theta[j, <span class="hljs-number">0</span>] - alpha * deriv)        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):            theta[j, <span class="hljs-number">0</span>] = thetas[j][<span class="hljs-number">-1</span>]        error = J(theta, X, Y)        errors.append(error)        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">abs</span>(errors[<span class="hljs-number">-1</span>] - errors[<span class="hljs-number">-2</span>]) &lt; epsilon):            converged = <span class="hljs-literal">True</span>    <span class="hljs-keyword">return</span> theta, errors, thetas<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">standarize</span>(<span class="hljs-params">X</span>):</span>    <span class="hljs-string">&quot;&quot;&quot;ç‰¹å¾æ ‡å‡†åŒ–å¤„ç†</span><span class="hljs-string"></span><span class="hljs-string">    Args:</span><span class="hljs-string">        X æ ·æœ¬é›†</span><span class="hljs-string">    Returns:</span><span class="hljs-string">        æ ‡å‡†åçš„æ ·æœ¬é›†</span><span class="hljs-string">    &quot;&quot;&quot;</span>    m, n = X.shape    <span class="hljs-comment"># å½’ä¸€åŒ–æ¯ä¸€ä¸ªç‰¹å¾</span>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):        features = X[:, j]        meanVal = features.mean(axis=<span class="hljs-number">0</span>)        std = features.std(axis=<span class="hljs-number">0</span>)        <span class="hljs-keyword">if</span> std != <span class="hljs-number">0</span>:            X[:, j] = (features - meanVal) / std        <span class="hljs-keyword">else</span>:            X[:, j] = <span class="hljs-number">0</span>    <span class="hljs-keyword">return</span> X<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:    data_set = os.path.dirname(os.path.abspath(__file__))+<span class="hljs-string">&#x27;/houses.txt&#x27;</span>    ori_X, Y = loadDataSet(data_set)  <span class="hljs-comment"># ä»å—äº¬é“¾å®¶æŠ“å–çš„å¤«å­åº™é™„è¿‘çš„æˆ¿å±‹æ•°æ®</span>    print(ori_X.shape)    print(Y.shape)    m, n = ori_X.shape    X = standarize(ori_X.copy())    X = np.concatenate((np.ones((m, <span class="hljs-number">1</span>)), X), axis=<span class="hljs-number">1</span>)    alpha = <span class="hljs-number">1</span>  <span class="hljs-comment"># å­¦ä¹ ç‡</span>    maxloop = <span class="hljs-number">5000</span>  <span class="hljs-comment"># æœ€å¤§è¿­ä»£æ¬¡æ•°</span>    epsilon = <span class="hljs-number">0.000001</span>  <span class="hljs-comment"># æ”¶æ•›åˆ¤æ–­æ¡ä»¶</span>    result = bgd(alpha, maxloop, epsilon, X, Y)    theta, errors, thetas = result    <span class="hljs-comment"># é¢„æµ‹</span>    normalizedSize = (<span class="hljs-number">70</span> - ori_X[:, <span class="hljs-number">0</span>].mean(<span class="hljs-number">0</span>)) / ori_X[:, <span class="hljs-number">0</span>].std(<span class="hljs-number">0</span>)    normalizedBr = (<span class="hljs-number">2</span> - ori_X[:, <span class="hljs-number">1</span>].mean(<span class="hljs-number">0</span>)) / ori_X[:, <span class="hljs-number">1</span>].std(<span class="hljs-number">0</span>)    predicateX = np.matrix([[<span class="hljs-number">1</span>, normalizedSize, normalizedBr]])    price = h(theta, predicateX)    print(<span class="hljs-string">&#x27;70ã¡ä¸¤å±…ä¼°ä»·: ï¿¥%.4fä¸‡å…ƒ&#x27;</span> % price)    <span class="hljs-comment"># %matplotlib</span>    <span class="hljs-comment"># æ‰“å°æ‹Ÿåˆå¹³é¢</span>    fittingFig = plt.figure(figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">12</span>))    title = <span class="hljs-string">&#x27;bgd: rate=%.3f, maxloop=%d, epsilon=%.3f \n&#x27;</span> % (alpha, maxloop, epsilon)    ax = fittingFig.gca(projection=<span class="hljs-string">&#x27;3d&#x27;</span>)    xx = np.linspace(<span class="hljs-number">0</span>, <span class="hljs-number">200</span>, <span class="hljs-number">25</span>)    yy = np.linspace(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>, <span class="hljs-number">25</span>)    zz = np.zeros((<span class="hljs-number">25</span>, <span class="hljs-number">25</span>))    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">25</span>):        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">25</span>):            normalizedSize = (xx[i] - ori_X[:, <span class="hljs-number">0</span>].mean(<span class="hljs-number">0</span>)) / ori_X[:, <span class="hljs-number">0</span>].std(<span class="hljs-number">0</span>)            normalizedSize = (xx[i] - ori_X[:, <span class="hljs-number">0</span>].mean(<span class="hljs-number">0</span>)) / ori_X[:, <span class="hljs-number">0</span>].std(<span class="hljs-number">0</span>)            x = np.matrix([[<span class="hljs-number">1</span>, normalizedSize, normalizedBr]])            zz[i, j] = h(theta, x)    xx, yy = np.meshgrid(xx, yy)    ax.zaxis.set_major_formatter(mtick.FormatStrFormatter(<span class="hljs-string">&#x27;%.2e&#x27;</span>))    ax.plot_surface(xx, yy, zz, rstride=<span class="hljs-number">1</span>, cstride=<span class="hljs-number">1</span>, cmap=cm.rainbow, alpha=<span class="hljs-number">0.1</span>, antialiased=<span class="hljs-literal">True</span>)    xs = ori_X[:, <span class="hljs-number">0</span>].flatten()    ys = ori_X[:, <span class="hljs-number">1</span>].flatten()    zs = Y[:, <span class="hljs-number">0</span>].flatten()    ax.scatter(xs, ys, zs, c=<span class="hljs-string">&#x27;b&#x27;</span>, marker=<span class="hljs-string">&#x27;o&#x27;</span>)    ax.set_xlabel(<span class="hljs-string">u&#x27;é¢ç§¯&#x27;</span>)    ax.set_ylabel(<span class="hljs-string">u&#x27;å§å®¤æ•°&#x27;</span>)    ax.set_zlabel(<span class="hljs-string">u&#x27;ä¼°ä»·&#x27;</span>)    plt.show()    errorsFig = plt.figure()    ax = errorsFig.add_subplot(<span class="hljs-number">111</span>)    ax.yaxis.set_major_formatter(mtick.FormatStrFormatter(<span class="hljs-string">&#x27;%.2e&#x27;</span>))    ax.plot(<span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(errors)), errors)    ax.set_xlabel(<span class="hljs-string">u&#x27;è¿­ä»£æ¬¡æ•°&#x27;</span>)    ax.set_ylabel(<span class="hljs-string">u&#x27;ä»£ä»·å‡½æ•°&#x27;</span>)    plt.show()</code></pre><p><img src="/images/ml/3-6-1.jpg" alt="3-6-1"></p><p><img src="/images/ml/3-6-2.jpg" alt="3-6-2"></p>]]></content>
    
    
    <categories>
      
      <category>ML</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>ML</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€Macã€‘vimç¯å¢ƒè®¾ç½®</title>
    <link href="/2021/01/10/vim/"/>
    <url>/2021/01/10/vim/</url>
    
    <content type="html"><![CDATA[<h2 id="å¼€å‘ç¥å™¨vimå·¥å…·"><a href="#å¼€å‘ç¥å™¨vimå·¥å…·" class="headerlink" title="å¼€å‘ç¥å™¨vimå·¥å…·"></a><a id="more"></a>å¼€å‘ç¥å™¨vimå·¥å…·</h2><p><img src="/images/vim/vim-keymap.png"></p><h3 id="å®‰è£…MacVimæ¥æ›¿ä»£ç³»ç»Ÿè‡ªå¸¦vim"><a href="#å®‰è£…MacVimæ¥æ›¿ä»£ç³»ç»Ÿè‡ªå¸¦vim" class="headerlink" title="å®‰è£…MacVimæ¥æ›¿ä»£ç³»ç»Ÿè‡ªå¸¦vim"></a>å®‰è£…MacVimæ¥æ›¿ä»£ç³»ç»Ÿè‡ªå¸¦vim</h3><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒMac è‡ªå¸¦çš„Vimä¸èƒ½æ»¡è¶³å¤§å¤šçš„éœ€æ±‚ï¼Œæ‰€ä»¥é€‰æ‹©å®‰è£…MacVim</p><p>é€šè¿‡ä¸€ä¸‹å‘½ä»¤å¯ä»¥æŸ¥çœ‹é¢„è£…vimçš„ä¿¡æ¯</p><pre><code class="hljs zsh"><span class="hljs-comment"># æŸ¥çœ‹é¢„è£…vimç‰ˆæœ¬</span>vim --version<span class="hljs-comment"># æŸ¥çœ‹é¢„è£…vimè·¯å¾„</span><span class="hljs-built_in">where</span> vim</code></pre><h4 id="MacVimå®‰è£…"><a href="#MacVimå®‰è£…" class="headerlink" title="MacVimå®‰è£…"></a>MacVimå®‰è£…</h4><p>æœ‰ä¸¤ç§æ–¹å¼æ¥å®‰è£…macvim:</p><ol><li>Githubä¸Šä¸‹è½½<a href="https://macvim-dev.github.io/macvim"><code>macvim.dmg</code></a>å®‰è£…åŒ…è¿›è¡Œå®‰è£…</li><li>ä½¿ç”¨<a href="https://brew.sh/">Homebrew</a>å®‰è£…ã€æ¨èã€‘</li></ol><p>brewå®‰è£…macvim</p><pre><code class="hljs zsh">brew install macvim</code></pre><p>ä¸ºmacvimä¸­çš„vimåˆ›å»ºåˆ«åï¼Œè¦†ç›–æ‰ç³»ç»Ÿè‡ªå¸¦çš„vimï¼Œåœ¨~/.bash_profileä¸­æ·»åŠ ä»¥ä¸‹å‘½ä»¤</p><pre><code class="hljs zsh"><span class="hljs-built_in">alias</span> vi=vim<span class="hljs-built_in">alias</span> vim=mvim<span class="hljs-built_in">alias</span> mvim=<span class="hljs-string">&#x27;/usr/local/bin/mvim -v&#x27;</span><span class="hljs-comment"># åˆ·æ–°é…ç½®æ–‡ä»¶</span><span class="hljs-built_in">source</span> ~/.bash_profile</code></pre><h4 id="MacVimé…ç½®"><a href="#MacVimé…ç½®" class="headerlink" title="MacVimé…ç½®"></a>MacVimé…ç½®</h4><p>åœ¨vimå¯åŠ¨è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆå°†æŸ¥æ‰¾é…ç½®æ–‡ä»¶å¹¶æ‰§è¡Œå…¶ä¸­çš„å‘½ä»¤ï¼Œè€Œè¿™äº›åˆå§‹åŒ–æ–‡ä»¶ä¸€èˆ¬æœ‰vimrcã€gvimrcå’Œexrcä¸‰ç§ã€‚é€šè¿‡<code>:version</code>å‘½ä»¤å¯ä»¥æŸ¥çœ‹vimçš„é…ç½®æ–‡ä»¶ä¿¡æ¯ã€‚</p><p>vimçš„é…ç½®æ–‡ä»¶æœ‰å…¨å±€å’Œç”¨æˆ·ä¸¤ç§ç‰ˆæœ¬ï¼Œåˆ†åˆ«å­˜æ”¾äº<code>$VIM</code>å’Œ<code>$HOME</code>ç›®å½•ä¸­ï¼Œç”¨æˆ·é…ç½®æ–‡ä»¶é»˜è®¤æ˜¯æ²¡æœ‰çš„ï¼Œå¿…è¦æ—¶ç”±ç”¨æˆ·è‡ªå·±åœ¨<code>$HOME</code>ç›®å½•ä¸‹åˆ›å»ºã€‚å¯ä»¥ä½¿ç”¨<code>:echo</code>å‘½ä»¤æŸ¥çœ‹ä»–ä»¬çš„è·¯å¾„ï¼Œä½¿ç”¨<code>:e</code>å‘½ä»¤è¿›å…¥ç›®å½•ã€‚</p><pre><code class="hljs zsh">:<span class="hljs-built_in">echo</span> <span class="hljs-variable">$VIM</span>/usr/<span class="hljs-built_in">local</span>/Cellar/macvim/8.2-166_1/MacVim.app/Contents/Resources/vim:<span class="hljs-built_in">echo</span> <span class="hljs-variable">$HOME</span>/Users/wangpeng<span class="hljs-comment"># å¯ä»¥é€šè¿‡:scriptnameæŸ¥çœ‹å„è„šæœ¬çš„åŠ è½½é¡ºåº</span>:scriptname/usr/<span class="hljs-built_in">local</span>/Cellar/macvim/8.2-166_1/MacVim.app/Contents/Resources/vim/vimrc  2: ~/.vimrc  3: /usr/<span class="hljs-built_in">local</span>/Cellar/macvim/8.2-166_1/MacVim.app/Contents/Resources/vim/runtime/syntax/syntax.vim  4: /usr/<span class="hljs-built_in">local</span>/Cellar/macvim/8.2-166_1/MacVim.app/Contents/Resources/vim/runtime/syntax/synload.vim  5: /usr/<span class="hljs-built_in">local</span>/Cellar/macvim/8.2-166_1/MacVim.app/Contents/Resources/vim/runtime/syntax/syncolor.vim  6: /usr/<span class="hljs-built_in">local</span>/Cellar/macvim/8.2-166_1/MacVim.app/Contents/Resources/vim/runtime/filetype.vim  7: ~/.vim/colors/solarized.vim  8: /usr/<span class="hljs-built_in">local</span>/Cellar/macvim/8.2-166_1/MacVim.app/Contents/Resources/vim/runtime/ftoff.vim  9: ~/.vim/bundle/Vundle.vim/<span class="hljs-built_in">autoload</span>/vundle.vim 10: ~/.vim/bundle/Vundle.vim/<span class="hljs-built_in">autoload</span>/vundle/config.vim 11: /usr/<span class="hljs-built_in">local</span>/Cellar/macvim/8.2-166_1/MacVim.app/Contents/Resources/vim/runtime/ftplugin.vim 12: /usr/<span class="hljs-built_in">local</span>/Cellar/macvim/8.2-166_1/MacVim.app/Contents/Resources/vim/runtime/indent.vim 13: ~/.vim/bundle/nerdtree/plugin/NERD_tree.vim 14: ~/.vim/bundle/nerdtree/<span class="hljs-built_in">autoload</span>/nerdtree.vim 15: ~/.vim/bundle/nerdtree/lib/nerdtree/path.vim 16: ~/.vim/bundle/nerdtree/lib/nerdtree/menu_controller.vim 17: ~/.vim/bundle/nerdtree/lib/nerdtree/menu_item.vim 18: ~/.vim/bundle/nerdtree/lib/nerdtree/key_map.vim 19: ~/.vim/bundle/nerdtree/lib/nerdtree/bookmark.vim 20: ~/.vim/bundle/nerdtree/lib/nerdtree/tree_file_node.vim 21: ~/.vim/bundle/nerdtree/lib/nerdtree/tree_dir_node.vim 22: ~/.vim/bundle/nerdtree/lib/nerdtree/opener.vim 23: ~/.vim/bundle/nerdtree/lib/nerdtree/creator.vim 24: ~/.vim/bundle/nerdtree/lib/nerdtree/flag_set.vim 25: ~/.vim/bundle/nerdtree/lib/nerdtree/nerdtree.vim 26: ~/.vim/bundle/nerdtree/lib/nerdtree/ui.vim 27: ~/.vim/bundle/nerdtree/lib/nerdtree/event.vim 28: ~/.vim/bundle/nerdtree/lib/nerdtree/notifier.vim 29: ~/.vim/bundle/nerdtree/<span class="hljs-built_in">autoload</span>/nerdtree/ui_glue.vim 30: ~/.vim/bundle/nerdtree/nerdtree_plugin/exec_menuitem.vim 31: ~/.vim/bundle/nerdtree/nerdtree_plugin/fs_menu.vim 32: ~/.vim/bundle/nerdtree/nerdtree_plugin/vcs.vim 33: ~/.vim/bundle/nerdtree-git-plugin/nerdtree_plugin/git_status.vim 34: ~/.vim/bundle/nerdtree-git-plugin/<span class="hljs-built_in">autoload</span>/gitstatus.vim 35: ~/.vim/bundle/nerdtree-git-plugin/<span class="hljs-built_in">autoload</span>/gitstatus/log.vim 36: ~/.vim/bundle/nerdtree-git-plugin/<span class="hljs-built_in">autoload</span>/gitstatus/listener.vim 37: ~/.vim/bundle/vim-autopep8/plugin/python_autopep8.vim 38: /usr/<span class="hljs-built_in">local</span>/Cellar/macvim/8.2-166_1/MacVim.app/Contents/Resources/vim/runtime/plugin/getscriptPlugin.vim 39: /usr/<span class="hljs-built_in">local</span>/Cellar/macvim/8.2-166_1/MacVim.app/Contents/Resources/vim/runtime/plugin/gzip.vim 40: /usr/<span class="hljs-built_in">local</span>/Cellar/macvim/8.2-166_1/MacVim.app/Contents/Resources/vim/runtime/plugin/logiPat.vim 41: /usr/<span class="hljs-built_in">local</span>/Cellar/macvim/8.2-166_1/MacVim.app/Contents/Resources/vim/runtime/plugin/manpager.vim 42: /usr/<span class="hljs-built_in">local</span>/Cellar/macvim/8.2-166_1/MacVim.app/Contents/Resources/vim/runtime/plugin/matchparen.vim 43: /usr/<span class="hljs-built_in">local</span>/Cellar/macvim/8.2-166_1/MacVim.app/Contents/Resources/vim/runtime/plugin/netrwPlugin.vim 44: /usr/<span class="hljs-built_in">local</span>/Cellar/macvim/8.2-166_1/MacVim.app/Contents/Resources/vim/runtime/plugin/rrhelper.vim 45: /usr/<span class="hljs-built_in">local</span>/Cellar/macvim/8.2-166_1/MacVim.app/Contents/Resources/vim/runtime/plugin/spellfile.vim 46: /usr/<span class="hljs-built_in">local</span>/Cellar/macvim/8.2-166_1/MacVim.app/Contents/Resources/vim/runtime/plugin/tarPlugin.vim 47: /usr/<span class="hljs-built_in">local</span>/Cellar/macvim/8.2-166_1/MacVim.app/Contents/Resources/vim/runtime/plugin/tohtml.vim 48: /usr/<span class="hljs-built_in">local</span>/Cellar/macvim/8.2-166_1/MacVim.app/Contents/Resources/vim/runtime/plugin/vimballPlugin.vim 49: /usr/<span class="hljs-built_in">local</span>/Cellar/macvim/8.2-166_1/MacVim.app/Contents/Resources/vim/runtime/plugin/zipPlugin.vim 50: ~/.vim/bundle/indentLine/after/plugin/indentLine.vim 51: ~/.vim/bundle/nerdtree/syntax/nerdtree.vim 52: ~/.vim/bundle/nerdtree-git-plugin/after/syntax/nerdtree.vim 53: ~/.vim/bundle/nerdtree-git-plugin/<span class="hljs-built_in">autoload</span>/gitstatus/util.vim 54: ~/.vim/bundle/nerdtree-git-plugin/<span class="hljs-built_in">autoload</span>/gitstatus/job.vim</code></pre><h5 id="ç”¨æˆ·é…ç½®æ–‡ä»¶"><a href="#ç”¨æˆ·é…ç½®æ–‡ä»¶" class="headerlink" title="ç”¨æˆ·é…ç½®æ–‡ä»¶"></a>ç”¨æˆ·é…ç½®æ–‡ä»¶</h5><pre><code class="hljs zsh"><span class="hljs-comment"># åˆ‡æ¢è‡³ç”¨æˆ·ç›®å½•</span><span class="hljs-built_in">cd</span> ~<span class="hljs-comment"># ä½¿ç”¨vimåˆ›å»ºå¹¶æ‰“å¼€.vimrc</span>vim .vimrc</code></pre><h5 id="è®¾ç½®ä¸»é¢˜"><a href="#è®¾ç½®ä¸»é¢˜" class="headerlink" title="è®¾ç½®ä¸»é¢˜"></a>è®¾ç½®ä¸»é¢˜</h5><pre><code class="hljs zsh">colorscheme solarized</code></pre><h5 id="æ˜¾ç¤ºå¸®åŠ©ä¸ºä¸­æ–‡"><a href="#æ˜¾ç¤ºå¸®åŠ©ä¸ºä¸­æ–‡" class="headerlink" title="æ˜¾ç¤ºå¸®åŠ©ä¸ºä¸­æ–‡"></a>æ˜¾ç¤ºå¸®åŠ©ä¸ºä¸­æ–‡</h5><p>ä¸‹è½½<a href="https://sourceforge.net/projects/vimcdoc/?source=typ_redirect">vimdoc</a></p><p><img src="/images/vim/doc.png"></p><p>å°†æ–‡ä»¶è§£å‹åˆ°~/.vim/docï¼Œè‹¥è·¯å¾„ä¸å­˜åœ¨åˆ™åˆ›å»º</p><p>æ‰“å¼€vimæ‰§è¡Œ:helptags ~/.vim/doc</p><p>åœ¨~/.vimrcä¸­è¿›è¡Œé…ç½®ï¼š</p><pre><code class="hljs zsh"><span class="hljs-built_in">set</span> helplang=cn <span class="hljs-keyword">if</span> version &gt;= 603    <span class="hljs-built_in">set</span> helplang=cn    <span class="hljs-built_in">set</span> encoding=utf-8endif</code></pre><p>å¸¸è§çš„vimå¿«æ·é”®å¯ä»¥çœ‹<a href="https://stackoverflow.com/questions/5400806/what-are-the-most-used-vim-commands-keypresses/5400978#5400978">è¿™é‡Œ</a></p><h5 id="å­—ç¬¦ç¼–ç "><a href="#å­—ç¬¦ç¼–ç " class="headerlink" title="å­—ç¬¦ç¼–ç "></a>å­—ç¬¦ç¼–ç </h5><p>enc,fenc,fencs,tenc,ä¸€èˆ¬ä¹±ç å¤šæ˜¯å› è¿™äº›å‚æ•°è®¾ç½®ä¸æ­£ç¡®å¼•èµ·ï¼š</p><ol><li>encï¼Œvimå†…éƒ¨ä½¿ç”¨çš„ç¼–ç ï¼Œå¦‚bufferï¼Œå¯„å­˜å™¨ä¸­çš„å­—ç¬¦ä¸²ï¼Œwindowsä¸€èˆ¬æ˜¯gbkï¼Œmacæ˜¯utf-8</li><li>fencï¼Œå½“å‰æ‰“å¼€æ–‡ä»¶è‡ªèº«çš„ç¼–ç ï¼Œå¦‚æœencå’Œfencä¸ä¸€è‡´ï¼Œvimä¼šåšç¼–ç è½¬æ¢ï¼Œè½¬æ¢æˆfencç¼–ç ä¿å­˜æ–‡ä»¶</li><li>fencsï¼Œä¸€ä¸ªå­—ç¬¦ç¼–ç åˆ—è¡¨ï¼Œç¼–ç çš„è‡ªåŠ¨è¯†åˆ«å°±æ˜¯é€šè¿‡å®ƒå®ç°çš„</li><li>tencï¼Œç»ˆç«¯ä½¿ç”¨çš„ç¼–ç ï¼Œæˆ–è€…è¯´vimç”¨äºå±å¹•æ˜¾ç¤ºæ—¶çš„ç¼–ç ï¼Œæ˜¾ç¤ºæ—¶vimä¼šæŠŠå†…éƒ¨ç¼–ç è½¬æ¢ä¸ºå±å¹•ç¼–ç è¿›è¡Œè¾“å‡ºï¼Œé»˜è®¤ä¸ºenc</li></ol><pre><code class="hljs zsh"><span class="hljs-string">&quot; å°†encè®¾ç½®ä¸ºutf-8</span><span class="hljs-string">set enc=utf-8</span></code></pre><h4 id="vimæ’ä»¶ç®¡ç†å™¨â€”Vundle"><a href="#vimæ’ä»¶ç®¡ç†å™¨â€”Vundle" class="headerlink" title="vimæ’ä»¶ç®¡ç†å™¨â€”Vundle"></a>vimæ’ä»¶ç®¡ç†å™¨â€”Vundle</h4><p><a href="http://github.com/VundleVim/Vundle.vim">Vundle</a> is short for <em>Vim bundle</em> and is a <a href="http://www.vim.org/">Vim</a> plugin manager.</p><p><a href="http://github.com/VundleVim/Vundle.vim">Vundle</a> allows you toâ€¦</p><ul><li>keep track of and <a href="https://github.com/VundleVim/Vundle.vim/blob/v0.10.2/doc/vundle.txt#L126-L233">configure</a> your plugins right in the <code>.vimrc</code></li><li><a href="https://github.com/VundleVim/Vundle.vim/blob/v0.10.2/doc/vundle.txt#L234-L254">install</a> configured plugins (a.k.a. scripts/bundle)</li><li><a href="https://github.com/VundleVim/Vundle.vim/blob/v0.10.2/doc/vundle.txt#L255-L265">update</a> configured plugins</li><li><a href="https://github.com/VundleVim/Vundle.vim/blob/v0.10.2/doc/vundle.txt#L266-L295">search</a> by name all available <a href="http://vim-scripts.org/vim/scripts.html">Vim scripts</a></li><li><a href="https://github.com/VundleVim/Vundle.vim/blob/v0.10.2/doc/vundle.txt#L303-L318">clean</a> unused plugins up</li><li>run the above actions in a <em>single keypress</em> with <a href="https://github.com/VundleVim/Vundle.vim/blob/v0.10.2/doc/vundle.txt#L319-L360">interactive mode</a></li></ul><p><a href="http://github.com/VundleVim/Vundle.vim">Vundle</a> automaticallyâ€¦</p><ul><li>manages the <a href="http://vimdoc.sourceforge.net/htmldoc/options.html#'runtimepath'">runtime path</a> of your installed scripts</li><li>regenerates <a href="http://vimdoc.sourceforge.net/htmldoc/helphelp.html#:helptags">help tags</a> after installing and updating</li></ul><p><a href="http://github.com/VundleVim/Vundle.vim">Vundle</a> is undergoing an <a href="https://github.com/VundleVim/Vundle.vim/blob/v0.10.2/doc/vundle.txt#L372-L396">interface change</a>, please stay up to date to get latest changes.</p><h5 id="å®‰è£…Vundle"><a href="#å®‰è£…Vundle" class="headerlink" title="å®‰è£…Vundle"></a>å®‰è£…Vundle</h5><pre><code class="hljs zsh">git <span class="hljs-built_in">clone</span> https://github.com/gmarik/Vundle.vim.git ~/.vim/bundle/Vundle.vim</code></pre><p>ä¸‹è½½Vundleæ’ä»¶ç®¡ç†å™¨ï¼Œå°†å…¶æ”¾ç½®åœ¨Vimç¼–è¾‘å™¨bundlesæ–‡ä»¶å¤¹ä¸­ã€‚ç°åœ¨ï¼Œå¯ä»¥é€šè¿‡.vimrcé…ç½®æ–‡ä»¶æ¥ç®¡ç†æ‰€æœ‰æ‰©å±•äº†ã€‚</p><h5 id="é…ç½®Vundle"><a href="#é…ç½®Vundle" class="headerlink" title="é…ç½®Vundle"></a>é…ç½®Vundle</h5><pre><code class="hljs zsh"><span class="hljs-built_in">set</span> nocompatible              <span class="hljs-string">&quot; required</span><span class="hljs-string">filetype off                  &quot;</span> required<span class="hljs-string">&quot; set the runtime path to include Vundle and initialize</span><span class="hljs-string">set rtp+=~/.vim/bundle/Vundle.vim</span><span class="hljs-string">call vundle#begin()</span><span class="hljs-string"></span><span class="hljs-string">&quot;</span> alternatively, pass a path <span class="hljs-built_in">where</span> Vundle should install plugins<span class="hljs-string">&quot;call vundle#begin(&#x27;~/some/path/here&#x27;)</span><span class="hljs-string"></span><span class="hljs-string">&quot;</span> <span class="hljs-built_in">let</span> Vundle manage Vundle, requiredPlugin <span class="hljs-string">&#x27;gmarik/Vundle.vim&#x27;</span><span class="hljs-string">&quot; Add all your plugins here (note older versions of Vundle used Bundle instead of Plugin)</span><span class="hljs-string"></span><span class="hljs-string"></span><span class="hljs-string">&quot;</span> All of your Plugins must be added before the following linecall vundle<span class="hljs-comment">#end()            &quot; required</span>filetype plugin indent on    <span class="hljs-string">&quot; required</span></code></pre><h5 id="ä½¿ç”¨Vundle"><a href="#ä½¿ç”¨Vundle" class="headerlink" title="ä½¿ç”¨Vundle"></a>ä½¿ç”¨Vundle</h5><p>å°†æƒ³è¦å®‰è£…çš„æ’ä»¶ï¼ŒæŒ‰ç…§åœ°å€å¡«å†™æ–¹æ³•ï¼Œå°†åœ°å€å¡«å†™åœ¨<strong>vundle#begin</strong>å’Œ<strong>vundle#end</strong>ä¹‹é—´å°±å¯ä»¥</p><p>è¿è¡Œ :PluginInstall</p><pre><code class="hljs zsh">:PlugInstall</code></pre><p>æ‰§è¡Œ<code>:PluginInstall</code>åçš„æˆªå›¾</p><p><img src="/images/vim/vundle.png"></p><h5 id="ç§»é™¤ä¸éœ€è¦çš„æ’ä»¶"><a href="#ç§»é™¤ä¸éœ€è¦çš„æ’ä»¶" class="headerlink" title="ç§»é™¤ä¸éœ€è¦çš„æ’ä»¶"></a>ç§»é™¤ä¸éœ€è¦çš„æ’ä»¶</h5><ol><li>ç¼–è¾‘.vimrcæ–‡ä»¶ç§»é™¤çš„ä½ è¦ç§»é™¤çš„æ’ä»¶æ‰€å¯¹åº”çš„pluginé‚£ä¸€è¡Œ</li><li>è¾“å…¥å‘½ä»¤<code>:BundleClean</code></li></ol><h5 id="å…¶ä»–å¸¸ç”¨å‘½ä»¤"><a href="#å…¶ä»–å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å…¶ä»–å¸¸ç”¨å‘½ä»¤"></a>å…¶ä»–å¸¸ç”¨å‘½ä»¤</h5><pre><code class="hljs zsh">:BundleList              -åˆ—ä¸¾åˆ—è¡¨(ä¹Ÿå°±æ˜¯.vimrc)ä¸­é…ç½®çš„æ‰€æœ‰æ’ä»¶:BundleInstall          -å®‰è£…åˆ—è¡¨ä¸­çš„å…¨éƒ¨æ’ä»¶:BundleInstall!         -æ›´æ–°åˆ—è¡¨ä¸­çš„å…¨éƒ¨æ’ä»¶:BundleSearch foo   -æŸ¥æ‰¾fooæ’ä»¶:BundleSearch! foo  -åˆ·æ–°fooæ’ä»¶ç¼“å­˜:BundleClean           -æ¸…é™¤åˆ—è¡¨ä¸­æ²¡æœ‰çš„æ’ä»¶:BundleClean!          -æ¸…é™¤åˆ—è¡¨ä¸­æ²¡æœ‰çš„æ’ä»¶</code></pre><h4 id="å®‰è£…æ’ä»¶â€”æ‰“é€ IDE"><a href="#å®‰è£…æ’ä»¶â€”æ‰“é€ IDE" class="headerlink" title="å®‰è£…æ’ä»¶â€”æ‰“é€ IDE"></a>å®‰è£…æ’ä»¶â€”æ‰“é€ IDE</h4><h5 id="æ·»åŠ ç›®å½•æ ‘â€”NERDTree"><a href="#æ·»åŠ ç›®å½•æ ‘â€”NERDTree" class="headerlink" title="æ·»åŠ ç›®å½•æ ‘â€”NERDTree"></a>æ·»åŠ ç›®å½•æ ‘â€”NERDTree</h5><p>NERDTreeçš„ä½œç”¨å°±æ˜¯åˆ—å‡ºå½“å‰è·¯å¾„çš„ç›®å½•æ ‘ï¼Œä¸€èˆ¬IDEéƒ½æ˜¯æœ‰çš„ã€‚å¯ä»¥æ–¹ä¾¿çš„æµè§ˆé¡¹ç›®çš„æ€»ä½“çš„ç›®å½•ç»“æ„å’Œåˆ›å»ºåˆ é™¤é‡å‘½åæ–‡ä»¶æˆ–æ–‡ä»¶å</p><h6 id="å®‰è£…NERDTree"><a href="#å®‰è£…NERDTree" class="headerlink" title="å®‰è£…NERDTree"></a>å®‰è£…NERDTree</h6><p>æ·»åŠ ç›®å½•æ ‘ï¼š<a href="https://github.com/preservim/nerdtree">nerdtree</a></p><pre><code class="hljs bash">Plugin <span class="hljs-string">&#x27;scrooloose/nerdtree&#x27;</span></code></pre><p>æ·»åŠ gitçŠ¶æ€å›¾æ ‡ï¼š<a href="https://github.com/Xuyuanp/nerdtree-git-plugin">nerdtree-git</a></p><pre><code class="hljs bash">Plugin <span class="hljs-string">&#x27;Xuyuanp/nerdtree-git-plugin&#x27;</span></code></pre><h6 id="é…ç½®NERDTree"><a href="#é…ç½®NERDTree" class="headerlink" title="é…ç½®NERDTree"></a>é…ç½®NERDTree</h6><pre><code class="hljs zsh"><span class="hljs-string">&quot;ä½¿ç”¨F3é”®å¿«é€Ÿè°ƒå‡ºå’Œéšè—å®ƒ</span><span class="hljs-string">map &lt;F3&gt; :NERDTreeToggle&lt;CR&gt;</span><span class="hljs-string"></span><span class="hljs-string">let NERDTreeChDirMode=1</span><span class="hljs-string"></span><span class="hljs-string">&quot;</span>æ˜¾ç¤ºä¹¦ç­¾<span class="hljs-string">&quot;</span><span class="hljs-string">let NERDTreeShowBookmarks=1</span><span class="hljs-string"></span><span class="hljs-string">&quot;</span>è®¾ç½®å¿½ç•¥æ–‡ä»¶ç±»å‹<span class="hljs-string">&quot;</span><span class="hljs-string">let NERDTreeIgnore=[&#x27;\~$&#x27;, &#x27;\.pyc$&#x27;, &#x27;\.swp$&#x27;]</span><span class="hljs-string"></span><span class="hljs-string">&quot;</span>çª—å£å¤§å°<span class="hljs-string">&quot;</span><span class="hljs-string">let NERDTreeWinSize=25</span><span class="hljs-string"></span><span class="hljs-string">&quot;</span> ä¿®æ”¹é»˜è®¤ç®­å¤´<span class="hljs-built_in">let</span> g:NERDTreeDirArrowExpandable = <span class="hljs-string">&#x27;â–¸&#x27;</span><span class="hljs-built_in">let</span> g:NERDTreeDirArrowCollapsible = <span class="hljs-string">&#x27;â–¾&#x27;</span><span class="hljs-string">&quot;How can I open a NERDTree automatically when vim starts up if no files were specified?</span><span class="hljs-string">autocmd StdinReadPre * let s:std_in=1</span><span class="hljs-string">autocmd VimEnter * if argc() == 0 &amp;&amp; !exists(&quot;</span>s:std_in<span class="hljs-string">&quot;) | NERDTree | endif</span><span class="hljs-string"></span><span class="hljs-string">&quot;</span> æ‰“å¼€vimæ—¶è‡ªåŠ¨æ‰“å¼€NERDTreeautocmd vimenter * NERDTree           <span class="hljs-string">&quot;How can I open NERDTree automatically when vim starts up on opening a directory?</span><span class="hljs-string">autocmd StdinReadPre * let s:std_in=1</span><span class="hljs-string">autocmd VimEnter * if argc() == 1 &amp;&amp; isdirectory(argv()[0]) &amp;&amp; !exists(&quot;</span>s:std_in<span class="hljs-string">&quot;) | exe &#x27;NERDTree&#x27; argv()[0] | wincmd p | ene | endif</span><span class="hljs-string"></span><span class="hljs-string">&quot;</span> å…³é—­vimæ—¶ï¼Œå¦‚æœæ‰“å¼€çš„æ–‡ä»¶é™¤äº†NERDTreeæ²¡æœ‰å…¶ä»–æ–‡ä»¶æ—¶ï¼Œå®ƒè‡ªåŠ¨å…³é—­ï¼Œå‡å°‘å¤šæ¬¡æŒ‰:q!autocmd bufenter * <span class="hljs-keyword">if</span> (winnr(<span class="hljs-string">&quot;$&quot;</span>) == 1 &amp;&amp; exists(<span class="hljs-string">&quot;b:NERDTree&quot;</span>) &amp;&amp; b:NERDTree.isTabTree()) | q | endif<span class="hljs-string">&quot; å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›gitä¿¡æ¯ç›´æ¥åœ¨NERDTreeä¸­æ˜¾ç¤ºå‡ºæ¥ï¼Œ å’ŒEclipseä¸€æ ·ï¼Œä¿®æ”¹çš„æ–‡ä»¶å’Œå¢åŠ çš„æ–‡ä»¶éƒ½ç»™å‡ºç›¸åº”çš„æ ‡æ³¨ï¼Œ è¿™æ—¶éœ€è¦å®‰è£…çš„æ’ä»¶å°±æ˜¯ nerdtree-git-plugin,é…ç½®ä¿¡æ¯å¦‚ä¸‹</span><span class="hljs-string">let g:NERDTreeIndicatorMapCustom = &#123;</span><span class="hljs-string">    \ &quot;</span>Modified<span class="hljs-string">&quot;  : &quot;</span>âœ¹<span class="hljs-string">&quot;,</span><span class="hljs-string">    \ &quot;</span>Staged<span class="hljs-string">&quot;    : &quot;</span>âœš<span class="hljs-string">&quot;,</span><span class="hljs-string">    \ &quot;</span>Untracked<span class="hljs-string">&quot; : &quot;</span>âœ­<span class="hljs-string">&quot;,</span><span class="hljs-string">    \ &quot;</span>Renamed<span class="hljs-string">&quot;   : &quot;</span>âœ<span class="hljs-string">&quot;,</span><span class="hljs-string">    \ &quot;</span>Unmerged<span class="hljs-string">&quot;  : &quot;</span>â•<span class="hljs-string">&quot;,</span><span class="hljs-string">    \ &quot;</span>Deleted<span class="hljs-string">&quot;   : &quot;</span>âœ–<span class="hljs-string">&quot;,</span><span class="hljs-string">    \ &quot;</span>Dirty<span class="hljs-string">&quot;     : &quot;</span>âœ—<span class="hljs-string">&quot;,</span><span class="hljs-string">    \ &quot;</span>Clean<span class="hljs-string">&quot;     : &quot;</span>âœ”ï¸<span class="hljs-string">&quot;,</span><span class="hljs-string">    \ &quot;</span>Unknown<span class="hljs-string">&quot;   : &quot;</span>?<span class="hljs-string">&quot;</span><span class="hljs-string">    \ &#125;</span><span class="hljs-string"></span><span class="hljs-string">&quot;</span> æ˜¾ç¤ºè¡Œå·<span class="hljs-built_in">let</span> NERDTreeShowLineNumbers=1<span class="hljs-built_in">let</span> NERDTreeAutoCenter=1<span class="hljs-string">&quot; åœ¨ç»ˆç«¯å¯åŠ¨vimæ—¶ï¼Œå…±äº«NERDTree</span><span class="hljs-string">let g:nerdtree_tabs_open_on_console_startup=1</span></code></pre><h5 id="åˆ†å‰²å¸ƒå±€"><a href="#åˆ†å‰²å¸ƒå±€" class="headerlink" title="åˆ†å‰²å¸ƒå±€"></a>åˆ†å‰²å¸ƒå±€</h5><p>ä¸ç”¨å®‰è£…é¢å¤–æ’ä»¶ï¼Œåªéœ€è¦åœ¨.vimrcè®¾ç½®å³å¯</p><pre><code class="hljs zsh"><span class="hljs-string">&quot; æŒ‡å®šå±å¹•ä¸Šå¯ä»¥è¿›è¡Œåˆ†å‰²å¸ƒå±€çš„åŒºåŸŸ</span><span class="hljs-string">set splitbelow               &quot;</span> å…è®¸åœ¨ä¸‹éƒ¨åˆ†å‰²å¸ƒå±€<span class="hljs-built_in">set</span> splitright               <span class="hljs-string">&quot; å…è®¸åœ¨å³ä¾§åˆ†éš”å¸ƒå±€</span><span class="hljs-string"></span><span class="hljs-string">&quot;</span> ç»„åˆå¿«æ·é”®ï¼šnnoremap &lt;C-J&gt; &lt;C-W&gt;&lt;C-J&gt;    <span class="hljs-string">&quot; ç»„åˆå¿«æ·é”®ï¼š- Ctrl-j åˆ‡æ¢åˆ°ä¸‹æ–¹çš„åˆ†å‰²çª—å£</span><span class="hljs-string">nnoremap &lt;C-K&gt; &lt;C-W&gt;&lt;C-K&gt;    &quot;</span> ç»„åˆå¿«æ·é”®ï¼š- Ctrl-k åˆ‡æ¢åˆ°ä¸Šæ–¹çš„åˆ†å‰²çª—å£nnoremap &lt;C-L&gt; &lt;C-W&gt;&lt;C-L&gt;    <span class="hljs-string">&quot; ç»„åˆå¿«æ·é”®ï¼š- Ctrl-l åˆ‡æ¢åˆ°å³ä¾§çš„åˆ†å‰²çª—å£</span><span class="hljs-string">nnoremap &lt;C-H&gt; &lt;C-W&gt;&lt;C-H&gt;    &quot;</span> ç»„åˆå¿«æ·é”®ï¼š- Ctrl-h åˆ‡æ¢åˆ°å·¦ä¾§çš„åˆ†å‰²çª—å£</code></pre><p>nnoremapå°†ä¸€ä¸ªç»„åˆå¿«æ·é”®æ˜ å°„ä¸ºå¦ä¸€ä¸ªå¿«æ·é”®ã€‚noéƒ¨åˆ†ï¼ŒæŒ‡çš„æ˜¯åœ¨Vimçš„æ­£å¸¸æ¨¡å¼ï¼ˆNormal Modeï¼‰ä¸‹ï¼Œ<br>è€Œä¸æ˜¯å¯è§†æ¨¡å¼ä¸‹é‡æ–°æ˜ å°„ï¼Œæ›´å¤šä¿¡æ¯è¯·çœ‹<a href="https://stackoverflow.com/questions/3776117/what-is-the-difference-between-the-remap-noremap-nnoremap-and-vnoremap-mapping">è¿™é‡Œ</a></p><h5 id="pythonä»£ç ç¼©è¿›"><a href="#pythonä»£ç ç¼©è¿›" class="headerlink" title="pythonä»£ç ç¼©è¿›"></a>pythonä»£ç ç¼©è¿›</h5><p>ä»£ç çš„æ­£ç¡®ç¼©è¿›æ˜¯è‡³å…³é‡è¦çš„ï¼Œæˆ‘ä»¬å°†ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ä¸ºvimé…ç½®ä»£ç ç¼©è¿›åŠŸèƒ½ï¼š</p><ol><li>pythonä»£ç çš„è‡ªåŠ¨ç¼©è¿›</li><li>éµä»<a href="https://www.cnblogs.com/ajianbeyourself/p/4377933.html">PEP8</a>ä»£ç é£æ ¼æ ‡å‡†</li><li>è‡ªåŠ¨æ ¼å¼åŒ–ä¸ºPEP8ä»£ç </li></ol><h6 id="å®‰è£…æ’ä»¶"><a href="#å®‰è£…æ’ä»¶" class="headerlink" title="å®‰è£…æ’ä»¶"></a><strong>å®‰è£…æ’ä»¶</strong></h6><p>è‡ªåŠ¨ç¼©è¿›æœ‰ç”¨ï¼Œä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹ï¼ˆæ¯”å¦‚å‡½æ•°å®šä¹‰æœ‰å¤šè¡Œçš„æ—¶å€™ï¼‰ï¼Œå¹¶ä¸æ€»æ˜¯ä¼šè¾¾åˆ°ä½ æƒ³è¦çš„æ•ˆæœï¼Œå°¤å…¶æ˜¯åœ¨ç¬¦åˆPEP8æ ‡å‡†æ–¹é¢ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨<a href="https://github.com/vim-scripts/indentpython.vim"><code>indentpython.vim</code></a>æ’ä»¶ï¼Œæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p><pre><code class="hljs zsh">Plugin <span class="hljs-string">&#x27;vim-scripts/indentpython.vim&#x27;</span></code></pre><p>å°†pythonä»£ç è‡ªåŠ¨æ ¼å¼åŒ–ä¸ºç¬¦åˆpep8æ ‡å‡†çš„ä»£ç ç”¨åˆ°<a href="https://github.com/tell-k/vim-autopep8"><code>tell-k/vim-autopep8</code></a>æ’ä»¶ï¼š</p><pre><code class="hljs zsh">Plugin <span class="hljs-string">&#x27;tell-k/vim-autopep8&#x27;</span></code></pre><p>è¦ä½¿ç”¨<code>tell-k/vim-autopep8</code>æ’ä»¶å¿…é¡»å…ˆåœ¨ç”µè„‘ä¸Šå®‰è£…pythonçš„ç¬¬ä¸‰æ–¹åŒ…<a href="https://pypi.org/project/autopep8/"><code>autopep8</code></a>ã€‚ä½†å¥‡æ€ªçš„æ˜¯ç”¨pipå®‰è£…æ—¶æ‰¾ä¸åˆ°è¿™ä¸ªåŒ…ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>easy-install</code>æ¥å®‰è£…ï¼Œåªéœ€è¦åœ¨mæŸä¸ªpythonç¯å¢ƒä¸‹å®‰è£…ä¸€æ¬¡å³å¯ï¼Œå®æµ‹åœ¨å…¶ä»–ç¯å¢ƒä¸‹ä¹Ÿå¯ç”¨ï¼š</p><pre><code class="hljs zsh">easy_install autopep8</code></pre><h6 id="é…ç½®æ’ä»¶"><a href="#é…ç½®æ’ä»¶" class="headerlink" title="é…ç½®æ’ä»¶"></a>é…ç½®æ’ä»¶</h6><p>.vimrcæ–‡ä»¶ä¸­æ·»åŠ ä¸‹é¢çš„é…ç½®ã€‚è¿™äº›è®¾ç½®å°†è®©Vimä¸­çš„Tabé”®å°±ç›¸å½“äº4ä¸ªæ ‡å‡†çš„ç©ºæ ¼ç¬¦ï¼Œç¡®ä¿æ¯è¡Œä»£ç é•¿åº¦ä¸è¶…è¿‡80ä¸ªå­—ç¬¦ï¼Œå¹¶ä¸”ä¼šä»¥unixæ ¼å¼å‚¨å­˜æ–‡ä»¶ï¼Œé¿å…åœ¨æ¨é€åˆ°Githubæˆ–åˆ†äº«ç»™å…¶ä»–ç”¨æˆ·æ—¶å‡ºç°æ–‡ä»¶è½¬æ¢é—®é¢˜ã€‚</p><pre><code class="hljs zsh"><span class="hljs-string">&quot; æŒ‰ç…§PEP8æ ‡å‡†æ¥é…ç½®vim</span><span class="hljs-string">au BufNewFile,BufRead *.py set tabstop=4 |set softtabstop=4|set shiftwidth=4|set textwidth=79|set expandtab|set autoindent|set fileformat=unix</span></code></pre><p>å¯¹äºå…¨æ ˆå¼€å‘ï¼Œä½ å¯ä»¥è®¾ç½®é’ˆå¯¹æ¯ç§æ–‡ä»¶ç±»å‹è®¾ç½®auå‘½ä»¤ï¼š</p><pre><code class="hljs zsh">au BufNewFile,BufRead *.js, *.html, *.css <span class="hljs-built_in">set</span> tabstop=2|<span class="hljs-built_in">set</span> softtabstop=2|<span class="hljs-built_in">set</span> shiftwidth=2</code></pre><p>ä¸‹é¢æ¥é…ç½®vim-autopep8</p><pre><code class="hljs zsh"><span class="hljs-string">&quot; Disable show diff window</span><span class="hljs-string">let g:autopep8_disable_show_diff=1</span><span class="hljs-string"></span><span class="hljs-string">&quot;</span> vim-autopep8è‡ª1.11ç‰ˆæœ¬ä¹‹åå–æ¶ˆäº†F8å¿«æ·é”®ï¼Œéœ€è¦ç”¨æˆ·è‡ªå·±ä¸º:Autopep8è®¾ç½®å¿«æ·é”®ï¼šautocmd FileType python noremap &lt;buffer&gt; &lt;F8&gt; :call Autopep8()&lt;CR&gt;</code></pre><h6 id="ä½¿ç”¨æ’ä»¶"><a href="#ä½¿ç”¨æ’ä»¶" class="headerlink" title="ä½¿ç”¨æ’ä»¶"></a>ä½¿ç”¨æ’ä»¶</h6><p>åœ¨ä½¿ç”¨macvimç¼–è¾‘<code>*.py</code>æ–‡ä»¶æ—¶ï¼š</p><ul><li>ä»£ç è‡ªåŠ¨æŒ‰ç…§PEP8è§„åˆ™è¿›è¡Œç¼©è¿›ï¼›</li><li>tapé”®ç›¸å½“äº4ä¸ªæ ‡å‡†ç©ºæ ¼ï¼Œæ¯è¡Œä»£ç ä¸è¶…è¿‡80å­—ç¬¦ï¼›</li><li>ä½¿ç”¨<code>:Autopep8</code>å‘½ä»¤æˆ–è€…<code>F8</code>å¿«æ·é”®è‡ªåŠ¨æŒ‰ç…§PEP8æ ‡å‡†æ ¼å¼åŒ–pythonä»£ç </li></ul><p>åœ¨ä½¿ç”¨macvimç¼–è¾‘<code>*.js</code>, <code>*.html</code>, <code>*.css</code>æ–‡ä»¶æ—¶,tapé”®ç›¸å½“äº2ä¸ªæ ‡å‡†ç©ºæ ¼</p><h5 id="æ·»åŠ ä»£ç ç¼©è¿›æŒ‡ç¤ºçº¿"><a href="#æ·»åŠ ä»£ç ç¼©è¿›æŒ‡ç¤ºçº¿" class="headerlink" title="æ·»åŠ ä»£ç ç¼©è¿›æŒ‡ç¤ºçº¿"></a>æ·»åŠ ä»£ç ç¼©è¿›æŒ‡ç¤ºçº¿</h5><h6 id="å®‰è£…indentline"><a href="#å®‰è£…indentline" class="headerlink" title="å®‰è£…indentline"></a>å®‰è£…indentline</h6><p>indentLineæ˜¯ä¸€æ¬¾ç¼©è¿›æŒ‡ç¤ºçº¿ï¼Œç”±çº¯å­—ç¬¦å®ç°ï¼Œæ•ˆæœæ¯”è¾ƒå®Œç¾</p><pre><code class="hljs bash">Plugin <span class="hljs-string">&#x27;Yggdroot/indentLine&#x27;</span></code></pre><h6 id="é…ç½®indentline"><a href="#é…ç½®indentline" class="headerlink" title="é…ç½®indentline"></a>é…ç½®indentline</h6><p><a href="https://github.com/Yggdroot/indentLine"><code>indentLine</code></a>é»˜è®¤æ˜¯å…³é—­çš„ï¼Œå› æ­¤éœ€è¦åœ¨.vimrcä¸­é…ç½®æ‰èƒ½çœ‹åˆ°æ•ˆæœï¼š</p><pre><code class="hljs bash"><span class="hljs-string">&quot; æ”¯æŒä»»æ„ASCIIç ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦ï¼šÂ¦, â”†, or â”‚ ï¼Œä½†åªåœ¨utf-8ç¼–ç ä¸‹æœ‰æ•ˆ</span><span class="hljs-string">let g:indentLine_char=&#x27;Â¦&#x27;   </span><span class="hljs-string"></span><span class="hljs-string">&quot;</span> ä½¿indentlineç”Ÿæ•ˆ<span class="hljs-built_in">let</span> g:indentLine_enabled = 1</code></pre><h6 id="ä½¿ç”¨indentline"><a href="#ä½¿ç”¨indentline" class="headerlink" title="ä½¿ç”¨indentline"></a>ä½¿ç”¨indentline</h6><p>åœ¨ä»£ç ç¼©è¿›å¤„ï¼Œè‡ªåŠ¨ç”Ÿæˆç¼©è¿›æŒ‡ç¤ºçº¿</p><h5 id="ä»£ç æŠ˜å "><a href="#ä»£ç æŠ˜å " class="headerlink" title="ä»£ç æŠ˜å "></a>ä»£ç æŠ˜å </h5><p>å¤§å¤šæ•°â€œç°ä»£â€é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰éƒ½æä¾›å¯¹æ–¹æ³•ï¼ˆmethodsï¼‰æˆ–ç±»ï¼ˆclassesï¼‰è¿›è¡ŒæŠ˜å çš„æ‰‹æ®µï¼Œåªæ˜¾ç¤ºç±»æˆ–æ–¹æ³•çš„å®šä¹‰éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯å…¨éƒ¨çš„ä»£ç ã€‚</p><h6 id="å®‰è£…æ’ä»¶-1"><a href="#å®‰è£…æ’ä»¶-1" class="headerlink" title="å®‰è£…æ’ä»¶"></a>å®‰è£…æ’ä»¶</h6><p>æœ¬èº«ä¸ç”¨å®‰è£…é¢å¤–æ’ä»¶ï¼Œä½†ä¸ºé¿å…å‡ºç°è¶…è¿‡ä½ æ‰€å¸Œæœ›çš„æŠ˜å æ•°ç›®ï¼Œæˆ‘ä»¬æ¨è<a href="https://github.com/tmhedberg/SimpylFold"><code>SimplyFold</code></a>æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p><pre><code class="hljs bash">Plugin <span class="hljs-string">&#x27;tmhedberg/SimpylFold&#x27;</span></code></pre><h6 id="é…ç½®æ’ä»¶-1"><a href="#é…ç½®æ’ä»¶-1" class="headerlink" title="é…ç½®æ’ä»¶"></a>é…ç½®æ’ä»¶</h6><pre><code class="hljs bash"><span class="hljs-string">&quot; å¿…é¡»æ‰‹åŠ¨è¾“å…¥zaæ¥æŠ˜å ï¼ˆå’Œå–æ¶ˆæŠ˜å ï¼‰</span><span class="hljs-string">set foldmethod=indent                &quot;</span> æ ¹æ®æ¯è¡Œçš„ç¼©è¿›å¼€å¯æŠ˜å <span class="hljs-built_in">set</span> foldlevel=99<span class="hljs-string">&quot; ä½¿ç”¨ç©ºæ ¼é”®ä¼šæ˜¯æ›´å¥½çš„é€‰æ‹©,æ‰€ä»¥åœ¨ä½ çš„é…ç½®æ–‡ä»¶ä¸­åŠ ä¸Šè¿™ä¸€è¡Œå‘½ä»¤å§ï¼š</span><span class="hljs-string">nnoremap &lt;space&gt; za</span><span class="hljs-string"></span><span class="hljs-string">&quot;</span> å¸Œæœ›çœ‹åˆ°æŠ˜å ä»£ç çš„æ–‡æ¡£å­—ç¬¦ä¸²ï¼Ÿ<span class="hljs-built_in">let</span> g:SimpylFold_docstring_preview=1</code></pre><h6 id="ä½¿ç”¨æ’ä»¶-1"><a href="#ä½¿ç”¨æ’ä»¶-1" class="headerlink" title="ä½¿ç”¨æ’ä»¶"></a>ä½¿ç”¨æ’ä»¶</h6><p>åœ¨ç¨‹åºå—å¤„ä¼šæ˜¾ç¤ºæŠ˜å çº¿ï¼Œå½“å…‰æ ‡æ”¾äºæŠ˜å çº¿æ—¶ï¼ŒæŒ‰ç©ºæ ¼é”®å¯ä»¥åˆ‡æ¢åœ¨è¯¥æŠ˜å çº¿å¤„æ˜¯å¦æŠ˜å ã€‚</p><h5 id="æ‹¬å·è‡ªåŠ¨è¡¥å…¨"><a href="#æ‹¬å·è‡ªåŠ¨è¡¥å…¨" class="headerlink" title="æ‹¬å·è‡ªåŠ¨è¡¥å…¨"></a>æ‹¬å·è‡ªåŠ¨è¡¥å…¨</h5><p><a href="https://github.com/jiangmiao/auto-pairs">auto-pairs</a>ä¸»è¦åŠŸèƒ½æ˜¯æ‹¬å·å’Œå¼•å·è‡ªåŠ¨è¡¥å…¨ï¼Œè¾“å…¥å·¦å¼•å·å’Œå·¦æ‹¬å·è‡ªåŠ¨è¡¥å…¨å¦å¤–ä¸€åŠ,å®‰è£…å¥½å°±å¯ä»¥æ— éœ€é¢å¤–é…ç½®</p><pre><code class="hljs bash">Plugin <span class="hljs-string">&#x27;jiangmiao/auto-pairs&#x27;</span></code></pre><h5 id="å¤šè¡Œæ³¨é‡Š"><a href="#å¤šè¡Œæ³¨é‡Š" class="headerlink" title="å¤šè¡Œæ³¨é‡Š"></a>å¤šè¡Œæ³¨é‡Š</h5><h6 id="å®‰è£…æ’ä»¶-2"><a href="#å®‰è£…æ’ä»¶-2" class="headerlink" title="å®‰è£…æ’ä»¶"></a>å®‰è£…æ’ä»¶</h6><pre><code class="hljs bash">Plugin <span class="hljs-string">&#x27;scrooloose/nerdcommenter&#x27;</span></code></pre><h6 id="é…ç½®æ’ä»¶-2"><a href="#é…ç½®æ’ä»¶-2" class="headerlink" title="é…ç½®æ’ä»¶"></a>é…ç½®æ’ä»¶</h6><pre><code class="hljs xml">&quot; nerdcommenteré»˜è®¤çƒ­é”®<span class="hljs-tag">&lt;<span class="hljs-name">leader</span>&gt;</span>ä¸º&#x27;\&#x27;ï¼Œè¿™é‡Œå°†çƒ­é”®è®¾ç½®ä¸º&#x27;,&#x27;let mapleader=&#x27;,&#x27;&quot; è®¾ç½®æ³¨é‡Šå¿«æ·é”®map <span class="hljs-tag">&lt;<span class="hljs-name">F4</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">leader</span>&gt;</span>ci<span class="hljs-tag">&lt;<span class="hljs-name">CR</span>&gt;</span></code></pre><h6 id="ä½¿ç”¨æ’ä»¶-2"><a href="#ä½¿ç”¨æ’ä»¶-2" class="headerlink" title="ä½¿ç”¨æ’ä»¶"></a>ä½¿ç”¨æ’ä»¶</h6><p>åœ¨normalæ¨¡å¼ä¸‹æŒ‰vå¹¶ç§»åŠ¨å…‰æ ‡é€‰æ‹©éœ€è¦æ³¨é‡Šçš„è¡Œï¼Œå†æŒ‰F4å°±å¯ä»¥ä¸ºæ‰€æœ‰é€‰ä¸­çš„è¡Œæ·»åŠ æ³¨é‡Š</p>]]></content>
    
    
    <categories>
      
      <category>Develop</category>
      
    </categories>
    
    
    <tags>
      
      <tag>vim</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€LeetCodeã€‘ä¸¤æ•°æ±‚å’Œ</title>
    <link href="/2020/11/25/lts_01_two_sum/"/>
    <url>/2020/11/25/lts_01_two_sum/</url>
    
    <content type="html"><![CDATA[<h3 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a><a id="more"></a>é—®é¢˜æè¿°</h3><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼çš„é‚£ ä¸¤ä¸ª æ•´æ•°ï¼Œå¹¶è¿”å›ä»–ä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚</p><p>ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ ä¸èƒ½ä½¿ç”¨ä¸¤éã€‚</p><h4 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><pre><code class="hljs angelscript">ç»™å®š nums = [<span class="hljs-number">2</span>, <span class="hljs-number">7</span>, <span class="hljs-number">11</span>, <span class="hljs-number">15</span>], target = <span class="hljs-number">9</span>å› ä¸º nums[<span class="hljs-number">0</span>] + nums[<span class="hljs-number">1</span>] = <span class="hljs-number">2</span> + <span class="hljs-number">7</span> = <span class="hljs-number">9</span>æ‰€ä»¥è¿”å› [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>]</code></pre><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/two-sum/">https://leetcode-cn.com/problems/two-sum</a></p><h3 id="é¢˜è§£ORæ€è·¯"><a href="#é¢˜è§£ORæ€è·¯" class="headerlink" title="é¢˜è§£ORæ€è·¯"></a>é¢˜è§£ORæ€è·¯</h3><ul><li>æš´åŠ›ç ´è§£</li><li>åˆ©ç”¨å“ˆå¸Œè¡¨å­˜å‚¨éå†è¿‡çš„æ•°</li></ul><h3 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><pre><code class="hljs Java"><span class="hljs-keyword">import</span> java.util.HashMap;<span class="hljs-keyword">import</span> java.util.Map;<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>&#123;<span class="hljs-comment">/**</span><span class="hljs-comment">     * ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼çš„é‚£ ä¸¤ä¸ª æ•´æ•°ï¼Œå¹¶è¿”å›ä»–ä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚</span><span class="hljs-comment">     *</span><span class="hljs-comment">     * ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ ä¸èƒ½ä½¿ç”¨ä¸¤éã€‚</span><span class="hljs-comment">     *</span><span class="hljs-comment">     * ç¤ºä¾‹:</span><span class="hljs-comment">     *</span><span class="hljs-comment">     *  ç»™å®š nums = [2, 7, 11, 15], target = 9</span><span class="hljs-comment">     *</span><span class="hljs-comment">     *  å› ä¸º nums[0] + nums[1] = 2 + 7 = 9</span><span class="hljs-comment">     *  æ‰€ä»¥è¿”å› [0, 1]</span><span class="hljs-comment">     *</span><span class="hljs-comment">     *  Related Topics æ•°ç»„ å“ˆå¸Œè¡¨</span><span class="hljs-comment">     *  ğŸ‘ 8826 ğŸ‘ 0</span><span class="hljs-comment">     *</span><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> nums</span><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> target</span><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> flag</span><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><span class="hljs-comment">     */</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span>[] twoSum(<span class="hljs-keyword">int</span>[] nums, <span class="hljs-keyword">int</span> target, <span class="hljs-keyword">int</span> flag) &#123;        <span class="hljs-keyword">if</span>(nums == <span class="hljs-keyword">null</span> || nums.length &lt;= <span class="hljs-number">1</span>)&#123;            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalArgumentException(<span class="hljs-string">&quot;nums illagal&quot;</span>);        &#125;        <span class="hljs-keyword">switch</span> (flag)&#123;            <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: <span class="hljs-comment">// æš´åŠ›ç ´è§£</span>                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; nums.length - <span class="hljs-number">1</span>; i++) &#123;                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = i + <span class="hljs-number">1</span>; j &lt; nums.length; j++) &#123;                        <span class="hljs-keyword">if</span> (nums[i] + nums[j] == target) &#123;                            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[]&#123;i, j&#125;;                        &#125;                    &#125;                &#125;                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalArgumentException(<span class="hljs-string">&quot;No two sum solution&quot;</span>);            <span class="hljs-keyword">default</span>: <span class="hljs-comment">// åˆ©ç”¨å“ˆå¸Œè¡¨å­˜å‚¨éå†è¿‡çš„æ•°</span>                Map&lt;Integer, Integer&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;Integer, Integer&gt;();                <span class="hljs-keyword">int</span> temp = nums[<span class="hljs-number">0</span>];                map.put(nums[<span class="hljs-number">0</span>], <span class="hljs-number">0</span>);                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">1</span>; i &lt; nums.length; i++)&#123;                    temp = target - nums[i];                    <span class="hljs-keyword">if</span> (map.containsKey(temp))&#123;                        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[]&#123;map.get(temp), i&#125;;                    &#125;<span class="hljs-keyword">else</span>&#123;                        map.put(nums[i], i);                    &#125;                &#125;                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalArgumentException(<span class="hljs-string">&quot;No two sum solution&quot;</span>);        &#125;    &#125;</code></pre><h4 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h4><pre><code class="hljs Python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">twoSum</span>(<span class="hljs-params">self, nums: List[<span class="hljs-built_in">int</span>], target: <span class="hljs-built_in">int</span>, flag=<span class="hljs-literal">None</span></span>) -&gt; List[int]:</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼çš„é‚£ ä¸¤ä¸ª æ•´æ•°ï¼Œå¹¶è¿”å›ä»–ä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚</span><span class="hljs-string">    ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ ä¸èƒ½ä½¿ç”¨ä¸¤éã€‚</span><span class="hljs-string">    ç¤ºä¾‹:</span><span class="hljs-string">        ç»™å®š nums = [2, 7, 11, 15], target = 9</span><span class="hljs-string">        å› ä¸º nums[0] + nums[1] = 2 + 7 = 9</span><span class="hljs-string">        æ‰€ä»¥è¿”å› [0, 1]</span><span class="hljs-string">    Related Topics æ•°ç»„ å“ˆå¸Œè¡¨</span><span class="hljs-string">    ğŸ‘ 8826 ğŸ‘ 0</span><span class="hljs-string">    :param nums: </span><span class="hljs-string">    :param target: </span><span class="hljs-string">    :param flag: </span><span class="hljs-string">    :return:</span><span class="hljs-string">    &quot;&quot;&quot;</span>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> nums <span class="hljs-keyword">or</span> <span class="hljs-built_in">len</span>(nums) &lt;= <span class="hljs-number">1</span>:        <span class="hljs-keyword">raise</span> Exception(<span class="hljs-string">&quot;Illegal nums&quot;</span>)    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> flag:         num_map = &#123;nums[<span class="hljs-number">0</span>]: <span class="hljs-number">0</span>&#125;        temp = nums[<span class="hljs-number">0</span>]        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(nums)):            temp = target - nums[i]            <span class="hljs-keyword">if</span> temp <span class="hljs-keyword">in</span> num_map:                <span class="hljs-keyword">return</span> [num_map[temp], i]            <span class="hljs-keyword">else</span>:                num_map.update(&#123;<span class="hljs-built_in">int</span>(nums[i]): i&#125;)    <span class="hljs-keyword">else</span>:        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(nums)<span class="hljs-number">-1</span>):            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i+<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(nums)):                <span class="hljs-keyword">if</span> nums[i] + nums[j] == target:                    <span class="hljs-keyword">return</span> [nums[i], nums[j]]    <span class="hljs-keyword">raise</span> Exception(<span class="hljs-string">&quot;No two sum solution&quot;</span>)</code></pre><h4 id="Go"><a href="#Go" class="headerlink" title="Go"></a>Go</h4><pre><code class="hljs Go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">twoSum</span><span class="hljs-params">(nums []<span class="hljs-keyword">int</span>, target, flag <span class="hljs-keyword">int</span>)</span> []<span class="hljs-title">int</span></span> &#123;<span class="hljs-comment">/*</span><span class="hljs-comment">   ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼çš„é‚£ ä¸¤ä¸ª æ•´æ•°ï¼Œå¹¶è¿”å›ä»–ä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚</span><span class="hljs-comment">   ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ ä¸èƒ½ä½¿ç”¨ä¸¤éã€‚</span><span class="hljs-comment">     ç¤ºä¾‹:</span><span class="hljs-comment">       ç»™å®š nums = [2, 7, 11, 15], target = 9</span><span class="hljs-comment">       å› ä¸º nums[0] + nums[1] = 2 + 7 = 9</span><span class="hljs-comment">       æ‰€ä»¥è¿”å› [0, 1]</span><span class="hljs-comment">   Related Topics æ•°ç»„ å“ˆå¸Œè¡¨</span><span class="hljs-comment">   ğŸ‘ 8826 ğŸ‘ 0</span><span class="hljs-comment"> */</span><span class="hljs-keyword">if</span> nums == <span class="hljs-literal">nil</span> || <span class="hljs-built_in">len</span>(nums) &lt;= <span class="hljs-number">1</span> &#123;<span class="hljs-built_in">panic</span>(<span class="hljs-string">&quot;Illegal nums&quot;</span>)&#125;<span class="hljs-keyword">switch</span> flag &#123;<span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<span class="hljs-keyword">for</span> i:= <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(nums) <span class="hljs-number">-1</span>; i++&#123;<span class="hljs-keyword">for</span> j := i + <span class="hljs-number">1</span>; j &lt; <span class="hljs-built_in">len</span>(nums); j++ &#123;<span class="hljs-keyword">if</span> nums[i] + nums[j] == target &#123;<span class="hljs-keyword">return</span> []<span class="hljs-keyword">int</span>&#123;nums[i], nums[j]&#125;&#125;&#125;&#125;<span class="hljs-keyword">default</span>:numMap := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-keyword">int</span>]<span class="hljs-keyword">int</span>)numMap[nums[<span class="hljs-number">0</span>]] = <span class="hljs-number">0</span>temp := nums[<span class="hljs-number">0</span>]<span class="hljs-keyword">for</span> i, num := <span class="hljs-keyword">range</span> nums &#123;<span class="hljs-keyword">if</span> i &gt; <span class="hljs-number">0</span> &#123;temp = target - num<span class="hljs-keyword">if</span> v, ok := numMap[temp]; ok &#123;<span class="hljs-keyword">return</span> []<span class="hljs-keyword">int</span>&#123;v, i&#125;&#125; <span class="hljs-keyword">else</span> &#123;numMap[num] = i&#125;&#125;&#125;&#125;<span class="hljs-built_in">panic</span>(<span class="hljs-string">&quot;No two sum solution&quot;</span>)&#125;</code></pre><h4 id="Scala"><a href="#Scala" class="headerlink" title="Scala"></a>Scala</h4><pre><code class="hljs scala"><span class="hljs-keyword">import</span> scala.collection.mutable.<span class="hljs-type">Map</span><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">Solution</span></span>&#123;  <span class="hljs-comment">/**</span><span class="hljs-comment">    * ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼çš„é‚£ ä¸¤ä¸ª æ•´æ•°ï¼Œå¹¶è¿”å›ä»–ä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚</span><span class="hljs-comment">    *</span><span class="hljs-comment">    * ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ ä¸èƒ½ä½¿ç”¨ä¸¤éã€‚</span><span class="hljs-comment">    *</span><span class="hljs-comment">    * ç¤ºä¾‹:</span><span class="hljs-comment">    *</span><span class="hljs-comment">    *  ç»™å®š nums = [2, 7, 11, 15], target = 9</span><span class="hljs-comment">    *</span><span class="hljs-comment">    *  å› ä¸º nums[0] + nums[1] = 2 + 7 = 9</span><span class="hljs-comment">    *  æ‰€ä»¥è¿”å› [0, 1]</span><span class="hljs-comment">    *</span><span class="hljs-comment">    *  Related Topics æ•°ç»„ å“ˆå¸Œè¡¨</span><span class="hljs-comment">    *  ğŸ‘ 8826 ğŸ‘ 0</span><span class="hljs-comment">    *</span><span class="hljs-comment">    * @param nums</span><span class="hljs-comment">    * @param target</span><span class="hljs-comment">    * @return</span><span class="hljs-comment">    */</span>  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">twoSum</span></span>(nums: <span class="hljs-type">Array</span>[<span class="hljs-type">Int</span>], target: <span class="hljs-type">Int</span>): <span class="hljs-type">Array</span>[<span class="hljs-type">Int</span>] = &#123;    <span class="hljs-keyword">if</span> (nums == <span class="hljs-literal">null</span> || nums.length &lt;= <span class="hljs-number">1</span>)&#123;      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-type">IllegalArgumentException</span>(<span class="hljs-string">&quot;Illegal nums&quot;</span>)    &#125;    <span class="hljs-keyword">var</span> numMap:<span class="hljs-type">Map</span>[<span class="hljs-type">Int</span>,<span class="hljs-type">Int</span>] = <span class="hljs-type">Map</span>(nums(<span class="hljs-number">0</span>) -&gt; <span class="hljs-number">0</span>)    <span class="hljs-keyword">val</span> result = <span class="hljs-keyword">new</span> <span class="hljs-type">Array</span>[<span class="hljs-type">Int</span>](<span class="hljs-number">2</span>)    <span class="hljs-keyword">for</span> (i &lt;- <span class="hljs-number">1</span> to nums.length - <span class="hljs-number">1</span>)&#123;      <span class="hljs-keyword">if</span> (numMap.contains(target - nums(i)))&#123;        result(<span class="hljs-number">0</span>) = numMap(target - nums(i))        result(<span class="hljs-number">1</span>) = i      &#125;<span class="hljs-keyword">else</span>&#123;        numMap += (nums(i) -&gt; i)      &#125;    &#125;    result  &#125;  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span></span>(args: <span class="hljs-type">Array</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">Unit</span> = &#123;    <span class="hljs-keyword">val</span> arr = <span class="hljs-type">Array</span>(<span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>)    <span class="hljs-keyword">val</span> res = twoSum(arr, <span class="hljs-number">6</span>)    println(res(<span class="hljs-number">0</span>), res(<span class="hljs-number">1</span>))  &#125;&#125;</code></pre>]]></content>
    
    
    <categories>
      
      <category>Leetcode</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>Python</tag>
      
      <tag>LeetCode</tag>
      
      <tag>Go</tag>
      
      <tag>scala</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€Allã€‘GitHubä½¿ç”¨å°æŠ€å·§</title>
    <link href="/2020/11/25/github_note/"/>
    <url>/2020/11/25/github_note/</url>
    
    <content type="html"><![CDATA[<h3 id="Octotree-Chrome-github-æµè§ˆæ’ä»¶"><a href="#Octotree-Chrome-github-æµè§ˆæ’ä»¶" class="headerlink" title=" Octotree: Chrome github æµè§ˆæ’ä»¶"></a><a id="more"></a> Octotree: Chrome github æµè§ˆæ’ä»¶</h3><p> å¯ä»¥æŠŠ github é¡¹ç›®çš„ç›®å½•æ ‘ç»“æ„å±•ç¤ºå‡ºæ¥ </p><p><img src="/images/github_note/octotree_1.jpg"></p><p><img src="/images/github_note/octotree_2.jpg"></p><h3 id="GitHubæœç´¢"><a href="#GitHubæœç´¢" class="headerlink" title="GitHubæœç´¢"></a>GitHubæœç´¢</h3><p> å‡å¦‚ï¼Œæ­£åœ¨åšä¸€ä¸ªpythoné¡¹ç›®ï¼Œæ­£å¥½è¦ç”¨åˆ°ä¸€ä¸ªçˆ¬è™«å¤„ç†çš„æ¡†æ¶ï¼Œå…³é”®è¯å°±æ˜¯ <strong>Spider</strong> ï¼Œé‚£å°±å¯ä»¥å…ˆè¯•è¯•æœç´¢é¡¹ç›®åç§°é‡Œé¢åŒ…å« <strong>Spider</strong> çš„é¡¹ç›®ï¼š </p><h4 id="in-name-Spider"><a href="#in-name-Spider" class="headerlink" title="in:name Spider"></a>in:name Spider</h4><p><img src="/images/github_note/git_hub_1.jpg"></p><h4 id="in-name-Spider-stars-gt-3000"><a href="#in-name-Spider-stars-gt-3000" class="headerlink" title="in:name Spider stars:&gt;3000"></a>in:name Spider stars:&gt;3000</h4><p>å¦‚æœ éœ€è¦çº¦æŸæœç´¢ç»“æœçš„staræ•°å¤§äº3000+ </p><p><img src="/images/github_note/github_2.jpg"></p><h4 id="in-name-Spider-stars-gt-3000-forks-gt-1000"><a href="#in-name-Spider-stars-gt-3000-forks-gt-1000" class="headerlink" title="in:name Spider stars:&gt;3000 forks:&gt;1000"></a>in:name Spider stars:&gt;3000 forks:&gt;1000</h4><p>å¦‚æœéœ€è¦æ›´å°èŒƒå›´, å¯ä»¥çº¦æŸforkæ•° </p><p><img src="/images/github_note/github_3.jpg"></p><h4 id="in-name-Spider-stars-gt-3000-forks-gt-1000-language-python"><a href="#in-name-Spider-stars-gt-3000-forks-gt-1000-language-python" class="headerlink" title="in:name Spider stars:&gt;3000 forks:&gt;1000 language:python"></a>in:name Spider stars:&gt;3000 forks:&gt;1000 language:python</h4><p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥çº¦æŸè¯­è¨€</p><p><img src="/images/github_note/github_4.jpg"></p><h4 id="in-readme-Spider-stars-gt-3000-forks-gt-1000-language-python"><a href="#in-readme-Spider-stars-gt-3000-forks-gt-1000-language-python" class="headerlink" title="in:readme Spider stars:&gt;3000 forks:&gt;1000 language:python"></a>in:readme Spider stars:&gt;3000 forks:&gt;1000 language:python</h4><p> å¦‚æœä¸ç¡®å®šå…³é”®è¯æ˜¯å¦ä¼šå‘½ä¸­é¡¹ç›®åç§°ï¼Œé‚£å¯ä»¥é€šè¿‡ <strong>readme</strong> æ¥æœç´¢ ã€‚æ­¤æ—¶ï¼Œå°±éœ€è¦é‡æ–°è°ƒæ•´ starå’Œforkæ•° äº†ã€‚</p><p><img src="/images/github_note/github_5.jpg"></p><h4 id="in-description-Spider-stars-gt-3000-forks-gt-1000-language-python"><a href="#in-description-Spider-stars-gt-3000-forks-gt-1000-language-python" class="headerlink" title="in:description Spider stars:&gt;3000 forks:&gt;1000 language:python"></a>in:description Spider stars:&gt;3000 forks:&gt;1000 language:python</h4><p>å¦‚æœï¼Œæˆ‘ä»¬æƒ³è¦æ‰¾çš„é¡¹ç›®ï¼Œæƒ³ä¸åˆ°ä¸€ä¸ªè‹±æ–‡å…³é”®è¯å»æè¿°ï¼Œæ€ä¹ˆåŠï¼Ÿ</p><p>è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç›´æ¥ç”¨ä¸€ç§ç®€å•ç²—æš´çš„æ–¹å¼ï¼ŒæŒ‰ç…§ <strong>description</strong> çš„æ–¹å¼æ¥æœç´¢ï¼š</p><p><img src="/images/github_note/github_6.jpg"></p><h4 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h4><p>æ ¹æ®å¼€æºé¡¹ç›®çš„ä¸»è¦ç»„æˆéƒ¨åˆ†ï¼š</p><p>â€‹    â—† name: é¡¹ç›®å</p><p>â€‹    â—† description: é¡¹ç›®çš„ç®€è¦æè¿°</p><p>â€‹    â—† é¡¹ç›®çš„æºç </p><p>â€‹    â—† README.md: é¡¹ç›®çš„è¯¦ç»†æƒ…å†µçš„ä»‹ç»</p><pre><code class="hljs markdown">|      ç­›é€‰æ¡ä»¶       |            å¤‡æ³¨            || ------------------ | ------------------------- || in:name xxx        | æŒ‰ç…§é¡¹ç›®åæœç´¢              ï½œ| in:readme xxx      | æŒ‰ç…§READMEæœç´¢             ï½œ| in:description xxx | æŒ‰ç…§descriptionæœç´¢        ï½œ| stars:&gt;xxx         | starsæ•°å¤§äºxxx             ï½œ| forks:&gt;xxx         | forksæ•°å¤§äºxxx             ï½œ| language:xxx       | ç¼–ç¨‹è¯­è¨€æ˜¯xxx              ï½œ| pushed:&gt;YYYY-MM-DD | æœ€åæ›´æ–°æ—¶é—´å¤§äºYYYY-MM-DD  ï½œ</code></pre>]]></content>
    
    
    <categories>
      
      <category>Develop</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Github</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€Pythonã€‘è®¾è®¡æ¨¡å¼</title>
    <link href="/2020/11/20/design_pattern_python/"/>
    <url>/2020/11/20/design_pattern_python/</url>
    
    <content type="html"><![CDATA[<blockquote><p>Patterns mean â€œI have run out of language.â€ - Rich Hickey<a id="more"></a> </p></blockquote><p>ä¹‹å‰å­¦ä¹ è®¾è®¡æ¨¡å¼çš„æ—¶å€™æ€»æ˜¯æ²¡æœ‰ä»€ä¹ˆæ„Ÿè§‰ï¼Œå› ä¸ºè®°æ€§ä¸å¥½ä¸€ç›´æ²¡è®°ä½å¤šå°‘ã€‚pythonä¸åƒjavaä¸­æ¯”è¾ƒå¼ºè°ƒè®¾è®¡æ¨¡å¼(ç¼–ç¨‹å¥—è·¯)ï¼ŒåŠ¨æ€è¯­è¨€ä¹Ÿå†…ç½®äº†åƒæ˜¯è£…é¥°å™¨ã€è¿­ä»£å™¨ç­‰æ¨¡å¼ï¼Œå¦å¤–pythonä¸­çš„ã€ä¸€åˆ‡çš†å¯¹è±¡ã€ã€é¸­å­ç±»å‹ç­‰ä¹Ÿå¯¼è‡´pythonä¸­å®ç°çš„è®¾è®¡æ¨¡å¼å’Œå…¶ä»–è¯­è¨€æœ‰äº›å·®åˆ«ã€‚æ ¹æ®YAGNI(you arenâ€™t gonna need it)å’ŒKISS(Keep it simple sutpid)åŸåˆ™ï¼Œå¦‚æœèƒ½ç”¨ç®€å•æ˜“æ‡‚çš„æ–¹å¼å®ç°ï¼Œæœ€å¥½ä¸è¦æ»¥ç”¨è®¾è®¡æ¨¡å¼ä»¥å…å¢åŠ å¤æ‚åº¦å’Œç»´æŠ¤éš¾åº¦</p><h3 id="åˆ›å»ºå‹"><a href="#åˆ›å»ºå‹" class="headerlink" title="åˆ›å»ºå‹"></a>åˆ›å»ºå‹</h3><h4 id="Method-å·¥å‚æ–¹æ³•"><a href="#Method-å·¥å‚æ–¹æ³•" class="headerlink" title="Method(å·¥å‚æ–¹æ³•)"></a>Method(å·¥å‚æ–¹æ³•)</h4><p>æ‰§è¡Œå•ç‹¬çš„å‡½æ•°ï¼Œé€šè¿‡ä¼ å‚æä¾›éœ€è¦çš„å¯¹è±¡çš„ä¿¡æ¯ã€‚</p><pre><code class="hljs Python"><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">Module Description: å·¥å‚æ–¹æ³•</span><span class="hljs-string">Problem:åœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬æ‰§è¡Œå‡½æ•°ï¼Œä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œä½†ä¸éœ€è¦çŸ¥é“ä»»ä½•å…³äºå¯¹è±¡å¦‚ä½•å®ç°ä»¥åŠå¯¹è±¡æ¥è‡ªå“ªé‡Œçš„ç»†èŠ‚</span><span class="hljs-string">Solutionï¼š</span><span class="hljs-string">Date: 2020/1/8 </span><span class="hljs-string">Author: Wang P</span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-keyword">import</span> json<span class="hljs-keyword">import</span> xml.etree.ElementTree <span class="hljs-keyword">as</span> etree<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Connector</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, filepath</span>):</span>        factory = <span class="hljs-literal">None</span>        <span class="hljs-keyword">try</span>:            factory = self.connector_factory(filepath)        <span class="hljs-keyword">except</span> ValueError <span class="hljs-keyword">as</span> e:            print(e)        self.factory = factory    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">connector_factory</span>(<span class="hljs-params">self, filepath</span>):</span>        <span class="hljs-keyword">if</span> filepath.endswith(<span class="hljs-string">&#x27;json&#x27;</span>):            connector = self.JSONConnector        <span class="hljs-keyword">elif</span> filepath.endswith(<span class="hljs-string">&#x27;xml&#x27;</span>):            connector = self.XMLConnector        <span class="hljs-keyword">else</span>:            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&#x27;Cannot connect to &#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(filepath))        <span class="hljs-keyword">return</span> connector(filepath)    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JSONConnector</span>:</span>        <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">        JSONå·¥å‚</span><span class="hljs-string">        &quot;&quot;&quot;</span>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, filepath</span>):</span>            self.data = <span class="hljs-built_in">dict</span>()            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filepath, mode=<span class="hljs-string">&#x27;r&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> f:                self.data = json.load(f)<span class="hljs-meta">        @property</span>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">parsed_data</span>(<span class="hljs-params">self</span>):</span>            <span class="hljs-keyword">return</span> self.data    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">XMLConnector</span>:</span>        <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">        XMLå·¥å‚</span><span class="hljs-string">        &quot;&quot;&quot;</span>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, filepath</span>):</span>            self.tree = etree.parse(filepath)<span class="hljs-meta">        @property</span>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">parsed_date</span>(<span class="hljs-params">self</span>):</span>            <span class="hljs-keyword">return</span> self.tree<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span>    xml_factory = Connector(<span class="hljs-string">&#x27;data/person.xml&#x27;</span>)    xml_data = xml_factory.factory.parsed_date    smiths = xml_data.findall(<span class="hljs-string">&quot;.//&#123;&#125;[&#123;&#125;=&#x27;&#123;&#125;&#x27;]&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">&#x27;person&#x27;</span>, <span class="hljs-string">&#x27;lastName&#x27;</span>, <span class="hljs-string">&#x27;Smith&#x27;</span>))    print(<span class="hljs-string">&#x27;found: &#123;&#125; persons&#x27;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-built_in">len</span>(smiths)))    <span class="hljs-keyword">for</span> smith <span class="hljs-keyword">in</span> smiths:        print(<span class="hljs-string">&#x27;first name:&#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(smith.find(<span class="hljs-string">&#x27;firstName&#x27;</span>).text))        print(<span class="hljs-string">&#x27;last name:&#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(smith.find(<span class="hljs-string">&#x27;lastName&#x27;</span>).text))    print()    json_factory = Connector(<span class="hljs-string">&#x27;data/donut.json&#x27;</span>)    json_data = json_factory.factory.parsed_data    print(<span class="hljs-string">&#x27;find: &#123;&#125; donuts. &#x27;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-built_in">len</span>(json_data)))    <span class="hljs-keyword">for</span> donut <span class="hljs-keyword">in</span> json_data:        print(<span class="hljs-string">&#x27;name:&#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(donut[<span class="hljs-string">&#x27;name&#x27;</span>]))        print(<span class="hljs-string">&#x27;ppu:&#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(donut[<span class="hljs-string">&#x27;ppu&#x27;</span>]))<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:    main()</code></pre><h4 id="Abstract-Factory-æŠ½è±¡å·¥å‚-è§£å†³å¤æ‚å¯¹è±¡åˆ›å»ºé—®é¢˜"><a href="#Abstract-Factory-æŠ½è±¡å·¥å‚-è§£å†³å¤æ‚å¯¹è±¡åˆ›å»ºé—®é¢˜" class="headerlink" title="Abstract Factory(æŠ½è±¡å·¥å‚: è§£å†³å¤æ‚å¯¹è±¡åˆ›å»ºé—®é¢˜)"></a>Abstract Factory(æŠ½è±¡å·¥å‚: è§£å†³å¤æ‚å¯¹è±¡åˆ›å»ºé—®é¢˜)</h4><p>å·¥å‚æ–¹æ³•é€‚åˆå¯¹è±¡ç§ç±»è¾ƒå°‘çš„æƒ…å†µï¼Œå¦‚æœæœ‰å¤šç§ä¸åŒç±»å‹å¯¹è±¡éœ€è¦åˆ›å»ºï¼Œä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼ã€‚</p><pre><code class="hljs Python"><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">Module Description: æŠ½è±¡å·¥å‚ï¼ˆå®é™…ä¸Šä¸€ä¸ªæŠ½è±¡å·¥å‚å…¶å®æ˜¯ä¸€ç»„å·¥å‚æ–¹æ³•ï¼Œæ¯ä¸ªå·¥å‚æ–¹æ³•è´Ÿè´£ç”Ÿäº§ä¸åŒç±»å‹çš„å¯¹è±¡ï¼‰</span><span class="hljs-string">Problem:</span><span class="hljs-string">Solutionï¼š</span><span class="hljs-string">Date: 2020/1/8 </span><span class="hljs-string">Author: Wang P</span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Frog</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    æ¸¸æˆè§’è‰²å¯¹è±¡-é’è›™</span><span class="hljs-string">    &quot;&quot;&quot;</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, name</span>):</span>        self.name = name    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> self.name    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">interact_with</span>(<span class="hljs-params">self, obstacle</span>):</span>        print(<span class="hljs-string">&#x27;&#123;&#125; the Frog encounters &#123;&#125; and &#123;&#125;!&#x27;</span>.<span class="hljs-built_in">format</span>(self, obstacle, obstacle.action()))<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Bug</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    éšœç¢ç‰©å¯¹è±¡-è™«å­</span><span class="hljs-string">    &quot;&quot;&quot;</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;a bug&#x27;</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">action</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;eats it&#x27;</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FrogWorld</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    æŠ½è±¡å·¥å‚ï¼Œè´Ÿè´£åˆ›å»ºæ¸¸æˆè§’è‰²ä¸éšœç¢ç‰©å¯¹è±¡</span><span class="hljs-string">    make_character()å’Œmake_obstacle()åŠ¨æ€æ”¹å˜å½“å‰æ¿€æ´»çš„å·¥å‚</span><span class="hljs-string">    åœ¨é™æ€è¯­è¨€ä¸­ï¼ŒæŠ½è±¡å·¥å‚æ˜¯æŠ½è±¡ç±»/æ¥å£ï¼Œå…·æœ‰ä¸€äº›ç©ºæ–¹æ³•ï¼ŒPythonä¸­æ— é¡»å¦‚æ­¤</span><span class="hljs-string">    &quot;&quot;&quot;</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, name</span>):</span>        print(self)        self.player_name = name    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;\n\n\t------- Frog Word -------&#x27;</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">make_character</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> Frog(self.player_name)    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">make_obstacle</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> Bug()<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Wizard</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    æ¸¸æˆè§’è‰²å¯¹è±¡-ç”·å·«</span><span class="hljs-string">    &quot;&quot;&quot;</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, name</span>):</span>        self.name = name    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> self.name    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">interact_with</span>(<span class="hljs-params">self, obstacle</span>):</span>        print(<span class="hljs-string">&#x27;&#123;&#125; the Wizard battles against &#123;&#125; and &#123;&#125;!&#x27;</span>.<span class="hljs-built_in">format</span>(self, obstacle, obstacle.action()))<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Ork</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    éšœç¢ç‰©å¯¹è±¡-æ€ªå…½</span><span class="hljs-string">    &quot;&quot;&quot;</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;an evil ork&#x27;</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">action</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;kills it&#x27;</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WizardWorld</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    æŠ½è±¡å·¥å‚ï¼Œè´Ÿè´£åˆ›å»ºæ¸¸æˆè§’è‰²ä¸éšœç¢ç‰©å¯¹è±¡</span><span class="hljs-string">    make_character()å’Œmake_obstacle()åŠ¨æ€æ”¹å˜å½“å‰æ¿€æ´»çš„å·¥å‚</span><span class="hljs-string">    åœ¨é™æ€è¯­è¨€ä¸­ï¼ŒæŠ½è±¡å·¥å‚æ˜¯æŠ½è±¡ç±»/æ¥å£ï¼Œå…·æœ‰ä¸€äº›ç©ºæ–¹æ³•ï¼ŒPythonä¸­æ— é¡»å¦‚æ­¤</span><span class="hljs-string">    &quot;&quot;&quot;</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, name</span>):</span>        print(self)        self.player_name = name    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;\n\n\t------- Wizard Word -------&#x27;</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">make_character</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> Wizard(self.player_name)    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">make_obstacle</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> Ork()<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GameEnvironment</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    æ¸¸æˆçš„ä¸»å…¥å£ï¼Œæ¥æ”¶factoryä¸ºè¾“å…¥</span><span class="hljs-string">    &quot;&quot;&quot;</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, factory</span>):</span>        self.hero = factory.make_character()        self.obstacle = factory.make_obstacle()    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">play</span>(<span class="hljs-params">self</span>):</span>        self.hero.interact_with(self.obstacle)<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">validate_age</span>(<span class="hljs-params">name</span>):</span>    <span class="hljs-keyword">try</span>:        age = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;Welcome &#123;&#125;. How old are you? &quot;</span>.<span class="hljs-built_in">format</span>(name))        age = <span class="hljs-built_in">int</span>(age)    <span class="hljs-keyword">except</span> ValueError <span class="hljs-keyword">as</span> e:        print(<span class="hljs-string">&quot;Age &#123;&#125; is invalid, please try again...&quot;</span>.<span class="hljs-built_in">format</span>(age))        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>, age    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>, age<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span>    name = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;Hello. What&#x27;s your name?&quot;</span>)    valid_input = <span class="hljs-literal">False</span>    age = <span class="hljs-number">0</span>    <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> valid_input:        valid_input, age = validate_age(name)    game = FrogWorld <span class="hljs-keyword">if</span> age &lt; <span class="hljs-number">18</span> <span class="hljs-keyword">else</span> WizardWorld    environment = GameEnvironment(game(name))    environment.play()<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:    main()</code></pre><h4 id="The-Builder-Pattern-æ„é€ æ¨¡å¼-æ§åˆ¶å¤æ‚å¯¹è±¡çš„æ„é€ "><a href="#The-Builder-Pattern-æ„é€ æ¨¡å¼-æ§åˆ¶å¤æ‚å¯¹è±¡çš„æ„é€ " class="headerlink" title="The Builder Pattern(æ„é€ æ¨¡å¼: æ§åˆ¶å¤æ‚å¯¹è±¡çš„æ„é€ )"></a>The Builder Pattern(æ„é€ æ¨¡å¼: æ§åˆ¶å¤æ‚å¯¹è±¡çš„æ„é€ )</h4><p>å½“å¯¹è±¡éœ€è¦å¤šä¸ªéƒ¨åˆ†ç»„åˆèµ·æ¥ä¸€æ­¥æ­¥åˆ›å»ºï¼Œå¹¶ä¸”åˆ›å»ºå’Œè¡¨ç¤ºåˆ†ç¦»çš„æ—¶å€™ã€‚å¯ä»¥è¿™ä¹ˆç†è§£ï¼Œä½ è¦ä¹°ç”µè„‘ï¼Œå·¥å‚æ¨¡å¼ç›´æ¥è¿”å›ä¸€ä¸ªä½ éœ€è¦å‹å·çš„ç”µè„‘ï¼Œä½†æ˜¯æ„é€ æ¨¡å¼å…è®¸ä½ è‡ªå®šä¹‰ç”µè„‘å„ç§é…ç½®ç±»å‹ï¼Œç»„è£…å®Œæˆåç»™ä½ ã€‚è¿™ä¸ªè¿‡ç¨‹å¯ä»¥ä¼ å…¥builderä»è€Œè‡ªå®šä¹‰åˆ›å»ºçš„æ–¹å¼ã€‚</p><pre><code class="hljs Python"><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">Module Description:å»ºé€ è€…è®¾è®¡æ¨¡å¼demo</span><span class="hljs-string">Problem:å½“éœ€è¦åˆ›å»ºä¸€ä¸ªç”±å¤šä¸ªéƒ¨åˆ†æ„æˆçš„å¯¹è±¡ï¼Œè€Œä¸”å®ƒçš„æ„é€ éœ€è¦ä¸€æ­¥æ¥ä¸€æ­¥çš„å®Œæˆï¼›åªæœ‰å½“å„ä¸ªéƒ¨åˆ†éƒ½åˆ›å»ºå¥½ï¼Œè¿™ä¸ªå¯¹è±¡æ‰ç®—å®Œæ•´</span><span class="hljs-string">Solutionï¼š</span><span class="hljs-string">Extension:å·¥å‚æ¨¡å¼ä¸åˆ›å»ºè€…çš„åŒºåˆ«ä¸ºï¼ˆ1ï¼‰å·¥å‚æ¨¡å¼ä¸€ä½†ä¸ªæ­¥éª¤åˆ›å»ºå¯¹è±¡ï¼›åˆ›å»ºè€…ä»¥å¤šä¸ªæ­¥éª¤åˆ›å»ºå¯¹è±¡ï¼Œå¹¶ä¸”å‡ ä¹å§‹ç»ˆä¼šä½¿ç”¨ä¸€ä¸ªæŒ‡æŒ¥è€…ã€‚</span><span class="hljs-string">                              ï¼ˆ2ï¼‰å·¥å‚æ¨¡å¼ä¸‹ä¼šç«‹å³è¿”å›ä¸€ä¸ªåˆ›å»ºå¥½çš„å¯¹è±¡ï¼Œå»ºé€ è€…ä»…åœ¨å®¢æˆ·ç«¯ä»£ç æ‰æ˜¾å¼è¯·æ±‚æŒ‡æŒ¥è€…è¿”å›çš„æœ€ç»ˆå¯¹è±¡</span><span class="hljs-string">                               ä¾‹å¦‚ï¼šå‡è®¾ä½ æƒ³ä¹°ä¸ªç”µè„‘ï¼Œå¦‚æœå†³å®šä¹°ä¸€å°ç‰¹å®šé…ç½®çš„ç”µè„‘ï¼Œåˆ™ä½¿ç”¨å·¥å‚æ¨¡å¼ï¼›å¦‚æœä½ è¦è´­ä¹°ä¸€å°å®šåˆ¶çš„PCï¼Œ</span><span class="hljs-string">                               ä½ å¼æŒ‡æŒ¥è€…ï¼Œä¼šå‘åˆ¶é€ å•†æä¾›æŒ‡ä»¤è¯´æ˜å¿ƒä¸­ç†æƒ³çš„ç”µè„‘è§„æ ¼ã€‚</span><span class="hljs-string">Date: 2020/1/8</span><span class="hljs-string">Author: Wang P</span><span class="hljs-string">&quot;&quot;&quot;</span>MINI14 = <span class="hljs-string">&#x27;1.4GHz Mac Mini&#x27;</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppleFactory</span>:</span>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MacMini14</span>:</span>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span>            self.memory = <span class="hljs-number">4</span>            self.hdd = <span class="hljs-number">500</span>            self.gpu = <span class="hljs-string">&#x27;Intel HD Graphics 5000&#x27;</span>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span>(<span class="hljs-params">self</span>):</span>            info = (<span class="hljs-string">&#x27;Model: &#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(MINI14),                    <span class="hljs-string">&#x27;Memory: &#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(self.memory),                    <span class="hljs-string">&#x27;Hard Disk: &#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(self.hdd),                    <span class="hljs-string">&#x27;Graphics Card: &#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(self.gpu))            <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;\n&#x27;</span>.join(info)    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">build_computer</span>(<span class="hljs-params">self, model</span>):</span>        <span class="hljs-keyword">if</span> model == MINI14:            <span class="hljs-keyword">return</span> self.MacMini14()        <span class="hljs-keyword">else</span>:            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;I dont&#x27;t know how to build &#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(model)<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">apple_computer_use_factory</span>():</span>    afac = AppleFactory()    mac_mini = afac.build_computer(MINI14)    print(mac_mini)<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Computer</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, serial_number</span>):</span>        self.serial_number = serial_number        self.memory = <span class="hljs-literal">None</span>        self.hdd = <span class="hljs-literal">None</span>        self.gpu = <span class="hljs-literal">None</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span>(<span class="hljs-params">self</span>):</span>        info = (<span class="hljs-string">&#x27;Serial: &#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(self.serial_number),                <span class="hljs-string">&#x27;Memory: &#123;&#125;GB&#x27;</span>.<span class="hljs-built_in">format</span>(self.memory),                <span class="hljs-string">&#x27;Hard Disk: &#123;&#125;GB&#x27;</span>.<span class="hljs-built_in">format</span>(self.hdd),                <span class="hljs-string">&#x27;Graphics Card: &#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(self.gpu))        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;\n&#x27;</span>.join(info)<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ComputerBuilder</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span>        self.computer = Computer(<span class="hljs-string">&#x27;AI563924&#x27;</span>)    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">conf_memory</span>(<span class="hljs-params">self, amount</span>):</span>        self.computer.memory = amount    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">conf_hdd</span>(<span class="hljs-params">self, amount</span>):</span>        self.computer.hdd = amount    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">conf_gpu</span>(<span class="hljs-params">self, model</span>):</span>        self.computer.gpu = model<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HardwareEngineer</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span>        self.builder = <span class="hljs-literal">None</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">construct_computer</span>(<span class="hljs-params">self, memory, hdd, gpu</span>):</span>        self.builder = ComputerBuilder()        self.builder.conf_memory(memory)        self.builder.conf_hdd(hdd)        self.builder.conf_gpu(gpu)<span class="hljs-meta">    @property</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">computer</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> self.builder.computer<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">apple_computer_use_builder</span>():</span>    engineer = HardwareEngineer()    engineer.construct_computer(memory=<span class="hljs-number">8</span>, hdd=<span class="hljs-number">500</span>, gpu=<span class="hljs-string">&#x27;GeForce GTX 650 Ti&#x27;</span>)    computer = engineer.computer    print(computer)<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:    apple_computer_use_builder()    print(<span class="hljs-string">&#x27;*&#x27;</span>*<span class="hljs-number">50</span>)    apple_computer_use_factory()</code></pre><h4 id="å•ä¾‹æ¨¡å¼-ä½¿å¾—ä¸€ä¸ªç±»æœ€å¤šç”Ÿæˆä¸€ä¸ªå®ä¾‹"><a href="#å•ä¾‹æ¨¡å¼-ä½¿å¾—ä¸€ä¸ªç±»æœ€å¤šç”Ÿæˆä¸€ä¸ªå®ä¾‹" class="headerlink" title="å•ä¾‹æ¨¡å¼: ä½¿å¾—ä¸€ä¸ªç±»æœ€å¤šç”Ÿæˆä¸€ä¸ªå®ä¾‹"></a>å•ä¾‹æ¨¡å¼: ä½¿å¾—ä¸€ä¸ªç±»æœ€å¤šç”Ÿæˆä¸€ä¸ªå®ä¾‹</h4><p>(åŸºäºå…ƒç±»)å•ä¾‹æ¨¡å¼</p><pre><code class="hljs Python"><span class="hljs-comment"># -*- coding:utf-8 -*-</span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">Module Description:(åŸºäºå…ƒç±»)å•ä¾‹æ¨¡å¼</span><span class="hljs-string">Problem:</span><span class="hljs-string">Solution:</span><span class="hljs-string">Date: 2020/1/6 </span><span class="hljs-string">Author: Wang P</span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Singleton</span>(<span class="hljs-params"><span class="hljs-built_in">type</span></span>):</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">cls, *args, **kwargs</span>):</span>        print(<span class="hljs-string">&quot;__init__ &#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(cls.__name__))        cls.__instance = <span class="hljs-literal">None</span>        <span class="hljs-built_in">super</span>().__init__(*args, **kwargs)    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__call__</span>(<span class="hljs-params">cls, *args, **kwargs</span>):</span>        <span class="hljs-keyword">if</span> cls.__instance <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:            print(<span class="hljs-string">&quot;__call__ &#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(cls.__name__))            cls.__instance = <span class="hljs-built_in">super</span>(Singleton, cls).__call__(*args, **kwargs)        <span class="hljs-keyword">return</span> cls.__instance<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Instance</span>(<span class="hljs-params">metaclass=Singleton</span>):</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, name</span>):</span>        self.name = name<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:    i1 = Instance(<span class="hljs-string">&#x27;zhang san&#x27;</span>)    i2 = Instance(<span class="hljs-string">&#x27;li si&#x27;</span>)    print(i1 <span class="hljs-keyword">is</span> i2)</code></pre><p>é€šè¿‡newå‡½æ•°å®ç°ç®€å•çš„å•ä¾‹æ¨¡å¼</p><pre><code class="hljs Python"><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">Module Description: é€šè¿‡newå‡½æ•°å®ç°ç®€å•çš„å•ä¾‹æ¨¡å¼</span><span class="hljs-string">Problem:</span><span class="hljs-string">Solutionï¼š</span><span class="hljs-string">Date: 2020/1/20 </span><span class="hljs-string">Author: Wang P</span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Singleton</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__new__</span>(<span class="hljs-params">cls, name, *args, **kwargs</span>):</span>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">hasattr</span>(cls, <span class="hljs-string">&#x27;_instance&#x27;</span>):            cls._instance = <span class="hljs-built_in">super</span>().__new__(cls, *args, **kwargs)        print(<span class="hljs-string">&quot;__call__ &#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(cls.__class__))        <span class="hljs-keyword">return</span> cls._instance    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, name</span>):</span>        print(<span class="hljs-string">&quot;__init__ &#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(self.__str__()))        <span class="hljs-built_in">super</span>().__init__()        self.name = name<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:    ins1 = Singleton(<span class="hljs-string">&#x27;zhang san&#x27;</span>)    ins2 = Singleton(<span class="hljs-string">&#x27;li si&#x27;</span>)    print(<span class="hljs-built_in">id</span>(ins1), <span class="hljs-built_in">id</span>(ins2))    print(ins1.name)    print(ins2.name)</code></pre><p>è£…é¥°å™¨å®ç°</p><pre><code class="hljs Python"><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">Module Description: é€šè¿‡è£…é¥°å™¨æ–¹å¼å®ç°å•ä¾‹æ¨¡å¼</span><span class="hljs-string">Problem:</span><span class="hljs-string">Solutionï¼š</span><span class="hljs-string">Date: 2020/2/20 </span><span class="hljs-string">Author: Wang P</span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-comment"># è£…é¥°å™¨å®ç°</span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">singleton</span>(<span class="hljs-params">class_</span>):</span>    instances = &#123;&#125;    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getinstance</span>(<span class="hljs-params">*args, **kwargs</span>):</span>        <span class="hljs-keyword">if</span> class_ <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> instances:            instances[class_] = class_(*args, **kwargs)        <span class="hljs-keyword">return</span> instances[class_]    <span class="hljs-keyword">return</span> getinstance<span class="hljs-meta">@singleton</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyClass</span>:</span>    <span class="hljs-keyword">pass</span><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:    i1 = MyClass()    i2 = MyClass()    print(i1 <span class="hljs-keyword">is</span> i2)</code></pre><h4 id="The-Prototype-Pattern-åŸå‹æ¨¡å¼-è§£å†³å¯¹è±¡æ‹·è´é—®é¢˜"><a href="#The-Prototype-Pattern-åŸå‹æ¨¡å¼-è§£å†³å¯¹è±¡æ‹·è´é—®é¢˜" class="headerlink" title="The Prototype Pattern(åŸå‹æ¨¡å¼:è§£å†³å¯¹è±¡æ‹·è´é—®é¢˜)"></a>The Prototype Pattern(åŸå‹æ¨¡å¼:è§£å†³å¯¹è±¡æ‹·è´é—®é¢˜)</h4><h3 id="è¡Œä¸ºå‹"><a href="#è¡Œä¸ºå‹" class="headerlink" title="è¡Œä¸ºå‹"></a>è¡Œä¸ºå‹</h3><h4 id="The-Observer-Pattern-è§‚å¯Ÿè€…æ¨¡å¼ï¼šç”¨æ¥å¤„ç†å¤šä¸ªå¯¹è±¡ä¹‹é—´çš„å‘å¸ƒè®¢é˜…é—®é¢˜"><a href="#The-Observer-Pattern-è§‚å¯Ÿè€…æ¨¡å¼ï¼šç”¨æ¥å¤„ç†å¤šä¸ªå¯¹è±¡ä¹‹é—´çš„å‘å¸ƒè®¢é˜…é—®é¢˜" class="headerlink" title="The Observer Pattern(è§‚å¯Ÿè€…æ¨¡å¼ï¼šç”¨æ¥å¤„ç†å¤šä¸ªå¯¹è±¡ä¹‹é—´çš„å‘å¸ƒè®¢é˜…é—®é¢˜)"></a>The Observer Pattern(è§‚å¯Ÿè€…æ¨¡å¼ï¼šç”¨æ¥å¤„ç†å¤šä¸ªå¯¹è±¡ä¹‹é—´çš„å‘å¸ƒè®¢é˜…é—®é¢˜)</h4><pre><code class="hljs Python"><span class="hljs-comment"># -*- coding:utf-8 -*-</span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">Module Description: </span><span class="hljs-string">Date: 2019/12/13 </span><span class="hljs-string">Author: Wang P</span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WaterHeater</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    çƒ­æ°´å™¨ï¼šæˆ˜èƒœå¯’å†¬çš„æœ‰åˆ©æ­¦å™¨</span><span class="hljs-string">    &quot;&quot;&quot;</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span>        self.__observers = []        self.__temperature = <span class="hljs-number">25</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getTemperature</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> self.__temperature    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">setTemperature</span>(<span class="hljs-params">self, temperature</span>):</span>        self.__temperature = temperature        print(<span class="hljs-string">&quot;current temperature is:&quot;</span>, self.__temperature)        self.notifies()    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">addObserver</span>(<span class="hljs-params">self, observer</span>):</span>        self.__observers.append(observer)    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">notifies</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">for</span> o <span class="hljs-keyword">in</span> self.__observers:            o.update(self)<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Observer</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    æ´—æ¾¡æ¨¡å¼å’Œé¥®ç”¨æ¨¡å¼çš„çˆ¶ç±»</span><span class="hljs-string">    &quot;&quot;&quot;</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">update</span>(<span class="hljs-params">self, waterHeater</span>):</span>        <span class="hljs-keyword">pass</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WashingMode</span>(<span class="hljs-params">Observer</span>):</span>    <span class="hljs-string">&quot;&quot;&quot;è¯¥æ¨¡å¼ç”¨äºæ´—æ¾¡ç”¨&quot;&quot;&quot;</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">update</span>(<span class="hljs-params">self, waterHeater</span>):</span>        <span class="hljs-keyword">if</span> <span class="hljs-number">50</span> &lt;= waterHeater.getTemperature() &lt; <span class="hljs-number">70</span>:            print(<span class="hljs-string">&quot;æ°´å·²çƒ§å¥½ï¼Œæ¸©åº¦æ­£å¥½ï¼å¯ä»¥ç”¨æ¥æ´—æ¾¡äº†ã€‚&quot;</span>)<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DrinkingMode</span>(<span class="hljs-params">Observer</span>):</span>    <span class="hljs-string">&quot;&quot;&quot;è¯¥æ¨¡å¼ç”¨äºé¥®ç”¨&quot;&quot;&quot;</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">update</span>(<span class="hljs-params">self, waterHeater</span>):</span>        <span class="hljs-keyword">if</span> waterHeater.getTemperature() &gt;= <span class="hljs-number">100</span>:            print(<span class="hljs-string">&quot;æ°´å·²çƒ§å¼€ï¼å¯ä»¥ç”¨æ¥é¥®ç”¨äº†ã€‚&quot;</span>)<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_water_heater</span>():</span>    heater = WaterHeater()    washing_obser = WashingMode()    drinking_obser = DrinkingMode()    heater.addObserver(washing_obser)    heater.addObserver(drinking_obser)    heater.setTemperature(<span class="hljs-number">40</span>)    heater.setTemperature(<span class="hljs-number">60</span>)    heater.setTemperature(<span class="hljs-number">100</span>)<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:    test_water_heater()</code></pre><h4 id="The-State-Pattern-çŠ¶æ€æ¨¡å¼ï¼šå®ç°æœ‰é™çŠ¶æ€æœº"><a href="#The-State-Pattern-çŠ¶æ€æ¨¡å¼ï¼šå®ç°æœ‰é™çŠ¶æ€æœº" class="headerlink" title="The State Pattern(çŠ¶æ€æ¨¡å¼ï¼šå®ç°æœ‰é™çŠ¶æ€æœº)"></a>The State Pattern(çŠ¶æ€æ¨¡å¼ï¼šå®ç°æœ‰é™çŠ¶æ€æœº)</h4><h4 id="The-Strategy-Pattern-ç­–ç•¥æ¨¡å¼ï¼šåŠ¨æ€é€‰æ‹©ç®—æ³•ç­–ç•¥"><a href="#The-Strategy-Pattern-ç­–ç•¥æ¨¡å¼ï¼šåŠ¨æ€é€‰æ‹©ç®—æ³•ç­–ç•¥" class="headerlink" title="The Strategy Pattern(ç­–ç•¥æ¨¡å¼ï¼šåŠ¨æ€é€‰æ‹©ç®—æ³•ç­–ç•¥)"></a>The Strategy Pattern(ç­–ç•¥æ¨¡å¼ï¼šåŠ¨æ€é€‰æ‹©ç®—æ³•ç­–ç•¥)</h4><h4 id="The-Chain-of-Responsibility-Pattern-è´£ä»»é“¾æ¨¡å¼-åˆ›å»ºé“¾å¼å¯¹è±¡ç”¨æ¥æ¥æ”¶å¹¿æ’­æ¶ˆæ¯"><a href="#The-Chain-of-Responsibility-Pattern-è´£ä»»é“¾æ¨¡å¼-åˆ›å»ºé“¾å¼å¯¹è±¡ç”¨æ¥æ¥æ”¶å¹¿æ’­æ¶ˆæ¯" class="headerlink" title="The Chain of Responsibility Pattern (è´£ä»»é“¾æ¨¡å¼:åˆ›å»ºé“¾å¼å¯¹è±¡ç”¨æ¥æ¥æ”¶å¹¿æ’­æ¶ˆæ¯)"></a>The Chain of Responsibility Pattern (è´£ä»»é“¾æ¨¡å¼:åˆ›å»ºé“¾å¼å¯¹è±¡ç”¨æ¥æ¥æ”¶å¹¿æ’­æ¶ˆæ¯)</h4><h4 id="The-Command-Pattern-å‘½ä»¤æ¨¡å¼ï¼šç”¨æ¥ç»™åº”ç”¨æ·»åŠ Undoæ“ä½œ"><a href="#The-Command-Pattern-å‘½ä»¤æ¨¡å¼ï¼šç”¨æ¥ç»™åº”ç”¨æ·»åŠ Undoæ“ä½œ" class="headerlink" title="The Command Pattern(å‘½ä»¤æ¨¡å¼ï¼šç”¨æ¥ç»™åº”ç”¨æ·»åŠ Undoæ“ä½œ)"></a>The Command Pattern(å‘½ä»¤æ¨¡å¼ï¼šç”¨æ¥ç»™åº”ç”¨æ·»åŠ Undoæ“ä½œ)</h4><h4 id="The-Interpreter-Pattern-è§£é‡Šå™¨æ¨¡å¼ï¼šç”¨æ¥å®ç°Domain-Specific-Language-DSL"><a href="#The-Interpreter-Pattern-è§£é‡Šå™¨æ¨¡å¼ï¼šç”¨æ¥å®ç°Domain-Specific-Language-DSL" class="headerlink" title="The Interpreter Pattern(è§£é‡Šå™¨æ¨¡å¼ï¼šç”¨æ¥å®ç°Domain Specific Language(DSL))"></a>The Interpreter Pattern(è§£é‡Šå™¨æ¨¡å¼ï¼šç”¨æ¥å®ç°Domain Specific Language(DSL))</h4><h4 id="The-Template-Pattern-æ¨¡æ¿æ¨¡å¼ï¼šæŠ½è±¡å‡ºç®—æ³•å…¬å…±éƒ¨åˆ†ä»è€Œå®ç°ä»£ç å¤ç”¨"><a href="#The-Template-Pattern-æ¨¡æ¿æ¨¡å¼ï¼šæŠ½è±¡å‡ºç®—æ³•å…¬å…±éƒ¨åˆ†ä»è€Œå®ç°ä»£ç å¤ç”¨" class="headerlink" title="The Template Pattern(æ¨¡æ¿æ¨¡å¼ï¼šæŠ½è±¡å‡ºç®—æ³•å…¬å…±éƒ¨åˆ†ä»è€Œå®ç°ä»£ç å¤ç”¨)"></a>The Template Pattern(æ¨¡æ¿æ¨¡å¼ï¼šæŠ½è±¡å‡ºç®—æ³•å…¬å…±éƒ¨åˆ†ä»è€Œå®ç°ä»£ç å¤ç”¨)</h4><h3 id="ç»“æ„æ€§"><a href="#ç»“æ„æ€§" class="headerlink" title="ç»“æ„æ€§"></a>ç»“æ„æ€§</h3><h4 id="The-Adapter-Pattern-é€‚é…å™¨æ¨¡å¼-è§£å†³æ¥å£ä¸å…¼å®¹é—®é¢˜"><a href="#The-Adapter-Pattern-é€‚é…å™¨æ¨¡å¼-è§£å†³æ¥å£ä¸å…¼å®¹é—®é¢˜" class="headerlink" title="The Adapter Pattern(é€‚é…å™¨æ¨¡å¼: è§£å†³æ¥å£ä¸å…¼å®¹é—®é¢˜)"></a>The Adapter Pattern(é€‚é…å™¨æ¨¡å¼: è§£å†³æ¥å£ä¸å…¼å®¹é—®é¢˜)</h4><h4 id="The-Decorator-Pattern-è£…é¥°å™¨æ¨¡å¼ï¼š-æ— éœ€å­ç±»åŒ–å®ç°æ‰©å±•å¯¹è±¡åŠŸèƒ½é—®é¢˜"><a href="#The-Decorator-Pattern-è£…é¥°å™¨æ¨¡å¼ï¼š-æ— éœ€å­ç±»åŒ–å®ç°æ‰©å±•å¯¹è±¡åŠŸèƒ½é—®é¢˜" class="headerlink" title="The Decorator Pattern(è£…é¥°å™¨æ¨¡å¼ï¼š æ— éœ€å­ç±»åŒ–å®ç°æ‰©å±•å¯¹è±¡åŠŸèƒ½é—®é¢˜)"></a>The Decorator Pattern(è£…é¥°å™¨æ¨¡å¼ï¼š æ— éœ€å­ç±»åŒ–å®ç°æ‰©å±•å¯¹è±¡åŠŸèƒ½é—®é¢˜)</h4><h4 id="The-Facade-Pattern-å¤–è§‚æ¨¡å¼-ç®€åŒ–å¤æ‚å¯¹è±¡çš„è®¿é—®é—®é¢˜"><a href="#The-Facade-Pattern-å¤–è§‚æ¨¡å¼-ç®€åŒ–å¤æ‚å¯¹è±¡çš„è®¿é—®é—®é¢˜" class="headerlink" title="The Facade Pattern(å¤–è§‚æ¨¡å¼: ç®€åŒ–å¤æ‚å¯¹è±¡çš„è®¿é—®é—®é¢˜)"></a>The Facade Pattern(å¤–è§‚æ¨¡å¼: ç®€åŒ–å¤æ‚å¯¹è±¡çš„è®¿é—®é—®é¢˜)</h4><h4 id="The-Flyweight-Pattern-äº«å…ƒæ¨¡å¼-å®ç°å¯¹è±¡å¤ç”¨ä»è€Œæ”¹å–„èµ„æºä½¿ç”¨"><a href="#The-Flyweight-Pattern-äº«å…ƒæ¨¡å¼-å®ç°å¯¹è±¡å¤ç”¨ä»è€Œæ”¹å–„èµ„æºä½¿ç”¨" class="headerlink" title="The Flyweight Pattern(äº«å…ƒæ¨¡å¼: å®ç°å¯¹è±¡å¤ç”¨ä»è€Œæ”¹å–„èµ„æºä½¿ç”¨)"></a>The Flyweight Pattern(äº«å…ƒæ¨¡å¼: å®ç°å¯¹è±¡å¤ç”¨ä»è€Œæ”¹å–„èµ„æºä½¿ç”¨)</h4><h4 id="The-Model-View-Controller-Pattern-mvcæ¨¡å¼ï¼šè§£è€¦å±•ç¤ºé€»è¾‘å’Œä¸šåŠ¡é€»è¾‘"><a href="#The-Model-View-Controller-Pattern-mvcæ¨¡å¼ï¼šè§£è€¦å±•ç¤ºé€»è¾‘å’Œä¸šåŠ¡é€»è¾‘" class="headerlink" title="The Model-View-Controller Pattern(mvcæ¨¡å¼ï¼šè§£è€¦å±•ç¤ºé€»è¾‘å’Œä¸šåŠ¡é€»è¾‘)"></a>The Model-View-Controller Pattern(mvcæ¨¡å¼ï¼šè§£è€¦å±•ç¤ºé€»è¾‘å’Œä¸šåŠ¡é€»è¾‘)</h4><h4 id="The-Proxy-Pattern-ä»£ç†æ¨¡å¼ï¼šé€šè¿‡ä¸€å±‚é—´æ¥ä¿æŠ¤å±‚å®ç°æ›´å®‰å…¨çš„æ¥å£è®¿é—®ï¼‰"><a href="#The-Proxy-Pattern-ä»£ç†æ¨¡å¼ï¼šé€šè¿‡ä¸€å±‚é—´æ¥ä¿æŠ¤å±‚å®ç°æ›´å®‰å…¨çš„æ¥å£è®¿é—®ï¼‰" class="headerlink" title="The Proxy Pattern(ä»£ç†æ¨¡å¼ï¼šé€šè¿‡ä¸€å±‚é—´æ¥ä¿æŠ¤å±‚å®ç°æ›´å®‰å…¨çš„æ¥å£è®¿é—®ï¼‰"></a>The Proxy Pattern(ä»£ç†æ¨¡å¼ï¼šé€šè¿‡ä¸€å±‚é—´æ¥ä¿æŠ¤å±‚å®ç°æ›´å®‰å…¨çš„æ¥å£è®¿é—®ï¼‰</h4>]]></content>
    
    
    <categories>
      
      <category>è®¾è®¡æ¨¡å¼</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>è®¾è®¡æ¨¡å¼</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€Pythonã€‘åŸºæœ¬æ•°æ®ç»“æ„å’Œç®—æ³•</title>
    <link href="/2020/11/20/adt_python/"/>
    <url>/2020/11/20/adt_python/</url>
    
    <content type="html"><![CDATA[<h2 id="ADTæŠ½è±¡æ•°æ®ç±»å‹"><a href="#ADTæŠ½è±¡æ•°æ®ç±»å‹" class="headerlink" title=" ADTæŠ½è±¡æ•°æ®ç±»å‹"></a><a id="more"></a> ADTæŠ½è±¡æ•°æ®ç±»å‹</h2><h3 id="ä»€ä¹ˆæ˜¯ADT-æŠ½è±¡æ•°æ®ç±»å‹ï¼Œå­¦è¿‡æ•°æ®ç»“æ„çš„åº”è¯¥éƒ½çŸ¥é“ã€‚"><a href="#ä»€ä¹ˆæ˜¯ADT-æŠ½è±¡æ•°æ®ç±»å‹ï¼Œå­¦è¿‡æ•°æ®ç»“æ„çš„åº”è¯¥éƒ½çŸ¥é“ã€‚" class="headerlink" title="ä»€ä¹ˆæ˜¯ADT: æŠ½è±¡æ•°æ®ç±»å‹ï¼Œå­¦è¿‡æ•°æ®ç»“æ„çš„åº”è¯¥éƒ½çŸ¥é“ã€‚"></a>ä»€ä¹ˆæ˜¯ADT: æŠ½è±¡æ•°æ®ç±»å‹ï¼Œå­¦è¿‡æ•°æ®ç»“æ„çš„åº”è¯¥éƒ½çŸ¥é“ã€‚</h3><p>How to select datastructures for ADT</p><ol><li>Dose the data structure provide for the storage requirements as specified by the domain of the ADT?</li><li>Does the data structure provide the data access and manipulation functionality to fully implement the ADT?</li><li>Effcient implemention? based on complexity analysis.</li></ol><h3 id="Strings"><a href="#Strings" class="headerlink" title="Strings"></a>Strings</h3><pre><code class="hljs Python"><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">Module Description: å­—ç¬¦ä¸²ç›¸å…³</span><span class="hljs-string">Problem:</span><span class="hljs-string">Solutionï¼š</span><span class="hljs-string">Date: 2020/2/18 </span><span class="hljs-string">Author: Wang P</span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ReverseString</span>:</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    å­—ç¬¦æ•°ç»„åè½¬</span><span class="hljs-string">    &quot;&quot;&quot;</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reverse_string</span>(<span class="hljs-params">self, x, reverse=<span class="hljs-literal">False</span></span>):</span>        <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">        :param x: å­—ç¬¦æ•°ç»„</span><span class="hljs-string">        :param reverse: æ˜¯å¦ä¹‹ç”¨å†…ç½®åº“</span><span class="hljs-string">        :return:</span><span class="hljs-string">        &quot;&quot;&quot;</span>        <span class="hljs-keyword">if</span> reverse:            x.reverse()            <span class="hljs-keyword">return</span> x        <span class="hljs-keyword">else</span>:            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> x:                <span class="hljs-keyword">return</span>            beg, end = <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(x)<span class="hljs-number">-1</span>            <span class="hljs-keyword">while</span> beg &lt; end:                x[beg], x[end] = x[end], x[beg]                beg += <span class="hljs-number">1</span>                end -= <span class="hljs-number">1</span>            <span class="hljs-keyword">return</span> x<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Palindrome</span>:</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯å›æ–‡</span><span class="hljs-string">    &quot;&quot;&quot;</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">is_palindrome</span>(<span class="hljs-params">self, x</span>):</span>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(x, <span class="hljs-built_in">int</span>) <span class="hljs-keyword">and</span> x &lt; <span class="hljs-number">0</span>:            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>        xx = <span class="hljs-built_in">str</span>(x)        beg, end = <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(xx)<span class="hljs-number">-1</span>        <span class="hljs-keyword">while</span> beg &lt; end:            <span class="hljs-keyword">if</span> xx[beg] == xx[end]:                beg += <span class="hljs-number">1</span>                end -= <span class="hljs-number">1</span>            <span class="hljs-keyword">else</span>:                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:    r = ReverseString()    print(r.reverse_string([<span class="hljs-string">&#x27;d&#x27;</span>, <span class="hljs-string">&#x27;h&#x27;</span>, <span class="hljs-string">&#x27;s&#x27;</span>, <span class="hljs-string">&#x27;j&#x27;</span>, <span class="hljs-string">&#x27;f&#x27;</span>], <span class="hljs-literal">False</span>))</code></pre><p><a href="https://github.com/weitrue/note/blob/master/python/algorithm/data_structure/strings.py">https://github.com/weitrue/note/blob/master/python/algorithm/data_structure/strings.py</a></p><h3 id="Array-and-List"><a href="#Array-and-List" class="headerlink" title="Array and List"></a>Array and List</h3><h4 id="array"><a href="#array" class="headerlink" title="array"></a>array</h4><p>å®šé•¿ï¼Œæ“ä½œæœ‰é™ï¼Œä½†æ˜¯èŠ‚çœå†…å­˜ï¼›è²Œä¼¼æˆ‘çš„ç”Ÿæ¶¯ä¸­è¿˜æ²¡ç”¨è¿‡ï¼Œä¸è¿‡python3.5ä¸­æˆ‘è¯•äº†ç¡®å®æœ‰arrayç±»ï¼Œå¯ä»¥ç”¨import arrayç›´æ¥å¯¼å…¥ã€‚</p><h4 id="list"><a href="#list" class="headerlink" title="list"></a>list</h4><p>ä¼šé¢„å…ˆåˆ†é…å†…å­˜ï¼Œæ“ä½œä¸°å¯Œï¼Œä½†æ˜¯è€—è´¹å†…å­˜ã€‚ç”¨sys.getsizeofåšå®éªŒå¯ä»¥å‘ç°è¯¥ç»“æ„éå¸¸ç±»ä¼¼C++ STLé‡Œçš„vectorï¼Œæ˜¯ä½¿ç”¨æœ€é¢‘ç¹çš„æ•°æ®ç»“æ„ã€‚</p><ul><li>list.append: å¦‚æœä¹‹å‰æ²¡æœ‰åˆ†é…å¤Ÿå†…å­˜ï¼Œä¼šé‡æ–°å¼€è¾Ÿæ–°åŒºåŸŸï¼Œç„¶åå¤åˆ¶ä¹‹å‰çš„æ•°æ®ï¼Œå¤æ‚åº¦é€€åŒ–</li><li>list.insert: ä¼šç§»åŠ¨è¢«æ’å…¥åŒºåŸŸåæ‰€æœ‰å…ƒç´ ,O(n)</li><li>list.pop: popä¸åŒä½ç½®éœ€è¦çš„å¤æ‚åº¦ä¸åŒpop(0)æ˜¯O(1)å¤æ‚åº¦,pop()é¦–ä½O(n)å¤æ‚åº¦</li><li>list[]: sliceæ“ä½œcopyæ•°æ®ï¼ˆé¢„ç•™ç©ºé—´ï¼‰åˆ°å¦ä¸€ä¸ªlist</li></ul><p><a href="https://github.com/weitrue/note/blob/master/python/algorithm/data_structure/array_and_list.py">https://github.com/weitrue/note/blob/master/python/algorithm/data_structure/array_and_list.py</a></p><h3 id="Sets-and-Maps"><a href="#Sets-and-Maps" class="headerlink" title="Sets and Maps"></a>Sets and Maps</h3><h4 id="sets-ADT"><a href="#sets-ADT" class="headerlink" title="sets ADT"></a>sets ADT</h4><p>A set is a container that stores a collection of unique values over a given comparable domain in which the stored values have no particular ordering.</p><h4 id="Maps-or-Dict-ADT"><a href="#Maps-or-Dict-ADT" class="headerlink" title="Maps or Dict ADT"></a>Maps or Dict ADT</h4><p>pythonå†…éƒ¨é‡‡ç”¨hashå®ç°ã€‚</p><pre><code class="hljs Python"><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">Module Description: åŸºäºcollections.OrderedDictå®ç°LRU_cache(æœ€è¿‘æœ€å°‘ä½¿ç”¨ç¼“å­˜ç®—æ³•)</span><span class="hljs-string">Problem:</span><span class="hljs-string">Solutionï¼š</span><span class="hljs-string">Date: 2020/2/13 </span><span class="hljs-string">Author: Wang P</span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> OrderedDict<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LURCache</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, capacity=<span class="hljs-number">128</span></span>):</span>        self._od = OrderedDict()        self._capacity = capacity    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get</span>(<span class="hljs-params">self, key</span>):</span>        <span class="hljs-keyword">if</span> key <span class="hljs-keyword">in</span> self._od:            val = self._od[key]            self._od.move_to_end(key)            <span class="hljs-keyword">return</span> val        <span class="hljs-keyword">else</span>:            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">push</span>(<span class="hljs-params">self, key, value</span>):</span>        <span class="hljs-keyword">if</span> key <span class="hljs-keyword">in</span> self._od:            <span class="hljs-keyword">del</span> self._od[key]            self._od[key] = value        <span class="hljs-keyword">else</span>:  <span class="hljs-comment"># insert</span>            self._od[key] = value            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(self._od) &gt; self._capacity:                self._od.popitem(last=<span class="hljs-literal">False</span>)    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">items</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> self._od.items()<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:    lru_cache = LURCache(<span class="hljs-number">3</span>)    lru_cache.push(<span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-number">1</span>)    lru_cache.push(<span class="hljs-string">&quot;2&quot;</span>, <span class="hljs-number">2</span>)    lru_cache.push(<span class="hljs-string">&quot;3&quot;</span>, <span class="hljs-number">3</span>)    lru_cache.push(<span class="hljs-string">&quot;4&quot;</span>, <span class="hljs-number">4</span>)    lru_cache.get(<span class="hljs-string">&quot;2&quot;</span>)    print(lru_cache.items())</code></pre><p><a href="https://github.com/weitrue/note/blob/master/python/algorithm/collections_examples/lru_cache.py">https://github.com/weitrue/note/blob/master/python/algorithm/collections_examples/lru_cache.py</a></p><h3 id="Algorithm-Analysis"><a href="#Algorithm-Analysis" class="headerlink" title="Algorithm Analysis"></a>Algorithm Analysis</h3><p>ä¸€èˆ¬ä½¿ç”¨å¤§Oæ ‡è®°æ³•æ¥è¡¡é‡ç®—æ³•çš„å¹³å‡æ—¶é—´å¤æ‚åº¦, 1 &lt; log(n) &lt; n &lt; nlog(n) &lt; n^2 &lt; n^3 &lt; a^nã€‚ äº†è§£å¸¸ç”¨æ•°æ®ç»“æ„æ“ä½œçš„å¹³å‡æ—¶é—´å¤æ‚åº¦æœ‰åˆ©äºä½¿ç”¨æ›´é«˜æ•ˆçš„æ•°æ®ç»“æ„ï¼Œå½“ç„¶æœ‰æ—¶å€™éœ€è¦åœ¨æ—¶é—´å’Œç©ºé—´ä¸Šè¿›è¡Œè¡¡é‡ï¼Œæœ‰äº›æ“ä½œç”šè‡³è¿˜ä¼šé€€åŒ–ï¼Œæ¯”å¦‚listçš„appendæ“ä½œï¼Œå¦‚æœlistç©ºé—´ä¸å¤Ÿï¼Œä¼šå»å¼€è¾Ÿæ–°çš„ç©ºé—´ï¼Œæ“ä½œå¤æ‚åº¦é€€åŒ–åˆ°O(n)ï¼Œæœ‰æ—¶å€™è¿˜éœ€è¦ä½¿ç”¨å‡æ‘Šåˆ†æ(amortized)ã€‚</p><h3 id="Searching"><a href="#Searching" class="headerlink" title="Searching"></a>Searching</h3><p>pythonå†…ç½®äº†inæ“ä½œç¬¦å’ŒbisectäºŒåˆ†æ“ä½œæ¨¡å—å®ç°æŸ¥æ‰¾ã€‚</p><pre><code class="hljs python"><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">Module Description: äºŒåˆ†æŸ¥æ‰¾ç®—æ³•</span><span class="hljs-string">Problem:</span><span class="hljs-string">Solutionï¼š</span><span class="hljs-string">Date: 2020/1/20 </span><span class="hljs-string">Author: Wang P</span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">binary_search</span>(<span class="hljs-params">arr, target</span>):</span>    n = <span class="hljs-built_in">len</span>(arr)    left = <span class="hljs-number">0</span>    right = n - <span class="hljs-number">1</span>    <span class="hljs-keyword">while</span> left &lt;= right:        mid = (left + right) // <span class="hljs-number">2</span>        <span class="hljs-keyword">if</span> arr[mid] &lt; target:            left = mid + <span class="hljs-number">1</span>        <span class="hljs-keyword">elif</span> arr[mid] &gt; target:            right = mid - <span class="hljs-number">1</span>        <span class="hljs-keyword">else</span>:            print(<span class="hljs-string">f&quot;index: <span class="hljs-subst">&#123;mid&#125;</span>, value:<span class="hljs-subst">&#123;arr[mid]&#125;</span>&quot;</span>)            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>    <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:    l = [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>]    binary_search(l, <span class="hljs-number">8</span>)</code></pre><p><a href="https://github.com/weitrue/note/blob/master/python/algorithm/search/binary_search.py">https://github.com/weitrue/note/blob/master/python/algorithm/search/binary_search.py</a></p><h3 id="Sorting"><a href="#Sorting" class="headerlink" title="Sorting"></a>Sorting</h3><p>pythonå†…ç½®äº†sortedæ–¹æ³•æ¥å®ç°æ’åºæ“ä½œã€‚</p><pre><code class="hljs Python"><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">Module Description: å†’æ³¡æ’åº</span><span class="hljs-string">Problem:</span><span class="hljs-string">Solutionï¼š</span><span class="hljs-string">Date: 2020/3/23 </span><span class="hljs-string">Author: Wang P</span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-keyword">import</span> random<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BubbleSort</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">bubble_sort</span>(<span class="hljs-params">self, arr</span>):</span>        <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">        å†’æ³¡æ’åº</span><span class="hljs-string">        :param arr:</span><span class="hljs-string">        :return:</span><span class="hljs-string">        &quot;&quot;&quot;</span>        n = <span class="hljs-built_in">len</span>(arr)        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n-i<span class="hljs-number">-1</span>):                <span class="hljs-keyword">if</span> arr[j] &gt; arr[j+<span class="hljs-number">1</span>]:                    arr[j], arr[j+<span class="hljs-number">1</span>] = arr[j+<span class="hljs-number">1</span>], arr[j]<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:    list_a = [random.randint(<span class="hljs-number">0</span>, <span class="hljs-number">8</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)]    print(list_a)    bs = BubbleSort()    bs.bubble_sort(list_a)    print(list_a)</code></pre><pre><code class="hljs Python"><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">Module Description: å½’å¹¶æ’åºç®—æ³•-åˆ†æ²»æ³•</span><span class="hljs-string">Problem:</span><span class="hljs-string">Solutionï¼š</span><span class="hljs-string">Date: 2020/2/15 </span><span class="hljs-string">Author: Wang P</span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MergeSort</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">merge_sort</span>(<span class="hljs-params">self, arr</span>):</span>        <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">        åˆ†æ²»æ³•åˆ†ä¸‰æ­¥èµ°ï¼Œè¦æ³¨æ„å‡ºå£</span><span class="hljs-string">        :param arr:</span><span class="hljs-string">        :return:</span><span class="hljs-string">        &quot;&quot;&quot;</span>        <span class="hljs-comment"># é€’å½’å‡ºå£</span>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(arr) &lt;= <span class="hljs-number">1</span>:            <span class="hljs-keyword">return</span> arr        <span class="hljs-keyword">else</span>:            mid = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">len</span>(arr)/<span class="hljs-number">2</span>)            left_half = self.merge_sort(arr[:mid])            right_half = self.merge_sort(arr[mid:])            <span class="hljs-keyword">return</span> self.merge_sorted_list(left_half, right_half)    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">merge_sorted_list</span>(<span class="hljs-params">self, list_a, list_b</span>):</span>        <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">        åˆå¹¶ä¸¤ä¸ªæœ‰åºåºåˆ—</span><span class="hljs-string">        :param list_a:</span><span class="hljs-string">        :param list_b:</span><span class="hljs-string">        :return:</span><span class="hljs-string">        &quot;&quot;&quot;</span>        length_a = <span class="hljs-built_in">len</span>(list_a)        length_b = <span class="hljs-built_in">len</span>(list_b)        a = b = <span class="hljs-number">0</span>        new_list = []        <span class="hljs-keyword">while</span> a &lt; length_a <span class="hljs-keyword">and</span> b &lt; length_b:            <span class="hljs-keyword">if</span> list_a[a] &lt; list_b[b]:                new_list.append(list_a[a])                a += <span class="hljs-number">1</span>            <span class="hljs-keyword">else</span>:                new_list.append(list_b[b])                b += <span class="hljs-number">1</span>        <span class="hljs-keyword">if</span> a &lt; length_a:            new_list.extend(list_a[a:])        <span class="hljs-keyword">if</span> b &lt; length_b:            new_list.extend(list_b[b:])        <span class="hljs-keyword">return</span> new_list<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:    <span class="hljs-keyword">import</span> random    ms = MergeSort()    ll = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>))    random.shuffle(ll)    print(ll)    ll = ms.merge_sort(ll)    print(ll)</code></pre><pre><code class="hljs Python"><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">Module Description: å¿«é€Ÿæ’åºç®—æ³•-åˆ†æ²»æ³•</span><span class="hljs-string">Problem:</span><span class="hljs-string">Solutionï¼šPartition:é€‰æ‹©åŸºå‡†åˆ†å‰²æ•°ç»„ä¸ºä¸¤ä¸ªå­—æ•°ç»„ï¼Œå°äºåŸºå‡†å’Œå¤§äºåŸºå‡†</span><span class="hljs-string">         å¯¹ä¸¤ä¸ªå­—æ•°ç»„åˆ†åˆ«å¿«æ’</span><span class="hljs-string">         åˆå¹¶ç»“æœ</span><span class="hljs-string">Date: 2020/2/15 </span><span class="hljs-string">Author: Wang P</span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-keyword">import</span> random<span class="hljs-keyword">import</span> pysnooper  <span class="hljs-comment"># è°ƒè¯•ç¥å™¨</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">QuickSort</span>:</span><span class="hljs-meta">    @pysnooper.snoop()</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">quick_sort</span>(<span class="hljs-params">self, arr</span>):</span>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(arr) &lt; <span class="hljs-number">2</span>:            <span class="hljs-keyword">return</span> arr        pivot_index = <span class="hljs-number">0</span>  <span class="hljs-comment"># ç¬¬ä¸€ä¸ªæ•°ä½œä¸ºpivot</span>        pivot = arr[pivot_index]        less_part = [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> arr[pivot_index+<span class="hljs-number">1</span>:] <span class="hljs-keyword">if</span> i &lt; pivot]        great_part = [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> arr[pivot_index+<span class="hljs-number">1</span>:] <span class="hljs-keyword">if</span> i &gt;= pivot]        <span class="hljs-keyword">return</span> self.quick_sort(less_part) + [pivot] + self.quick_sort(great_part)<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:    qs = QuickSort()    ll = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>))    random.shuffle(ll)    print(ll)    ll = qs.quick_sort(ll)    print(ll)</code></pre><pre><code class="hljs Python"><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">Module Description: æ‹“æ‰‘æ’åº</span><span class="hljs-string">Problem: å¯¹åº”äºè¯¥å›¾çš„æ‹“æ‰‘æ’åº,æ¯ä¸€ä¸ªæœ‰å‘æ— ç¯å›¾éƒ½è‡³å°‘å­˜åœ¨ä¸€ç§æ‹“æ‰‘æ’åº</span><span class="hljs-string">Solutionï¼š</span><span class="hljs-string">Date: 2020/3/23 </span><span class="hljs-string">Author: Wang P</span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-keyword">import</span> pysnooper<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> Mapping<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TopologicalSort</span>:</span><span class="hljs-meta">    @pysnooper.snoop()  # pysnooper è°ƒè¯•ç¥å™¨</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">topological_sort</span>(<span class="hljs-params">self, graph: Mapping</span>):</span>        <span class="hljs-comment"># in_degrees = &#123;&#x27;a&#x27;ï¼š 0, &#x27;b&#x27;ï¼š 0, &#x27;c&#x27;ï¼š 0, &#x27;d&#x27;ï¼š 0, &#x27;e&#x27;ï¼š 0, &#x27;f&#x27;ï¼š 0&#125;</span>        in_degrees = <span class="hljs-built_in">dict</span>((u, <span class="hljs-number">0</span>) <span class="hljs-keyword">for</span> u <span class="hljs-keyword">in</span> graph)        <span class="hljs-keyword">for</span> u <span class="hljs-keyword">in</span> graph:            <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> graph[u]:  <span class="hljs-comment"># æ ¹æ®é”®æ‰¾å‡ºå€¼ä¹Ÿå°±æ˜¯ä¸‹çº§èŠ‚ç‚¹</span>                in_degrees[v] += <span class="hljs-number">1</span>  <span class="hljs-comment"># å¯¹è·å–åˆ°çš„ä¸‹çº§èŠ‚ç‚¹çš„å…¥åº¦åŠ  1</span>        <span class="hljs-comment"># å¾ªç¯ç»“æŸä¹‹åçš„ç»“æœï¼š &#123;&#x27;a&#x27;ï¼š 0, &#x27;b&#x27;ï¼š 1, &#x27;c&#x27;ï¼š 1, &#x27;d&#x27;ï¼š 2, &#x27;e&#x27;ï¼š 1, &#x27;f&#x27;ï¼š 4&#125;</span>        Q = [u <span class="hljs-keyword">for</span> u <span class="hljs-keyword">in</span> graph <span class="hljs-keyword">if</span> in_degrees[u] == <span class="hljs-number">0</span>]  <span class="hljs-comment"># å…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹</span>        in_degrees_zero = []        <span class="hljs-keyword">while</span> Q:            u = Q.pop()  <span class="hljs-comment"># é»˜è®¤ä»æœ€åä¸€ä¸ªç§»é™¤</span>            in_degrees_zero.append(u)  <span class="hljs-comment"># å­˜å‚¨å…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹</span>            <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> graph[u]:                in_degrees[v] -= <span class="hljs-number">1</span>  <span class="hljs-comment"># åˆ é™¤å…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹ï¼Œä»¥åŠç§»é™¤å…¶æŒ‡å‘</span>                <span class="hljs-keyword">if</span> in_degrees[v] == <span class="hljs-number">0</span>:                    Q.append(v)        <span class="hljs-keyword">return</span> in_degrees_zero<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:    <span class="hljs-comment"># ç”¨å­—å…¸çš„é”®å€¼è¡¨ç¤ºå›¾çš„èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»ï¼Œé”®å½“å‰èŠ‚ç‚¹ã€‚å€¼æ˜¯åç»­èŠ‚ç‚¹ã€‚</span>    graph_dict = &#123;        <span class="hljs-string">&#x27;a&#x27;</span>: <span class="hljs-string">&#x27;bf&#x27;</span>,  <span class="hljs-comment"># è¡¨ç¤º a æŒ‡å‘ b å’Œ f</span>        <span class="hljs-string">&#x27;b&#x27;</span>: <span class="hljs-string">&#x27;cdf&#x27;</span>,        <span class="hljs-string">&#x27;c&#x27;</span>: <span class="hljs-string">&#x27;d&#x27;</span>,        <span class="hljs-string">&#x27;d&#x27;</span>: <span class="hljs-string">&#x27;ef&#x27;</span>,        <span class="hljs-string">&#x27;e&#x27;</span>: <span class="hljs-string">&#x27;f&#x27;</span>,        <span class="hljs-string">&#x27;f&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>    &#125;    ts = TopologicalSort()    t = ts.topological_sort(graph_dict)    print(t)</code></pre><p><a href="https://github.com/weitrue/note/tree/master/python/algorithm/sort">https://github.com/weitrue/note/tree/master/python/algorithm/sort</a></p><h3 id="Linked-Structure"><a href="#Linked-Structure" class="headerlink" title="Linked Structure"></a>Linked Structure</h3><p>listæ˜¯æœ€å¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼Œä½†æ˜¯liståœ¨ä¸­é—´å¢å‡å…ƒç´ çš„æ—¶å€™æ•ˆç‡ä¼šå¾ˆä½ï¼Œè¿™æ—¶å€™linked listä¼šæ›´é€‚åˆï¼Œç¼ºç‚¹å°±æ˜¯è·å–å…ƒç´ çš„å¹³å‡æ—¶é—´å¤æ‚åº¦å˜æˆäº†O(n)ã€‚</p><pre><code class="hljs Python"><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">Module Description: é“¾è¡¨ </span><span class="hljs-string">Problem:</span><span class="hljs-string">Solutionï¼š</span><span class="hljs-string">Date: 2020/2/16 </span><span class="hljs-string">Author: Wang P</span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ListNode</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, val</span>):</span>        self.val = val        self.<span class="hljs-built_in">next</span> = <span class="hljs-literal">None</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DeleteNode</span>:</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    é“¾è¡¨ä¸­åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆå·²çŸ¥è¦åˆ é™¤çš„èŠ‚ç‚¹ï¼Œä¸çŸ¥é“¾è¡¨çš„headï¼‰</span><span class="hljs-string">    æ€è·¯ï¼šå°†è¦åˆ é™¤çš„é“¾è¡¨èŠ‚ç‚¹nodeçš„å€¼ä¿®æ”¹ä¸ºnode.nextçš„å€¼</span><span class="hljs-string">         node.nextæŒ‡å‘node.next.next</span><span class="hljs-string">         è¿™æ ·ç›¸å½“äºåˆ é™¤äº†nodeèŠ‚ç‚¹</span><span class="hljs-string">    &quot;&quot;&quot;</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, node_list=<span class="hljs-literal">None</span>, node=<span class="hljs-literal">None</span></span>):</span>        <span class="hljs-keyword">if</span> node_list <span class="hljs-keyword">and</span> <span class="hljs-built_in">isinstance</span>(node_list, <span class="hljs-built_in">list</span>):            self._head = ListNode(node_list[<span class="hljs-number">0</span>])            cur_index = self._head            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(node_list)):                <span class="hljs-keyword">if</span> cur_index.val == node:                    self._node = cur_index                cur_index.<span class="hljs-built_in">next</span> = ListNode(node_list[i])                cur_index = cur_index.<span class="hljs-built_in">next</span>        <span class="hljs-keyword">else</span>:            self._head = <span class="hljs-literal">None</span>            self._node = <span class="hljs-literal">None</span><span class="hljs-meta">    @staticmethod</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">delete_node_in_a_linked_list</span>(<span class="hljs-params">node</span>):</span>        next_node = node.<span class="hljs-built_in">next</span>        next_next_node = node.<span class="hljs-built_in">next</span>.<span class="hljs-built_in">next</span>        node.val = next_node.val        node.<span class="hljs-built_in">next</span> = next_next_node    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">traversal</span>(<span class="hljs-params">self</span>):</span>        cur = self._head        link_list = []        <span class="hljs-keyword">while</span> cur:            link_list.append(cur.val)            cur = cur.<span class="hljs-built_in">next</span>        print(link_list)<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MergeLinkedList</span>:</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨</span><span class="hljs-string">    æ€è·¯ï¼šæ–°å»ºä¸€ä¸ªé“¾è¡¨rootï¼Œå°†list_one, list_twoéå†ï¼ŒæŒ‰å¤§å°æ”¾å…¥root</span><span class="hljs-string">    &quot;&quot;&quot;</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, list_one=<span class="hljs-literal">None</span>, list_two=<span class="hljs-literal">None</span></span>):</span>        <span class="hljs-keyword">if</span> list_one <span class="hljs-keyword">and</span> <span class="hljs-built_in">isinstance</span>(list_one, <span class="hljs-built_in">list</span>) <span class="hljs-keyword">and</span> list_two <span class="hljs-keyword">and</span> <span class="hljs-built_in">isinstance</span>(list_two, <span class="hljs-built_in">list</span>):            self.list_one = ListNode(list_one[<span class="hljs-number">0</span>])            cur_index = self.list_one            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(list_one)):                cur_index.<span class="hljs-built_in">next</span> = ListNode(list_one[i])                cur_index = cur_index.<span class="hljs-built_in">next</span>            self.list_two = ListNode(list_two[<span class="hljs-number">0</span>])            cur_index = self.list_two            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(list_two)):                cur_index.<span class="hljs-built_in">next</span> = ListNode(list_two[i])                cur_index = cur_index.<span class="hljs-built_in">next</span>        <span class="hljs-keyword">else</span>:            self.list_one = <span class="hljs-literal">None</span>            self.list_two = <span class="hljs-literal">None</span>        self._head = <span class="hljs-literal">None</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">merge_linked_list</span>(<span class="hljs-params">self</span>):</span>        one_cur_val = self.list_one        two_cur_val = self.list_two        self._head = ListNode(<span class="hljs-literal">None</span>)        cur = self._head        <span class="hljs-keyword">while</span> one_cur_val <span class="hljs-keyword">and</span> two_cur_val:            <span class="hljs-keyword">if</span> one_cur_val.val &lt; two_cur_val.val:                node = ListNode(one_cur_val.val)                one_cur_val = one_cur_val.<span class="hljs-built_in">next</span>            <span class="hljs-keyword">else</span>:                node = ListNode(two_cur_val.val)                two_cur_val = two_cur_val.<span class="hljs-built_in">next</span>            cur.<span class="hljs-built_in">next</span> = node            cur = node        cur.<span class="hljs-built_in">next</span> = one_cur_val <span class="hljs-keyword">or</span> two_cur_val    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">traversal</span>(<span class="hljs-params">self</span>):</span>        cur = self._head.<span class="hljs-built_in">next</span>        link_list = []        <span class="hljs-keyword">while</span> cur:            link_list.append(cur.val)            cur = cur.<span class="hljs-built_in">next</span>        print(link_list)<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ReverseLinkList</span>:</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    å•é“¾è¡¨åè½¬</span><span class="hljs-string">    &quot;&quot;&quot;</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, head=<span class="hljs-literal">None</span></span>):</span>        <span class="hljs-string">&quot;&quot;&quot;é“¾è¡¨çš„å¤´éƒ¨&quot;&quot;&quot;</span>        self._head = head    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add</span>(<span class="hljs-params">self, val: <span class="hljs-built_in">int</span></span>):</span>        <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">        ç»™é“¾è¡¨æ·»åŠ å…ƒç´ </span><span class="hljs-string">        ï¼šparam valï¼š ä¼ è¿‡æ¥çš„æ•°å­—</span><span class="hljs-string">        ï¼šreturnï¼š</span><span class="hljs-string">        &quot;&quot;&quot;</span>        <span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹</span>        node = ListNode(val)        <span class="hljs-keyword">if</span> self._head <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:            self._head = node        <span class="hljs-keyword">else</span>:            cur = self._head            <span class="hljs-keyword">while</span> cur.<span class="hljs-built_in">next</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:                cur = cur.<span class="hljs-built_in">next</span>  <span class="hljs-comment"># ç§»åŠ¨æ¸¸æ ‡</span>            cur.<span class="hljs-built_in">next</span> = node  <span class="hljs-comment"># å¦‚æœ next åé¢æ²¡äº†è¯æ˜ä»¥åŠåˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹äº†</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">traversal</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self._head:            <span class="hljs-keyword">return</span>        cur = self._head        link_list = []        <span class="hljs-keyword">while</span> cur:            link_list.append(cur.val)            cur = cur.<span class="hljs-built_in">next</span>        print(link_list)    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">size</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">        è·å–é“¾è¡¨çš„å¤§å°</span><span class="hljs-string">        ï¼šreturnï¼š</span><span class="hljs-string">        &quot;&quot;&quot;</span>        count = <span class="hljs-number">0</span>        <span class="hljs-keyword">if</span> self._head <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:            <span class="hljs-keyword">return</span> count        <span class="hljs-keyword">else</span>:            cur = self._head            <span class="hljs-keyword">while</span> cur <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:                count += <span class="hljs-number">1</span>                cur = cur.<span class="hljs-built_in">next</span>            <span class="hljs-keyword">return</span> count    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reverse_link</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">        å•é“¾è¡¨åè½¬</span><span class="hljs-string">        æ€è·¯ï¼š</span><span class="hljs-string">        è®© cur.next å…ˆæ–­å¼€å³æŒ‡å‘ noneï¼ŒæŒ‡å‘è®¾å®š pre æ¸¸æ ‡æŒ‡å‘æ–­å¼€çš„å…ƒç´ ï¼Œç„¶å</span><span class="hljs-string">        cur.next æŒ‡å‘æ–­å¼€çš„å…ƒç´ ï¼Œå†æŠŠå¼€å§‹ self._head å†æœ€åä¸€ä¸ªå…ƒç´ çš„æ—¶å€™.</span><span class="hljs-string">        ï¼šreturnï¼š</span><span class="hljs-string">        &quot;&quot;&quot;</span>        <span class="hljs-keyword">if</span> self._head <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">or</span> self.size() == <span class="hljs-number">1</span>:            <span class="hljs-keyword">return</span>        <span class="hljs-keyword">else</span>:            pre = <span class="hljs-literal">None</span>            cur = self._head            <span class="hljs-keyword">while</span> cur <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:                post = cur.<span class="hljs-built_in">next</span>                cur.<span class="hljs-built_in">next</span> = pre                pre = cur                cur = post            self._head = pre  <span class="hljs-comment"># é€†å‘åçš„å¤´èŠ‚ç‚¹</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LinkListIntersectionNode</span>:</span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">ä¸¤ä¸ªé“¾è¡¨çš„çš„äº¤å‰èŠ‚ç‚¹</span><span class="hljs-string">&quot;&quot;&quot;</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_intersection_node</span>(<span class="hljs-params">self, headA, headB</span>):</span>        <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">        cur1ã€cur2ï¼Œ2 ä¸ªæŒ‡é’ˆçš„åˆå§‹ä½ç½®æ˜¯é“¾è¡¨ headAã€headB å¤´ç»“ç‚¹ï¼Œcur1ã€cur2 ä¸¤ä¸ªæŒ‡é’ˆä¸€ç›´å¾€åéå†ã€‚</span><span class="hljs-string">        ç›´åˆ° cur1 æŒ‡é’ˆèµ°åˆ°é“¾è¡¨çš„æœ«å°¾ï¼Œç„¶å cur1 æŒ‡å‘ headBï¼›</span><span class="hljs-string">        ç›´åˆ° cur2 æŒ‡é’ˆèµ°åˆ°é“¾è¡¨çš„æœ«å°¾ï¼Œç„¶å cur2 æŒ‡å‘ headAï¼›</span><span class="hljs-string">        ç„¶åå†ç»§ç»­éå†ï¼›</span><span class="hljs-string">        æ¯æ¬¡ cur1ã€cur2 æŒ‡å‘ Noneï¼Œåˆ™å°† cur1ã€cur2 åˆ†åˆ«æŒ‡å‘ headBã€headAã€‚</span><span class="hljs-string">        å¾ªç¯çš„æ¬¡æ•°è¶Šå¤šï¼Œcur1ã€cur2 çš„è·ç¦»è¶Šæ¥è¿‘ï¼Œç›´åˆ° cur1 ç­‰äº cur2ã€‚åˆ™æ˜¯ä¸¤ä¸ªé“¾è¡¨çš„ç›¸äº¤ç‚¹ã€‚</span><span class="hljs-string">        ï¼štye head1, head1ï¼š ListNode</span><span class="hljs-string">        ï¼šrtyeï¼š ListNode</span><span class="hljs-string">        &quot;&quot;&quot;</span>        <span class="hljs-keyword">if</span> headA <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">and</span> headB <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:            cur1, cur2 = headA, headB            <span class="hljs-keyword">while</span> cur1 != cur2:                cur1 = cur1.<span class="hljs-built_in">next</span> <span class="hljs-keyword">if</span> cur1 <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">else</span> headA                cur2 = cur2.<span class="hljs-built_in">next</span> <span class="hljs-keyword">if</span> cur2 <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">else</span> headB            <span class="hljs-keyword">return</span> cur1<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:    dn = DeleteNode([<span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">9</span>], <span class="hljs-number">3</span>)    dn.traversal()    dn.delete_node_in_a_linked_list(dn._node)    dn.traversal()    mn = MergeLinkedList([<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">7</span>])    mn.merge_linked_list()    mn.traversal()    r_link = ReverseLinkList()    r_link.add(<span class="hljs-number">3</span>)    r_link.add(<span class="hljs-number">5</span>)    r_link.add(<span class="hljs-number">6</span>)    r_link.add(<span class="hljs-number">7</span>)    r_link.add(<span class="hljs-number">8</span>)    print(<span class="hljs-string">&quot;å¯¹é“¾è¡¨è¿›è¡Œéå†&quot;</span>)    r_link.traversal()    print(<span class="hljs-string">f&quot;sizeï¼š<span class="hljs-subst">&#123;r_link.size()&#125;</span>&quot;</span>)    print(<span class="hljs-string">&quot;å¯¹é“¾è¡¨è¿›è¡Œé€†å‘æ“ä½œä¹‹å&quot;</span>)    r_link.reverse_link()    r_link.traversal()</code></pre><p><a href="https://github.com/weitrue/note/blob/master/python/algorithm/data_structure/link_list_cases.py">https://github.com/weitrue/note/blob/master/python/algorithm/data_structure/link_list_cases.py</a></p><h3 id="Advanced-Linked-Lists"><a href="#Advanced-Linked-Lists" class="headerlink" title="Advanced Linked Lists"></a>Advanced Linked Lists</h3><h4 id="Doubly-Linked-List"><a href="#Doubly-Linked-List" class="headerlink" title="Doubly Linked List"></a>Doubly Linked List</h4><p>åŒé“¾è¡¨ï¼Œæ¯ä¸ªèŠ‚ç‚¹å¤šäº†ä¸ªprevæŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹ã€‚åŒé“¾è¡¨å¯ä»¥ç”¨æ¥ç¼–å†™æ–‡æœ¬ç¼–è¾‘å™¨çš„bufferã€‚</p><h4 id="å¾ªç¯é“¾è¡¨"><a href="#å¾ªç¯é“¾è¡¨" class="headerlink" title="å¾ªç¯é“¾è¡¨"></a>å¾ªç¯é“¾è¡¨</h4><p>åˆ©ç”¨å¾ªç¯åŒç«¯é“¾è¡¨æˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ªç»å…¸çš„ç¼“å­˜å¤±æ•ˆç®—æ³•ï¼Œlruï¼š</p><pre><code class="hljs Python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Node</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span>      <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, prev=<span class="hljs-literal">None</span>, <span class="hljs-built_in">next</span>=<span class="hljs-literal">None</span>, key=<span class="hljs-literal">None</span>, value=<span class="hljs-literal">None</span></span>):</span>        self.prev, self.<span class="hljs-built_in">next</span>, self.key, self.value = prev, <span class="hljs-built_in">next</span>, key, value               <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CircularDoubleLinkedList</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span>      <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span>        node = Node()        node.prev, node.<span class="hljs-built_in">next</span> = node, node        self.rootnode = node            <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">headnode</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> self.rootnode.<span class="hljs-built_in">next</span>          <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">tailnode</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> self.rootnode.prev          <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">remove</span>(<span class="hljs-params">self, node</span>):</span>        <span class="hljs-keyword">if</span> node <span class="hljs-keyword">is</span> self.rootnode:            <span class="hljs-keyword">return</span>        <span class="hljs-keyword">else</span>:            node.prev.<span class="hljs-built_in">next</span> = node.<span class="hljs-built_in">next</span>            node.<span class="hljs-built_in">next</span>.prev = node.prev                <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">append</span>(<span class="hljs-params">self, node</span>):</span>        tailnode = self.tailnode()        tailnode.<span class="hljs-built_in">next</span> = node        node.<span class="hljs-built_in">next</span> = self.rootnode        self.rootnode.prev = node                <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LRUCache</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span>      <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, maxsize=<span class="hljs-number">16</span></span>):</span>        self.maxsize = maxsize        self.cache = &#123;&#125;        self.access = CircularDoubleLinkedList()        self.isfull = <span class="hljs-built_in">len</span>(self.cache) &gt;= self.maxsize            <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__call__</span>(<span class="hljs-params">self, func</span>):</span>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">wrapper</span>(<span class="hljs-params">n</span>):</span>            cachenode = self.cache.get(n)            <span class="hljs-keyword">if</span> cachenode <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:  <span class="hljs-comment"># hit</span>                self.access.remove(cachenode)                self.access.append(cachenode)                <span class="hljs-keyword">return</span> cachenode.value            <span class="hljs-keyword">else</span>:  <span class="hljs-comment"># miss</span>                value = func(n)                <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.isfull:                    tailnode = self.access.tailnode()                    newnode = Node(tailnode, self.access.rootnode, n, value)                    self.access.append(newnode)                    self.cache[n] = newnode                    self.isfull = <span class="hljs-built_in">len</span>(self.cache) &gt;= self.maxsize                    <span class="hljs-keyword">return</span> value                <span class="hljs-keyword">else</span>:  <span class="hljs-comment"># full</span>                    lru_node = self.access.headnode()                    <span class="hljs-keyword">del</span> self.cache[lru_node.key]                    self.access.remove(lru_node)                    tailnode = self.access.tailnode()                    newnode = Node(tailnode, self.access.rootnode, n, value)                    self.access.append(newnode)                    self.cache[n] = newnode                <span class="hljs-keyword">return</span> value        <span class="hljs-keyword">return</span> wrapper            <span class="hljs-meta">@LRUCache()</span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">fib</span>(<span class="hljs-params">n</span>):</span>    <span class="hljs-keyword">if</span> n &lt;= <span class="hljs-number">2</span>:        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>    <span class="hljs-keyword">else</span>:        <span class="hljs-keyword">return</span> fib(n - <span class="hljs-number">1</span>) + fib(n - <span class="hljs-number">2</span>)            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>):    print(fib(i))        <span class="hljs-comment"># è¾“å‡º</span><span class="hljs-number">1</span><span class="hljs-number">1</span><span class="hljs-number">2</span><span class="hljs-number">3</span><span class="hljs-number">5</span><span class="hljs-number">8</span><span class="hljs-number">13</span><span class="hljs-number">21</span><span class="hljs-number">34</span></code></pre><h3 id="Stacks"><a href="#Stacks" class="headerlink" title="Stacks"></a>Stacks</h3><p>æ ˆï¼Œä¸€ç§åè¿›å…ˆå‡ºçš„æ•°æ®ç»“æ„ã€‚</p><pre><code class="hljs Python"><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">Module Description: åŸºé˜Ÿåˆ—å®ç°æ ˆ</span><span class="hljs-string">Problem:</span><span class="hljs-string">Solutionï¼šåŸºäºcollections.dequeå®ç°æ ˆ</span><span class="hljs-string">          åŸºäº 2 ä¸ªé˜Ÿåˆ—å®ç°</span><span class="hljs-string">          åŸºäº 1 ä¸ªé˜Ÿåˆ—å®ç°</span><span class="hljs-string">Date: 2020/2/15 </span><span class="hljs-string">Author: Wang P</span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<span class="hljs-keyword">from</span> queue <span class="hljs-keyword">import</span> Queue<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Stack</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span>        self.items = deque()    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">push</span>(<span class="hljs-params">self, val</span>):</span>        self.items.append(val)    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">top</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> self.items[<span class="hljs-number">-1</span>]    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pop</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> self.items.pop()    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">empty</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(self.items) == <span class="hljs-number">0</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyStack</span>:</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    ä½¿ç”¨ 2 ä¸ªé˜Ÿåˆ—å®ç°</span><span class="hljs-string">    &quot;&quot;&quot;</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">        åˆå§‹åŒ–</span><span class="hljs-string">        &quot;&quot;&quot;</span>        <span class="hljs-comment"># q1 ä½œä¸ºè¿›æ ˆå‡ºæ ˆï¼Œq2 ä½œä¸ºä¸­è½¬ç«™</span>        self.q1 = Queue()        self.q2 = Queue()    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">push</span>(<span class="hljs-params">self, x</span>):</span>        <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">        å…¥æ ˆ</span><span class="hljs-string">        ï¼štype xï¼š int</span><span class="hljs-string">        ï¼šrtypeï¼š void</span><span class="hljs-string">        &quot;&quot;&quot;</span>        self.q1.put(x)    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pop</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">        å‡ºæ ˆ</span><span class="hljs-string">        ï¼šrtypeï¼š int</span><span class="hljs-string">        &quot;&quot;&quot;</span>        <span class="hljs-keyword">while</span> self.q1.qsize() &gt; <span class="hljs-number">1</span>:            self.q2.put(self.q1.get())  <span class="hljs-comment"># å°† q1 ä¸­é™¤å°¾å…ƒç´ å¤–çš„æ‰€æœ‰å…ƒç´ è½¬åˆ° q2 ä¸­</span>        <span class="hljs-keyword">if</span> self.q1.qsize() == <span class="hljs-number">1</span>:            res = self.q1.get()  <span class="hljs-comment"># å¼¹å‡º q1 çš„æœ€åä¸€ä¸ªå…ƒç´ </span>            self.q1, self.q2 = self.q2, self.q1  <span class="hljs-comment"># äº¤æ¢ q1,q2</span>            <span class="hljs-keyword">return</span> res    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">top</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">        æ ˆé¡¶</span><span class="hljs-string">        ï¼šrtypeï¼š int</span><span class="hljs-string">        &quot;&quot;&quot;</span>        <span class="hljs-keyword">while</span> self.q1.qsize() &gt; <span class="hljs-number">1</span>:            self.q2.put(self.q1.get())  <span class="hljs-comment"># å°† q1 ä¸­é™¤å°¾å…ƒç´ å¤–çš„æ‰€æœ‰å…ƒç´ è½¬åˆ° q2 ä¸­</span>        <span class="hljs-keyword">if</span> self.q1.qsize() == <span class="hljs-number">1</span>:            res = self.q1.get()  <span class="hljs-comment"># å¼¹å‡º q1 çš„æœ€åä¸€ä¸ªå…ƒç´ </span>            self.q2.put(res)  <span class="hljs-comment"># ä¸ pop å”¯ä¸€ä¸åŒçš„æ˜¯éœ€è¦å°† q1 æœ€åä¸€ä¸ªå…ƒç´ ä¿å­˜åˆ° q2 ä¸­</span>            self.q1, self.q2 = self.q2, self.q1  <span class="hljs-comment"># äº¤æ¢ q1,q2</span>            <span class="hljs-keyword">return</span> res    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">empty</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">        åˆ¤æ–­æ˜¯å¦ä¸ºç©º</span><span class="hljs-string">        ï¼šrtypeï¼š bool</span><span class="hljs-string">        &quot;&quot;&quot;</span>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">bool</span>(self.q1.qsize() + self.q2.qsize())  <span class="hljs-comment"># ä¸ºç©ºè¿”å› Trueï¼Œä¸ä¸ºç©ºè¿”å› False</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyStack2</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    ä½¿ç”¨ 1 ä¸ªé˜Ÿåˆ—å®ç°</span><span class="hljs-string">    &quot;&quot;&quot;</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">        åˆå§‹åŒ–</span><span class="hljs-string">        &quot;&quot;&quot;</span>        self.sq1 = Queue()    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">push</span>(<span class="hljs-params">self, x</span>):</span>        <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">        å…¥æ ˆ</span><span class="hljs-string">        ï¼štype xï¼š int</span><span class="hljs-string">        ï¼šrtypeï¼š void</span><span class="hljs-string">        &quot;&quot;&quot;</span>        self.sq1.put(x)    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pop</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">        å‡ºæ ˆ</span><span class="hljs-string">        ï¼šrtypeï¼š int</span><span class="hljs-string">        &quot;&quot;&quot;</span>        count = self.sq1.qsize()        <span class="hljs-keyword">if</span> count == <span class="hljs-number">0</span>:            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>        <span class="hljs-keyword">while</span> count &gt; <span class="hljs-number">1</span>:            x = self.sq1.get()            self.sq1.put(x)            count -= <span class="hljs-number">1</span>        <span class="hljs-keyword">return</span> self.sq1.get()    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">top</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">        Get the top element.</span><span class="hljs-string">        ï¼šrtypeï¼š int</span><span class="hljs-string">        &quot;&quot;&quot;</span>        count = self.sq1.qsize()        <span class="hljs-keyword">if</span> count == <span class="hljs-number">0</span>:            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>        <span class="hljs-keyword">while</span> count:            x = self.sq1.get()            self.sq1.put(x)            count -= <span class="hljs-number">1</span>        <span class="hljs-keyword">return</span> x    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">empty</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">        Returns whether the stack is empty.</span><span class="hljs-string">        ï¼šrtypeï¼š bool</span><span class="hljs-string">        &quot;&quot;&quot;</span>        <span class="hljs-keyword">return</span> self.sq1.empty()<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:    obj = MyStack2()    obj.push(<span class="hljs-number">1</span>)    obj.push(<span class="hljs-number">3</span>)    print(obj.pop())    obj.push(<span class="hljs-number">4</span>)    print(obj.pop())    print(obj.pop())    print(obj.empty())</code></pre><p><a href="https://github.com/weitrue/note/blob/master/python/algorithm/data_structure/stack_cases.py">https://github.com/weitrue/note/blob/master/python/algorithm/data_structure/stack_cases.py</a></p><h3 id="Queues"><a href="#Queues" class="headerlink" title="Queues"></a>Queues</h3><p>é˜Ÿåˆ—ä¹Ÿæ˜¯ç»å¸¸ä½¿ç”¨çš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚å‘é€æ¶ˆæ¯ç­‰ï¼Œceleryå¯ä»¥ä½¿ç”¨redisæä¾›çš„listå®ç°æ¶ˆæ¯é˜Ÿåˆ—ã€‚</p><pre><code class="hljs Python"><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">Module Description: åŸºäºcollections.dequeå®ç°é˜Ÿåˆ—</span><span class="hljs-string">                    åŸºäºæ ˆå®ç°é˜Ÿåˆ—</span><span class="hljs-string">Problem:</span><span class="hljs-string">Solutionï¼š</span><span class="hljs-string">Date: 2020/2/15 </span><span class="hljs-string">Author: Wang P</span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<span class="hljs-keyword">from</span> examples.example_0x_cases.algorithm.data_structure.stack_cases <span class="hljs-keyword">import</span> Stack<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Queue</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span>        self.items = deque()    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">push</span>(<span class="hljs-params">self, val</span>):</span>        self.items.append(val)    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pop</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> self.items.popleft()    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">empty</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(self.items) == <span class="hljs-number">0</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">QueueByStack</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span>        self.stack_one = Stack()        self.stack_two = Stack()    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">push</span>(<span class="hljs-params">self, val</span>):</span>        self.stack_one.push(val)    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pop</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">if</span> self.stack_two.empty():            <span class="hljs-keyword">if</span> self.stack_one.empty():                <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;nil&#x27;</span>            <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> self.stack_one.empty():                self.stack_two.push(self.stack_one.pop())        <span class="hljs-keyword">return</span> self.stack_two.pop()    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">peek</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">if</span> self.stack_two.empty():            <span class="hljs-keyword">if</span> self.stack_one.empty():                <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;nil&#x27;</span>            <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> self.stack_one.empty():                self.stack_two.push(self.stack_one.pop())        <span class="hljs-keyword">return</span> self.stack_two.top()    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">empty</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> self.stack_two<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:    qu = QueueByStack()    qu.push(<span class="hljs-number">1</span>)    qu.push(<span class="hljs-number">2</span>)    qu.push(<span class="hljs-number">3</span>)    print(qu.pop())    print(qu.peek())    print(qu.pop())    print(qu.pop())    print(qu.pop())</code></pre><p><a href="https://github.com/weitrue/note/blob/master/python/algorithm/data_structure/queue_cases.py">https://github.com/weitrue/note/blob/master/python/algorithm/data_structure/queue_cases.py</a></p><h2 id="Binary-Tree"><a href="#Binary-Tree" class="headerlink" title="Binary Tree"></a>Binary Tree</h2><p>äºŒå‰æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹åšå¤šåªæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹</p><pre><code class="hljs Python"><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">Module Description: äºŒå‰æ ‘çš„éå†ï¼šå‰åºã€ä¸­åºã€ååºã€å±‚æ¬¡éå†</span><span class="hljs-string">                    äºŒå‰æ ‘çš„åè½¬</span><span class="hljs-string">Problem:</span><span class="hljs-string">Solutionï¼š</span><span class="hljs-string">Date: 2020/2/16 </span><span class="hljs-string">Author: Wang P</span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TreeNode</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, val, left, right</span>):</span>        self.val, self.left, self.right = val, left, right<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BinTreeTravel</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, node_list=<span class="hljs-literal">None</span></span>):</span>        <span class="hljs-keyword">if</span> node_list <span class="hljs-keyword">and</span> <span class="hljs-built_in">isinstance</span>(node_list, <span class="hljs-built_in">list</span>):            tree_node_list = []            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(node_list)):                tree_node_list.append(TreeNode(node_list[i], <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span>))            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(node_list)):                <span class="hljs-keyword">if</span> i * <span class="hljs-number">2</span> + <span class="hljs-number">1</span> &lt;= <span class="hljs-built_in">len</span>(tree_node_list) - <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> i * <span class="hljs-number">2</span> + <span class="hljs-number">2</span> &lt;= <span class="hljs-built_in">len</span>(tree_node_list) - <span class="hljs-number">1</span>:                    tree_node_list[i].left = tree_node_list[i * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>]                    tree_node_list[i].right = tree_node_list[i * <span class="hljs-number">2</span> + <span class="hljs-number">2</span>]                <span class="hljs-keyword">elif</span> i * <span class="hljs-number">2</span> + <span class="hljs-number">1</span> &lt;= <span class="hljs-built_in">len</span>(tree_node_list) - <span class="hljs-number">1</span> &lt; i * <span class="hljs-number">2</span> + <span class="hljs-number">2</span>:                    tree_node_list[i].left = tree_node_list[i * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>]                <span class="hljs-keyword">else</span>:                    <span class="hljs-keyword">break</span>            self.root = tree_node_list[<span class="hljs-number">0</span>]    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pre_order_travel</span>(<span class="hljs-params">self, sub_tree</span>):</span>        <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">        å…ˆåºéå†</span><span class="hljs-string">        :param sub_tree:</span><span class="hljs-string">        :return:</span><span class="hljs-string">        &quot;&quot;&quot;</span>        <span class="hljs-keyword">if</span> sub_tree:            print(sub_tree.val)            self.pre_order_travel(sub_tree.left)            self.pre_order_travel(sub_tree.right)    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">in_order_travel</span>(<span class="hljs-params">self, sub_tree</span>):</span>        <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">        ä¸­åºéå†</span><span class="hljs-string">        :param sub_tree:</span><span class="hljs-string">        :return:</span><span class="hljs-string">        &quot;&quot;&quot;</span>        <span class="hljs-keyword">if</span> sub_tree:            self.in_order_travel(sub_tree.left)            print(sub_tree.val)            self.in_order_travel(sub_tree.right)    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">post_order_travel</span>(<span class="hljs-params">self, sub_tree</span>):</span>        <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">        ååºéå†</span><span class="hljs-string">        :param sub_tree:</span><span class="hljs-string">        :return:</span><span class="hljs-string">        &quot;&quot;&quot;</span>        <span class="hljs-keyword">if</span> sub_tree:            self.post_order_travel(sub_tree.left)            self.post_order_travel(sub_tree.right)            print(sub_tree.val)    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">level_order_travel</span>(<span class="hljs-params">self, root</span>):</span>        <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">        å±‚æ¬¡éå†</span><span class="hljs-string">        :param root:</span><span class="hljs-string">        :return: list[list[int]]</span><span class="hljs-string">        &quot;&quot;&quot;</span>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root:            print([])            <span class="hljs-keyword">return</span>        cur_nodes = [root]        next_nodes = []        print([i.val <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> cur_nodes])        <span class="hljs-keyword">while</span> cur_nodes <span class="hljs-keyword">or</span> next_nodes:            <span class="hljs-keyword">for</span> node <span class="hljs-keyword">in</span> cur_nodes:                <span class="hljs-keyword">if</span> node.left:                    next_nodes.append(node.left)                <span class="hljs-keyword">if</span> node.right:                    next_nodes.append(node.right)            <span class="hljs-keyword">if</span> next_nodes:                print([i.val <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> next_nodes])            cur_nodes = next_nodes            next_nodes = []<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ReverseBinaryTree</span>:</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    åè½¬äºŒå‰æ ‘</span><span class="hljs-string">               1                         1</span><span class="hljs-string">            3     4                   4     3</span><span class="hljs-string">         5   7  8   9      =&gt;       9  8  7   5</span><span class="hljs-string">      10                                        10</span><span class="hljs-string">    &quot;&quot;&quot;</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, node_list=<span class="hljs-literal">None</span></span>):</span>        <span class="hljs-keyword">if</span> node_list <span class="hljs-keyword">and</span> <span class="hljs-built_in">isinstance</span>(node_list, <span class="hljs-built_in">list</span>):            tree_node_list = []            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(node_list)):                tree_node_list.append(TreeNode(node_list[i], <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span>))            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(node_list)):                <span class="hljs-keyword">if</span> i * <span class="hljs-number">2</span> + <span class="hljs-number">1</span> &lt;= <span class="hljs-built_in">len</span>(tree_node_list) - <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> i * <span class="hljs-number">2</span> + <span class="hljs-number">2</span> &lt;= <span class="hljs-built_in">len</span>(tree_node_list) - <span class="hljs-number">1</span>:                    tree_node_list[i].left = tree_node_list[i * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>]                    tree_node_list[i].right = tree_node_list[i * <span class="hljs-number">2</span> + <span class="hljs-number">2</span>]                <span class="hljs-keyword">elif</span> i * <span class="hljs-number">2</span> + <span class="hljs-number">1</span> &lt;= <span class="hljs-built_in">len</span>(tree_node_list) - <span class="hljs-number">1</span> &lt; i * <span class="hljs-number">2</span> + <span class="hljs-number">2</span>:                    tree_node_list[i].left = tree_node_list[i * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>]                <span class="hljs-keyword">else</span>:                    <span class="hljs-keyword">break</span>            self.root = tree_node_list[<span class="hljs-number">0</span>]    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reverse_tree</span>(<span class="hljs-params">self, root</span>):</span>        <span class="hljs-keyword">if</span> root <span class="hljs-keyword">and</span> root.left <span class="hljs-keyword">and</span> root.right:            root.left, root.right = root.right, root.left            self.reverse_tree(root.left)            self.reverse_tree(root.right)        self.root = root<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FindTreeKthSmallest</span>:</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    äºŒå‰æœç´¢æ ‘ä¸­ç¬¬ K å°çš„å…ƒç´ </span><span class="hljs-string">    äºŒå‰æœç´¢æ ‘æŒ‰ç…§ä¸­åºéå†çš„é¡ºåºæ‰“å°å‡ºæ¥æ­£å¥½å°±æ˜¯æ’åºå¥½çš„é¡ºåºã€‚æ‰€ä»¥å¯¹å…¶éå†ä¸€ä¸ªèŠ‚ç‚¹å°±è¿›è¡Œè®¡æ•°ï¼Œè®¡æ•°è¾¾åˆ° k çš„æ—¶å€™å°±ç»“æŸã€‚</span><span class="hljs-string">    &quot;&quot;&quot;</span>    count = <span class="hljs-number">0</span>    node_val = <span class="hljs-number">0</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">kth_smallest</span>(<span class="hljs-params">self, root: TreeNode, k</span>):</span>        <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">        ï¼štype rootï¼š TreeNode</span><span class="hljs-string">        ï¼štype kï¼š int</span><span class="hljs-string">        ï¼šrtypeï¼š int</span><span class="hljs-string">        &quot;&quot;&quot;</span>        self.dfs(root, k)        <span class="hljs-keyword">return</span> self.node_val    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dfs</span>(<span class="hljs-params">self, node: TreeNode, k</span>):</span>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> node:            <span class="hljs-keyword">return</span>        self.dfs(node.left, k)        self.count = self.count + <span class="hljs-number">1</span>        <span class="hljs-keyword">if</span> self.count == k:            self.node_val = node.val            <span class="hljs-comment"># å°†è¯¥èŠ‚ç‚¹çš„å·¦å³å­æ ‘ç½®ä¸º None,æ¥ç»“æŸé€’å½’ï¼Œå‡å°‘æ—¶é—´å¤æ‚åº¦</span>            node.left = <span class="hljs-literal">None</span>            node.right = <span class="hljs-literal">None</span>        self.dfs(node.right, k)<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:    bt = BinTreeTravel([<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>])    bt.pre_order_travel(bt.root)    bt.in_order_travel(bt.root)    bt.post_order_travel(bt.root)    bt.level_order_travel(bt.root)    print(<span class="hljs-string">&quot;#################################################&quot;</span>)    it = ReverseBinaryTree()    it.reverse_tree(bt.root)    bt.pre_order_travel(bt.root)</code></pre><p><a href="https://github.com/weitrue/note/blob/master/python/algorithm/data_structure/tree_cases.py">https://github.com/weitrue/note/blob/master/python/algorithm/data_structure/tree_cases.py</a></p><h3 id="Heap"><a href="#Heap" class="headerlink" title="Heap"></a>Heap</h3><p>äºŒå‰æ ‘æœ€ç›´æ¥çš„ä¸€ä¸ªåº”ç”¨å°±æ˜¯å®ç°å †ã€‚å †å°±æ˜¯ä¸€é¢—å®Œå…¨äºŒå‰æ ‘ï¼Œæœ€å¤§å †çš„éå¶å­èŠ‚ç‚¹çš„å€¼éƒ½æ¯”å­©å­å¤§ï¼Œæœ€å°å †çš„éå¶å­ç»“ç‚¹çš„å€¼éƒ½æ¯”å­©å­å°ã€‚ pythonå†…ç½®äº†heapqæ¨¡å—å¸®åŠ©æˆ‘ä»¬å®ç°å †æ“ä½œï¼Œæ¯”å¦‚ç”¨å†…ç½®çš„heapqæ¨¡å—å®ç°ä¸ªå †æ’åº</p><pre><code class="hljs Python"><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">Module Description: è·å–å¤§é‡å…ƒç´ ä¸­ top-n å¤§ä¸ªå…ƒç´ ï¼Œå›ºå®šå†…å­˜</span><span class="hljs-string">Problem:</span><span class="hljs-string">Solutionï¼š</span><span class="hljs-string">Date: 2020/2/16 </span><span class="hljs-string">Author: Wang P</span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-keyword">import</span> heapq<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TopN</span>:</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    å…ˆæ”¾å…¥å…ƒç´ å‰nä¸ªå»ºç«‹å°é¡¶å †</span><span class="hljs-string">    è¿­ä»£å‰©ä½™å…ƒç´ ï¼š</span><span class="hljs-string">        å¦‚æœå½“å‰å…ƒç´ å°äºå †é¡¶å…ƒç´ ï¼Œè·³è¿‡è¯¥å…ƒç´ </span><span class="hljs-string">        å¦åˆ™é€€æ¢å †é¡¶å…ƒç´ ä¸ºå½“å‰å…ƒç´ ï¼Œå¹¶é‡æ–°è°ƒæ•´å †</span><span class="hljs-string">    &quot;&quot;&quot;</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, iterable, n</span>):</span>        self.min_heap = []        self.capacity = n        self.iterable = iterable    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">push</span>(<span class="hljs-params">self, val</span>):</span>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(self.min_heap) &gt;= self.capacity:            min_val = self.min_heap[<span class="hljs-number">0</span>]            <span class="hljs-keyword">if</span> val &lt; min_val:  <span class="hljs-comment"># å¯ä»¥çœç•¥</span>                <span class="hljs-keyword">pass</span>            <span class="hljs-keyword">else</span>:                heapq.heapreplace(self.min_heap, val)  <span class="hljs-comment"># è¿”å›å¹¶ä¸”popå †é¡¶æœ€å°å€¼ï¼Œæ¨å…¥å¿ƒå¾—valå¹¶è°ƒæ•´å †</span>        <span class="hljs-keyword">else</span>:            heapq.heapreplace(self.min_heap, val)  <span class="hljs-comment"># å‰nä¸ªå…ƒç´ ç›´æ¥æ”¾å…¥å †ä¸­</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_top_n</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">for</span> val <span class="hljs-keyword">in</span> self.iterable:            self.push(val)        <span class="hljs-keyword">return</span> self.min_heap</code></pre><p><a href="https://github.com/weitrue/note/blob/master/python/algorithm/data_structure/heap_cases.py">https://github.com/weitrue/note/blob/master/python/algorithm/data_structure/heap_cases.py</a></p><h3 id="Hash-Tables"><a href="#Hash-Tables" class="headerlink" title="Hash Tables"></a>Hash Tables</h3><p>åŸºäºæ¯”è¾ƒçš„æœç´¢ï¼ˆçº¿æ€§æœç´¢ï¼Œæœ‰åºæ•°ç»„çš„äºŒåˆ†æœç´¢ï¼‰æœ€å¥½çš„æ—¶é—´å¤æ‚åº¦åªèƒ½è¾¾åˆ°O(logn)ï¼Œåˆ©ç”¨hashå¯ä»¥å®ç°O(1)æŸ¥æ‰¾ï¼Œpythonå†…ç½®dictçš„å®ç°æ–¹å¼å°±æ˜¯hashï¼Œä½ ä¼šå‘ç°dictçš„keyå¿…é¡»è¦æ˜¯å®ç°äº† <code>__hash__</code> å’Œ <code>__eq__</code> æ–¹æ³•çš„ã€‚</p><p>Hashing: hashing is the process of mapping a search a key to a limited range of array indeices with the goal of providing direct access to the keys.</p><p>hashæ–¹æ³•æœ‰ä¸ªhashå‡½æ•°ç”¨æ¥ç»™keyè®¡ç®—ä¸€ä¸ªhashå€¼ï¼Œä½œä¸ºæ•°ç»„ä¸‹æ ‡ï¼Œæ”¾åˆ°è¯¥ä¸‹æ ‡å¯¹åº”çš„æ§½ä¸­ã€‚å½“ä¸åŒkeyæ ¹æ®hashå‡½æ•°è®¡ç®—å¾—åˆ°çš„ä¸‹æ ‡ç›¸åŒæ—¶ï¼Œå°±å‡ºç°äº†å†²çªã€‚è§£å†³å†²çªæœ‰å¾ˆå¤šæ–¹å¼ï¼Œæ¯”å¦‚è®©æ¯ä¸ªæ§½æˆä¸ºé“¾è¡¨ï¼Œæ¯æ¬¡å†²çªä»¥åæ”¾åˆ°è¯¥æ§½é“¾è¡¨çš„å°¾éƒ¨ï¼Œä½†æ˜¯æŸ¥è¯¢æ—¶é—´å°±ä¼šé€€åŒ–ï¼Œä¸å†æ˜¯O(1)ã€‚è¿˜æœ‰ä¸€ç§æ¢æŸ¥æ–¹å¼ï¼Œå½“keyçš„æ§½å†²çªæ—¶å€™ï¼Œå°±ä¼šæ ¹æ®ä¸€ç§è®¡ç®—æ–¹å¼å»å¯»æ‰¾ä¸‹ä¸€ä¸ªç©ºçš„æ§½å­˜æ”¾ï¼Œæ¢æŸ¥æ–¹å¼æœ‰çº¿æ€§æ¢æŸ¥ï¼ŒäºŒæ¬¡æ–¹æ¢æŸ¥æ³•ç­‰ï¼Œcpythonè§£é‡Šå™¨ä½¿ç”¨çš„æ˜¯äºŒæ¬¡æ–¹æ¢æŸ¥æ³•ã€‚è¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯å½“pythonä½¿ç”¨çš„æ§½æ•°é‡å¤§äºé¢„åˆ†é…çš„2/3æ—¶å€™ï¼Œä¼šé‡æ–°åˆ†é…å†…å­˜å¹¶æ‹·è´ä»¥å‰çš„æ•°æ®ï¼Œæ‰€ä»¥æœ‰æ—¶å€™dictçš„addæ“ä½œä»£ä»·è¿˜æ˜¯æ¯”è¾ƒé«˜çš„ï¼Œç‰ºç‰²ç©ºé—´ä½†æ˜¯å¯ä»¥å§‹ç»ˆä¿è¯O(1)çš„æŸ¥è¯¢æ•ˆç‡ã€‚å¦‚æœæœ‰å¤§é‡çš„æ•°æ®ï¼Œå»ºè®®è¿˜æ˜¯ä½¿ç”¨bloomfilteræˆ–è€…redisæä¾›çš„HyperLogLogã€‚</p><p>å¦‚æœæ„Ÿå…´è¶£ï¼Œå¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« ï¼Œä»‹ç»cè§£é‡Šå™¨å¦‚ä½•å®ç°çš„python dictå¯¹è±¡ï¼š<a href="http://www.laurentluce.com/posts/python-dictionary-implementation/">Python dictionary implementation</a>ã€‚æˆ‘ä»¬ä½¿ç”¨Pythonæ¥å®ç°ä¸€ä¸ªç±»ä¼¼çš„hashç»“æ„ã€‚</p><h3 id="Recursion"><a href="#Recursion" class="headerlink" title="Recursion"></a>Recursion</h3><p>é€’å½’å‡½æ•°ï¼šRecursion is a process for solving problems by subdividing a larger problem into smaller cases of the problem itself and then solving the smaller, more trivial parts.</p><p>Properties of Recursion: ä½¿ç”¨stackè§£å†³çš„é—®é¢˜éƒ½èƒ½ç”¨é€’å½’è§£å†³</p><ul><li>A recursive solution must contain a base case; é€’å½’å‡ºå£ï¼Œä»£è¡¨æœ€å°å­é—®é¢˜(n == 0é€€å‡ºæ‰“å°)</li><li>A recursive solution must contain a recursive case; å¯ä»¥åˆ†è§£çš„å­é—®é¢˜</li><li>A recursive solution must make progress toward the base case. é€’å‡nä½¿å¾—nåƒé€’å½’å‡ºå£é è¿‘</li></ul><p>Tail Recursion: occurs when a function includes a single recursive call as the last statement of the function. In this case, a stack is not needed to store values to te used upon the return of the recursive call and thus a solution can be implemented using a iterative loop instead.</p>]]></content>
    
    
    <categories>
      
      <category>ADT</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>ADT</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€Allã€‘HDFS:Hadoopåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ</title>
    <link href="/2020/11/09/Hadoop-HDFS%E5%88%86%E5%B8%83%E5%BC%8F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/"/>
    <url>/2020/11/09/Hadoop-HDFS%E5%88%86%E5%B8%83%E5%BC%8F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/</url>
    
    <content type="html"><![CDATA[<p><img src="/images/hdfs/image-20200416160250256.png"><a id="more"></a> </p><h3 id="å¤§æ•°æ®å…¨é“¾è·¯æ¶æ„"><a href="#å¤§æ•°æ®å…¨é“¾è·¯æ¶æ„" class="headerlink" title="å¤§æ•°æ®å…¨é“¾è·¯æ¶æ„"></a>å¤§æ•°æ®å…¨é“¾è·¯æ¶æ„</h3><p>æ•°æ®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„æµå‘åŠå¤„ç†æµç¨‹</p><p><img src="/images/hdfs/image-20190629152840146.png"></p><h3 id="å¤§æ•°æ®ä¸»æµæ¡†æ¶"><a href="#å¤§æ•°æ®ä¸»æµæ¡†æ¶" class="headerlink" title="å¤§æ•°æ®ä¸»æµæ¡†æ¶"></a>å¤§æ•°æ®ä¸»æµæ¡†æ¶</h3><p>1 ç¬¬ä¸€ä»£å¤§æ•°æ®æ¡†æ¶: å„è‡ªä¸ºæˆ˜</p><p><img src="/images/hdfs/image-20190629153348534.png"></p><p>2 ç¬¬äºŒä»£å¤§æ•°æ®è®¡ç®—æ¡†æ¶</p><p><img src="/images/hdfs/image-20190629153652036.png"></p><p>3 ç¬¬ä¸‰ä»£å¤§æ•°æ®è®¡ç®—æ¡†æ¶ Flink</p><p><img src="/images/hdfs/image-20190629153835100.png"></p><h3 id="Hadoopçš„æ¶æ„æ¨¡å—"><a href="#Hadoopçš„æ¶æ„æ¨¡å—" class="headerlink" title="Hadoopçš„æ¶æ„æ¨¡å—"></a>Hadoopçš„æ¶æ„æ¨¡å—</h3><div align="center">  <img src="/images/hdfs/image-20200414134203318.png" alt="image-20200414134203318" style="zoom:50%;align: center"></div><ul><li>Hadoopç”±ä¸‰ä¸ªæ¨¡å—ç»„æˆï¼š**<em>åˆ†å¸ƒå¼**</em>å­˜å‚¨HDFSã€åˆ†å¸ƒå¼è®¡ç®—MapReduceã€èµ„æºè°ƒåº¦å¼•æ“Yarn</li></ul><div align="center">  <img src="/images/hdfs/image-20200414134230170.png" alt="image-20200414134230170" style="zoom: 33%;align: center"></div><pre><code class="hljs markdown"><span class="hljs-bullet">-</span> HDFSæ¨¡å—ï¼š<span class="hljs-bullet">  -</span>  namenodeï¼šä¸»èŠ‚ç‚¹ï¼Œä¸»è¦è´Ÿè´£é›†ç¾¤çš„ç®¡ç†ä»¥åŠå…ƒæ•°æ®ä¿¡æ¯ç®¡ç†<span class="hljs-bullet">  -</span>  datanodeï¼šä»èŠ‚ç‚¹ï¼Œä¸»è¦è´Ÿè´£å­˜å‚¨ç”¨æˆ·æ•°æ®<span class="hljs-bullet">  -</span>  secondaryNameNodeï¼šè¾…åŠ©namenodeç®¡ç†å…ƒæ•°æ®ä¿¡æ¯ï¼Œä»¥åŠå…ƒæ•°æ®ä¿¡æ¯çš„å†·å¤‡ä»½<span class="hljs-bullet">-</span> Yarnæ¨¡å—ï¼š<span class="hljs-bullet">  -</span> ResourceManagerï¼šä¸»èŠ‚ç‚¹ï¼Œä¸»è¦è´Ÿè´£èµ„æºåˆ†é…<span class="hljs-bullet">  -</span> NodeManagerï¼šä»èŠ‚ç‚¹ï¼Œä¸»è¦è´Ÿè´£æ‰§è¡Œä»»åŠ¡</code></pre><h3 id="HDFSåŠŸèƒ½æ¨¡å—"><a href="#HDFSåŠŸèƒ½æ¨¡å—" class="headerlink" title="HDFSåŠŸèƒ½æ¨¡å—"></a>HDFSåŠŸèƒ½æ¨¡å—</h3><h4 id="hdfsçš„æ¶æ„"><a href="#hdfsçš„æ¶æ„" class="headerlink" title="hdfsçš„æ¶æ„"></a>hdfsçš„æ¶æ„</h4><h5 id="æ–‡ä»¶åˆ†å—å­˜å‚¨-amp-3å‰¯æœ¬"><a href="#æ–‡ä»¶åˆ†å—å­˜å‚¨-amp-3å‰¯æœ¬" class="headerlink" title="æ–‡ä»¶åˆ†å—å­˜å‚¨&amp;3å‰¯æœ¬"></a>æ–‡ä»¶åˆ†å—å­˜å‚¨&amp;3å‰¯æœ¬</h5><p><img src="/images/hdfs/block3.gif"></p><p><img src="/images/hdfs/image-20200414151438737.png"></p><ul><li><p>ä¿å­˜æ–‡ä»¶åˆ°HDFSæ—¶ï¼Œä¼šå…ˆé»˜è®¤æŒ‰**<em>128M**</em>çš„å¤§å°å¯¹æ–‡ä»¶è¿›è¡Œåˆ‡åˆ†ï¼›æ•ˆæœå¦‚ä¸Šå›¾</p><ul><li>æ•°æ®ä»¥blockå—çš„å½¢å¼è¿›ç»Ÿä¸€å­˜å‚¨ç®¡ç†ï¼Œæ¯ä¸ªblockå—é»˜è®¤æœ€å¤šå¯ä»¥å­˜å‚¨128Mçš„æ–‡ä»¶ã€‚</li><li>å¦‚æœæœ‰ä¸€ä¸ªæ–‡ä»¶å¤§å°ä¸º1KBï¼Œä¹Ÿæ˜¯è¦å ç”¨ä¸€ä¸ªblockå—ï¼Œä½†æ˜¯å®é™…å ç”¨ç£ç›˜ç©ºé—´è¿˜æ˜¯1KBå¤§å°ï¼Œç±»ä¼¼äºæœ‰ä¸€ä¸ªæ°´æ¡¶å¯ä»¥è£…128æ–¤çš„æ°´ï¼Œä½†æ˜¯æˆ‘åªè£…äº†1æ–¤çš„æ°´ï¼Œé‚£ä¹ˆæˆ‘çš„æ°´æ¡¶é‡Œé¢æ°´çš„é‡é‡å°±æ˜¯1æ–¤ï¼Œè€Œä¸æ˜¯128æ–¤</li></ul></li><li><p>æ¯ä¸ªblockå—çš„å…ƒæ•°æ®å¤§å°å¤§æ¦‚ä¸º150å­—èŠ‚</p></li><li><p>æ‰€æœ‰çš„æ–‡ä»¶éƒ½æ˜¯ä»¥blockå—çš„æ–¹å¼å­˜æ”¾åœ¨HDFSæ–‡ä»¶ç³»ç»Ÿå½“ä¸­ï¼Œåœ¨hadoop1å½“ä¸­ï¼Œæ–‡ä»¶çš„blockå—é»˜è®¤å¤§å°æ˜¯64Mï¼Œhadoop2å½“ä¸­ï¼Œæ–‡ä»¶çš„blockå—å¤§å°é»˜è®¤æ˜¯128Mï¼Œblockå—çš„å¤§å°å¯ä»¥é€šè¿‡hdfs-site.xmlå½“ä¸­çš„é…ç½®æ–‡ä»¶è¿›è¡ŒæŒ‡å®š</p></li></ul><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>dfs.block.size<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>å—å¤§å° ä»¥å­—èŠ‚ä¸ºå•ä½<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><span class="hljs-comment">&lt;!-- åªå†™æ•°å€¼å°±å¯ä»¥ --&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></code></pre><ul><li><p>ä¸ºäº†ä¿è¯blockå—çš„å®‰å…¨æ€§ï¼Œä¹Ÿå°±æ˜¯æ•°æ®çš„å®‰å…¨æ€§ï¼Œåœ¨hadoop2å½“ä¸­ï¼Œæ–‡ä»¶é»˜è®¤ä¿å­˜**<em>ä¸‰ä¸ªå‰¯æœ¬**</em>ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ”¹å‰¯æœ¬æ•°ä»¥æé«˜æ•°æ®çš„å®‰å…¨æ€§</p></li><li><p>åœ¨hdfs-site.xmlå½“ä¸­ä¿®æ”¹ä»¥ä¸‹é…ç½®å±æ€§ï¼Œå³å¯æ›´æ”¹æ–‡ä»¶çš„å‰¯æœ¬æ•°</p></li></ul><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>dfs.replication<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></code></pre><h5 id="æŠ½è±¡æˆæ•°æ®å—çš„å¥½å¤„"><a href="#æŠ½è±¡æˆæ•°æ®å—çš„å¥½å¤„" class="headerlink" title="æŠ½è±¡æˆæ•°æ®å—çš„å¥½å¤„"></a>æŠ½è±¡æˆæ•°æ®å—çš„å¥½å¤„</h5><ol><li><p>ä¸€ä¸ªæ–‡ä»¶æœ‰å¯èƒ½å¤§äºé›†ç¾¤ä¸­ä»»æ„ä¸€ä¸ªç£ç›˜<br>10T*3/128 = xxxå— 2Tï¼Œ2Tï¼Œ2T æ–‡ä»¶æ–¹å¼å­˜â€”â€“&gt;å¤šä¸ªblockå—ï¼Œè¿™äº›blockå—å±äºä¸€ä¸ªæ–‡ä»¶</p></li><li><p>ä½¿ç”¨å—æŠ½è±¡è€Œä¸æ˜¯æ–‡ä»¶å¯ä»¥ç®€åŒ–å­˜å‚¨å­ç³»ç»Ÿ</p><p>hdfså°†æ‰€æœ‰çš„æ–‡ä»¶å…¨éƒ¨æŠ½è±¡æˆä¸ºblockå—æ¥è¿›è¡Œå­˜å‚¨ï¼Œä¸ç®¡æ–‡ä»¶å¤§å°ï¼Œå…¨éƒ¨ä¸€è§†åŒä»éƒ½æ˜¯ä»¥blockå—çš„å½¢å¼è¿›è¡Œå­˜å‚¨ï¼Œæ–¹ä¾¿æˆ‘ä»¬çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿå¯¹æ–‡ä»¶çš„ç®¡ç†</p></li><li><p>å—éå¸¸é€‚åˆç”¨äºæ•°æ®å¤‡ä»½è¿›è€Œæä¾›æ•°æ®å®¹é”™èƒ½åŠ›å’Œå¯ç”¨æ€§</p></li></ol><h5 id="HDFSæ¶æ„"><a href="#HDFSæ¶æ„" class="headerlink" title="HDFSæ¶æ„"></a>HDFSæ¶æ„</h5><p><img src="/images/hdfs/image-20200416160250256.png"></p><ul><li>HDFSé›†ç¾¤åŒ…æ‹¬ï¼ŒNameNodeå’ŒDataNodeä»¥åŠSecondary Namenodeã€‚<ul><li>NameNodeè´Ÿè´£ç®¡ç†æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„å…ƒæ•°æ®ï¼Œä»¥åŠæ¯ä¸€ä¸ªè·¯å¾„ï¼ˆæ–‡ä»¶ï¼‰æ‰€å¯¹åº”çš„æ•°æ®å—ä¿¡æ¯ã€‚</li><li>DataNode è´Ÿè´£ç®¡ç†ç”¨æˆ·çš„æ–‡ä»¶æ•°æ®å—ï¼Œæ¯ä¸€ä¸ªæ•°æ®å—éƒ½å¯ä»¥åœ¨å¤šä¸ªdatanodeä¸Šå­˜å‚¨å¤šä¸ªå‰¯æœ¬ã€‚</li><li>Secondary NameNodeç”¨æ¥ç›‘æ§HDFSçŠ¶æ€çš„è¾…åŠ©åå°ç¨‹åºï¼Œæ¯éš”ä¸€æ®µæ—¶é—´è·å–HDFSå…ƒæ•°æ®çš„å¿«ç…§ã€‚æœ€ä¸»è¦ä½œç”¨æ˜¯è¾…åŠ©namenodeç®¡ç†å…ƒæ•°æ®ä¿¡æ¯</li></ul></li><li>NameNodeä¸Datanodeçš„æ€»ç»“æ¦‚è¿°</li></ul><p><img src="/images/hdfs/image-20200416160339310.png"></p><h5 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h5><p>å—ç¼“å­˜</p><ul><li><p>é€šå¸¸DataNodeä»ç£ç›˜ä¸­è¯»å–å—ï¼Œä½†å¯¹äºè®¿é—®é¢‘ç¹çš„æ–‡ä»¶ï¼Œå…¶å¯¹åº”çš„å—å¯èƒ½è¢«æ˜¾ç¤ºçš„ç¼“å­˜åœ¨DataNodeçš„å†…å­˜ä¸­ï¼Œä»¥å †å¤–å—ç¼“å­˜çš„å½¢å¼å­˜åœ¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå—ä»…ç¼“å­˜åœ¨ä¸€ä¸ªDataNodeçš„å†…å­˜ä¸­ï¼Œå½“ç„¶å¯ä»¥é’ˆå¯¹æ¯ä¸ªæ–‡ä»¶é…ç½®DataNodeçš„æ•°é‡ã€‚ä½œä¸šè°ƒåº¦å™¨é€šè¿‡åœ¨ç¼“å­˜å—çš„DataNodeä¸Šè¿è¡Œä»»åŠ¡ï¼Œå¯ä»¥åˆ©ç”¨å—ç¼“å­˜çš„ä¼˜åŠ¿æé«˜è¯»æ“ä½œçš„æ€§èƒ½ã€‚</p><p>ä¾‹å¦‚ï¼š<br> è¿æ¥ï¼ˆjoinï¼‰æ“ä½œä¸­ä½¿ç”¨çš„ä¸€ä¸ªå°çš„æŸ¥è¯¢è¡¨å°±æ˜¯å—ç¼“å­˜çš„ä¸€ä¸ªå¾ˆå¥½çš„å€™é€‰ã€‚<br> ç”¨æˆ·æˆ–åº”ç”¨é€šè¿‡åœ¨ç¼“å­˜æ± ä¸­å¢åŠ ä¸€ä¸ªcache directiveæ¥å‘Šè¯‰namenodeéœ€è¦ç¼“å­˜å“ªäº›æ–‡ä»¶åŠå­˜å¤šä¹…ã€‚ç¼“å­˜æ± ï¼ˆcache poolï¼‰æ˜¯ä¸€ä¸ªæ‹¥æœ‰ç®¡ç†ç¼“å­˜æƒé™å’Œèµ„æºä½¿ç”¨çš„ç®¡ç†æ€§åˆ†ç»„</p></li></ul><p>hdfsçš„æ–‡ä»¶æƒé™éªŒè¯</p><ul><li><p>hdfsçš„æ–‡ä»¶æƒé™æœºåˆ¶ä¸linuxç³»ç»Ÿçš„æ–‡ä»¶æƒé™æœºåˆ¶ç±»ä¼¼</p><p>r:read  w:write x:execute æƒé™xå¯¹äºæ–‡ä»¶è¡¨ç¤ºå¿½ç•¥ï¼Œå¯¹äºæ–‡ä»¶å¤¹è¡¨ç¤ºæ˜¯å¦æœ‰æƒé™è®¿é—®å…¶å†…å®¹</p><p>å¦‚æœlinuxç³»ç»Ÿç”¨æˆ·zhangsanä½¿ç”¨hadoopå‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–‡ä»¶åœ¨HDFSå½“ä¸­çš„ownerå°±æ˜¯zhangsan</p><p>HDFSæ–‡ä»¶æƒé™çš„ç›®çš„ï¼Œé˜²æ­¢å¥½äººåšé”™äº‹ï¼Œè€Œä¸æ˜¯é˜»æ­¢åäººåšåäº‹ã€‚HDFSç›¸ä¿¡ä½ å‘Šè¯‰æˆ‘ä½ æ˜¯è°ï¼Œä½ å°±æ˜¯è°</p></li></ul><h4 id="HDFSçš„shellå‘½ä»¤æ“ä½œ"><a href="#HDFSçš„shellå‘½ä»¤æ“ä½œ" class="headerlink" title="HDFSçš„shellå‘½ä»¤æ“ä½œ"></a>HDFSçš„shellå‘½ä»¤æ“ä½œ</h4><ul><li>HDFSå‘½ä»¤æœ‰ä¸¤ç§é£æ ¼ï¼š<ul><li>hadoop fså¼€å¤´çš„</li><li>hdfs dfså¼€å¤´çš„</li><li>ä¸¤ç§å‘½ä»¤å‡å¯ä½¿ç”¨ï¼Œæ•ˆæœç›¸åŒ</li></ul></li></ul><p>æŸ¥çœ‹hdfsæˆ–hadoopå­å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯ï¼Œå¦‚lså­å‘½ä»¤</p><pre><code class="hljs shell">hdfs dfs -help lshadoop fs -help ls #ä¸¤ä¸ªå‘½ä»¤ç­‰ä»·</code></pre><p>æŸ¥çœ‹hdfsæ–‡ä»¶ç³»ç»Ÿä¸­æŒ‡å®šç›®å½•çš„æ–‡ä»¶åˆ—è¡¨ã€‚å¯¹æ¯”linuxå‘½ä»¤ls</p><pre><code class="hljs shell">hdfs dfs -ls /hadoop fs -ls /hdfs dfs -ls -R /</code></pre><p>åœ¨hdfsæ–‡ä»¶ç³»ç»Ÿä¸­åˆ›å»ºæ–‡ä»¶</p><pre><code class="hljs shell">hdfs dfs -touchz /edits.txt</code></pre><p>å‘HDFSæ–‡ä»¶ä¸­è¿½åŠ å†…å®¹</p><pre><code class="hljs shell">hadoop fs -appendToFile edit1.xml /edits.txt #å°†æœ¬åœ°ç£ç›˜å½“å‰ç›®å½•çš„edit1.xmlå†…å®¹è¿½åŠ åˆ°HDFSæ ¹ç›®å½• çš„edits.txtæ–‡ä»¶</code></pre><p>æŸ¥çœ‹HDFSæ–‡ä»¶å†…å®¹</p><pre><code class="hljs shell">hdfs dfs -cat /edits.txt</code></pre><p>ä»æœ¬åœ°è·¯å¾„ä¸Šä¼ æ–‡ä»¶è‡³HDFS</p><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">ç”¨æ³•ï¼šhdfs dfs -put /æœ¬åœ°è·¯å¾„ /hdfsè·¯å¾„</span>hdfs dfs -put /linuxæœ¬åœ°ç£ç›˜æ–‡ä»¶ /hdfsè·¯å¾„æ–‡ä»¶hdfs dfs -copyFromLocal /linuxæœ¬åœ°ç£ç›˜æ–‡ä»¶ /hdfsè·¯å¾„æ–‡ä»¶  #è·Ÿputä½œç”¨ä¸€æ ·hdfs dfs -moveFromLocal /linuxæœ¬åœ°ç£ç›˜æ–‡ä»¶ /hdfsè·¯å¾„æ–‡ä»¶  #è·Ÿputä½œç”¨ä¸€æ ·ï¼Œåªä¸è¿‡ï¼Œæºæ–‡ä»¶è¢«æ‹·è´æˆåŠŸåï¼Œä¼šè¢«åˆ é™¤</code></pre><p>åœ¨hdfsæ–‡ä»¶ç³»ç»Ÿä¸­ä¸‹è½½æ–‡ä»¶</p><pre><code class="hljs shell">hdfs dfs -get /hdfsè·¯å¾„ /æœ¬åœ°è·¯å¾„hdfs dfs -copyToLocal /hdfsè·¯å¾„ /æœ¬åœ°è·¯å¾„  #æ ¹getä½œç”¨ä¸€æ ·</code></pre><p>åœ¨hdfsæ–‡ä»¶ç³»ç»Ÿä¸­åˆ›å»ºç›®å½•</p><pre><code class="hljs shell">hdfs dfs -mkdir /shell</code></pre><p>åœ¨hdfsæ–‡ä»¶ç³»ç»Ÿä¸­åˆ é™¤æ–‡ä»¶</p><pre><code class="hljs shell">hdfs dfs -rm /edits.txt</code></pre><p>åœ¨hdfsæ–‡ä»¶ç³»ç»Ÿä¸­ä¿®æ”¹æ–‡ä»¶åç§°ï¼ˆä¹Ÿå¯ä»¥ç”¨æ¥ç§»åŠ¨æ–‡ä»¶åˆ°ç›®å½•ï¼‰</p><pre><code class="hljs shell">hdfs dfs -mv /xcall.sh /call.shhdfs dfs -mv /call.sh /shell</code></pre><p>åœ¨hdfsä¸­æ‹·è´æ–‡ä»¶åˆ°ç›®å½•</p><pre><code class="hljs shell">hdfs dfs -cp /xrsync.sh /shell</code></pre><p>é€’å½’åˆ é™¤ç›®å½•</p><pre><code class="hljs shell">hdfs dfs -rm -r /shell</code></pre><p>åˆ—å‡ºæœ¬åœ°æ–‡ä»¶çš„å†…å®¹ï¼ˆé»˜è®¤æ˜¯hdfsæ–‡ä»¶ç³»ç»Ÿï¼‰</p><pre><code class="hljs shell">hdfs dfs -ls file:///home/hadoop/</code></pre><p>æŸ¥æ‰¾æ–‡ä»¶</p><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> linux findå‘½ä»¤</span>find . -name &#x27;edit*&#x27;<span class="hljs-meta">#</span><span class="bash"> HDFS findå‘½ä»¤</span>hadoop fs -find / -name part-r-00000 # åœ¨HDFSæ ¹ç›®å½•ä¸­ï¼ŒæŸ¥æ‰¾part-r-00000æ–‡ä»¶</code></pre><h4 id="HDFSå®‰å…¨æ¨¡å¼"><a href="#HDFSå®‰å…¨æ¨¡å¼" class="headerlink" title="HDFSå®‰å…¨æ¨¡å¼"></a>HDFSå®‰å…¨æ¨¡å¼</h4><ul><li>å®‰å…¨æ¨¡å¼æ˜¯HDFSæ‰€å¤„çš„ä¸€ç§ç‰¹æ®ŠçŠ¶æ€ï¼Œåœ¨è¿™ç§çŠ¶æ€ä¸‹ï¼Œæ–‡ä»¶ç³»ç»Ÿåªæ¥å—è¯»æ•°æ®è¯·æ±‚ï¼Œè€Œä¸æ¥å—åˆ é™¤ã€ä¿®æ”¹ç­‰å˜æ›´è¯·æ±‚ã€‚åœ¨NameNodeä¸»èŠ‚ç‚¹å¯åŠ¨æ—¶ï¼ŒHDFSé¦–å…ˆè¿›å…¥å®‰å…¨æ¨¡å¼ï¼ŒDataNodeåœ¨å¯åŠ¨çš„æ—¶å€™ä¼šå‘namenodeæ±‡æŠ¥å¯ç”¨çš„blockç­‰çŠ¶æ€ï¼Œå½“æ•´ä¸ªç³»ç»Ÿè¾¾åˆ°å®‰å…¨æ ‡å‡†æ—¶ï¼ŒHDFSè‡ªåŠ¨ç¦»å¼€å®‰å…¨æ¨¡å¼ã€‚å¦‚æœHDFSå‡ºäºå®‰å…¨æ¨¡å¼ä¸‹ï¼Œåˆ™æ–‡ä»¶blockä¸èƒ½è¿›è¡Œä»»ä½•çš„å‰¯æœ¬å¤åˆ¶æ“ä½œï¼Œå› æ­¤è¾¾åˆ°æœ€å°çš„å‰¯æœ¬æ•°é‡è¦æ±‚æ˜¯åŸºäºdatanodeå¯åŠ¨æ—¶çš„çŠ¶æ€æ¥åˆ¤å®šçš„ï¼Œå¯åŠ¨æ—¶ä¸ä¼šå†åšä»»ä½•å¤åˆ¶ï¼ˆä»è€Œè¾¾åˆ°æœ€å°å‰¯æœ¬æ•°é‡è¦æ±‚ï¼‰ï¼Œhdfsé›†ç¾¤åˆšå¯åŠ¨çš„æ—¶å€™ï¼Œé»˜è®¤30Sé’Ÿçš„æ—¶é—´æ˜¯å‡ºäºå®‰å…¨æœŸçš„ï¼Œåªæœ‰è¿‡äº†30Sä¹‹åï¼Œé›†ç¾¤è„±ç¦»äº†å®‰å…¨æœŸï¼Œç„¶åæ‰å¯ä»¥å¯¹é›†ç¾¤è¿›è¡Œæ“ä½œ</li><li>ä½•æ—¶æ¨å‡ºå®‰å…¨æ¨¡å¼<ul><li>namenodeçŸ¥é“é›†ç¾¤å…±å¤šå°‘ä¸ªblockï¼ˆä¸è€ƒè™‘å‰¯æœ¬ï¼‰ï¼Œå‡è®¾å€¼æ˜¯totalï¼›</li><li>namenodeå¯åŠ¨åï¼Œä¼šä¸ŠæŠ¥block reportï¼Œnamenodeå¼€å§‹ç´¯åŠ ç»Ÿè®¡æ»¡è¶³æœ€å°å‰¯æœ¬æ•°ï¼ˆé»˜è®¤1ï¼‰çš„blockä¸ªæ•°ï¼Œå‡è®¾æ˜¯num</li><li>å½“num/total &gt; 99.9%æ—¶ï¼Œæ¨å‡ºå®‰å…¨æ¨¡å¼</li></ul></li></ul><pre><code class="hljs shell">[hadoop@node01 hadoop]$ hdfs dfsadmin -safemode  Usage: hdfs dfsadmin [-safemode enter | leave | get | wait]</code></pre><h4 id="NameNodeå’ŒSecondaryNameNode"><a href="#NameNodeå’ŒSecondaryNameNode" class="headerlink" title="NameNodeå’ŒSecondaryNameNode"></a>NameNodeå’ŒSecondaryNameNode</h4><h5 id="namenodeä¸secondaryName"><a href="#namenodeä¸secondaryName" class="headerlink" title="namenodeä¸secondaryName"></a>namenodeä¸secondaryName</h5><ul><li><p>NameNodeä¸»è¦è´Ÿè´£é›†ç¾¤å½“ä¸­çš„å…ƒæ•°æ®ä¿¡æ¯ç®¡ç†ï¼Œè€Œä¸”å…ƒæ•°æ®ä¿¡æ¯éœ€è¦ç»å¸¸éšæœºè®¿é—®ï¼Œå› ä¸ºå…ƒæ•°æ®ä¿¡æ¯å¿…é¡»é«˜æ•ˆçš„æ£€ç´¢ï¼Œé‚£ä¹ˆå¦‚ä½•ä¿è¯namenodeå¿«é€Ÿæ£€ç´¢å‘¢ï¼Ÿï¼Ÿå…ƒæ•°æ®ä¿¡æ¯ä¿å­˜åœ¨å“ªé‡Œèƒ½å¤Ÿå¿«é€Ÿæ£€ç´¢å‘¢ï¼Ÿï¼Ÿå¦‚ä½•ä¿è¯å…ƒæ•°æ®çš„æŒä¹…å®‰å…¨å‘¢ï¼Ÿï¼Ÿ</p></li><li><p>ä¸ºäº†ä¿è¯å…ƒæ•°æ®ä¿¡æ¯çš„å¿«é€Ÿæ£€ç´¢ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¿…é¡»å°†å…ƒæ•°æ®å­˜æ”¾åœ¨å†…å­˜å½“ä¸­ï¼Œå› ä¸ºåœ¨å†…å­˜å½“ä¸­å…ƒæ•°æ®ä¿¡æ¯èƒ½å¤Ÿæœ€å¿«é€Ÿçš„æ£€ç´¢ï¼Œé‚£ä¹ˆéšç€å…ƒæ•°æ®ä¿¡æ¯çš„å¢å¤šï¼ˆæ¯ä¸ªblockå—å¤§æ¦‚å ç”¨150å­—èŠ‚çš„å…ƒæ•°æ®ä¿¡æ¯ï¼‰ï¼Œå†…å­˜çš„æ¶ˆè€—ä¹Ÿä¼šè¶Šæ¥è¶Šå¤šã€‚</p></li><li><p>å¦‚æœæ‰€æœ‰çš„å…ƒæ•°æ®ä¿¡æ¯éƒ½å­˜æ”¾å†…å­˜ï¼ŒæœåŠ¡å™¨æ–­ç”µï¼Œå†…å­˜å½“ä¸­æ‰€æœ‰æ•°æ®éƒ½æ¶ˆå¤±ï¼Œä¸ºäº†ä¿è¯å…ƒæ•°æ®çš„å®‰å…¨æŒä¹…ï¼Œå…ƒæ•°æ®ä¿¡æ¯å¿…é¡»åšå¯é çš„æŒä¹…åŒ–ï¼Œåœ¨hadoopå½“ä¸­ä¸ºäº†æŒä¹…åŒ–å­˜å‚¨å…ƒæ•°æ®ä¿¡æ¯ï¼Œå°†æ‰€æœ‰çš„å…ƒæ•°æ®ä¿¡æ¯ä¿å­˜åœ¨äº†FSImageæ–‡ä»¶å½“ä¸­ï¼Œé‚£ä¹ˆFSImageéšç€æ—¶é—´æ¨ç§»ï¼Œå¿…ç„¶è¶Šæ¥è¶Šè†¨èƒ€ï¼ŒFSImageçš„æ“ä½œå˜å¾—è¶Šæ¥è¶Šéš¾ï¼Œä¸ºäº†è§£å†³å…ƒæ•°æ®ä¿¡æ¯çš„å¢åˆ æ”¹ï¼Œhadoopå½“ä¸­è¿˜å¼•å…¥äº†å…ƒæ•°æ®æ“ä½œæ—¥å¿—editsæ–‡ä»¶ï¼Œeditsæ–‡ä»¶è®°å½•äº†å®¢æˆ·ç«¯æ“ä½œå…ƒæ•°æ®çš„ä¿¡æ¯ï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œeditsä¿¡æ¯ä¹Ÿä¼šè¶Šæ¥è¶Šå¤§ï¼Œä¸ºäº†è§£å†³editsæ–‡ä»¶è†¨èƒ€çš„é—®é¢˜ï¼Œhadoopå½“ä¸­å¼•å…¥äº†secondaryNamenodeæ¥ä¸“é—¨åšfsimageä¸editsæ–‡ä»¶çš„åˆå¹¶</p></li></ul><p><img src="/images/hdfs/checkpoint.gif"></p><h5 id="namenodeå·¥ä½œæœºåˆ¶"><a href="#namenodeå·¥ä½œæœºåˆ¶" class="headerlink" title="namenodeå·¥ä½œæœºåˆ¶"></a>namenodeå·¥ä½œæœºåˆ¶</h5><p>ï¼ˆ1ï¼‰ç¬¬ä¸€æ¬¡å¯åŠ¨namenodeæ ¼å¼åŒ–åï¼Œåˆ›å»ºfsimageå’Œeditsæ–‡ä»¶ã€‚å¦‚æœä¸æ˜¯ç¬¬ä¸€æ¬¡å¯åŠ¨ï¼Œç›´æ¥åŠ è½½ç¼–è¾‘æ—¥å¿—å’Œé•œåƒæ–‡ä»¶åˆ°å†…å­˜ã€‚</p><p>ï¼ˆ2ï¼‰å®¢æˆ·ç«¯å¯¹å…ƒæ•°æ®è¿›è¡Œå¢åˆ æ”¹çš„è¯·æ±‚</p><p>ï¼ˆ3ï¼‰namenodeè®°å½•æ“ä½œæ—¥å¿—ï¼Œæ›´æ–°æ»šåŠ¨æ—¥å¿—ã€‚</p><p>ï¼ˆ4ï¼‰namenodeåœ¨å†…å­˜ä¸­å¯¹æ•°æ®è¿›è¡Œå¢åˆ æ”¹æŸ¥</p><h5 id="Secondary-NameNodeå·¥ä½œ"><a href="#Secondary-NameNodeå·¥ä½œ" class="headerlink" title="Secondary NameNodeå·¥ä½œ"></a>Secondary NameNodeå·¥ä½œ</h5><p>ï¼ˆ1ï¼‰Secondary NameNodeè¯¢é—®namenodeæ˜¯å¦éœ€è¦checkpointã€‚ç›´æ¥å¸¦å›namenodeæ˜¯å¦æ£€æŸ¥ç»“æœã€‚</p><p>ï¼ˆ2ï¼‰Secondary NameNodeè¯·æ±‚æ‰§è¡Œcheckpointã€‚</p><p>ï¼ˆ3ï¼‰namenodeæ»šåŠ¨æ­£åœ¨å†™çš„editsæ—¥å¿—</p><p>ï¼ˆ4ï¼‰å°†æ»šåŠ¨å‰çš„ç¼–è¾‘æ—¥å¿—å’Œé•œåƒæ–‡ä»¶æ‹·è´åˆ°Secondary NameNode</p><p>ï¼ˆ5ï¼‰Secondary NameNodeåŠ è½½ç¼–è¾‘æ—¥å¿—å’Œé•œåƒæ–‡ä»¶åˆ°å†…å­˜ï¼Œå¹¶åˆå¹¶ã€‚</p><p>ï¼ˆ6ï¼‰ç”Ÿæˆæ–°çš„é•œåƒæ–‡ä»¶fsimage.chkpoint</p><p>ï¼ˆ7ï¼‰ æ‹·è´fsimage.chkpointåˆ°namenode</p><p>ï¼ˆ8ï¼‰namenodeå°†fsimage.chkpointé‡æ–°å‘½åæˆfsimage</p><h5 id="FSImageä¸editsè¯¦è§£"><a href="#FSImageä¸editsè¯¦è§£" class="headerlink" title="FSImageä¸editsè¯¦è§£"></a>FSImageä¸editsè¯¦è§£</h5><ul><li>æ‰€æœ‰çš„å…ƒæ•°æ®ä¿¡æ¯éƒ½ä¿å­˜åœ¨äº†FsImageä¸Eidtsæ–‡ä»¶å½“ä¸­ï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶å°±è®°å½•äº†æ‰€æœ‰çš„æ•°æ®çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œå…ƒæ•°æ®ä¿¡æ¯çš„ä¿å­˜ç›®å½•é…ç½®åœ¨äº†hdfs-site.xmlå½“ä¸­</li></ul><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>dfs.namenode.name.dir<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>file:///weitrue/install/hadoop-2.6.0-cdh5.14.2/hadoopDatas/namenodeDatas<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>dfs.namenode.edits.dir<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>file:///weitrue/install/hadoop-2.6.0-cdh5.14.2/hadoopDatas/dfs/nn/edits<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></code></pre><ul><li><p>å®¢æˆ·ç«¯å¯¹hdfsè¿›è¡Œå†™æ–‡ä»¶æ—¶ä¼šé¦–å…ˆè¢«è®°å½•åœ¨editsæ–‡ä»¶ä¸­ã€‚</p><p>editsä¿®æ”¹æ—¶å…ƒæ•°æ®ä¹Ÿä¼šæ›´æ–°ã€‚</p><p>æ¯æ¬¡hdfsæ›´æ–°æ—¶editså…ˆæ›´æ–°åå®¢æˆ·ç«¯æ‰ä¼šçœ‹åˆ°æœ€æ–°ä¿¡æ¯ã€‚</p><p>fsimage:æ˜¯namenodeä¸­å…³äºå…ƒæ•°æ®çš„é•œåƒï¼Œä¸€èˆ¬ç§°ä¸ºæ£€æŸ¥ç‚¹ã€‚</p><p>ä¸€èˆ¬å¼€å§‹æ—¶å¯¹namenodeçš„æ“ä½œéƒ½æ”¾åœ¨editsä¸­ï¼Œä¸ºä»€ä¹ˆä¸æ”¾åœ¨fsimageä¸­å‘¢ï¼Ÿ</p><p>å› ä¸ºfsimageæ˜¯namenodeçš„å®Œæ•´çš„é•œåƒï¼Œå†…å®¹å¾ˆå¤§ï¼Œå¦‚æœæ¯æ¬¡éƒ½åŠ è½½åˆ°å†…å­˜çš„è¯ç”Ÿæˆæ ‘çŠ¶æ‹“æ‰‘ç»“æ„ï¼Œè¿™æ˜¯éå¸¸è€—å†…å­˜å’ŒCPUã€‚</p><p>fsimageå†…å®¹åŒ…å«äº†namenodeç®¡ç†ä¸‹çš„æ‰€æœ‰datanodeä¸­æ–‡ä»¶åŠæ–‡ä»¶blockåŠblockæ‰€åœ¨çš„datanodeçš„å…ƒæ•°æ®ä¿¡æ¯ã€‚éšç€editså†…å®¹å¢å¤§ï¼Œå°±éœ€è¦åœ¨ä¸€å®šæ—¶é—´ç‚¹å’Œfsimageåˆå¹¶ã€‚</p></li></ul><h5 id="FSimageæ–‡ä»¶å½“ä¸­çš„æ–‡ä»¶ä¿¡æ¯æŸ¥çœ‹"><a href="#FSimageæ–‡ä»¶å½“ä¸­çš„æ–‡ä»¶ä¿¡æ¯æŸ¥çœ‹" class="headerlink" title="FSimageæ–‡ä»¶å½“ä¸­çš„æ–‡ä»¶ä¿¡æ¯æŸ¥çœ‹"></a>FSimageæ–‡ä»¶å½“ä¸­çš„æ–‡ä»¶ä¿¡æ¯æŸ¥çœ‹</h5><ul><li><p>å®˜æ–¹æŸ¥çœ‹æ–‡æ¡£</p><p><a href="http://archive.cloudera.com/cdh5/cdh/5/hadoop-2.6.0-cdh5.14.0/hadoop-project-dist/hadoop-hdfs/HdfsImageViewer.html">http://archive.cloudera.com/cdh5/cdh/5/hadoop-2.6.0-cdh5.14.2/hadoop-project-dist/hadoop-hdfs/HdfsImageViewer.html</a></p></li><li><p>ä½¿ç”¨å‘½ä»¤ hdfs oiv </p></li></ul><pre><code class="hljs shell">cd  /weitrue/install/hadoop-2.6.0-cdh5.14.2/hadoopDatas/namenodeDatas/currenthdfs oiv -i fsimage_0000000000000000864 -p XML -o hello.xml</code></pre><h5 id="editså½“ä¸­çš„æ–‡ä»¶ä¿¡æ¯æŸ¥çœ‹"><a href="#editså½“ä¸­çš„æ–‡ä»¶ä¿¡æ¯æŸ¥çœ‹" class="headerlink" title="editså½“ä¸­çš„æ–‡ä»¶ä¿¡æ¯æŸ¥çœ‹"></a>editså½“ä¸­çš„æ–‡ä»¶ä¿¡æ¯æŸ¥çœ‹</h5><ul><li><p>å®˜æ–¹æŸ¥çœ‹æ–‡æ¡£</p><p><a href="http://archive.cloudera.com/cdh5/cdh/5/hadoop-2.6.0-cdh5.14.0/hadoop-project-dist/hadoop-hdfs/HdfsEditsViewer.html">http://archive.cloudera.com/cdh5/cdh/5/hadoop-2.6.0-cdh5.14.2/hadoop-project-dist/hadoop-hdfs/HdfsEditsViewer.html</a></p></li><li><p>æŸ¥çœ‹å‘½ä»¤ hdfs oev</p></li></ul><pre><code class="hljs shell">cd /weitrue/install/hadoop-2.6.0-cdh5.14.2/hadoopDatas/dfs/nn/editshdfs oev -i edits_0000000000000000865-0000000000000000866 -o myedit.xml -p XML</code></pre><h5 id="secondarynameNodeå¦‚ä½•è¾…åŠ©ç®¡ç†FSImageä¸Editsæ–‡ä»¶"><a href="#secondarynameNodeå¦‚ä½•è¾…åŠ©ç®¡ç†FSImageä¸Editsæ–‡ä»¶" class="headerlink" title="secondarynameNodeå¦‚ä½•è¾…åŠ©ç®¡ç†FSImageä¸Editsæ–‡ä»¶"></a>secondarynameNodeå¦‚ä½•è¾…åŠ©ç®¡ç†FSImageä¸Editsæ–‡ä»¶</h5><h5 id="namenodeå…ƒæ•°æ®ä¿¡æ¯å¤šç›®å½•é…ç½®"><a href="#namenodeå…ƒæ•°æ®ä¿¡æ¯å¤šç›®å½•é…ç½®" class="headerlink" title="namenodeå…ƒæ•°æ®ä¿¡æ¯å¤šç›®å½•é…ç½®"></a>namenodeå…ƒæ•°æ®ä¿¡æ¯å¤šç›®å½•é…ç½®</h5><ul><li><p>ä¸ºäº†ä¿è¯å…ƒæ•°æ®çš„å®‰å…¨æ€§ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯å…ˆç¡®å®šå¥½æˆ‘ä»¬çš„ç£ç›˜æŒ‚è½½ç›®å½•ï¼Œå°†å…ƒæ•°æ®çš„ç£ç›˜åšRAID1</p><p>namenodeçš„æœ¬åœ°ç›®å½•å¯ä»¥é…ç½®æˆå¤šä¸ªï¼Œä¸”æ¯ä¸ªç›®å½•å­˜æ”¾å†…å®¹ç›¸åŒï¼Œå¢åŠ äº†å¯é æ€§ã€‚</p></li><li><p>å…·ä½“é…ç½®å¦‚ä¸‹ï¼š</p><p>hdfs-site.xml</p></li></ul><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>dfs.namenode.name.dir<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>file:///weitrue/install/hadoop-2.6.0-cdh5.14.2/hadoopDatas/namenodeDatas<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></code></pre>]]></content>
    
    
    <categories>
      
      <category>Bdata</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hadoop</tag>
      
      <tag>å¤§æ•°æ®</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€Linuxã€‘Dockerå®‰è£…ä¸ä½¿ç”¨</title>
    <link href="/2020/06/24/Docker%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"/>
    <url>/2020/06/24/Docker%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><img src="/images/Mac%E7%94%B5%E8%84%91%E4%BD%BF%E7%94%A8/mac.jpg"><a id="more"></a> </p><p><strong>Dockerå®‰è£…ä¸ä½¿ç”¨</strong></p><p><strong>å®˜æ–¹æ–‡æ¡£</strong></p><p><a href="https://links.jianshu.com/go?to=https://docs.docker.com/install/linux/docker-ce/centos/">https://docs.docker.com/install/linux/docker-ce/centos/</a></p><p><strong>å®‰è£…æ–¹å¼</strong></p><ul><li>è®¾ç½®dockeræºçš„æ–¹å¼æ¥å®‰è£…(ç®€å•ï¼Œ å®˜æ–¹æ¨è)</li><li>ä¸‹è½½rpmåŒ…çš„æ–¹å¼å®‰è£…(é€‚ç”¨äºç¦»çº¿ç¯å¢ƒ)</li><li>ä½¿ç”¨è„šæœ¬å®‰è£…(é€‚ç”¨äºæµ‹è¯•å’Œå¼€å‘ç¯å¢ƒ)</li></ul><p><strong>dockeræºæ–¹å¼å®‰è£…</strong></p><p>ï¼ˆ1ï¼‰æ›´æ–°yumï¼Œ å®‰è£…ä¾èµ–</p><pre><code class="hljs sql">yum <span class="hljs-keyword">update</span>yum <span class="hljs-keyword">install</span> -y yum-utils device-mapper-persistent-<span class="hljs-keyword">data</span> lvm2</code></pre><p><img src="/images/Docker%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/1.png"></p><p>ï¼ˆ2ï¼‰å°†dockeræºæ·»åŠ åˆ°ç³»ç»Ÿä¸­</p><pre><code class="hljs awk">yum-config-manager --add-repo https:<span class="hljs-regexp">//</span>download.docker.com<span class="hljs-regexp">/linux/</span>centos/docker-ce.repo</code></pre><p><img src="/images/Docker%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/1-1.png"></p><p>ï¼ˆ3ï¼‰Dockerå®‰è£…</p><pre><code class="hljs vim">yum install docker-<span class="hljs-keyword">ce</span> docker-<span class="hljs-keyword">ce</span>-cli containerd.io</code></pre><p>æ­¤æ—¶ï¼Œå¯èƒ½ä¼šæŠ¥é”™ï¼š</p><p><img src="/images/Docker%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/2.png"></p><p>è¯¥å›¾ä¸­åŸå› æ˜¯</p><p>containerd.ioæ­¤è½¯ä»¶åŒ…å·²ç»å®‰è£…ï¼Œå¹¶ä¸”æ˜¯è¾ƒä½ç‰ˆæœ¬ï¼Œä¸è¦å®‰è£…çš„docker-ceæ‰€ä¾èµ–containerd.ioçš„ç‰ˆæœ¬ä¸ç¬¦ï¼Œå› æ­¤æœ€å¥½å®‰è£…è¾ƒæ–°ç‰ˆæœ¬çš„containerd.io</p><pre><code class="hljs awk"><span class="hljs-comment"># ä¸‹é¢ç½‘å€å¯ä»¥çœ‹åˆ°ä¸€ç³»åˆ—ç‰ˆæœ¬çš„containerd.io</span>https:<span class="hljs-regexp">//</span>download.docker.com<span class="hljs-regexp">/linux/</span>centos<span class="hljs-regexp">/7/</span>x86_64<span class="hljs-regexp">/edge/</span>Packages/<span class="hljs-comment">#wget å‘½ä»¤ä¸‹è½½æŒ‡å®šç‰ˆæœ¬çš„containerd.ioï¼ˆå¦‚æœæœªå®‰è£…wgetï¼Œéœ€è¦yum -y install wgetï¼‰</span>wget https:<span class="hljs-regexp">//</span>download.docker.com<span class="hljs-regexp">/linux/</span>centos<span class="hljs-regexp">/7/</span>x86_64<span class="hljs-regexp">/edge/</span>Packages/containerd.io-<span class="hljs-number">1.2</span>.<span class="hljs-number">6</span>-<span class="hljs-number">3.3</span>.el7.x86_64.rpm</code></pre><p><img src="/images/Docker%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/3.png"></p><p> é‡æ–°å®‰è£…Docker</p><pre><code class="hljs cmake">yum -y <span class="hljs-keyword">install</span> docker-ce</code></pre><p><img src="/images/Docker%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/4.png"></p><p>ï¼ˆ4ï¼‰Dockerå¯åŠ¨è®¾ç½®-â€”å¯åŠ¨dockerå’Œæ·»åŠ å¼€å¯è‡ªå¯åŠ¨</p><pre><code class="hljs pgsql">systemctl <span class="hljs-keyword">enable</span> dockersystemctl <span class="hljs-keyword">start</span> docker</code></pre><p><img src="/images/Docker%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/5.png"></p><p>ï¼ˆ5ï¼‰æŸ¥çœ‹Dockerç‰ˆæœ¬</p><pre><code class="hljs ebnf"><span class="hljs-attribute">docker -v</span></code></pre><p><strong>3. Dockerä½¿ç”¨</strong></p><p><strong>3.1 dockerå‘½ä»¤</strong></p><p>ï¼ˆ1ï¼‰å‘½ä»¤å¸®åŠ©ï¼ˆ-hå·²è¢«å¼ƒç”¨ï¼‰</p><pre><code class="hljs ada">docker <span class="hljs-comment">--help</span></code></pre><p>ï¼ˆ2ï¼‰å¸¸ç”¨é€‰é¡¹è¯´æ˜</p><ul><li><p>-d, â€“detach=falseï¼Œ æŒ‡å®šå®¹å™¨è¿è¡Œäºå‰å°è¿˜æ˜¯åå°ï¼Œé»˜è®¤ä¸ºfalse</p></li><li><p>-i, â€“interactive=falseï¼Œ æ‰“å¼€STDINï¼Œç”¨äºæ§åˆ¶å°äº¤äº’</p></li><li><p>-t, â€“tty=falseï¼Œ åˆ†é…ttyè®¾å¤‡ï¼Œè¯¥å¯ä»¥æ”¯æŒç»ˆç«¯ç™»å½•ï¼Œé»˜è®¤ä¸ºfalse</p></li><li><p>-u, â€“user=â€â€ï¼Œ æŒ‡å®šå®¹å™¨çš„ç”¨æˆ·</p></li><li><p>-a, â€“attach=[]ï¼Œ ç™»å½•å®¹å™¨ï¼ˆå¿…é¡»æ˜¯ä»¥docker run -då¯åŠ¨çš„å®¹å™¨ï¼‰</p></li><li><p>-w, â€“workdir=â€â€ï¼Œ æŒ‡å®šå®¹å™¨çš„å·¥ä½œç›®å½•</p></li><li><p>-c, â€“cpu-shares=0ï¼Œ è®¾ç½®å®¹å™¨CPUæƒé‡ï¼Œåœ¨CPUå…±äº«åœºæ™¯ä½¿ç”¨</p></li><li><p>-e, â€“env=[]ï¼Œ æŒ‡å®šç¯å¢ƒå˜é‡ï¼Œå®¹å™¨ä¸­å¯ä»¥ä½¿ç”¨è¯¥ç¯å¢ƒå˜é‡</p></li><li><p>-m, â€“memory=â€â€ï¼Œ æŒ‡å®šå®¹å™¨çš„å†…å­˜ä¸Šé™</p></li><li><p>-P, â€“publish-all=falseï¼Œ æŒ‡å®šå®¹å™¨æš´éœ²çš„ç«¯å£</p></li><li><p>-p, â€“publish=[]ï¼Œ æŒ‡å®šå®¹å™¨æš´éœ²çš„ç«¯å£</p></li><li><p>-h, â€“hostname=â€â€ï¼Œ æŒ‡å®šå®¹å™¨çš„ä¸»æœºå</p></li><li><p>-v, â€“volume=[]ï¼Œ ç»™å®¹å™¨æŒ‚è½½å­˜å‚¨å·ï¼ŒæŒ‚è½½åˆ°å®¹å™¨çš„æŸä¸ªç›®å½•</p></li><li><p>â€“volumes-from=[]ï¼Œ ç»™å®¹å™¨æŒ‚è½½å…¶ä»–å®¹å™¨ä¸Šçš„å·ï¼ŒæŒ‚è½½åˆ°å®¹å™¨çš„æŸä¸ªç›®å½•</p></li><li><p>â€“cap-add=[]ï¼Œ æ·»åŠ æƒé™ï¼Œæƒé™æ¸…å•è¯¦è§ï¼š<a href="http://linux.die.net/man/7/capabilities">http://linux.die.net/man/7/capabilities</a></p></li><li><p>â€“cap-drop=[]ï¼Œ åˆ é™¤æƒé™ï¼Œæƒé™æ¸…å•è¯¦è§ï¼š<a href="http://linux.die.net/man/7/capabilities">http://linux.die.net/man/7/capabilities</a></p></li><li><p>â€“cidfile=â€â€ï¼Œ è¿è¡Œå®¹å™¨åï¼Œåœ¨æŒ‡å®šæ–‡ä»¶ä¸­å†™å…¥å®¹å™¨PIDå€¼ï¼Œä¸€ç§å…¸å‹çš„ç›‘æ§ç³»ç»Ÿç”¨æ³•</p></li><li><p>â€“cpuset=â€â€ï¼Œ è®¾ç½®å®¹å™¨å¯ä»¥ä½¿ç”¨å“ªäº›CPUï¼Œæ­¤å‚æ•°å¯ä»¥ç”¨æ¥å®¹å™¨ç‹¬å CPU</p></li><li><p>â€“device=[]ï¼Œ æ·»åŠ ä¸»æœºè®¾å¤‡ç»™å®¹å™¨ï¼Œç›¸å½“äºè®¾å¤‡ç›´é€š</p></li><li><p>â€“dns=[]ï¼Œ æŒ‡å®šå®¹å™¨çš„dnsæœåŠ¡å™¨</p></li><li><p>â€“dns-search=[]ï¼Œ æŒ‡å®šå®¹å™¨çš„dnsæœç´¢åŸŸåï¼Œå†™å…¥åˆ°å®¹å™¨çš„/etc/resolv.confæ–‡ä»¶</p></li><li><p>â€“entrypoint=â€â€ï¼Œ è¦†ç›–imageçš„å…¥å£ç‚¹</p></li><li><p>â€“env-file=[]ï¼Œ æŒ‡å®šç¯å¢ƒå˜é‡æ–‡ä»¶ï¼Œæ–‡ä»¶æ ¼å¼ä¸ºæ¯è¡Œä¸€ä¸ªç¯å¢ƒå˜é‡</p></li><li><p>â€“expose=[]ï¼Œ æŒ‡å®šå®¹å™¨æš´éœ²çš„ç«¯å£ï¼Œå³ä¿®æ”¹é•œåƒçš„æš´éœ²ç«¯å£</p></li><li><p>â€“link=[]ï¼Œ æŒ‡å®šå®¹å™¨é—´çš„å…³è”ï¼Œä½¿ç”¨å…¶ä»–å®¹å™¨çš„IPã€envç­‰ä¿¡æ¯</p></li><li><p>â€“lxc-conf=[]ï¼Œ æŒ‡å®šå®¹å™¨çš„é…ç½®æ–‡ä»¶ï¼Œåªæœ‰åœ¨æŒ‡å®šâ€“exec-driver=lxcæ—¶ä½¿ç”¨</p></li><li><p>â€“name=â€â€ï¼Œ æŒ‡å®šå®¹å™¨åå­—ï¼Œåç»­å¯ä»¥é€šè¿‡åå­—è¿›è¡Œå®¹å™¨ç®¡ç†ï¼Œlinksç‰¹æ€§éœ€è¦ä½¿ç”¨åå­—</p></li><li><p>â€“net=â€bridgeâ€ï¼Œ å®¹å™¨ç½‘ç»œè®¾ç½®:</p></li><li><ul><li>bridge ä½¿ç”¨docker daemonæŒ‡å®šçš„ç½‘æ¡¥</li><li>host //å®¹å™¨ä½¿ç”¨ä¸»æœºçš„ç½‘ç»œ</li><li>container:NAME_or_ID &gt;//ä½¿ç”¨å…¶ä»–å®¹å™¨çš„ç½‘è·¯ï¼Œå…±äº«IPå’ŒPORTç­‰ç½‘ç»œèµ„æº</li><li>none å®¹å™¨ä½¿ç”¨è‡ªå·±çš„ç½‘ç»œï¼ˆç±»ä¼¼â€“net=bridgeï¼‰ï¼Œä½†æ˜¯ä¸è¿›è¡Œé…ç½®</li></ul></li><li><p>â€“privileged=falseï¼Œ æŒ‡å®šå®¹å™¨æ˜¯å¦ä¸ºç‰¹æƒå®¹å™¨ï¼Œç‰¹æƒå®¹å™¨æ‹¥æœ‰æ‰€æœ‰çš„capabilities</p></li><li><p>â€“restart=â€noâ€ï¼Œ æŒ‡å®šå®¹å™¨åœæ­¢åçš„é‡å¯ç­–ç•¥:</p></li><li><ul><li>noï¼šå®¹å™¨é€€å‡ºæ—¶ä¸é‡å¯</li><li>on-failureï¼šå®¹å™¨æ•…éšœé€€å‡ºï¼ˆè¿”å›å€¼éé›¶ï¼‰æ—¶é‡å¯</li><li>alwaysï¼šå®¹å™¨é€€å‡ºæ—¶æ€»æ˜¯é‡å¯</li></ul></li><li><p>â€“rm=falseï¼Œ æŒ‡å®šå®¹å™¨åœæ­¢åè‡ªåŠ¨åˆ é™¤å®¹å™¨(ä¸æ”¯æŒä»¥docker run -då¯åŠ¨çš„å®¹å™¨)</p></li><li><p>â€“sig-proxy=trueï¼Œ è®¾ç½®ç”±ä»£ç†æ¥å—å¹¶å¤„ç†ä¿¡å·ï¼Œä½†æ˜¯SIGCHLDã€SIGSTOPå’ŒSIGKILLä¸èƒ½è¢«ä»£ç†</p></li></ul><p><strong>3.2 éƒ¨ç½²/è¿è¡Œé•œåƒ</strong></p><p><strong>3.2.1 pullæ–¹å¼</strong></p><p>ï¼ˆ1ï¼‰ä¸‹è½½å‘½ä»¤</p><pre><code class="hljs nginx"><span class="hljs-attribute">docker</span> pull é•œåƒå</code></pre><p>ï¼ˆ2ï¼‰[ä¾‹å¦‚]ä¸‹è½½gitlab</p><pre><code class="hljs nginx"><span class="hljs-attribute">docker</span> pull gitlab/gitlab-ce</code></pre><p>ä¸‹è½½çš„é•œåƒæ‰€åœ¨ä½ç½®ï¼ˆå…¶ä¸­ä¸€ä¸ªï¼‰</p><pre><code class="hljs crystal">cd var/<span class="hljs-class"><span class="hljs-keyword">lib</span>/<span class="hljs-title">docker</span>/<span class="hljs-title">containers</span></span></code></pre><p><img src="/images/Docker%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/6.png"></p><p>ï¼ˆ3ï¼‰æŸ¥çœ‹é•œåƒè¯¦ç»†ä¿¡æ¯</p><pre><code class="hljs gradle">docker <span class="hljs-keyword">inspect</span> gitlab/gitlab-ce</code></pre><p>ï¼ˆ4ï¼‰è¿è¡Œé•œåƒ</p><pre><code class="hljs awk">docker run --detach \  --hostname <span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span> \  --publish <span class="hljs-number">10443</span>:<span class="hljs-number">443</span> --publish <span class="hljs-number">1080</span>:<span class="hljs-number">80</span> --publish <span class="hljs-number">1022</span>:<span class="hljs-number">22</span> \  --name gitlab \  --restart always \  --volume <span class="hljs-regexp">/srv/gi</span>tlab<span class="hljs-regexp">/config:/</span>etc/gitlab \  --volume <span class="hljs-regexp">/srv/gi</span>tlab<span class="hljs-regexp">/logs:/</span>var<span class="hljs-regexp">/log/gi</span>tlab \  --volume <span class="hljs-regexp">/srv/gi</span>tlab<span class="hljs-regexp">/data:/</span>var<span class="hljs-regexp">/opt/gi</span>tlab \  gitlab/gitlab-ce:latest</code></pre><p>è¿™é‡Œï¼Œ</p><p>127.0.0.1ä¸ºæœåŠ¡å™¨IPåœ°å€ï¼›</p><p>â€“publish 10443:443 â€“publish 1080:80 â€“publish 1022:22 æ˜¯æŒ‡å°†443ç«¯å£å¯¹å¤–æ˜ å°„ï¼ˆæš´éœ²ï¼‰æˆ10443ï¼Œ22ç«¯å£å¯¹å¤–æ˜ å°„ï¼ˆæš´éœ²ï¼‰æˆ1022ï¼Œ80ç«¯å£å¯¹å¤–æ˜ å°„ï¼ˆæš´éœ²ï¼‰æˆ1080ã€‚</p><p>ï¼ˆ5ï¼‰è®¿é—®gitlab</p><p><img src="/images/Docker%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/7.png"></p><p><strong>3.2.2 å®¹å™¨åŒ–ï¼ˆgithub.comä¸Šé¡¹ç›®ï¼‰</strong></p><p><strong>3.3 åˆ é™¤é•œåƒ</strong></p><p>ï¼ˆ1ï¼‰æŸ¥çœ‹é•œåƒ</p><pre><code class="hljs ebnf"><span class="hljs-attribute">docker ps -a</span></code></pre><p>è¿™é‡Œdocker ps çš„å‘½ä»¤åŒ…æ‹¬ï¼š </p><ul><li>-a åˆ—å‡ºæ‰€æœ‰å®¹å™¨ </li><li>-l åˆ—å‡ºæœ€æ–°åˆ›å»ºå®¹å™¨ </li><li>-n=2 åˆ—å‡ºæœ€è¿‘åˆ›å»ºçš„2ä¸ªå®¹å™¨ </li><li>-q ä»…åˆ—å‡ºå®¹å™¨ID </li><li>-s æ˜¾ç¤ºå®¹å™¨å¤§å° </li></ul><p><img src="/images/Docker%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/8.png"></p><p>å…¶ä¸­ï¼Œ</p><p>CONTAINER IDï¼šå®¹å™¨ID</p><p>IMAGEï¼šé•œåƒå</p><p><strong>æ³¨æ„</strong>ï¼šå¦‚æœå®¹å™¨æ­£åœ¨è¿è¡Œæ˜¯æ— æ³•åˆ é™¤ï¼Œéœ€è¦å…ˆåœæ­¢</p><p>ï¼ˆ2ï¼‰stopå®¹å™¨</p><pre><code class="hljs sql">docker <span class="hljs-keyword">stop</span>&lt;å®¹å™¨<span class="hljs-keyword">ID</span>æˆ–å®¹å™¨å&gt;</code></pre><p><img src="/images/Docker%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/9.png"></p><p>ï¼ˆ3ï¼‰åˆ é™¤å®¹å™¨</p><pre><code class="hljs xml">docker rm <span class="hljs-tag">&lt;<span class="hljs-name">å®¹å™¨IDæˆ–å®¹å™¨å</span>&gt;</span></code></pre><p>ï¼ˆ4ï¼‰åˆ é™¤é•œåƒ</p><pre><code class="hljs xml">docker rmi <span class="hljs-tag">&lt;<span class="hljs-name">é•œåƒIDæˆ–é•œåƒå</span>&gt;</span></code></pre><p>é•œåƒIDå¯ä»¥é€šè¿‡docker images</p><pre><code class="hljs ebnf"><span class="hljs-attribute">docker images</span></code></pre><p><img src="/images/Docker%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/10.png"></p><p>æˆ–docker image ls</p><pre><code class="hljs mel">docker <span class="hljs-keyword">image</span> <span class="hljs-keyword">ls</span></code></pre><p><img src="/images/Docker%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/11.png"></p><p><strong>3.4 ä¿®æ”¹æ˜ å°„ç«¯å£</strong></p><p><strong>3.4.1 é‡æ–°éƒ¨ç½²é•œåƒ</strong></p><p><strong>3.4.2 ä¿®æ”¹éƒ¨ç½²å®¹å™¨é…ç½®æ–‡ä»¶</strong></p><p>ï¼ˆ1ï¼‰åœæ­¢éœ€è¦ä¿®æ”¹çš„å®¹å™¨</p><pre><code class="hljs livecodeserver">docker ps -<span class="hljs-keyword">a</span> docker <span class="hljs-built_in">stop</span> &lt;å®¹å™¨IDæˆ–å®¹å™¨å&gt;</code></pre><p>ï¼ˆ2ï¼‰æ‰¾åˆ°hostconfig.jsonæ–‡ä»¶</p><pre><code class="hljs apache"><span class="hljs-attribute">cd</span> /var/lib/docker/containers/&lt;å®¹å™¨å¯¹åº”IDç›®å½•ï¼Œä¾‹å¦‚<span class="hljs-number">651</span>dcd<span class="hljs-number">904</span>c<span class="hljs-number">5</span>eec<span class="hljs-number">9617</span>ea<span class="hljs-number">006</span>f<span class="hljs-number">2</span>ac<span class="hljs-number">3</span>e<span class="hljs-number">59</span>a<span class="hljs-number">9</span>a<span class="hljs-number">015</span>de<span class="hljs-number">237</span>cae<span class="hljs-number">891</span>fc<span class="hljs-number">5</span>ef<span class="hljs-number">46</span>a<span class="hljs-number">17</span>bd<span class="hljs-number">3033</span>&gt;/</code></pre><p><img src="/images/Docker%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/12.png"></p><p>ï¼ˆ3ï¼‰ä¿®æ”¹hostconfig.jsonæ–‡ä»¶ä¸­â€PortBindingsâ€é…ç½®</p><pre><code class="hljs css"><span class="hljs-selector-tag">vim</span> <span class="hljs-selector-tag">hostconfig</span><span class="hljs-selector-class">.json</span></code></pre><p><img src="/images/Docker%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/13.png"></p><p>ï¼ˆ4ï¼‰é‡å¯docker[éå¸¸é‡è¦]ï¼Œå¦åˆ™ä¿®æ”¹ä¼šå¤±æ•ˆ</p><pre><code class="hljs ebnf"><span class="hljs-attribute">systemctl restart docker</span></code></pre><p>ï¼ˆ5ï¼‰å¯åŠ¨ä¿®æ”¹åçš„å®¹å™¨</p><pre><code class="hljs sql">docker <span class="hljs-keyword">start</span> &lt;å®¹å™¨<span class="hljs-keyword">ID</span>æˆ–å®¹å™¨å&gt;</code></pre><p>ï¼ˆ6ï¼‰æŸ¥çœ‹æ˜¯å¦ä¿®æ”¹æˆåŠŸ</p><pre><code class="hljs ebnf"><span class="hljs-attribute">docker ps -a</span></code></pre><p><img src="/images/Docker%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/14.png"></p><p><strong>Dockeré•œåƒéƒ¨ç½²å®¹å™¨</strong></p><p><strong>æ‹‰å–è¿œç«¯é•œåƒæ–¹å¼</strong></p><p><strong>1.éƒ¨ç½²gitlabï¼ˆç§æœ‰ä»£ç åº“ï¼‰</strong></p><pre><code class="hljs awk">docker pull gitlab/gitlab-cedocker run --detach \  --publish <span class="hljs-number">443</span>:<span class="hljs-number">443</span> --publish <span class="hljs-number">80</span>:<span class="hljs-number">80</span> --publish <span class="hljs-number">1022</span>:<span class="hljs-number">22</span> \  --name gitlab \  --restart always \  --volume <span class="hljs-regexp">/srv/gi</span>tlab<span class="hljs-regexp">/config:/</span>etc/gitlab \  --volume <span class="hljs-regexp">/srv/gi</span>tlab<span class="hljs-regexp">/logs:/</span>var<span class="hljs-regexp">/log/gi</span>tlab \  --volume <span class="hljs-regexp">/srv/gi</span>tlab<span class="hljs-regexp">/data:/</span>var<span class="hljs-regexp">/opt/gi</span>tlab \  gitlab/gitlab-ce:latest</code></pre><p><strong>2.éƒ¨ç½²portainerï¼ˆdockerå¯è§†åŒ–ç®¡ç†å·¥å…·ï¼‰</strong></p><pre><code class="hljs awk">docker pull docker.io<span class="hljs-regexp">/portainer/</span>portainerdocker run --detach \    --hostname <span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span> \    --publish <span class="hljs-number">9000</span>:<span class="hljs-number">9000</span> \    --name portainer\    --restart=always \    --volume <span class="hljs-regexp">/var/</span>run<span class="hljs-regexp">/docker.sock:/</span>var<span class="hljs-regexp">/run/</span>docker.sock \    docker.io<span class="hljs-regexp">/portainer/</span>portainer</code></pre><p><strong>3.éƒ¨ç½²jenkins</strong></p><pre><code class="hljs jboss-cli">mkdir -p <span class="hljs-string">/srv/jenkins</span>chown -R 1000<span class="hljs-function">:1000</span> <span class="hljs-string">/srv/jenkins/</span>docker pull jenkins/jenkins<span class="hljs-function">:alpine</span>docker inspect jenkins/jenkins<span class="hljs-function">:alpine</span>docker run <span class="hljs-params">--detach</span> \    <span class="hljs-params">--publish</span> 8080<span class="hljs-function">:8080</span> <span class="hljs-params">--publish</span> 50000<span class="hljs-function">:50000</span> \    <span class="hljs-params">--restart</span> unless-stopped \    <span class="hljs-params">--name</span> jenkins \    <span class="hljs-params">--volume</span> <span class="hljs-string">/srv/jenkins</span>:<span class="hljs-string">/var/jenkins_home</span> \    jenkins/jenkins<span class="hljs-function">:alpine</span></code></pre><p><strong>4.éƒ¨ç½²gitlab-runner</strong></p><pre><code class="hljs awk">mkdir -p <span class="hljs-regexp">/srv/</span>docker pull gitlab/gitlab-runnerdocker run -d --name gitlab-runner --restart always \    --volume <span class="hljs-regexp">/srv/gi</span>tlab-runner<span class="hljs-regexp">/config:/</span>etc/gitlab-runner \    --volume <span class="hljs-regexp">/srv/gi</span>tlab-runner<span class="hljs-regexp">/run/</span>docker.sock:<span class="hljs-regexp">/var/</span>run/docker.sock \    gitlab/gitlab-runner:latest</code></pre><p><strong>5.éƒ¨ç½²RabbitMQ</strong></p><p>è·å–æŸ¥è¯¢çš„é•œåƒ </p><pre><code class="hljs css"><span class="hljs-selector-tag">docker</span> <span class="hljs-selector-tag">search</span> <span class="hljs-selector-tag">rabbitmq</span><span class="hljs-selector-pseudo">:management</span></code></pre><p><img src="/images/Docker%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/15.png"></p><p>æ‹‰å–é•œåƒ </p><pre><code class="hljs css"><span class="hljs-selector-tag">docker</span> <span class="hljs-selector-tag">pull</span> <span class="hljs-selector-tag">rabbitmq</span><span class="hljs-selector-pseudo">:management</span></code></pre><p><img src="/images/Docker%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/16.png"></p><pre><code class="hljs crystal"><span class="hljs-comment"># è¿è¡Œé•œåƒ    </span>docker run -d \    -p <span class="hljs-number">5672</span>:<span class="hljs-number">5672</span> -p <span class="hljs-number">15672</span>:<span class="hljs-number">15672</span> \    --restart=always \    --name rabbitmq \    -v <span class="hljs-string">`pwd`</span>/<span class="hljs-symbol">data:</span>/var/<span class="hljs-class"><span class="hljs-keyword">lib</span>/<span class="hljs-title">rabbitmq</span> \</span>    -e RABBITMQ_DEFAULT_USER=admin -e RABBITMQ_DEFAULT_PASS=<span class="hljs-number">2018251</span> \     <span class="hljs-symbol">rabbitmq:</span>management</code></pre><pre><code class="hljs crystal">docker run -d \    -p <span class="hljs-number">5000</span>:<span class="hljs-number">5000</span> \    --restart always \    --name registry \    -v /srv/registry/<span class="hljs-symbol">registry:</span>/var/<span class="hljs-class"><span class="hljs-keyword">lib</span>/<span class="hljs-title">registry</span> \</span>    <span class="hljs-symbol">registry:</span>latest</code></pre>]]></content>
    
    
    <categories>
      
      <category>Develop</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
      <tag>Linux</tag>
      
      <tag>Center OS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€Macã€‘Macä½¿ç”¨</title>
    <link href="/2020/06/22/Mac%E7%94%B5%E8%84%91%E4%BD%BF%E7%94%A8/"/>
    <url>/2020/06/22/Mac%E7%94%B5%E8%84%91%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><img src="/images/Mac%E7%94%B5%E8%84%91%E4%BD%BF%E7%94%A8/mac.jpg"><a id="more"></a> </p><h3 id="Homebrew"><a href="#Homebrew" class="headerlink" title="Homebrew"></a>Homebrew</h3><h4 id="å®˜ç½‘"><a href="#å®˜ç½‘" class="headerlink" title="å®˜ç½‘:"></a>å®˜ç½‘:</h4><p><a href="https://docs.brew.sh/Installation.html">https://docs.brew.sh/Installation.html</a></p><h4 id="gihubæº"><a href="#gihubæº" class="headerlink" title="gihubæº"></a>gihubæº</h4><p><a href="https://github.com/Homebrew/install">https://github.com/Homebrew/install</a></p><h4 id="homebrewå®‰è£…"><a href="#homebrewå®‰è£…" class="headerlink" title="homebrewå®‰è£…"></a>homebrewå®‰è£…</h4><pre><code class="hljs awk"><span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/ruby -e &quot;$(curl -fsSL https:/</span><span class="hljs-regexp">/raw.githubusercontent.com/</span>Homebrew<span class="hljs-regexp">/install/m</span>aster/install)<span class="hljs-string">&quot;</span></code></pre><p>å¯èƒ½ä¼šå‡ºç°æŠ¥é”™</p><pre><code class="hljs routeros">curl: (7) Failed <span class="hljs-keyword">to</span> connect <span class="hljs-keyword">to</span> raw.githubusercontent.com<span class="hljs-built_in"> port </span>443:<span class="hljs-built_in"> Connection </span>refused</code></pre><p>æ ¹æ®æç¤ºå¯ä»¥çŸ¥é“è¢«raw.githubusercontent.comæ‹’ç»è®¿é—®ï¼Œæ‰“å¼€æµè§ˆå™¨è®¿é—®<a href="https://raw.githubusercontent.comä¹Ÿæ˜¯å¤±è´¥çš„,æ‰€ä»¥æ­¤æ—¶æ˜¯ç”µè„‘ä¸https//raw.githubusercontent.com%E7%9A%84%E8%BF%9E%E6%8E%A5%E9%97%AE%E9%A2%98%EF%BC%9A%E5%8F%AF%E4%BB%A5%E8%80%83%E8%99%91ruby%E7%9A%84%E6%9B%B4%E6%96%B0%E6%BA%90">https://raw.githubusercontent.comä¹Ÿæ˜¯å¤±è´¥çš„ï¼Œæ‰€ä»¥æ­¤æ—¶æ˜¯ç”µè„‘ä¸https://raw.githubusercontent.comçš„è¿æ¥é—®é¢˜ï¼šå¯ä»¥è€ƒè™‘rubyçš„æ›´æ–°æº</a></p><pre><code class="hljs shell">æŸ¥çœ‹å½“å‰æ›´æ–°æºgem sources -l                // é»˜è®¤æƒ…å†µä¸‹ä¼šæ˜¾ç¤ºhttps://rubygems.org/ è¯¥rubyæºåœ¨å¢™å†…ï¼Œå¾ˆå¤šå†…å®¹æ— æ³•è®¿é—®åˆ°gem source -a https://gems.ruby-china.com    // æ›´æ–°æ›´æ–°æºä¸ºhttps://gems.ruby-china.comgem sources --remove https://rubygems.org/   // åˆ é™¤åŸæ›´æ–°æºgem sources -l      ã€€ã€€ã€€ã€€ã€€ã€€               // æ£€æµ‹æ˜¯å¦æˆåŠŸ</code></pre><p>ç»§ç»­å®‰è£…</p><p><img src="/images/Mac%E7%94%B5%E8%84%91%E4%BD%BF%E7%94%A8/clipboard.png" alt="img"></p><p><code>brew -v</code>æ£€æŸ¥æ˜¯å¦å·²å®‰è£…æˆåŠŸ</p><pre><code class="hljs shell">Homebrew 2.4.0 Homebrew/homebrew-core (git revision c948b; last commit 2020-06-13)</code></pre><h4 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h4><p>åŸºäºbrewå®‰è£…çš„æ‰€æœ‰è½¯ä»¶åŠå…¶ä¾èµ–å‡ä¼šå®‰è£…åˆ°ç›®å½•<code>/usr/local/Cellar</code></p><h5 id="Brew-å¸®åŠ©ä¿¡æ¯"><a href="#Brew-å¸®åŠ©ä¿¡æ¯" class="headerlink" title="Brew å¸®åŠ©ä¿¡æ¯"></a>Brew å¸®åŠ©ä¿¡æ¯</h5><pre><code class="hljs properties"><span class="hljs-meta">$</span> <span class="hljs-string">brew help</span><span class="hljs-attr">Example</span> <span class="hljs-string">usage:</span>  <span class="hljs-attr">brew</span> <span class="hljs-string">search [TEXT|/REGEX/]</span>  <span class="hljs-attr">brew</span> <span class="hljs-string">info [FORMULA...]</span>  <span class="hljs-attr">brew</span> <span class="hljs-string">install FORMULA...</span>  <span class="hljs-attr">brew</span> <span class="hljs-string">update</span>  <span class="hljs-attr">brew</span> <span class="hljs-string">upgrade [FORMULA...]</span>  <span class="hljs-attr">brew</span> <span class="hljs-string">uninstall FORMULA...</span>  <span class="hljs-attr">brew</span> <span class="hljs-string">list [FORMULA...]</span><span class="hljs-attr">Troubleshooting</span>:<span class="hljs-string"></span>  <span class="hljs-attr">brew</span> <span class="hljs-string">config</span>  <span class="hljs-attr">brew</span> <span class="hljs-string">doctor</span>  <span class="hljs-attr">brew</span> <span class="hljs-string">install --verbose --debug FORMULA</span><span class="hljs-attr">Contributing</span>:<span class="hljs-string"></span>  <span class="hljs-attr">brew</span> <span class="hljs-string">create [URL [--no-fetch]]</span>  <span class="hljs-attr">brew</span> <span class="hljs-string">edit [FORMULA...]</span><span class="hljs-attr">Further</span> <span class="hljs-string">help:</span>  <span class="hljs-attr">brew</span> <span class="hljs-string">commands</span>  <span class="hljs-attr">brew</span> <span class="hljs-string">help [COMMAND]</span>  <span class="hljs-attr">man</span> <span class="hljs-string">brew</span>  <span class="hljs-attr">https</span>:<span class="hljs-string">//docs.brew.sh</span></code></pre><h5 id="å­å‘½ä»¤å¸®åŠ©ä¿¡æ¯"><a href="#å­å‘½ä»¤å¸®åŠ©ä¿¡æ¯" class="headerlink" title="å­å‘½ä»¤å¸®åŠ©ä¿¡æ¯"></a>å­å‘½ä»¤å¸®åŠ©ä¿¡æ¯</h5><p><code>brew help [COMMAND]æˆ–brew [COMMAND] -h</code> ç”¨äºæŸ¥çœ‹å…·ä½“æŸä¸ªå­å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯ã€‚</p><p>ä¾‹å¦‚ï¼ŒæŸ¥çœ‹<code>install</code>å‘½ä»¤çš„å¸®åŠ©è¯¦æƒ…ï¼š</p><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> brew install -h</span>Usage: brew install [options] formulaInstall formula. Additional options specific to formula may be appended tothe command.Unless HOMEBREW_NO_INSTALL_CLEANUP is set, brew cleanup will then be run forthe installed formulae or, every 30 days, for all formulae.    -d, --debug                      If brewing fails, open an interactive                                     debugging session with access to IRB or a                                     shell inside the temporary build directory.        --env                        If std is passed, use the standard build                                     environment instead of superenv. If super                                     is passed, use superenv even if the formula                                     specifies the standard build environment.        --ignore-dependencies        An unsupported Homebrew development flag to                                     skip installing any dependencies of any                                     kind. If the dependencies are not already                                     present, the formula will have issues. If                                     you&#x27;re not developing Homebrew, consider                                     adjusting your PATH rather than using this                                     flag.        --only-dependencies          Install the dependencies with specified                                     options but do not install the formula                                     itself.        --cc                         Attempt to compile using the specified                                     compiler, which should be the name of the                                     compiler&#x27;s executable, e.g. gcc-7 for GCC                                     7. In order to use LLVM&#x27;s clang, specify                                     llvm_clang. To use the Apple-provided                                     clang, specify clang. This option will                                     only accept compilers that are provided by                                     Homebrew or bundled with macOS. Please do                                     not file issues if you encounter errors                                     while using this option.    -s, --build-from-source          Compile formula from source even if a                                     bottle is provided. Dependencies will still                                     be installed from bottles if they are                                     available.        --force-bottle               Install from a bottle if it exists for the                                     current or newest version of macOS, even if                                     it would not normally be used for                                     installation.        --include-test               Install testing dependencies required to                                     run brew test formula.        --devel                      If formula defines it, install the                                     development version.        --HEAD                       If formula defines it, install the HEAD                                     version, aka. master, trunk, unstable.        --fetch-HEAD                 Fetch the upstream repository to detect if                                     the HEAD installation of the formula is                                     outdated. Otherwise, the repository&#x27;s HEAD                                     will only be checked for updates when a new                                     stable or development version has been                                     released.        --keep-tmp                   Retain the temporary files created during                                     installation.        --build-bottle               Prepare the formula for eventual bottling                                     during installation, skipping any                                     post-install steps.        --bottle-arch                Optimise bottles for the specified                                     architecture rather than the oldest                                     architecture supported by the version of                                     macOS the bottles are built on.    -f, --force                      Install without checking for previously                                     installed keg-only or non-migrated                                     versions.    -v, --verbose                    Print the verification and postinstall                                     steps.        --display-times              Print install times for each formula at the                                     end of the run.    -i, --interactive                Download and patch formula, then open a                                     shell. This allows the user to run                                     ./configure --help and otherwise                                     determine how to turn the software package                                     into a Homebrew package.    -g, --git                        Create a Git repository, useful for                                     creating patches to the software.    -h, --help                       Show this message.</code></pre><h5 id="æœç´¢è½¯ä»¶"><a href="#æœç´¢è½¯ä»¶" class="headerlink" title="æœç´¢è½¯ä»¶"></a>æœç´¢è½¯ä»¶</h5><p> <code>brew search [TEXT|/REGEX/]</code> ç”¨äºæœç´¢è½¯ä»¶ï¼Œæ”¯æŒä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œå¤æ‚çš„æœç´¢ã€‚</p><p>ä¾‹å¦‚ï¼ŒæŸ¥è¯¢é™æ€åšå®¢ç”Ÿæˆå·¥å…·hugoï¼š</p><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> brew search hugo</span>==&gt; Formulaehugo</code></pre><h5 id="æŸ¥çœ‹è½¯ä»¶ä¿¡æ¯"><a href="#æŸ¥çœ‹è½¯ä»¶ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹è½¯ä»¶ä¿¡æ¯"></a>æŸ¥çœ‹è½¯ä»¶ä¿¡æ¯</h5><p> <code>brew info [FORMULA...]</code> ç”¨äºæŸ¥è¯¢è½¯ä»¶çš„è¯¦ç»†ä¿¡æ¯ã€‚</p><p>ä¾‹å¦‚ï¼ŒæŸ¥çœ‹è½¯ä»¶hugoçš„è¯¦ç»†ä¿¡æ¯ï¼š</p><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> brew search hugo</span>==&gt; Formulaehugo<span class="hljs-meta">$</span><span class="bash"> brew info hugo</span>hugo: stable 0.72.0 (bottled), HEADConfigurable static site generatorhttps://gohugo.io/Not installedFrom: https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-core.git/Formula/hugo.rb==&gt; DependenciesBuild: go âœ˜==&gt; Options--HEADInstall HEAD version==&gt; Analyticsinstall: 26,782 (30 days), 84,656 (90 days), 287,304 (365 days)install-on-request: 26,266 (30 days), 82,887 (90 days), 279,634 (365 days)build-error: 0 (30 days)</code></pre><p>ä»¥ä¸ŠæŸ¥è¯¢æ‰€å¾—ä¿¡æ¯ï¼ŒåŒ…å«äº†è½¯ä»¶çš„æœ€æ–°å¯ç”¨ç‰ˆæœ¬ï¼Œæœ¬æœºæ˜¯å¦å·²å®‰è£…ï¼Œæœ¬æœºå·²å®‰è£…çš„ç‰ˆæœ¬ï¼Œå®‰è£…çš„è·¯å¾„ã€å¤§å°ã€æ—¶é—´ã€Tap æºï¼Œæ‰€ä¾èµ–çš„åŒ…ï¼Œä»¥åŠå®‰è£…çš„å¯é€‰é¡¹ç­‰è¯¦ç»†ä¿¡æ¯ã€‚è€Œè¿™äº›ä¿¡æ¯å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¾ˆæ–¹ä¾¿å¿«æ·çš„äº†è§£å¦‚ä½•å¯¹è¯¥è½¯ä»¶è¿›è¡Œç›¸åº”çš„æ“ä½œã€‚</p><h5 id="å®‰è£…è½¯ä»¶åŒ…"><a href="#å®‰è£…è½¯ä»¶åŒ…" class="headerlink" title="å®‰è£…è½¯ä»¶åŒ…"></a>å®‰è£…è½¯ä»¶åŒ…</h5><p> <code>brew install FORMULA... </code>ç”¨äºå®‰è£…ä¸€ä¸ªæˆ–å¤šä¸ªè½¯ä»¶ã€‚</p><p>ä¾‹å¦‚ï¼Œå®‰è£…è½¯ä»¶hugoï¼š</p><pre><code class="hljs mipsasm"><span class="hljs-keyword">brew </span><span class="hljs-keyword">install </span>hugo</code></pre><p>å®‰è£…è½¯ä»¶å‘½ä»¤æ‰§è¡Œä¹‹å‰ï¼Œbrew ä¸€èˆ¬ä¼šå…ˆæ£€æŸ¥æ›´æ–° Homebrew è‡ªèº«åŠ Tap æºã€‚</p><h5 id="æ›´æ–°è½¯ä»¶åŒ…"><a href="#æ›´æ–°è½¯ä»¶åŒ…" class="headerlink" title="æ›´æ–°è½¯ä»¶åŒ…"></a>æ›´æ–°è½¯ä»¶åŒ…</h5><p> <code>brew upgrade [FORMULA...]</code> ç”¨äºæ›´æ–°ä¸€ä¸ªæˆ–å¤šä¸ªè½¯ä»¶ï¼Œä¸æŒ‡å®šè½¯ä»¶ååˆ™æ›´æ–°æ‰€æœ‰è½¯ä»¶ã€‚</p><h5 id="å¸è½½è½¯ä»¶åŒ…"><a href="#å¸è½½è½¯ä»¶åŒ…" class="headerlink" title="å¸è½½è½¯ä»¶åŒ…"></a>å¸è½½è½¯ä»¶åŒ…</h5><p><code>brew uninstall FORMULA...</code> ç”¨äºå¸è½½æŒ‡å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªè½¯ä»¶</p><p><code>brew uninstall --force FORMULA...</code> å½»åº•å¸è½½æŒ‡å®šè½¯ä»¶ï¼ŒåŒ…æ‹¬æ—§ç‰ˆæœ¬</p><h5 id="å·²å®‰è£…çš„è½¯ä»¶åˆ—è¡¨"><a href="#å·²å®‰è£…çš„è½¯ä»¶åˆ—è¡¨" class="headerlink" title="å·²å®‰è£…çš„è½¯ä»¶åˆ—è¡¨"></a>å·²å®‰è£…çš„è½¯ä»¶åˆ—è¡¨</h5><p> <code>brew list</code> ç”¨äºæŸ¥è¯¢æœ¬æœºå·²å®‰è£…çš„è½¯ä»¶åˆ—è¡¨</p><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> brew list</span>aprgettextlz4pcre2pythonsqliteutf8procapr-utilgomysql-clientperlpython@2subversionxzgdbmlibzipopenssl@1.1pkg-configreadlinetldr</code></pre><h5 id="æœåŠ¡ç®¡ç†"><a href="#æœåŠ¡ç®¡ç†" class="headerlink" title="æœåŠ¡ç®¡ç†"></a>æœåŠ¡ç®¡ç†</h5><p> <code>brew services</code> ç”¨äºæ–¹ä¾¿çš„ç®¡ç† brew å®‰è£…çš„è½¯ä»¶è½¯ä»¶ï¼Œç±»ä¼¼äº Linux ä¸‹çš„ service å‘½ä»¤ã€‚</p><h5 id="æ£€æŸ¥å¯æ›´æ–°çš„è½¯ä»¶åˆ—è¡¨"><a href="#æ£€æŸ¥å¯æ›´æ–°çš„è½¯ä»¶åˆ—è¡¨" class="headerlink" title="æ£€æŸ¥å¯æ›´æ–°çš„è½¯ä»¶åˆ—è¡¨"></a>æ£€æŸ¥å¯æ›´æ–°çš„è½¯ä»¶åˆ—è¡¨</h5><p> <code>brew outdated</code> å¯æŸ¥è¯¢æœ‰æ›´æ–°ç‰ˆæœ¬çš„è½¯ä»¶</p><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> brew outdated </span>gettext (0.20.1) &lt; 0.20.2_1go (1.13.8) &lt; 1.14.3libzip (1.6.1) &lt; 1.7.1mysql-client (8.0.18) &lt; 8.0.19openssl@1.1 (1.1.1d) &lt; 1.1.1gpcre2 (10.34) &lt; 10.35perl (5.30.1) &lt; 5.30.3pkg-config (0.29.2) &lt; 0.29.2_3python (3.7.6_1) &lt; 3.7.7readline (8.0.1) &lt; 8.0.4sqlite (3.30.1) &lt; 3.32.1subversion (1.13.0_1) &lt; 1.14.0_1utf8proc (2.4.0) &lt; 2.5.0xz (5.2.4) &lt; 5.2.5</code></pre><h5 id="æ¸…ç†è½¯ä»¶"><a href="#æ¸…ç†è½¯ä»¶" class="headerlink" title="æ¸…ç†è½¯ä»¶"></a>æ¸…ç†è½¯ä»¶</h5><p><code>brew cleanup -n</code> åˆ—å‡ºéœ€è¦æ¸…ç†çš„å†…å®¹</p><p><code>brew cleanup</code> æ¸…ç†æ‰€æœ‰çš„è¿‡æ—¶è½¯ä»¶ </p><p><code>brew cleanup [FORMULA]</code> æ¸…ç†æŒ‡å®šè½¯ä»¶çš„è¿‡æ—¶åŒ…</p><h5 id="æŸ¥çœ‹é…ç½®ä¿¡æ¯"><a href="#æŸ¥çœ‹é…ç½®ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹é…ç½®ä¿¡æ¯"></a>æŸ¥çœ‹é…ç½®ä¿¡æ¯</h5><p><code>brew config</code> ç”¨äºæŸ¥çœ‹ brew æ‰€åœ¨ç¯å¢ƒåŠç›¸å…³çš„é…ç½®æƒ…å†µ</p><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> brew config</span>HOMEBREW_VERSION: 2.4.0ORIGIN: https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-cask-drivers.gitHEAD: 28ed0801ed5807e176e62a3ba66e47ec867ec17dLast commit: 3 days agoCore tap ORIGIN: https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-core.gitCore tap HEAD: c948bc65d13a2bdd43e5ef2ed4196930c731283cCore tap last commit: 11 hours agoHOMEBREW_PREFIX: /usr/localHOMEBREW_BOTTLE_DOMAIN: https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottlesHOMEBREW_MAKE_JOBS: 8CPU: octa-core 64-bit kabylakeHomebrew Ruby: 2.6.3 =&gt; /usr/local/Homebrew/Library/Homebrew/vendor/portable-ruby/2.6.3_1/bin/rubyClang: 11.0 build 1103Git: 2.24.1 =&gt; /Library/Developer/CommandLineTools/usr/bin/gitCurl: 7.64.1 =&gt; /usr/bin/curlJava: 1.8.0_212macOS: 10.15.4-x86_64CLT: 1103.0.32.29Xcode: N/A</code></pre><h5 id="è¯Šæ–­é—®é¢˜"><a href="#è¯Šæ–­é—®é¢˜" class="headerlink" title="è¯Šæ–­é—®é¢˜"></a>è¯Šæ–­é—®é¢˜</h5><p> <code>brew doctor</code> è¯Šæ–­å½“å‰ brew å­˜åœ¨å“ªäº›é—®é¢˜ï¼Œå¹¶ç»™å‡ºè§£å†³æ–¹æ¡ˆ</p><h5 id="ä»“åº“ç®¡ç†"><a href="#ä»“åº“ç®¡ç†" class="headerlink" title="ä»“åº“ç®¡ç†"></a>ä»“åº“ç®¡ç†</h5><p><code>brew tap</code> å·²å®‰è£…çš„ä»“åº“åˆ—è¡¨</p><p><code>brew tap [--full] user/repo [URL]</code> æ·»åŠ ä»“åº“</p><p><code>brew untap tap</code> ç§»é™¤ä»“åº“</p><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> brew tap</span>homebrew/caskhomebrew/cask-drivershomebrew/cask-fontshomebrew/corehomebrew/servicestldr-pages/tldr</code></pre><h4 id="é•œåƒæº"><a href="#é•œåƒæº" class="headerlink" title="é•œåƒæº"></a>é•œåƒæº</h4><p>æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™</p><p><a href="https://mirrors.tuna.tsinghua.edu.cn/help/homebrew/">Homebrew é•œåƒä½¿ç”¨å¸®åŠ©</a></p><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> æ›¿æ¢ç°æœ‰ä¸Šæ¸¸</span><span class="hljs-meta">#</span><span class="bash"> ä»¥ä¸‹é’ˆå¯¹ mac OS ç³»ç»Ÿä¸Šçš„ Homebrew</span>git -C &quot;$(brew --repo homebrew/core)&quot; remote set-url origin https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-core.gitgit -C &quot;$(brew --repo homebrew/cask)&quot; remote set-url origin https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-cask.gitgit -C &quot;$(brew --repo homebrew/cask-fonts)&quot; remote set-url origin https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-cask-fonts.gitgit -C &quot;$(brew --repo homebrew/cask-drivers)&quot; remote set-url origin https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-cask-drivers.git<span class="hljs-meta">#</span><span class="bash"> æ›´æ¢åæµ‹è¯•å·¥ä½œæ˜¯å¦æ­£å¸¸</span>brew update<span class="hljs-meta">#</span><span class="bash"> å¤åŸ</span><span class="hljs-meta">#</span><span class="bash"> ä»¥ä¸‹é’ˆå¯¹ mac OS ç³»ç»Ÿä¸Šçš„ Homebrew</span>git -C &quot;$(brew --repo homebrew/core)&quot; remote set-url origin https://github.com/Homebrew/homebrew-core.gitgit -C &quot;$(brew --repo homebrew/cask)&quot; remote set-url origin https://github.com/Homebrew/homebrew-cask.gitgit -C &quot;$(brew --repo homebrew/cask-fonts)&quot; remote set-url origin https://github.com/Homebrew/homebrew-cask-fonts.gitgit -C &quot;$(brew --repo homebrew/cask-drivers)&quot; remote set-url origin https://github.com/Homebrew/homebrew-cask-drivers.git<span class="hljs-meta">#</span><span class="bash"> æ›´æ¢åæµ‹è¯•å·¥ä½œæ˜¯å¦æ­£å¸¸</span>brew update</code></pre><p><a href="https://mirrors.tuna.tsinghua.edu.cn/help/homebrew-bottles/">Homebrew-bottles é•œåƒä½¿ç”¨å¸®åŠ©</a></p><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> ä¸´æ—¶æ›¿æ¢</span>export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles<span class="hljs-meta">#</span><span class="bash"> é•¿æœŸæ›¿æ¢</span>echo &#x27;export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles&#x27; &gt;&gt; ~/.bash_profilesource ~/.bash_profile</code></pre><h3 id="Pythonè™šæ‹Ÿç¯å¢ƒï¼ˆVirtualEnvï¼‰"><a href="#Pythonè™šæ‹Ÿç¯å¢ƒï¼ˆVirtualEnvï¼‰" class="headerlink" title="Pythonè™šæ‹Ÿç¯å¢ƒï¼ˆVirtualEnvï¼‰"></a>Pythonè™šæ‹Ÿç¯å¢ƒï¼ˆVirtualEnvï¼‰</h3><h4 id="virtualenv"><a href="#virtualenv" class="headerlink" title="virtualenv"></a>virtualenv</h4><h5 id="å®‰è£…virtualenvç¯å¢ƒ"><a href="#å®‰è£…virtualenvç¯å¢ƒ" class="headerlink" title="å®‰è£…virtualenvç¯å¢ƒ"></a>å®‰è£…virtualenvç¯å¢ƒ</h5><pre><code class="hljs shell">pip install virtualenv<span class="hljs-meta">#</span><span class="bash">æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ</span>virtualenv --version</code></pre><h5 id="åˆ›å»ºä»¥åŠä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ"><a href="#åˆ›å»ºä»¥åŠä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="åˆ›å»ºä»¥åŠä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ"></a>åˆ›å»ºä»¥åŠä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ</h5><h6 id="åˆ›å»ºæ—¶æŒ‡å®šä½ç½®æ–¹å¼"><a href="#åˆ›å»ºæ—¶æŒ‡å®šä½ç½®æ–¹å¼" class="headerlink" title="åˆ›å»ºæ—¶æŒ‡å®šä½ç½®æ–¹å¼"></a>åˆ›å»ºæ—¶æŒ‡å®šä½ç½®æ–¹å¼</h6><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> åˆ›å»ºpython3ç¯å¢ƒ</span>virtualenv -p python3 ~/Projects/PythonEnv/py3_normal/<span class="hljs-meta">#</span><span class="bash"> è¿›å…¥è™šæ‹Ÿç¯å¢ƒ</span>cd ~/Projects/PythonEnv/py3_normal/binsource activate<span class="hljs-meta">#</span><span class="bash"> é€€å‡ºç¯å¢ƒ</span>deactivate</code></pre><h6 id="è™šæ‹Ÿç¯å¢ƒç®¡ç†å™¨æ–¹å¼"><a href="#è™šæ‹Ÿç¯å¢ƒç®¡ç†å™¨æ–¹å¼" class="headerlink" title="è™šæ‹Ÿç¯å¢ƒç®¡ç†å™¨æ–¹å¼"></a>è™šæ‹Ÿç¯å¢ƒç®¡ç†å™¨æ–¹å¼</h6><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> å®‰è£…è™šæ‹Ÿç¯å¢ƒç®¡ç†å™¨</span>pip install virtualenvwrapper<span class="hljs-meta">#</span><span class="bash"> é…ç½®è™šæ‹Ÿç¯å¢ƒç®¡ç†å™¨ç¯å¢ƒ-æ·»åŠ é…ç½®</span>vim ~/.bash_profileWORKON_HOME=~/Projects/PythonEnvPROJECT_HOME=~/Projects/MyPythonexport WORKON_HOMEexport PROJECT_HOMEVIRTUALENVWRAPPER_PYTHON=/usr/local/bin/python3source /usr/local/bin/virtualenvwrapper.sh<span class="hljs-meta">#</span><span class="bash">ä¿å­˜-ç”Ÿæ•ˆé…ç½®</span>source ~/.bash_profile<span class="hljs-meta">#</span><span class="bash"> åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</span><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment"># åˆ›å»ºpython2çš„è™šæ‹Ÿç¯å¢ƒ</span></span>mkvirtualenv &lt;è™šæ‹Ÿç¯å¢ƒå&gt;<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment"># åˆ›å»ºpython3çš„è™šæ‹Ÿç¯å¢ƒ</span></span>mkvirtualenv -p python3 &lt;è™šæ‹Ÿç¯å¢ƒå&gt;<span class="hljs-meta">#</span><span class="bash"> è¿›å…¥/åˆ‡æ¢è™šæ‹Ÿç¯å¢ƒ</span>workon &lt;è™šæ‹Ÿç¯å¢ƒå&gt;<span class="hljs-meta">#</span><span class="bash"> é€€å‡ºè™šæ‹Ÿç¯å¢ƒ</span>deactivate<span class="hljs-meta">#</span><span class="bash"> å…¶ä»–å‘½ä»¤</span>lsvirtualenv   # æŸ¥çœ‹è™šæ‹Ÿç¯å¢ƒåˆ—è¡¨lssitepackages # æŸ¥çœ‹å½“å‰ç¯å¢ƒä¸­å®‰è£…çš„é‚£äº›åŒ…ï¼ˆå¯åŠ¨è™šæ‹Ÿç¯å¢ƒåï¼‰rmvirtualenv   # è™šæ‹Ÿç¯å¢ƒå åˆ é™¤è™šæ‹Ÿç¯å¢ƒ</code></pre><h4 id="Anaconda-or-Miniconda"><a href="#Anaconda-or-Miniconda" class="headerlink" title="Anaconda or Miniconda"></a>Anaconda or Miniconda</h4><h5 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h5><p>æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™ <a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/">https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/</a></p><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> Download</span>wget https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/Miniconda-3.4.2-MacOSX-x86_64.sh<span class="hljs-meta">#</span><span class="bash"> Install</span>bash Miniconda-3.4.2-MacOSX-x86_64.sh<span class="hljs-meta">#</span><span class="bash"> Activate</span>source .bashrc</code></pre><h5 id="åˆ›å»ºä»¥åŠä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ-1"><a href="#åˆ›å»ºä»¥åŠä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ-1" class="headerlink" title="åˆ›å»ºä»¥åŠä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ"></a>åˆ›å»ºä»¥åŠä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ</h5><pre><code class="hljs shell">- Create a new environment, installing named packages into it:    conda create --name environment_name python=2.7 matplotlib- List all environments:    conda info --envs- Load or unload an environment:    conda activate|deactivate environment_name- Delete an environment (remove all packages):    conda remove --name environment_name --all- Search conda channels for a package by name:    conda search package_name- Install packages into the current environment:    conda install python=3.4 numpy- List currently installed packages in current environment:    conda list- Delete unused packages and caches:    conda clean --all</code></pre><h3 id="Python-pip-é…ç½®å›½å†…æº-pip-install-Read-timed-out"><a href="#Python-pip-é…ç½®å›½å†…æº-pip-install-Read-timed-out" class="headerlink" title="Python pip é…ç½®å›½å†…æº[pip install Read timed out]"></a>Python pip é…ç½®å›½å†…æº[pip install Read timed out]</h3><h4 id="ã€æ–¹å¼ä¸€ã€‘ä¸´æ—¶ç”Ÿæ•ˆ"><a href="#ã€æ–¹å¼ä¸€ã€‘ä¸´æ—¶ç”Ÿæ•ˆ" class="headerlink" title="ã€æ–¹å¼ä¸€ã€‘ä¸´æ—¶ç”Ÿæ•ˆ"></a>ã€æ–¹å¼ä¸€ã€‘ä¸´æ—¶ç”Ÿæ•ˆ</h4><pre><code class="hljs awk"><span class="hljs-comment"># åœ¨å®‰è£…æ—¶åŠ ä¸Šé•œåƒæº</span>pip install &lt;åº“å&gt; -i https:<span class="hljs-regexp">//</span>pypi.douban.com<span class="hljs-regexp">/simple/</span> --trusted-host pypi.douban.compyth</code></pre><p><strong>æ–¹å¼äºŒã€‘æ°¸ä¹…æŒ‡å®š</strong></p><h5 id="å›½å†…æºåˆ—è¡¨ï¼ˆæ¨èç”¨é˜¿é‡Œäº‘çš„ï¼‰"><a href="#å›½å†…æºåˆ—è¡¨ï¼ˆæ¨èç”¨é˜¿é‡Œäº‘çš„ï¼‰" class="headerlink" title="å›½å†…æºåˆ—è¡¨ï¼ˆæ¨èç”¨é˜¿é‡Œäº‘çš„ï¼‰"></a>å›½å†…æºåˆ—è¡¨ï¼ˆæ¨èç”¨é˜¿é‡Œäº‘çš„ï¼‰</h5><p>é˜¿é‡Œäº‘<code>http://mirrors.aliyun.com/pypi/simple/</code></p><p>ä¸­å›½ç§‘æŠ€å¤§å­¦ <code>https://pypi.mirrors.ustc.edu.cn/simple/</code></p><p>è±†ç“£ (douban) <code>https://pypi.douban.com/simple/</code></p><p>æ¸…åå¤§å­¦ <code>https://pypi.tuna.tsinghua.edu.cn/simple/</code></p><p>ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦ <code>http://pypi.mirrors.ustc.edu.cn/simple/</code></p><h5 id="æ°¸ä¹…æŒ‡å®šæ–¹å¼"><a href="#æ°¸ä¹…æŒ‡å®šæ–¹å¼" class="headerlink" title="æ°¸ä¹…æŒ‡å®šæ–¹å¼"></a>æ°¸ä¹…æŒ‡å®šæ–¹å¼</h5><pre><code class="hljs shell">mkdir .pip# åœ¨å®¶ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª.pipç›®å½•~ cd pip~ touch pip.conf # åˆ›å»ºä¸€ä¸ªpipé…ç½®æ–‡ä»¶<span class="hljs-meta">#</span><span class="bash"> å†™å…¥é…ç½®</span>[global]index-url = http://mirrors.aliyun.com/pypi/simple/[install]trusted-host = mirrors.aliyun.com</code></pre><h3 id="æ›´æ–°Pythonç‰ˆæœ¬å-å‘½ä»¤è¡Œä¸‹pip-å‘½ä»¤æŠ¥é”™"><a href="#æ›´æ–°Pythonç‰ˆæœ¬å-å‘½ä»¤è¡Œä¸‹pip-å‘½ä»¤æŠ¥é”™" class="headerlink" title="æ›´æ–°Pythonç‰ˆæœ¬å,å‘½ä»¤è¡Œä¸‹pip å‘½ä»¤æŠ¥é”™"></a>æ›´æ–°Pythonç‰ˆæœ¬å,å‘½ä»¤è¡Œä¸‹pip å‘½ä»¤æŠ¥é”™</h3><p>ç”µè„‘ä¸­Python3ç”±3.7æ›´æ–°åˆ°3.9åï¼Œåœ¨å‘½ä»¤è¡Œä¸‹ä½¿ç”¨<code>pip list</code>æŠ¥ä»¥ä¸‹é”™è¯¯</p><pre><code class="hljs gradle">zsh: <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/bin/</span>pip: bad interpreter: <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/opt/</span>python<span class="hljs-regexp">/bin/</span>python3.<span class="hljs-number">7</span>: no such <span class="hljs-keyword">file</span> or directory</code></pre><p>ä½†æ˜¯å‘½ä»¤<code>pip3 list</code>å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œè¿™æ˜¯éœ€è¦è€ƒè™‘<code>pip</code>æŒ‡å‘çš„pythonè®¾ç½®æ˜¯å¦æ­£ç¡®</p><pre><code class="hljs zsh"><span class="hljs-comment"># æŸ¥çœ‹pipå‘½ä»¤é…ç½®æ–‡ä»¶</span><span class="hljs-built_in">which</span> pip/usr/<span class="hljs-built_in">local</span>/bin/pip<span class="hljs-comment"># æŸ¥çœ‹pip3å‘½ä»¤é…ç½®æ–‡ä»¶</span>/usr/<span class="hljs-built_in">local</span>/bin/pip3</code></pre><p>å¯¹æ¯”å‘ç°/usr/local/bin/pipæŒ‡å‘çš„pythonç‰ˆæœ¬æ—¶3.7ï¼Œ/usr/local/bin/pip3æŒ‡å‘çš„æ˜¯æ­£ç¡®çš„ã€‚å› æ­¤ï¼Œå°†/usr/local/bin/pipæŒ‡å‘pythonç‰ˆæœ¬çš„é…ç½®ä¿®æ”¹æˆ/usr/local/bin/pip3æŒ‡å‘çš„é…ç½®ã€‚</p><h3 id="å¼€å‘é…ç½®"><a href="#å¼€å‘é…ç½®" class="headerlink" title="å¼€å‘é…ç½®"></a>å¼€å‘é…ç½®</h3><h4 id="Iterm2"><a href="#Iterm2" class="headerlink" title="Iterm2"></a>Iterm2</h4><h4 id="oh-my-zsh"><a href="#oh-my-zsh" class="headerlink" title="oh-my-zsh"></a>oh-my-zsh</h4><h4 id="tldr"><a href="#tldr" class="headerlink" title="tldr"></a>tldr</h4><h3 id="Catalinaå‡çº§Sur-Bigé‡åˆ°çš„å‘"><a href="#Catalinaå‡çº§Sur-Bigé‡åˆ°çš„å‘" class="headerlink" title="Catalinaå‡çº§Sur Bigé‡åˆ°çš„å‘"></a>Catalinaå‡çº§Sur Bigé‡åˆ°çš„å‘</h3><h4 id="Homebrew-1"><a href="#Homebrew-1" class="headerlink" title="Homebrew"></a>Homebrew</h4><h5 id="brewæŠ¥é”™ï¼š-initializeâ€™-Version-value-must-be-a-string-got-a-NilClass-TypeError"><a href="#brewæŠ¥é”™ï¼š-initializeâ€™-Version-value-must-be-a-string-got-a-NilClass-TypeError" class="headerlink" title="brewæŠ¥é”™ï¼š`initializeâ€™: Version value must be a string; got a NilClass () (TypeError)"></a>brewæŠ¥é”™ï¼š`initializeâ€™: Version value must be a string; got a NilClass () (TypeError)</h5><pre><code class="hljs Python">brew <span class="hljs-built_in">list</span>Traceback (most recent call last):    <span class="hljs-number">11</span>: <span class="hljs-keyword">from</span> /usr/local/Homebrew/Library/Homebrew/brew.rb:<span class="hljs-number">23</span>:<span class="hljs-keyword">in</span> `&lt;main&gt;<span class="hljs-string">&#x27;</span><span class="hljs-string">    10: from /usr/local/Homebrew/Library/Homebrew/brew.rb:23:in `require_relative&#x27;</span>     <span class="hljs-number">9</span>: <span class="hljs-keyword">from</span> /usr/local/Homebrew/Library/Homebrew/<span class="hljs-keyword">global</span>.rb:<span class="hljs-number">29</span>:<span class="hljs-keyword">in</span> `&lt;top (required)&gt;<span class="hljs-string">&#x27;</span><span class="hljs-string">     8: from /System/Library/Frameworks/Ruby.framework/Versions/2.6/usr/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require&#x27;</span>     <span class="hljs-number">7</span>: <span class="hljs-keyword">from</span> /System/Library/Frameworks/Ruby.framework/Versions/<span class="hljs-number">2.6</span>/usr/lib/ruby/<span class="hljs-number">2.6</span><span class="hljs-number">.0</span>/rubygems/core_ext/kernel_require.rb:<span class="hljs-number">54</span>:<span class="hljs-keyword">in</span> `require<span class="hljs-string">&#x27;</span><span class="hljs-string">     6: from /usr/local/Homebrew/Library/Homebrew/os.rb:3:in `&lt;top (required)&gt;&#x27;</span>     <span class="hljs-number">5</span>: <span class="hljs-keyword">from</span> /usr/local/Homebrew/Library/Homebrew/os.rb:<span class="hljs-number">21</span>:<span class="hljs-keyword">in</span> `&lt;module:OS&gt;<span class="hljs-string">&#x27;</span><span class="hljs-string">     4: from /usr/local/Homebrew/Library/Homebrew/os/mac.rb:58:in `prerelease?&#x27;</span>     <span class="hljs-number">3</span>: <span class="hljs-keyword">from</span> /usr/local/Homebrew/Library/Homebrew/os/mac.rb:<span class="hljs-number">24</span>:<span class="hljs-keyword">in</span> `version<span class="hljs-string">&#x27;</span><span class="hljs-string">     2: from /usr/local/Homebrew/Library/Homebrew/os/mac.rb:24:in `new&#x27;</span>     <span class="hljs-number">1</span>: <span class="hljs-keyword">from</span> /usr/local/Homebrew/Library/Homebrew/os/mac/version.rb:<span class="hljs-number">26</span>:<span class="hljs-keyword">in</span> `initialize<span class="hljs-string">&#x27;</span><span class="hljs-string">/usr/local/Homebrew/Library/Homebrew/version.rb:368:in `initialize&#x27;</span>: Version value must be a string; got a NilClass () (TypeError)</code></pre><p>æ ¹æ®Tracebackä¿¡æ¯å¯ä»¥å‘ç°/usr/local/Homebrew/Library/Homebrew/os/mac/version.rbä¸­æŠ¥é”™,vimæ‰“å¼€è¯¥æ–‡ä»¶</p><pre><code class="hljs Python">vim /usr/local/Homebrew/Library/Homebrew/os/mac/version.rb<span class="hljs-comment"># typed: true</span><span class="hljs-comment"># frozen_string_literal: true</span>require <span class="hljs-string">&quot;hardware&quot;</span>require <span class="hljs-string">&quot;version&quot;</span>module OS  module Mac    <span class="hljs-comment"># A macOS version.</span>    <span class="hljs-comment">#</span>    <span class="hljs-comment"># @api private</span>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Version</span> &lt; :</span>:Version      SYMBOLS =         catalina:    <span class="hljs-string">&quot;10.15&quot;</span>,        mojave:      <span class="hljs-string">&quot;10.14&quot;</span>,        high_sierra: <span class="hljs-string">&quot;10.13&quot;</span>,        sierra:      <span class="hljs-string">&quot;10.12&quot;</span>,        el_capitan:  <span class="hljs-string">&quot;10.11&quot;</span>,        yosemite:    <span class="hljs-string">&quot;10.10&quot;</span>,      &#125;.freeze      <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">self</span>.<span class="hljs-title">from_symbol</span>(<span class="hljs-params">sym</span>)</span>        str = SYMBOLS.fetch(sym) &#123; raise MacOSVersionError, sym &#125;        new(<span class="hljs-built_in">str</span>)      end      <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">initialize</span>(<span class="hljs-params">value</span>)</span><span class="hljs-function">        <span class="hljs-title">super</span>(<span class="hljs-params">value</span>)</span><span class="hljs-function"></span>        raise MacOSVersionError, value unless value.match?(/\A1\d+(?:\.\d+)&#123;0,2&#125;\Z/)</code></pre><p>ä»ä»£ç ä¸­å¯ä»¥çœ‹å‡º,è¯¥ç‰ˆæœ¬çš„Homebrewä¸æ”¯æŒSur Bigç³»ç»Ÿ,äºæ˜¯è§£å†³æ–¹æ¡ˆæ˜¯æ›´æ–°Homebrew</p><pre><code class="hljs bash">brew update-reset</code></pre><p>ç»“æœ,brewæ²¡äº†,å‘½ä»¤è¾“å…¥brewæŠ¥é”™</p><pre><code class="hljs bash">zsh:brew: <span class="hljs-built_in">command</span> not found</code></pre><p>æ— å¥ˆåªèƒ½é‡æ–°å®‰è£…</p><p>ä½†æ˜¯è¿™æ¬¡å°±æ²¡æœ‰é‚£ä¹ˆå¹¸è¿,rubyæºå·²æ›´æ¢æˆå›½å†…çš„</p><p>ä½¿ç”¨ç§‘å­¦ä¸Šç½‘,ä¹Ÿæ— æ³•è®¿é—®<a href="https://raw.githubusercontent.com/">https://raw.githubusercontent.com</a></p><p>äºæ˜¯åªèƒ½å¦å¯»æ–¹æ³•,Googleä¸Šæ‰¾åˆ°.bashè„šæœ¬</p><p>æ¡Œé¢åˆ›å»º.bashæ–‡ä»¶</p><pre><code class="hljs awk">vim <span class="hljs-regexp">/Desktop/</span>brew_install.sh</code></pre><p>è„šæœ¬å†…å®¹</p><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><span class="hljs-built_in">set</span> -u<span class="hljs-comment"># First check if the OS is Linux.</span><span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;<span class="hljs-subst">$(uname)</span>&quot;</span> = <span class="hljs-string">&quot;Linux&quot;</span> ]]; <span class="hljs-keyword">then</span>  HOMEBREW_ON_LINUX=1<span class="hljs-keyword">fi</span><span class="hljs-comment"># Check if macOS is ARM</span><span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;<span class="hljs-subst">$(uname -m)</span>&quot;</span> = <span class="hljs-string">&quot;arm64&quot;</span> ]] &amp;&amp; [[ <span class="hljs-string">&quot;<span class="hljs-subst">$(uname)</span>&quot;</span> = <span class="hljs-string">&quot;Darwin&quot;</span> ]]; <span class="hljs-keyword">then</span>  HOMEBREW_APPLE_SILICON=1<span class="hljs-keyword">fi</span><span class="hljs-comment"># On macOS, this script installs to /usr/local only.</span><span class="hljs-comment"># On Linux, it installs to /home/linuxbrew/.linuxbrew if you have sudo access</span><span class="hljs-comment"># and ~/.linuxbrew otherwise.</span><span class="hljs-comment"># To install elsewhere (which is unsupported)</span><span class="hljs-comment"># you can untar https://github.com/Homebrew/brew/tarball/master</span><span class="hljs-comment"># anywhere you like.</span><span class="hljs-keyword">if</span> [[ -z <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_ON_LINUX-&#125;</span>&quot;</span> ]]; <span class="hljs-keyword">then</span>  HOMEBREW_PREFIX=<span class="hljs-string">&quot;/usr/local&quot;</span>  HOMEBREW_REPOSITORY=<span class="hljs-string">&quot;/usr/local/Homebrew&quot;</span>  HOMEBREW_CACHE=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOME&#125;</span>/Library/Caches/Homebrew&quot;</span>  STAT=<span class="hljs-string">&quot;stat -f&quot;</span>  CHOWN=<span class="hljs-string">&quot;/usr/sbin/chown&quot;</span>  CHGRP=<span class="hljs-string">&quot;/usr/bin/chgrp&quot;</span>  GROUP=<span class="hljs-string">&quot;admin&quot;</span>  TOUCH=<span class="hljs-string">&quot;/usr/bin/touch&quot;</span><span class="hljs-keyword">else</span>  HOMEBREW_PREFIX_DEFAULT=<span class="hljs-string">&quot;/home/linuxbrew/.linuxbrew&quot;</span>  HOMEBREW_CACHE=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOME&#125;</span>/.cache/Homebrew&quot;</span>  STAT=<span class="hljs-string">&quot;stat --printf&quot;</span>  CHOWN=<span class="hljs-string">&quot;/bin/chown&quot;</span>  CHGRP=<span class="hljs-string">&quot;/bin/chgrp&quot;</span>  GROUP=<span class="hljs-string">&quot;<span class="hljs-subst">$(id -gn)</span>&quot;</span>  TOUCH=<span class="hljs-string">&quot;/bin/touch&quot;</span><span class="hljs-keyword">fi</span>BREW_REPO=<span class="hljs-string">&quot;https://github.com/Homebrew/brew&quot;</span><span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> bump version when new macOS is released</span>MACOS_LATEST_SUPPORTED=<span class="hljs-string">&quot;10.15&quot;</span><span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> bump version when new macOS is released</span>MACOS_OLDEST_SUPPORTED=<span class="hljs-string">&quot;10.13&quot;</span><span class="hljs-comment"># For Homebrew on Linux</span>REQUIRED_RUBY_VERSION=2.6  <span class="hljs-comment"># https://github.com/Homebrew/brew/pull/6556</span>REQUIRED_GLIBC_VERSION=2.13  <span class="hljs-comment"># https://docs.brew.sh/Homebrew-on-Linux#requirements</span><span class="hljs-comment"># no analytics during installation</span><span class="hljs-built_in">export</span> HOMEBREW_NO_ANALYTICS_THIS_RUN=1<span class="hljs-built_in">export</span> HOMEBREW_NO_ANALYTICS_MESSAGE_OUTPUT=1<span class="hljs-comment"># string formatters</span><span class="hljs-keyword">if</span> [[ -t 1 ]]; <span class="hljs-keyword">then</span>  <span class="hljs-function"><span class="hljs-title">tty_escape</span></span>() &#123; <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;\033[%sm&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span>; &#125;<span class="hljs-keyword">else</span>  <span class="hljs-function"><span class="hljs-title">tty_escape</span></span>() &#123; :; &#125;<span class="hljs-keyword">fi</span><span class="hljs-function"><span class="hljs-title">tty_mkbold</span></span>() &#123; tty_escape <span class="hljs-string">&quot;1;<span class="hljs-variable">$1</span>&quot;</span>; &#125;tty_underline=<span class="hljs-string">&quot;<span class="hljs-subst">$(tty_escape <span class="hljs-string">&quot;4;39&quot;</span>)</span>&quot;</span>tty_blue=<span class="hljs-string">&quot;<span class="hljs-subst">$(tty_mkbold 34)</span>&quot;</span>tty_red=<span class="hljs-string">&quot;<span class="hljs-subst">$(tty_mkbold 31)</span>&quot;</span>tty_bold=<span class="hljs-string">&quot;<span class="hljs-subst">$(tty_mkbold 39)</span>&quot;</span>tty_reset=<span class="hljs-string">&quot;<span class="hljs-subst">$(tty_escape 0)</span>&quot;</span><span class="hljs-function"><span class="hljs-title">have_sudo_access</span></span>() &#123;  <span class="hljs-built_in">local</span> -a args  <span class="hljs-keyword">if</span> [[ -n <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;SUDO_ASKPASS-&#125;</span>&quot;</span> ]]; <span class="hljs-keyword">then</span>    args=(<span class="hljs-string">&quot;-A&quot;</span>)  <span class="hljs-keyword">fi</span>  <span class="hljs-keyword">if</span> [[ -z <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HAVE_SUDO_ACCESS-&#125;</span>&quot;</span> ]]; <span class="hljs-keyword">then</span>    <span class="hljs-keyword">if</span> [[ -n <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;args[*]-&#125;</span>&quot;</span> ]]; <span class="hljs-keyword">then</span>      /usr/bin/sudo <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;args[@]&#125;</span>&quot;</span> -l mkdir &amp;&gt;/dev/null    <span class="hljs-keyword">else</span>      /usr/bin/sudo -l mkdir &amp;&gt;/dev/null    <span class="hljs-keyword">fi</span>    HAVE_SUDO_ACCESS=<span class="hljs-string">&quot;$?&quot;</span>  <span class="hljs-keyword">fi</span>  <span class="hljs-keyword">if</span> [[ -z <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_ON_LINUX-&#125;</span>&quot;</span> ]] &amp;&amp; [[ <span class="hljs-string">&quot;<span class="hljs-variable">$HAVE_SUDO_ACCESS</span>&quot;</span> -ne 0 ]]; <span class="hljs-keyword">then</span>    abort <span class="hljs-string">&quot;Need sudo access on macOS (e.g. the user <span class="hljs-variable">$USER</span> to be an Administrator)!&quot;</span>  <span class="hljs-keyword">fi</span>  <span class="hljs-built_in">return</span> <span class="hljs-string">&quot;<span class="hljs-variable">$HAVE_SUDO_ACCESS</span>&quot;</span>&#125;<span class="hljs-function"><span class="hljs-title">shell_join</span></span>() &#123;  <span class="hljs-built_in">local</span> arg  <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;%s&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span>  <span class="hljs-built_in">shift</span>  <span class="hljs-keyword">for</span> arg <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;<span class="hljs-variable">$@</span>&quot;</span>; <span class="hljs-keyword">do</span>    <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot; &quot;</span>    <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;%s&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;arg// /\ &#125;</span>&quot;</span>  <span class="hljs-keyword">done</span>&#125;<span class="hljs-function"><span class="hljs-title">chomp</span></span>() &#123;  <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;%s&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;1/&quot;$&#x27;\n&#x27;&quot;/&#125;</span>&quot;</span>&#125;<span class="hljs-function"><span class="hljs-title">ohai</span></span>() &#123;  <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;tty_blue&#125;</span>==&gt;<span class="hljs-variable">$&#123;tty_bold&#125;</span> %s<span class="hljs-variable">$&#123;tty_reset&#125;</span>\n&quot;</span> <span class="hljs-string">&quot;<span class="hljs-subst">$(shell_join <span class="hljs-string">&quot;<span class="hljs-variable">$@</span>&quot;</span>)</span>&quot;</span>&#125;<span class="hljs-function"><span class="hljs-title">warn</span></span>() &#123;  <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;tty_red&#125;</span>Warning<span class="hljs-variable">$&#123;tty_reset&#125;</span>: %s\n&quot;</span> <span class="hljs-string">&quot;<span class="hljs-subst">$(chomp <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span>)</span>&quot;</span>&#125;<span class="hljs-function"><span class="hljs-title">abort</span></span>() &#123;  <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;%s\n&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span>  <span class="hljs-built_in">exit</span> 1&#125;<span class="hljs-function"><span class="hljs-title">execute</span></span>() &#123;  <span class="hljs-keyword">if</span> ! <span class="hljs-string">&quot;<span class="hljs-variable">$@</span>&quot;</span>; <span class="hljs-keyword">then</span>    abort <span class="hljs-string">&quot;<span class="hljs-subst">$(printf <span class="hljs-string">&quot;Failed during: %s&quot;</span> <span class="hljs-string">&quot;<span class="hljs-subst">$(shell_join <span class="hljs-string">&quot;<span class="hljs-variable">$@</span>&quot;</span>)</span>&quot;</span>)</span>&quot;</span>  <span class="hljs-keyword">fi</span>&#125;<span class="hljs-function"><span class="hljs-title">execute_sudo</span></span>() &#123;  <span class="hljs-built_in">local</span> -a args=(<span class="hljs-string">&quot;<span class="hljs-variable">$@</span>&quot;</span>)  <span class="hljs-keyword">if</span> [[ -n <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;SUDO_ASKPASS-&#125;</span>&quot;</span> ]]; <span class="hljs-keyword">then</span>    args=(<span class="hljs-string">&quot;-A&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;args[@]&#125;</span>&quot;</span>)  <span class="hljs-keyword">fi</span>  <span class="hljs-keyword">if</span> have_sudo_access; <span class="hljs-keyword">then</span>    ohai <span class="hljs-string">&quot;/usr/bin/sudo&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;args[@]&#125;</span>&quot;</span>    execute <span class="hljs-string">&quot;/usr/bin/sudo&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;args[@]&#125;</span>&quot;</span>  <span class="hljs-keyword">else</span>    ohai <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;args[@]&#125;</span>&quot;</span>    execute <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;args[@]&#125;</span>&quot;</span>  <span class="hljs-keyword">fi</span>&#125;<span class="hljs-function"><span class="hljs-title">getc</span></span>() &#123;  <span class="hljs-built_in">local</span> save_state  save_state=$(/bin/stty -g)  /bin/stty raw -<span class="hljs-built_in">echo</span>  IFS= <span class="hljs-built_in">read</span> -r -n 1 -d <span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$@</span>&quot;</span>  /bin/stty <span class="hljs-string">&quot;<span class="hljs-variable">$save_state</span>&quot;</span>&#125;<span class="hljs-function"><span class="hljs-title">wait_for_user</span></span>() &#123;  <span class="hljs-built_in">local</span> c  <span class="hljs-built_in">echo</span>  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Press RETURN to continue or any other key to abort&quot;</span>  getc c  <span class="hljs-comment"># we test for \r and \n because some stuff does \r instead</span>  <span class="hljs-keyword">if</span> ! [[ <span class="hljs-string">&quot;<span class="hljs-variable">$c</span>&quot;</span> == $<span class="hljs-string">&#x27;\r&#x27;</span> || <span class="hljs-string">&quot;<span class="hljs-variable">$c</span>&quot;</span> == $<span class="hljs-string">&#x27;\n&#x27;</span> ]]; <span class="hljs-keyword">then</span>    <span class="hljs-built_in">exit</span> 1  <span class="hljs-keyword">fi</span>&#125;<span class="hljs-function"><span class="hljs-title">major_minor</span></span>() &#123;  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;1%%.*&#125;</span>.<span class="hljs-subst">$(x=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;1#*.&#125;</span>&quot;</span>; echo <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;x%%.*&#125;</span>&quot;</span>)</span>&quot;</span>&#125;<span class="hljs-keyword">if</span> [[ -z <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_ON_LINUX-&#125;</span>&quot;</span> ]]; <span class="hljs-keyword">then</span>  macos_version=<span class="hljs-string">&quot;<span class="hljs-subst">$(major_minor <span class="hljs-string">&quot;<span class="hljs-subst">$(/usr/bin/sw_vers -productVersion)</span>&quot;</span>)</span>&quot;</span><span class="hljs-keyword">fi</span><span class="hljs-function"><span class="hljs-title">version_gt</span></span>() &#123;  [[ <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;1%.*&#125;</span>&quot;</span> -gt <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;2%.*&#125;</span>&quot;</span> ]] || [[ <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;1%.*&#125;</span>&quot;</span> -eq <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;2%.*&#125;</span>&quot;</span> &amp;&amp; <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;1#*.&#125;</span>&quot;</span> -gt <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;2#*.&#125;</span>&quot;</span> ]]&#125;<span class="hljs-function"><span class="hljs-title">version_ge</span></span>() &#123;  [[ <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;1%.*&#125;</span>&quot;</span> -gt <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;2%.*&#125;</span>&quot;</span> ]] || [[ <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;1%.*&#125;</span>&quot;</span> -eq <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;2%.*&#125;</span>&quot;</span> &amp;&amp; <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;1#*.&#125;</span>&quot;</span> -ge <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;2#*.&#125;</span>&quot;</span> ]]&#125;<span class="hljs-function"><span class="hljs-title">version_lt</span></span>() &#123;  [[ <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;1%.*&#125;</span>&quot;</span> -lt <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;2%.*&#125;</span>&quot;</span> ]] || [[ <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;1%.*&#125;</span>&quot;</span> -eq <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;2%.*&#125;</span>&quot;</span> &amp;&amp; <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;1#*.&#125;</span>&quot;</span> -lt <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;2#*.&#125;</span>&quot;</span> ]]&#125;<span class="hljs-function"><span class="hljs-title">should_install_git</span></span>() &#123;  <span class="hljs-keyword">if</span> [[ $(<span class="hljs-built_in">command</span> -v git) ]]; <span class="hljs-keyword">then</span>    <span class="hljs-built_in">return</span> 1  <span class="hljs-keyword">fi</span>&#125;<span class="hljs-function"><span class="hljs-title">should_install_command_line_tools</span></span>() &#123;  <span class="hljs-keyword">if</span> [[ -n <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_ON_LINUX-&#125;</span>&quot;</span> ]]; <span class="hljs-keyword">then</span>    <span class="hljs-built_in">return</span> 1  <span class="hljs-keyword">fi</span>  <span class="hljs-keyword">if</span> [[ -n <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_APPLE_SILICON-&#125;</span>&quot;</span> ]]; <span class="hljs-keyword">then</span>    <span class="hljs-built_in">return</span> 1;  <span class="hljs-keyword">fi</span>  <span class="hljs-keyword">if</span> version_gt <span class="hljs-string">&quot;<span class="hljs-variable">$macos_version</span>&quot;</span> <span class="hljs-string">&quot;10.13&quot;</span>; <span class="hljs-keyword">then</span>    ! [[ -e <span class="hljs-string">&quot;/Library/Developer/CommandLineTools/usr/bin/git&quot;</span> ]]  <span class="hljs-keyword">else</span>    ! [[ -e <span class="hljs-string">&quot;/Library/Developer/CommandLineTools/usr/bin/git&quot;</span> ]] ||      ! [[ -e <span class="hljs-string">&quot;/usr/include/iconv.h&quot;</span> ]]  <span class="hljs-keyword">fi</span>&#125;<span class="hljs-function"><span class="hljs-title">get_permission</span></span>() &#123;  <span class="hljs-variable">$STAT</span> <span class="hljs-string">&quot;%A&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span>&#125;<span class="hljs-function"><span class="hljs-title">user_only_chmod</span></span>() &#123;  [[ -d <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span> ]] &amp;&amp; [[ <span class="hljs-string">&quot;<span class="hljs-subst">$(get_permission <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span>)</span>&quot;</span> != <span class="hljs-string">&quot;755&quot;</span> ]]&#125;<span class="hljs-function"><span class="hljs-title">exists_but_not_writable</span></span>() &#123;  [[ -e <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span> ]] &amp;&amp; ! [[ -r <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span> &amp;&amp; -w <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span> &amp;&amp; -x <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span> ]]&#125;<span class="hljs-function"><span class="hljs-title">get_owner</span></span>() &#123;  <span class="hljs-variable">$STAT</span> <span class="hljs-string">&quot;%u&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span>&#125;<span class="hljs-function"><span class="hljs-title">file_not_owned</span></span>() &#123;  [[ <span class="hljs-string">&quot;<span class="hljs-subst">$(get_owner <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span>)</span>&quot;</span> != <span class="hljs-string">&quot;<span class="hljs-subst">$(id -u)</span>&quot;</span> ]]&#125;<span class="hljs-function"><span class="hljs-title">get_group</span></span>() &#123;  <span class="hljs-variable">$STAT</span> <span class="hljs-string">&quot;%g&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span>&#125;<span class="hljs-function"><span class="hljs-title">file_not_grpowned</span></span>() &#123;  [[ <span class="hljs-string">&quot; <span class="hljs-subst">$(id -G <span class="hljs-string">&quot;<span class="hljs-variable">$USER</span>&quot;</span>)</span> &quot;</span> != *<span class="hljs-string">&quot; <span class="hljs-subst">$(get_group <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span>)</span> &quot;</span>*  ]]&#125;<span class="hljs-comment"># Please sync with &#x27;test_ruby()&#x27; in &#x27;Library/Homebrew/utils/ruby.sh&#x27; from Homebrew/brew repository.</span><span class="hljs-function"><span class="hljs-title">test_ruby</span></span> () &#123;  <span class="hljs-keyword">if</span> [[ ! -x <span class="hljs-variable">$1</span> ]]  <span class="hljs-keyword">then</span>    <span class="hljs-built_in">return</span> 1  <span class="hljs-keyword">fi</span>  <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span> --enable-frozen-string-literal --<span class="hljs-built_in">disable</span>=gems,did_you_mean,rubyopt -rrubygems -e \    <span class="hljs-string">&quot;abort if Gem::Version.new(RUBY_VERSION.to_s.dup).to_s.split(&#x27;.&#x27;).first(2) != \</span><span class="hljs-string">              Gem::Version.new(&#x27;<span class="hljs-variable">$REQUIRED_RUBY_VERSION</span>&#x27;).to_s.split(&#x27;.&#x27;).first(2)&quot;</span> 2&gt;/dev/null&#125;<span class="hljs-function"><span class="hljs-title">no_usable_ruby</span></span>() &#123;  <span class="hljs-built_in">local</span> ruby_exec  IFS=$<span class="hljs-string">&#x27;\n&#x27;</span> <span class="hljs-comment"># Do word splitting on new lines only</span>  <span class="hljs-keyword">for</span> ruby_exec <span class="hljs-keyword">in</span> $(<span class="hljs-built_in">which</span> -a ruby); <span class="hljs-keyword">do</span>    <span class="hljs-keyword">if</span> test_ruby <span class="hljs-string">&quot;<span class="hljs-variable">$ruby_exec</span>&quot;</span>; <span class="hljs-keyword">then</span>      <span class="hljs-built_in">return</span> 1    <span class="hljs-keyword">fi</span>  <span class="hljs-keyword">done</span>  IFS=$<span class="hljs-string">&#x27; \t\n&#x27;</span> <span class="hljs-comment"># Restore IFS to its default value</span>  <span class="hljs-built_in">return</span> 0&#125;<span class="hljs-function"><span class="hljs-title">outdated_glibc</span></span>() &#123;  <span class="hljs-built_in">local</span> glibc_version  glibc_version=$(ldd --version | head -n1 | grep -o <span class="hljs-string">&#x27;[0-9.]*$&#x27;</span> | grep -o <span class="hljs-string">&#x27;^[0-9]\+\.[0-9]\+&#x27;</span>)  version_lt <span class="hljs-string">&quot;<span class="hljs-variable">$glibc_version</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$REQUIRED_GLIBC_VERSION</span>&quot;</span>&#125;<span class="hljs-keyword">if</span> [[ -n <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_ON_LINUX-&#125;</span>&quot;</span> ]] &amp;&amp; no_usable_ruby &amp;&amp; outdated_glibc<span class="hljs-keyword">then</span>    abort <span class="hljs-string">&quot;<span class="hljs-subst">$(cat &lt;&lt;-EOFABORT</span></span><span class="hljs-string"><span class="hljs-subst">    Homebrew requires Ruby $REQUIRED_RUBY_VERSION which was not found on your system.</span></span><span class="hljs-string"><span class="hljs-subst">    Homebrew portable Ruby requires Glibc version $REQUIRED_GLIBC_VERSION or newer,</span></span><span class="hljs-string"><span class="hljs-subst">    and your Glibc version is too old.</span></span><span class="hljs-string"><span class="hljs-subst">    See $&#123;tty_underline&#125;https://docs.brew.sh/Homebrew-on-Linux#requirements$&#123;tty_reset&#125;</span></span><span class="hljs-string"><span class="hljs-subst">    Install Ruby $REQUIRED_RUBY_VERSION and add its location to your PATH.</span></span><span class="hljs-string"><span class="hljs-subst">    EOFABORT</span></span><span class="hljs-string"><span class="hljs-subst">    )</span>&quot;</span><span class="hljs-keyword">fi</span><span class="hljs-comment"># USER isn&#x27;t always set so provide a fall back for the installer and subprocesses.</span><span class="hljs-keyword">if</span> [[ -z <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;USER-&#125;</span>&quot;</span> ]]; <span class="hljs-keyword">then</span>  USER=<span class="hljs-string">&quot;<span class="hljs-subst">$(chomp <span class="hljs-string">&quot;<span class="hljs-subst">$(id -un)</span>&quot;</span>)</span>&quot;</span>  <span class="hljs-built_in">export</span> USER<span class="hljs-keyword">fi</span><span class="hljs-comment"># Invalidate sudo timestamp before exiting (if it wasn&#x27;t active before).</span><span class="hljs-keyword">if</span> ! /usr/bin/sudo -n -v 2&gt;/dev/null; <span class="hljs-keyword">then</span>  <span class="hljs-built_in">trap</span> <span class="hljs-string">&#x27;/usr/bin/sudo -k&#x27;</span> EXIT<span class="hljs-keyword">fi</span><span class="hljs-comment"># Things can fail later if `pwd` doesn&#x27;t exist.</span><span class="hljs-comment"># Also sudo prints a warning message for no good reason</span><span class="hljs-built_in">cd</span> <span class="hljs-string">&quot;/usr&quot;</span> || <span class="hljs-built_in">exit</span> 1<span class="hljs-comment">####################################################################### script</span><span class="hljs-keyword">if</span> should_install_git; <span class="hljs-keyword">then</span>    abort <span class="hljs-string">&quot;<span class="hljs-subst">$(cat &lt;&lt;EOABORT</span></span><span class="hljs-string"><span class="hljs-subst">You must install Git before installing Homebrew. See:</span></span><span class="hljs-string"><span class="hljs-subst">  $&#123;tty_underline&#125;https://docs.brew.sh/Installation$&#123;tty_reset&#125;</span></span><span class="hljs-string"><span class="hljs-subst">EOABORT</span></span><span class="hljs-string"><span class="hljs-subst">)</span>&quot;</span><span class="hljs-keyword">fi</span><span class="hljs-keyword">if</span> [[ -z <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_ON_LINUX-&#125;</span>&quot;</span> ]]; <span class="hljs-keyword">then</span> have_sudo_access<span class="hljs-keyword">else</span>  <span class="hljs-keyword">if</span> [[ -n <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;CI-&#125;</span>&quot;</span> ]] || [[ -w <span class="hljs-string">&quot;<span class="hljs-variable">$HOMEBREW_PREFIX_DEFAULT</span>&quot;</span> ]] || [[ -w <span class="hljs-string">&quot;/home/linuxbrew&quot;</span> ]] || [[ -w <span class="hljs-string">&quot;/home&quot;</span> ]]; <span class="hljs-keyword">then</span>    HOMEBREW_PREFIX=<span class="hljs-string">&quot;<span class="hljs-variable">$HOMEBREW_PREFIX_DEFAULT</span>&quot;</span>  <span class="hljs-keyword">else</span>    <span class="hljs-built_in">trap</span> <span class="hljs-built_in">exit</span> SIGINT    <span class="hljs-keyword">if</span> [[ $(/usr/bin/sudo -n -l mkdir 2&gt;&amp;1) != *<span class="hljs-string">&quot;mkdir&quot;</span>* ]]; <span class="hljs-keyword">then</span>      ohai <span class="hljs-string">&quot;Select the Homebrew installation directory&quot;</span>      <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;- <span class="hljs-variable">$&#123;tty_bold&#125;</span>Enter your password<span class="hljs-variable">$&#123;tty_reset&#125;</span> to install to <span class="hljs-variable">$&#123;tty_underline&#125;</span><span class="hljs-variable">$&#123;HOMEBREW_PREFIX_DEFAULT&#125;</span><span class="hljs-variable">$&#123;tty_reset&#125;</span> (<span class="hljs-variable">$&#123;tty_bold&#125;</span>recommended<span class="hljs-variable">$&#123;tty_reset&#125;</span>)&quot;</span>      <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;- <span class="hljs-variable">$&#123;tty_bold&#125;</span>Press Control-D<span class="hljs-variable">$&#123;tty_reset&#125;</span> to install to <span class="hljs-variable">$&#123;tty_underline&#125;</span><span class="hljs-variable">$HOME</span>/.linuxbrew<span class="hljs-variable">$&#123;tty_reset&#125;</span>&quot;</span>      <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;- <span class="hljs-variable">$&#123;tty_bold&#125;</span>Press Control-C<span class="hljs-variable">$&#123;tty_reset&#125;</span> to cancel installation&quot;</span>    <span class="hljs-keyword">fi</span>    <span class="hljs-keyword">if</span> have_sudo_access; <span class="hljs-keyword">then</span>      HOMEBREW_PREFIX=<span class="hljs-string">&quot;<span class="hljs-variable">$HOMEBREW_PREFIX_DEFAULT</span>&quot;</span>    <span class="hljs-keyword">else</span>      HOMEBREW_PREFIX=<span class="hljs-string">&quot;<span class="hljs-variable">$HOME</span>/.linuxbrew&quot;</span>    <span class="hljs-keyword">fi</span>    <span class="hljs-built_in">trap</span> - SIGINT  <span class="hljs-keyword">fi</span>  HOMEBREW_REPOSITORY=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_PREFIX&#125;</span>/Homebrew&quot;</span><span class="hljs-keyword">fi</span><span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$UID</span>&quot;</span> == <span class="hljs-string">&quot;0&quot;</span> ]]; <span class="hljs-keyword">then</span>  abort <span class="hljs-string">&quot;Don&#x27;t run this as root!&quot;</span><span class="hljs-keyword">elif</span> [[ -d <span class="hljs-string">&quot;<span class="hljs-variable">$HOMEBREW_PREFIX</span>&quot;</span> &amp;&amp; ! -x <span class="hljs-string">&quot;<span class="hljs-variable">$HOMEBREW_PREFIX</span>&quot;</span> ]]; <span class="hljs-keyword">then</span>  abort <span class="hljs-string">&quot;<span class="hljs-subst">$(cat &lt;&lt;EOABORT</span></span><span class="hljs-string"><span class="hljs-subst">The Homebrew prefix, $&#123;HOMEBREW_PREFIX&#125;, exists but is not searchable. If this is</span></span><span class="hljs-string"><span class="hljs-subst">not intentional, please restore the default permissions and try running the</span></span><span class="hljs-string"><span class="hljs-subst">installer again:</span></span><span class="hljs-string"><span class="hljs-subst">    sudo chmod 775 $&#123;HOMEBREW_PREFIX&#125;</span></span><span class="hljs-string"><span class="hljs-subst">EOABORT</span></span><span class="hljs-string"><span class="hljs-subst">)</span>&quot;</span><span class="hljs-keyword">fi</span><span class="hljs-keyword">if</span> [[ -z <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_ON_LINUX-&#125;</span>&quot;</span> ]]; <span class="hljs-keyword">then</span>  <span class="hljs-keyword">if</span> version_lt <span class="hljs-string">&quot;<span class="hljs-variable">$macos_version</span>&quot;</span> <span class="hljs-string">&quot;10.7&quot;</span>; <span class="hljs-keyword">then</span>    abort <span class="hljs-string">&quot;<span class="hljs-subst">$(cat &lt;&lt;EOABORT</span></span><span class="hljs-string"><span class="hljs-subst">Your Mac OS X version is too old. See:</span></span><span class="hljs-string"><span class="hljs-subst">  $&#123;tty_underline&#125;https://github.com/mistydemeo/tigerbrew$&#123;tty_reset&#125;</span></span><span class="hljs-string"><span class="hljs-subst">EOABORT</span></span><span class="hljs-string"><span class="hljs-subst">)</span>&quot;</span>  <span class="hljs-keyword">elif</span> version_lt <span class="hljs-string">&quot;<span class="hljs-variable">$macos_version</span>&quot;</span> <span class="hljs-string">&quot;10.9&quot;</span>; <span class="hljs-keyword">then</span>    abort <span class="hljs-string">&quot;Your OS X version is too old&quot;</span>  <span class="hljs-keyword">elif</span> version_gt <span class="hljs-string">&quot;<span class="hljs-variable">$macos_version</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$MACOS_LATEST_SUPPORTED</span>&quot;</span> || \    version_lt <span class="hljs-string">&quot;<span class="hljs-variable">$macos_version</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$MACOS_OLDEST_SUPPORTED</span>&quot;</span>; <span class="hljs-keyword">then</span>    who=<span class="hljs-string">&quot;We&quot;</span>    what=<span class="hljs-string">&quot;&quot;</span>    <span class="hljs-keyword">if</span> version_gt <span class="hljs-string">&quot;<span class="hljs-variable">$macos_version</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$MACOS_LATEST_SUPPORTED</span>&quot;</span>; <span class="hljs-keyword">then</span>      what=<span class="hljs-string">&quot;pre-release version&quot;</span>    <span class="hljs-keyword">else</span>      who+=<span class="hljs-string">&quot; (and Apple)&quot;</span>      what=<span class="hljs-string">&quot;old version&quot;</span>    <span class="hljs-keyword">fi</span>    ohai <span class="hljs-string">&quot;You are using macOS <span class="hljs-variable">$&#123;macos_version&#125;</span>.&quot;</span>    ohai <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;who&#125;</span> do not provide support for this <span class="hljs-variable">$&#123;what&#125;</span>.&quot;</span>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-subst">$(cat &lt;&lt;EOS</span></span><span class="hljs-string"><span class="hljs-subst">This installation may not succeed.</span></span><span class="hljs-string"><span class="hljs-subst">After installation, you will encounter build failures with some formulae.</span></span><span class="hljs-string"><span class="hljs-subst">Please create pull requests instead of asking for help on Homebrew\&#x27;s GitHub,</span></span><span class="hljs-string"><span class="hljs-subst">Discourse, Twitter or IRC. You are responsible for resolving any issues you</span></span><span class="hljs-string"><span class="hljs-subst">experience while you are running this $&#123;what&#125;.</span></span><span class="hljs-string"><span class="hljs-subst">EOS</span></span><span class="hljs-string"><span class="hljs-subst">)</span></span><span class="hljs-string">&quot;</span>  <span class="hljs-keyword">fi</span><span class="hljs-keyword">fi</span>ohai <span class="hljs-string">&quot;This script will install:&quot;</span><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_PREFIX&#125;</span>/bin/brew&quot;</span><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_PREFIX&#125;</span>/share/doc/homebrew&quot;</span><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_PREFIX&#125;</span>/share/man/man1/brew.1&quot;</span><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_PREFIX&#125;</span>/share/zsh/site-functions/_brew&quot;</span><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_PREFIX&#125;</span>/etc/bash_completion.d/brew&quot;</span><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_REPOSITORY&#125;</span>&quot;</span><span class="hljs-comment"># Keep relatively in sync with</span><span class="hljs-comment"># https://github.com/Homebrew/brew/blob/master/Library/Homebrew/keg.rb</span>directories=(bin etc include lib sbin share opt var             Frameworks             etc/bash_completion.d lib/pkgconfig             share/aclocal share/doc share/info share/locale share/man             share/man/man1 share/man/man2 share/man/man3 share/man/man4             share/man/man5 share/man/man6 share/man/man7 share/man/man8             var/<span class="hljs-built_in">log</span> var/homebrew var/homebrew/linked             bin/brew)group_chmods=()<span class="hljs-keyword">for</span> dir <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;directories[@]&#125;</span>&quot;</span>; <span class="hljs-keyword">do</span>  <span class="hljs-keyword">if</span> exists_but_not_writable <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_PREFIX&#125;</span>/<span class="hljs-variable">$&#123;dir&#125;</span>&quot;</span>; <span class="hljs-keyword">then</span>    group_chmods+=(<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_PREFIX&#125;</span>/<span class="hljs-variable">$&#123;dir&#125;</span>&quot;</span>)  <span class="hljs-keyword">fi</span><span class="hljs-keyword">done</span><span class="hljs-comment"># zsh refuses to read from these directories if group writable</span>directories=(share/zsh share/zsh/site-functions)zsh_dirs=()<span class="hljs-keyword">for</span> dir <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;directories[@]&#125;</span>&quot;</span>; <span class="hljs-keyword">do</span>  zsh_dirs+=(<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_PREFIX&#125;</span>/<span class="hljs-variable">$&#123;dir&#125;</span>&quot;</span>)<span class="hljs-keyword">done</span>directories=(bin etc include lib sbin share var opt             share/zsh share/zsh/site-functions             var/homebrew var/homebrew/linked             Cellar Caskroom Homebrew Frameworks)mkdirs=()<span class="hljs-keyword">for</span> dir <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;directories[@]&#125;</span>&quot;</span>; <span class="hljs-keyword">do</span>  <span class="hljs-keyword">if</span> ! [[ -d <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_PREFIX&#125;</span>/<span class="hljs-variable">$&#123;dir&#125;</span>&quot;</span> ]]; <span class="hljs-keyword">then</span>    mkdirs+=(<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_PREFIX&#125;</span>/<span class="hljs-variable">$&#123;dir&#125;</span>&quot;</span>)  <span class="hljs-keyword">fi</span><span class="hljs-keyword">done</span>user_chmods=()<span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;#zsh_dirs[@]&#125;</span>&quot;</span> -gt 0 ]]; <span class="hljs-keyword">then</span>  <span class="hljs-keyword">for</span> dir <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;zsh_dirs[@]&#125;</span>&quot;</span>; <span class="hljs-keyword">do</span>    <span class="hljs-keyword">if</span> user_only_chmod <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;dir&#125;</span>&quot;</span>; <span class="hljs-keyword">then</span>      user_chmods+=(<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;dir&#125;</span>&quot;</span>)    <span class="hljs-keyword">fi</span>  <span class="hljs-keyword">done</span><span class="hljs-keyword">fi</span>chmods=()<span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;#group_chmods[@]&#125;</span>&quot;</span> -gt 0 ]]; <span class="hljs-keyword">then</span>  chmods+=(<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;group_chmods[@]&#125;</span>&quot;</span>)<span class="hljs-keyword">fi</span><span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;#user_chmods[@]&#125;</span>&quot;</span> -gt 0 ]]; <span class="hljs-keyword">then</span>  chmods+=(<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;user_chmods[@]&#125;</span>&quot;</span>)<span class="hljs-keyword">fi</span>chowns=()chgrps=()<span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;#chmods[@]&#125;</span>&quot;</span> -gt 0 ]]; <span class="hljs-keyword">then</span>  <span class="hljs-keyword">for</span> dir <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;chmods[@]&#125;</span>&quot;</span>; <span class="hljs-keyword">do</span>    <span class="hljs-keyword">if</span> file_not_owned <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;dir&#125;</span>&quot;</span>; <span class="hljs-keyword">then</span>      chowns+=(<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;dir&#125;</span>&quot;</span>)    <span class="hljs-keyword">fi</span>    <span class="hljs-keyword">if</span> file_not_grpowned <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;dir&#125;</span>&quot;</span>; <span class="hljs-keyword">then</span>      chgrps+=(<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;dir&#125;</span>&quot;</span>)    <span class="hljs-keyword">fi</span>  <span class="hljs-keyword">done</span><span class="hljs-keyword">fi</span><span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;#group_chmods[@]&#125;</span>&quot;</span> -gt 0 ]]; <span class="hljs-keyword">then</span>  ohai <span class="hljs-string">&quot;The following existing directories will be made group writable:&quot;</span>  <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;%s\n&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;group_chmods[@]&#125;</span>&quot;</span><span class="hljs-keyword">fi</span><span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;#user_chmods[@]&#125;</span>&quot;</span> -gt 0 ]]; <span class="hljs-keyword">then</span>  ohai <span class="hljs-string">&quot;The following existing directories will be made writable by user only:&quot;</span>  <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;%s\n&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;user_chmods[@]&#125;</span>&quot;</span><span class="hljs-keyword">fi</span><span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;#chowns[@]&#125;</span>&quot;</span> -gt 0 ]]; <span class="hljs-keyword">then</span>  ohai <span class="hljs-string">&quot;The following existing directories will have their owner set to <span class="hljs-variable">$&#123;tty_underline&#125;</span><span class="hljs-variable">$&#123;USER&#125;</span><span class="hljs-variable">$&#123;tty_reset&#125;</span>:&quot;</span>  <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;%s\n&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;chowns[@]&#125;</span>&quot;</span><span class="hljs-keyword">fi</span><span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;#chgrps[@]&#125;</span>&quot;</span> -gt 0 ]]; <span class="hljs-keyword">then</span>  ohai <span class="hljs-string">&quot;The following existing directories will have their group set to <span class="hljs-variable">$&#123;tty_underline&#125;</span><span class="hljs-variable">$&#123;GROUP&#125;</span><span class="hljs-variable">$&#123;tty_reset&#125;</span>:&quot;</span>  <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;%s\n&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;chgrps[@]&#125;</span>&quot;</span><span class="hljs-keyword">fi</span><span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;#mkdirs[@]&#125;</span>&quot;</span> -gt 0 ]]; <span class="hljs-keyword">then</span>  ohai <span class="hljs-string">&quot;The following new directories will be created:&quot;</span>  <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;%s\n&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;mkdirs[@]&#125;</span>&quot;</span><span class="hljs-keyword">fi</span><span class="hljs-keyword">if</span> should_install_command_line_tools; <span class="hljs-keyword">then</span>  ohai <span class="hljs-string">&quot;The Xcode Command Line Tools will be installed.&quot;</span><span class="hljs-keyword">fi</span><span class="hljs-keyword">if</span> [[ -t 0 &amp;&amp; -z <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;CI-&#125;</span>&quot;</span> ]]; <span class="hljs-keyword">then</span>  wait_for_user<span class="hljs-keyword">fi</span><span class="hljs-keyword">if</span> [[ -d <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_PREFIX&#125;</span>&quot;</span> ]]; <span class="hljs-keyword">then</span>  <span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;#chmods[@]&#125;</span>&quot;</span> -gt 0 ]]; <span class="hljs-keyword">then</span>    execute_sudo <span class="hljs-string">&quot;/bin/chmod&quot;</span> <span class="hljs-string">&quot;u+rwx&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;chmods[@]&#125;</span>&quot;</span>  <span class="hljs-keyword">fi</span>  <span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;#group_chmods[@]&#125;</span>&quot;</span> -gt 0 ]]; <span class="hljs-keyword">then</span>    execute_sudo <span class="hljs-string">&quot;/bin/chmod&quot;</span> <span class="hljs-string">&quot;g+rwx&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;group_chmods[@]&#125;</span>&quot;</span>  <span class="hljs-keyword">fi</span>  <span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;#user_chmods[@]&#125;</span>&quot;</span> -gt 0 ]]; <span class="hljs-keyword">then</span>    execute_sudo <span class="hljs-string">&quot;/bin/chmod&quot;</span> <span class="hljs-string">&quot;755&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;user_chmods[@]&#125;</span>&quot;</span>  <span class="hljs-keyword">fi</span>  <span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;#chowns[@]&#125;</span>&quot;</span> -gt 0 ]]; <span class="hljs-keyword">then</span>    execute_sudo <span class="hljs-string">&quot;<span class="hljs-variable">$CHOWN</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$USER</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;chowns[@]&#125;</span>&quot;</span>  <span class="hljs-keyword">fi</span>  <span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;#chgrps[@]&#125;</span>&quot;</span> -gt 0 ]]; <span class="hljs-keyword">then</span>    execute_sudo <span class="hljs-string">&quot;<span class="hljs-variable">$CHGRP</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$GROUP</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;chgrps[@]&#125;</span>&quot;</span>  <span class="hljs-keyword">fi</span><span class="hljs-keyword">else</span>  execute_sudo <span class="hljs-string">&quot;/bin/mkdir&quot;</span> <span class="hljs-string">&quot;-p&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_PREFIX&#125;</span>&quot;</span>  <span class="hljs-keyword">if</span> [[ -z <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_ON_LINUX-&#125;</span>&quot;</span> ]]; <span class="hljs-keyword">then</span>    execute_sudo <span class="hljs-string">&quot;<span class="hljs-variable">$CHOWN</span>&quot;</span> <span class="hljs-string">&quot;root:wheel&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_PREFIX&#125;</span>&quot;</span>  <span class="hljs-keyword">else</span>    execute_sudo <span class="hljs-string">&quot;<span class="hljs-variable">$CHOWN</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$USER</span>:<span class="hljs-variable">$GROUP</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_PREFIX&#125;</span>&quot;</span>  <span class="hljs-keyword">fi</span><span class="hljs-keyword">fi</span><span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;#mkdirs[@]&#125;</span>&quot;</span> -gt 0 ]]; <span class="hljs-keyword">then</span>  execute_sudo <span class="hljs-string">&quot;/bin/mkdir&quot;</span> <span class="hljs-string">&quot;-p&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;mkdirs[@]&#125;</span>&quot;</span>  execute_sudo <span class="hljs-string">&quot;/bin/chmod&quot;</span> <span class="hljs-string">&quot;g+rwx&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;mkdirs[@]&#125;</span>&quot;</span>  execute_sudo <span class="hljs-string">&quot;<span class="hljs-variable">$CHOWN</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$USER</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;mkdirs[@]&#125;</span>&quot;</span>  execute_sudo <span class="hljs-string">&quot;<span class="hljs-variable">$CHGRP</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$GROUP</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;mkdirs[@]&#125;</span>&quot;</span><span class="hljs-keyword">fi</span><span class="hljs-keyword">if</span> ! [[ -d <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_CACHE&#125;</span>&quot;</span> ]]; <span class="hljs-keyword">then</span>  <span class="hljs-keyword">if</span> [[ -z <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_ON_LINUX-&#125;</span>&quot;</span> ]]; <span class="hljs-keyword">then</span>    execute_sudo <span class="hljs-string">&quot;/bin/mkdir&quot;</span> <span class="hljs-string">&quot;-p&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_CACHE&#125;</span>&quot;</span>  <span class="hljs-keyword">else</span>    execute <span class="hljs-string">&quot;/bin/mkdir&quot;</span> <span class="hljs-string">&quot;-p&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_CACHE&#125;</span>&quot;</span>  <span class="hljs-keyword">fi</span><span class="hljs-keyword">fi</span><span class="hljs-keyword">if</span> exists_but_not_writable <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_CACHE&#125;</span>&quot;</span>; <span class="hljs-keyword">then</span>  execute_sudo <span class="hljs-string">&quot;/bin/chmod&quot;</span> <span class="hljs-string">&quot;g+rwx&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_CACHE&#125;</span>&quot;</span><span class="hljs-keyword">fi</span><span class="hljs-keyword">if</span> file_not_owned <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_CACHE&#125;</span>&quot;</span>; <span class="hljs-keyword">then</span>  execute_sudo <span class="hljs-string">&quot;<span class="hljs-variable">$CHOWN</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$USER</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_CACHE&#125;</span>&quot;</span><span class="hljs-keyword">fi</span><span class="hljs-keyword">if</span> file_not_grpowned <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_CACHE&#125;</span>&quot;</span>; <span class="hljs-keyword">then</span>  execute_sudo <span class="hljs-string">&quot;<span class="hljs-variable">$CHGRP</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$GROUP</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_CACHE&#125;</span>&quot;</span><span class="hljs-keyword">fi</span><span class="hljs-keyword">if</span> [[ -d <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_CACHE&#125;</span>&quot;</span> ]]; <span class="hljs-keyword">then</span>  execute <span class="hljs-string">&quot;<span class="hljs-variable">$TOUCH</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_CACHE&#125;</span>/.cleaned&quot;</span><span class="hljs-keyword">fi</span><span class="hljs-keyword">if</span> should_install_command_line_tools &amp;&amp; version_ge <span class="hljs-string">&quot;<span class="hljs-variable">$macos_version</span>&quot;</span> <span class="hljs-string">&quot;10.13&quot;</span>; <span class="hljs-keyword">then</span>  ohai <span class="hljs-string">&quot;Searching online for the Command Line Tools&quot;</span>  <span class="hljs-comment"># This temporary file prompts the &#x27;softwareupdate&#x27; utility to list the Command Line Tools</span>  clt_placeholder=<span class="hljs-string">&quot;/tmp/.com.apple.dt.CommandLineTools.installondemand.in-progress&quot;</span>  execute_sudo <span class="hljs-string">&quot;<span class="hljs-variable">$TOUCH</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$clt_placeholder</span>&quot;</span>  clt_label_command=<span class="hljs-string">&quot;/usr/sbin/softwareupdate -l |</span><span class="hljs-string">                      grep -B 1 -E &#x27;Command Line Tools&#x27; |</span><span class="hljs-string">                      awk -F&#x27;*&#x27; &#x27;/^ *\\*/ &#123;print \$2&#125;&#x27; |</span><span class="hljs-string">                      sed -e &#x27;s/^ *Label: //&#x27; -e &#x27;s/^ *//&#x27; |</span><span class="hljs-string">                      sort -V |</span><span class="hljs-string">                      tail -n1&quot;</span>  clt_label=<span class="hljs-string">&quot;<span class="hljs-subst">$(chomp <span class="hljs-string">&quot;<span class="hljs-subst">$(/bin/bash -c <span class="hljs-string">&quot;<span class="hljs-variable">$clt_label_command</span>&quot;</span>)</span>&quot;</span>)</span>&quot;</span>  <span class="hljs-keyword">if</span> [[ -n <span class="hljs-string">&quot;<span class="hljs-variable">$clt_label</span>&quot;</span> ]]; <span class="hljs-keyword">then</span>    ohai <span class="hljs-string">&quot;Installing <span class="hljs-variable">$clt_label</span>&quot;</span>    execute_sudo <span class="hljs-string">&quot;/usr/sbin/softwareupdate&quot;</span> <span class="hljs-string">&quot;-i&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$clt_label</span>&quot;</span>    execute_sudo <span class="hljs-string">&quot;/bin/rm&quot;</span> <span class="hljs-string">&quot;-f&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$clt_placeholder</span>&quot;</span>    execute_sudo <span class="hljs-string">&quot;/usr/bin/xcode-select&quot;</span> <span class="hljs-string">&quot;--switch&quot;</span> <span class="hljs-string">&quot;/Library/Developer/CommandLineTools&quot;</span>  <span class="hljs-keyword">fi</span><span class="hljs-keyword">fi</span><span class="hljs-comment"># Headless install may have failed, so fallback to original &#x27;xcode-select&#x27; method</span><span class="hljs-keyword">if</span> should_install_command_line_tools &amp;&amp; <span class="hljs-built_in">test</span> -t 0; <span class="hljs-keyword">then</span>  ohai <span class="hljs-string">&quot;Installing the Command Line Tools (expect a GUI popup):&quot;</span>  execute_sudo <span class="hljs-string">&quot;/usr/bin/xcode-select&quot;</span> <span class="hljs-string">&quot;--install&quot;</span>  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Press any key when the installation has completed.&quot;</span>  getc  execute_sudo <span class="hljs-string">&quot;/usr/bin/xcode-select&quot;</span> <span class="hljs-string">&quot;--switch&quot;</span> <span class="hljs-string">&quot;/Library/Developer/CommandLineTools&quot;</span><span class="hljs-keyword">fi</span><span class="hljs-keyword">if</span> [[ -z <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_ON_LINUX-&#125;</span>&quot;</span> ]] &amp;&amp; ! output=<span class="hljs-string">&quot;<span class="hljs-subst">$(/usr/bin/xcrun clang 2&gt;&amp;1)</span>&quot;</span> &amp;&amp; [[ <span class="hljs-string">&quot;<span class="hljs-variable">$output</span>&quot;</span> == *<span class="hljs-string">&quot;license&quot;</span>* ]]; <span class="hljs-keyword">then</span>  abort <span class="hljs-string">&quot;<span class="hljs-subst">$(cat &lt;&lt;EOABORT</span></span><span class="hljs-string"><span class="hljs-subst">You have not agreed to the Xcode license.</span></span><span class="hljs-string"><span class="hljs-subst">Before running the installer again please agree to the license by opening</span></span><span class="hljs-string"><span class="hljs-subst">Xcode.app or running:</span></span><span class="hljs-string"><span class="hljs-subst">    sudo xcodebuild -license</span></span><span class="hljs-string"><span class="hljs-subst">EOABORT</span></span><span class="hljs-string"><span class="hljs-subst">)</span>&quot;</span><span class="hljs-keyword">fi</span>ohai <span class="hljs-string">&quot;Downloading and installing Homebrew...&quot;</span>(  <span class="hljs-built_in">cd</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_REPOSITORY&#125;</span>&quot;</span> &gt;/dev/null || <span class="hljs-built_in">return</span>  <span class="hljs-comment"># we do it in four steps to avoid merge errors when reinstalling</span>  execute <span class="hljs-string">&quot;git&quot;</span> <span class="hljs-string">&quot;init&quot;</span> <span class="hljs-string">&quot;-q&quot;</span>  <span class="hljs-comment"># &quot;git remote add&quot; will fail if the remote is defined in the global config</span>  execute <span class="hljs-string">&quot;git&quot;</span> <span class="hljs-string">&quot;config&quot;</span> <span class="hljs-string">&quot;remote.origin.url&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;BREW_REPO&#125;</span>&quot;</span>  execute <span class="hljs-string">&quot;git&quot;</span> <span class="hljs-string">&quot;config&quot;</span> <span class="hljs-string">&quot;remote.origin.fetch&quot;</span> <span class="hljs-string">&quot;+refs/heads/*:refs/remotes/origin/*&quot;</span>  <span class="hljs-comment"># ensure we don&#x27;t munge line endings on checkout</span>  execute <span class="hljs-string">&quot;git&quot;</span> <span class="hljs-string">&quot;config&quot;</span> <span class="hljs-string">&quot;core.autocrlf&quot;</span> <span class="hljs-string">&quot;false&quot;</span>  execute <span class="hljs-string">&quot;git&quot;</span> <span class="hljs-string">&quot;fetch&quot;</span> <span class="hljs-string">&quot;origin&quot;</span> <span class="hljs-string">&quot;--force&quot;</span>  execute <span class="hljs-string">&quot;git&quot;</span> <span class="hljs-string">&quot;fetch&quot;</span> <span class="hljs-string">&quot;origin&quot;</span> <span class="hljs-string">&quot;--tags&quot;</span> <span class="hljs-string">&quot;--force&quot;</span>  execute <span class="hljs-string">&quot;git&quot;</span> <span class="hljs-string">&quot;reset&quot;</span> <span class="hljs-string">&quot;--hard&quot;</span> <span class="hljs-string">&quot;origin/master&quot;</span>  execute <span class="hljs-string">&quot;ln&quot;</span> <span class="hljs-string">&quot;-sf&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_REPOSITORY&#125;</span>/bin/brew&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_PREFIX&#125;</span>/bin/brew&quot;</span>  execute <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_PREFIX&#125;</span>/bin/brew&quot;</span> <span class="hljs-string">&quot;update&quot;</span> <span class="hljs-string">&quot;--force&quot;</span>) || <span class="hljs-built_in">exit</span> 1<span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;:<span class="hljs-variable">$&#123;PATH&#125;</span>:&quot;</span> != *<span class="hljs-string">&quot;:<span class="hljs-variable">$&#123;HOMEBREW_PREFIX&#125;</span>/bin:&quot;</span>* ]]; <span class="hljs-keyword">then</span>  warn <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_PREFIX&#125;</span>/bin is not in your PATH.&quot;</span><span class="hljs-keyword">fi</span>ohai <span class="hljs-string">&quot;Installation successful!&quot;</span><span class="hljs-built_in">echo</span><span class="hljs-comment"># Use the shell&#x27;s audible bell.</span><span class="hljs-keyword">if</span> [[ -t 1 ]]; <span class="hljs-keyword">then</span>  <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;\a&quot;</span><span class="hljs-keyword">fi</span><span class="hljs-comment"># Use an extra newline and bold to avoid this being missed.</span>ohai <span class="hljs-string">&quot;Homebrew has enabled anonymous aggregate formulae and cask analytics.&quot;</span><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-subst">$(cat &lt;&lt;EOS</span></span><span class="hljs-string"><span class="hljs-subst">$&#123;tty_bold&#125;Read the analytics documentation (and how to opt-out)</span> here:</span><span class="hljs-string">  <span class="hljs-variable">$&#123;tty_underline&#125;</span>https://docs.brew.sh/Analytics<span class="hljs-variable">$&#123;tty_reset&#125;</span></span><span class="hljs-string">No analytics data has been sent yet (or will be during this \`install\` run).</span><span class="hljs-string">EOS</span><span class="hljs-string">)</span><span class="hljs-string">&quot;</span>ohai <span class="hljs-string">&quot;Homebrew is run entirely by unpaid volunteers. Please consider donating:&quot;</span><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-subst">$(cat &lt;&lt;EOS</span></span><span class="hljs-string"><span class="hljs-subst">  $&#123;tty_underline&#125;https://github.com/Homebrew/brew#donations$&#123;tty_reset&#125;</span></span><span class="hljs-string"><span class="hljs-subst">EOS</span></span><span class="hljs-string"><span class="hljs-subst">)</span></span><span class="hljs-string">&quot;</span>(  <span class="hljs-built_in">cd</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_REPOSITORY&#125;</span>&quot;</span> &gt;/dev/null || <span class="hljs-built_in">return</span>  execute <span class="hljs-string">&quot;git&quot;</span> <span class="hljs-string">&quot;config&quot;</span> <span class="hljs-string">&quot;--replace-all&quot;</span> <span class="hljs-string">&quot;homebrew.analyticsmessage&quot;</span> <span class="hljs-string">&quot;true&quot;</span>  execute <span class="hljs-string">&quot;git&quot;</span> <span class="hljs-string">&quot;config&quot;</span> <span class="hljs-string">&quot;--replace-all&quot;</span> <span class="hljs-string">&quot;homebrew.caskanalyticsmessage&quot;</span> <span class="hljs-string">&quot;true&quot;</span>) || <span class="hljs-built_in">exit</span> 1ohai <span class="hljs-string">&quot;Next steps:&quot;</span><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;- Run \`brew help\` to get started&quot;</span><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;- Further documentation: &quot;</span><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;    <span class="hljs-variable">$&#123;tty_underline&#125;</span>https://docs.brew.sh<span class="hljs-variable">$&#123;tty_reset&#125;</span>&quot;</span><span class="hljs-keyword">if</span> [[ -n <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOMEBREW_ON_LINUX-&#125;</span>&quot;</span> ]]; <span class="hljs-keyword">then</span>  <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;<span class="hljs-variable">$SHELL</span>&quot;</span> <span class="hljs-keyword">in</span>    */bash*)      <span class="hljs-keyword">if</span> [[ -r <span class="hljs-string">&quot;<span class="hljs-variable">$HOME</span>/.bash_profile&quot;</span> ]]; <span class="hljs-keyword">then</span>        shell_profile=<span class="hljs-string">&quot;<span class="hljs-variable">$HOME</span>/.bash_profile&quot;</span>      <span class="hljs-keyword">else</span>        shell_profile=<span class="hljs-string">&quot;<span class="hljs-variable">$HOME</span>/.profile&quot;</span>      <span class="hljs-keyword">fi</span>      ;;    */zsh*)      shell_profile=<span class="hljs-string">&quot;<span class="hljs-variable">$HOME</span>/.zprofile&quot;</span>      ;;    *)      shell_profile=<span class="hljs-string">&quot;<span class="hljs-variable">$HOME</span>/.profile&quot;</span>      ;;  <span class="hljs-keyword">esac</span>  cat &lt;&lt;<span class="hljs-string">EOS</span><span class="hljs-string">- Install the Homebrew dependencies if you have sudo access:</span><span class="hljs-string">  $&#123;tty_bold&#125;Debian, Ubuntu, etc.$&#123;tty_reset&#125;</span><span class="hljs-string">    sudo apt-get install build-essential</span><span class="hljs-string">  $&#123;tty_bold&#125;Fedora, Red Hat, CentOS, etc.$&#123;tty_reset&#125;</span><span class="hljs-string">    sudo yum groupinstall &#x27;Development Tools&#x27;</span><span class="hljs-string">  See $&#123;tty_underline&#125;https://docs.brew.sh/linux$&#123;tty_reset&#125; for more information.</span><span class="hljs-string">- Configure Homebrew in your $&#123;tty_underline&#125;$&#123;shell_profile&#125;$&#123;tty_reset&#125; by running</span><span class="hljs-string">    echo &#x27;eval \$($&#123;HOMEBREW_PREFIX&#125;/bin/brew shellenv)&#x27; &gt;&gt; $&#123;shell_profile&#125;</span><span class="hljs-string">- Add Homebrew to your $&#123;tty_bold&#125;PATH$&#123;tty_reset&#125;</span><span class="hljs-string">    eval \$($&#123;HOMEBREW_PREFIX&#125;/bin/brew shellenv)</span><span class="hljs-string">- We recommend that you install GCC by running:</span><span class="hljs-string">    brew install gcc</span><span class="hljs-string"></span><span class="hljs-string">EOS</span><span class="hljs-keyword">fi</span></code></pre><p>æ‰§è¡Œå‰,éœ€è¦ç»™æ”¹è„šæœ¬èµ‹æƒé™</p><pre><code class="hljs bash">sudo chmod -R 777 brew_install.sh./brew_install.sh</code></pre><p>ç­‰å¾…å®‰è£…æˆåŠŸ(ä¸­é—´æœ‰è¿‡ä¸¤æ¬¡å¤±è´¥,ä¸»è¦åŸå› æ˜¯åŸæ¥å®‰è£…çš„Homebrewæ²¡æœ‰å¸è½½å¹²å‡€)</p><h4 id="VMware-Fusion"><a href="#VMware-Fusion" class="headerlink" title="VMware Fusion"></a>VMware Fusion</h4><h5 id="ç‰©ç†å†…å­˜ä¸è¶³ï¼Œæ— æ³•ä½¿ç”¨é…ç½®çš„è®¾ç½®å¼€å¯è™šæ‹Ÿæœº"><a href="#ç‰©ç†å†…å­˜ä¸è¶³ï¼Œæ— æ³•ä½¿ç”¨é…ç½®çš„è®¾ç½®å¼€å¯è™šæ‹Ÿæœº" class="headerlink" title="ç‰©ç†å†…å­˜ä¸è¶³ï¼Œæ— æ³•ä½¿ç”¨é…ç½®çš„è®¾ç½®å¼€å¯è™šæ‹Ÿæœº"></a>ç‰©ç†å†…å­˜ä¸è¶³ï¼Œæ— æ³•ä½¿ç”¨é…ç½®çš„è®¾ç½®å¼€å¯è™šæ‹Ÿæœº</h5><p>åŸæ¥çš„VMware Fusion ç‰ˆæœ¬æ˜¯11</p><p><img src="/images/Mac%E7%94%B5%E8%84%91%E4%BD%BF%E7%94%A8/vmfusion_11.png"></p><p>Googleåå‘ç°12å¯ä»¥ç”¨,äºæ˜¯ä¸‹è½½äº†VMware Fusionå®‰è£…,äº²æµ‹å¯ç”¨</p><h5 id="æ— æ³•å°†â€œEthernet0â€è¿æ¥åˆ°è™šæ‹Ÿç½‘ç»œâ€œ-dev-vmnet8â€ã€‚"><a href="#æ— æ³•å°†â€œEthernet0â€è¿æ¥åˆ°è™šæ‹Ÿç½‘ç»œâ€œ-dev-vmnet8â€ã€‚" class="headerlink" title="æ— æ³•å°†â€œEthernet0â€è¿æ¥åˆ°è™šæ‹Ÿç½‘ç»œâ€œ/dev/vmnet8â€ã€‚"></a>æ— æ³•å°†â€œEthernet0â€è¿æ¥åˆ°è™šæ‹Ÿç½‘ç»œâ€œ/dev/vmnet8â€ã€‚</h5><p>VMware Fusionå‡çº§åˆ°12åï¼Œè¿‡äº†å‡ å¤©æ‰“å¼€è™šæ‹Ÿæœºæ—¶ï¼Œå‘ç°â€œEthernet0â€è¿æ¥åˆ°è™šæ‹Ÿç½‘ç»œâ€œ/dev/vmnet8â€</p><p>è°·æ­Œäº†å¥½ä¹…åå‘ç°</p><pre><code class="hljs zsh">sudo rm /Library/Preferences/SystemConfiguration/NetworkInterfaces.plist &amp;&amp; sudo killall -9 configd</code></pre><p>è§£å†³æ–¹å¼æ¥æºï¼š</p><p><a href="https://communities.vmware.com/t5/VMware-Fusion-Discussions/No-Ethernet-Connection-VMware-Fusion-12-macOS-Big-Sur-Beta-6/m-p/2303833#M140209">https://communities.vmware.com/t5/VMware-Fusion-Discussions/No-Ethernet-Connection-VMware-Fusion-12-macOS-Big-Sur-Beta-6/m-p/2303833#M140209</a></p><p>å¦å¤–ï¼Œå½“è‹¹æœç”µè„‘å…±äº«wifiæ—¶ï¼Œä¹Ÿä¼šé€ æˆè¿™ä¸ªç»“æœã€‚æ‰€ä»¥å…±äº«ç½‘ç»œä¹Ÿéœ€è¦å…³é—­ã€‚</p><h3 id="å‘½ä»¤è¡ŒæŸ¥çœ‹ä¿å­˜çš„å¯†ç "><a href="#å‘½ä»¤è¡ŒæŸ¥çœ‹ä¿å­˜çš„å¯†ç " class="headerlink" title="å‘½ä»¤è¡ŒæŸ¥çœ‹ä¿å­˜çš„å¯†ç "></a>å‘½ä»¤è¡ŒæŸ¥çœ‹ä¿å­˜çš„å¯†ç </h3><h4 id="security-find-generic-password-ga-â€œwifiåç§°â€"><a href="#security-find-generic-password-ga-â€œwifiåç§°â€" class="headerlink" title="security find-generic-password -ga â€œwifiåç§°â€"></a>security find-generic-password -ga â€œwifiåç§°â€</h4><p><img src="/images/Mac%E7%94%B5%E8%84%91%E4%BD%BF%E7%94%A8/wifi.png"></p>]]></content>
    
    
    <categories>
      
      <category>Develop</category>
      
    </categories>
    
    
    <tags>
      
      <tag>mac</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€Macã€‘hadoopå¼€å‘ç¯å¢ƒé…ç½®</title>
    <link href="/2020/06/17/mac%E7%8E%AF%E5%A2%83%E4%B8%8Bhadoop%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    <url>/2020/06/17/mac%E7%8E%AF%E5%A2%83%E4%B8%8Bhadoop%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<p><img src="/images/mac%E7%8E%AF%E5%A2%83%E4%B8%8B%E6%90%AD%E5%BB%BAhadoop%E9%9B%86%E7%BE%A4%E7%8E%AF%E5%A2%83/hadoops.png"><a id="more"></a> </p><h3 id="hdfsçš„java-APIå¼€å‘ç¯å¢ƒå‡†å¤‡"><a href="#hdfsçš„java-APIå¼€å‘ç¯å¢ƒå‡†å¤‡" class="headerlink" title="hdfsçš„java APIå¼€å‘ç¯å¢ƒå‡†å¤‡"></a>hdfsçš„java APIå¼€å‘ç¯å¢ƒå‡†å¤‡</h3><h4 id="ä¿®æ”¹hostsæ–‡ä»¶"><a href="#ä¿®æ”¹hostsæ–‡ä»¶" class="headerlink" title="ä¿®æ”¹hostsæ–‡ä»¶"></a>ä¿®æ”¹hostsæ–‡ä»¶</h4><ul><li><p>macä¸‹ä¿®æ”¹hostsæ–‡ä»¶</p><p>æ–‡ä»¶æ‰€åœ¨ä½ç½®<code>/etc/hosts</code></p><p>å°†è™šæ‹Ÿæœºä¸­/etc/hostsæ–‡ä»¶ä¸€ä¸‹å†…å®¹ï¼Œæ·»åŠ åˆ°ä»¥ä¸Šhostsæ–‡ä»¶æœ«å°¾</p></li></ul><pre><code class="hljs accesslog"><span class="hljs-number">192.168.51.100</span> node01.hadoop.com node01<span class="hljs-number">192.168.51.110</span> node02.hadoop.com node02<span class="hljs-number">192.168.51.120</span> node03.hadoop.com node03</code></pre><h4 id="å®‰è£…jdk"><a href="#å®‰è£…jdk" class="headerlink" title="å®‰è£…jdk"></a>å®‰è£…jdk</h4><p>æ‹·è´é›†ç¾¤ç¯å¢ƒä¸‹çš„jdkåˆ°æœ¬åœ°</p><pre><code class="hljs routeros"><span class="hljs-comment">#æ·»åŠ ä»¥ä¸‹é…ç½®å†…å®¹ï¼Œé…ç½®jdkç¯å¢ƒå˜é‡</span><span class="hljs-builtin-name">export</span> <span class="hljs-attribute">JAVA_HOME</span>=/weitrue/install/jdk1.8.0_141<span class="hljs-builtin-name">export</span> <span class="hljs-attribute">PATH</span>=<span class="hljs-variable">$PATH</span>:$JAVA_HOME/binCopy</code></pre><p>è®©ä¿®æ”¹é©¬ä¸Šç”Ÿæ•ˆ</p><pre><code class="hljs gradle"><span class="hljs-keyword">source</span> <span class="hljs-regexp">/etc/</span>profile</code></pre><h4 id="macä¸‹hadoopç¯å¢ƒé…ç½®"><a href="#macä¸‹hadoopç¯å¢ƒé…ç½®" class="headerlink" title="macä¸‹hadoopç¯å¢ƒé…ç½®"></a>macä¸‹hadoopç¯å¢ƒé…ç½®</h4><p>æ‹·è´é›†ç¾¤ç¯å¢ƒä¸‹<code>hadoop-2.6.0-cdh5.14.2</code>ç›®å½•æ–‡ä»¶åˆ°æœ¬åœ°ï¼Œé…ç½®ç¯å¢ƒå˜é‡</p><p><img src="/images/mac%E7%8E%AF%E5%A2%83%E4%B8%8Bhadoop%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/hadoop.png"></p><h4 id="å®‰è£…maven"><a href="#å®‰è£…maven" class="headerlink" title="å®‰è£…maven"></a>å®‰è£…maven</h4><h5 id="mavenæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#mavenæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="mavenæ˜¯ä»€ä¹ˆï¼Ÿ"></a>mavenæ˜¯ä»€ä¹ˆï¼Ÿ</h5><p>Apache Mavenæ˜¯ä¸€ä¸ªè½¯ä»¶é¡¹ç›®ç®¡ç†å’Œç†è§£å·¥å…·ã€‚åŸºäºé¡¹ç›®å¯¹è±¡æ¨¡å‹ï¼ˆPOMï¼‰çš„æ¦‚å¿µï¼ŒMavenå¯ä»¥ä»ä¸€ä¸ªä¸­å¿ƒä¿¡æ¯ç®¡ç†é¡¹ç›®çš„æ„å»ºï¼ŒæŠ¥å‘Šå’Œæ–‡æ¡£ã€‚</p><h5 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h5><p>è§£å‹å®‰è£…åŒ…<code>apache-maven-3.6.1-bin.zip</code>åˆ°å®‰è£…ç›®å½•</p><p>ç¼–è¾‘<code>.bash_profile</code>ï¼Œæ–°å¢mavenç¯å¢ƒé…ç½®</p><p><img src="/images/mac%E7%8E%AF%E5%A2%83%E4%B8%8Bhadoop%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/maven.png"></p><h6 id="mavençš„ä»“åº“"><a href="#mavençš„ä»“åº“" class="headerlink" title="mavençš„ä»“åº“"></a>mavençš„ä»“åº“</h6><ul><li><p>åˆ›å»ºmavenå·¥ç¨‹åï¼Œmavenä¼šè‡ªåŠ¨çš„å»æœ¬åœ°ä»“åº“æŸ¥çœ‹æ—¶å€™æœ‰æ‰€éœ€çš„jaråŒ…ï¼Œå¦‚æœæ²¡æœ‰çš„è¯ï¼Œé»˜è®¤å»ä¸­å¤®ä»“åº“ï¼Œå°†jaråŒ…ä¸‹è½½åˆ°æœ¬åœ°ï¼›ä»¥åå¦‚æœå†æ¬¡ä½¿ç”¨æ­¤jaræ—¶ï¼Œå°±ç›´æ¥ä½¿ç”¨æœ¬åœ°ä»“åº“çš„jarå³å¯</p></li><li><p>æ­¤è¿‡ç¨‹æ˜¯mavenè‡ªåŠ¨å®Œæˆçš„</p></li><li><p>æœ¬åœ°ä»“åº“ï¼š</p><p><img src="/images/mac%E7%8E%AF%E5%A2%83%E4%B8%8Bhadoop%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/repo.png"></p></li><li><p>ç§æœä»“åº“ï¼šå°±æ˜¯æˆ‘ä»¬è‡ªå·±æ­å»ºçš„ä¸€ä¸ªè¿œç¨‹ä»“åº“</p></li><li><p>ä¸­å¤®ä»“åº“ï¼šæ˜¯å®˜æ–¹æˆ–è€…ç¬¬ä¸‰æ–¹æä¾›çš„ä»“åº“</p></li></ul><h6 id="settingsæ–‡ä»¶"><a href="#settingsæ–‡ä»¶" class="headerlink" title="settingsæ–‡ä»¶"></a>settingsæ–‡ä»¶</h6><ul><li>å£°æ˜æ–‡ä»¶è§„èŒƒ</li></ul><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">settings</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/SETTINGS/1.0.0&quot;</span></span><span class="hljs-tag">          <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><span class="hljs-tag">          <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd&quot;</span>&gt;</span></code></pre><ul><li>æœ¬åœ°ä»“åº“è·¯å¾„</li></ul><p><code>&lt;localRepository&gt;/path/to/local/repo&lt;/localRepository&gt;</code></p><ul><li>Mavenæ˜¯å¦éœ€è¦å’Œç”¨æˆ·äº¤äº’ä»¥è·å¾—è¾“å…¥ã€‚å¦‚æœMavenéœ€è¦å’Œç”¨æˆ·äº¤äº’ä»¥è·å¾—è¾“å…¥ï¼Œåˆ™è®¾ç½®æˆtrueï¼Œåä¹‹åˆ™åº”ä¸ºfalseã€‚é»˜è®¤ä¸ºtrue </li></ul><p><code>&lt;interactiveMode&gt;true&lt;/interactiveMode&gt;</code></p><ul><li>è¡¨ç¤ºMavenæ˜¯å¦éœ€è¦åœ¨ç¦»çº¿æ¨¡å¼ä¸‹è¿è¡Œã€‚å¦‚æœæ„å»ºç³»ç»Ÿéœ€è¦åœ¨ç¦»çº¿æ¨¡å¼ä¸‹è¿è¡Œï¼Œåˆ™ä¸ºtrueï¼Œé»˜è®¤ä¸ºfalseã€‚å½“ç”±äºç½‘ç»œè®¾ç½®åŸå› æˆ–è€…å®‰å…¨å› ç´ ï¼Œæ„å»ºæœåŠ¡å™¨ä¸èƒ½è¿æ¥è¿œç¨‹ä»“åº“çš„æ—¶å€™ï¼Œè¯¥é…ç½®å°±ååˆ†æœ‰ç”¨ </li></ul><p><code>&lt;offline&gt;false&lt;/offline&gt;</code></p><ul><li>å½“æ’ä»¶çš„ç»„ç»‡Idï¼ˆgroupIdï¼‰æ²¡æœ‰æ˜¾å¼æä¾›æ—¶ï¼Œä¾›æœå¯»æ’ä»¶ç»„ç»‡Idï¼ˆgroupIdï¼‰çš„åˆ—è¡¨ã€‚è¯¥å…ƒç´ åŒ…å«ä¸€ä¸ªpluginGroupå…ƒç´ åˆ—è¡¨ï¼Œæ¯ä¸ªå­å…ƒç´ åŒ…å«äº†ä¸€ä¸ªç»„ç»‡Idï¼ˆgroupIdï¼‰ã€‚</li></ul><p><code>pluginGroups</code></p><ul><li>ä¸ºä»“åº“åˆ—è¡¨é…ç½®çš„ä¸‹è½½é•œåƒåˆ—è¡¨ </li></ul><p><code>mirrors</code></p><h6 id="pomæ–‡ä»¶"><a href="#pomæ–‡ä»¶" class="headerlink" title="pomæ–‡ä»¶"></a>pomæ–‡ä»¶</h6><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>     é¡¹ç›®çš„æ¨¡æ¿ç‰ˆæœ¬<span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.hadoop<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>         å¯ä»¥ç”¨è¿™ä¸ªæ¥æ ‡è¯†å…¬å¸<span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>TestFlume<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>     å¯ä»¥æ ‡è¯†å·¥ç¨‹çš„ä½œç”¨<span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>jar<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span>             æŒ‡å®šæ‰“åŒ…ç±»å‹       <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>        åˆ¶å®šé¡¹ç›®ç‰ˆæœ¬<span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>       é¡¹ç›®çš„ä¾èµ–å…³ç³»<span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>                        æ„å»ºé¡¹ç›®çš„ä¿¡æ¯</code></pre><p>æ€»é¡¹ç›®/ pom.xml æ€»é¡¹ç›®çš„pomé…ç½®æ–‡ä»¶ </p><p>å­é¡¹ç›®1/ pom.xml å­é¡¹ç›®1çš„pomæ–‡ä»¶ </p><p>å­é¡¹ç›®2/ pom.xml å­é¡¹ç›®2çš„pomæ–‡ä»¶ </p><h6 id="mavenç®€å•çš„å‘½ä»¤"><a href="#mavenç®€å•çš„å‘½ä»¤" class="headerlink" title="mavenç®€å•çš„å‘½ä»¤"></a>mavenç®€å•çš„å‘½ä»¤</h6><p>mvn clean </p><p>mvn clean package</p><p>mvn install:install-file -Dfile=junit-3.8.2.jar -DgroupId=junit -DartifactId=junit -Dversion=3.8.2 -Dpackaging=jar</p><p>å¦‚æœä¾èµ–ä¸‹è½½æœ‰é—®é¢˜ï¼Œéœ€è¦è‡ªå·±æ·»åŠ ä¾èµ–åŒ…è¿›ä»“åº“ï¼Œä¸è¦å¤åˆ¶ç²˜è´´ï¼Œè¦ç”¨ mvn installè¿™ä¸ªå‘½ä»¤å°†jaråŒ…æ‰“è¿›ä»“åº“</p><h5 id="å®‰è£…idea"><a href="#å®‰è£…idea" class="headerlink" title="å®‰è£…idea"></a>å®‰è£…idea</h5>]]></content>
    
    
    <categories>
      
      <category>Bdata</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hadoop</tag>
      
      <tag>å¤§æ•°æ®</tag>
      
      <tag>mac</tag>
      
      <tag>Java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€Macã€‘æ­å»ºhadoopé›†ç¾¤ç¯å¢ƒï¼ˆä¸‰å°ï¼‰</title>
    <link href="/2020/06/15/mac%E7%8E%AF%E5%A2%83%E4%B8%8B%E6%90%AD%E5%BB%BAhadoop%E9%9B%86%E7%BE%A4%E7%8E%AF%E5%A2%83/"/>
    <url>/2020/06/15/mac%E7%8E%AF%E5%A2%83%E4%B8%8B%E6%90%AD%E5%BB%BAhadoop%E9%9B%86%E7%BE%A4%E7%8E%AF%E5%A2%83/</url>
    
    <content type="html"><![CDATA[<p><img src="/images/mac%E7%8E%AF%E5%A2%83%E4%B8%8B%E6%90%AD%E5%BB%BAhadoop%E9%9B%86%E7%BE%A4%E7%8E%AF%E5%A2%83/hadoops.png"><a id="more"></a> </p><h3 id="1-ä¸‰å°linuxæœåŠ¡å™¨çš„å®‰è£…"><a href="#1-ä¸‰å°linuxæœåŠ¡å™¨çš„å®‰è£…" class="headerlink" title="1. ä¸‰å°linuxæœåŠ¡å™¨çš„å®‰è£…"></a>1. ä¸‰å°linuxæœåŠ¡å™¨çš„å®‰è£…</h3><h4 id="1-å®‰è£…VmWare-Fusion"><a href="#1-å®‰è£…VmWare-Fusion" class="headerlink" title="1. å®‰è£…VmWare Fusion"></a>1. å®‰è£…VmWare Fusion</h4><p><img src="/images/mac%E7%8E%AF%E5%A2%83%E4%B8%8B%E6%90%AD%E5%BB%BAhadoop%E9%9B%86%E7%BE%A4%E7%8E%AF%E5%A2%83/fusion.png"></p><h4 id="2-é€šè¿‡Vmwareå®‰è£…ä¸‰å°linuxæœºå™¨"><a href="#2-é€šè¿‡Vmwareå®‰è£…ä¸‰å°linuxæœºå™¨" class="headerlink" title="2.é€šè¿‡Vmwareå®‰è£…ä¸‰å°linuxæœºå™¨"></a>2.é€šè¿‡Vmwareå®‰è£…ä¸‰å°linuxæœºå™¨</h4><p><img src="/images/mac%E7%8E%AF%E5%A2%83%E4%B8%8B%E6%90%AD%E5%BB%BAhadoop%E9%9B%86%E7%BE%A4%E7%8E%AF%E5%A2%83/linux.png"></p><h4 id="3-ä¸ºlinuxè™šæ‹Ÿæœºè®¾ç½®ç½‘ç»œé…ç½®"><a href="#3-ä¸ºlinuxè™šæ‹Ÿæœºè®¾ç½®ç½‘ç»œé…ç½®" class="headerlink" title="3.ä¸ºlinuxè™šæ‹Ÿæœºè®¾ç½®ç½‘ç»œé…ç½®"></a>3.ä¸ºlinuxè™šæ‹Ÿæœºè®¾ç½®ç½‘ç»œé…ç½®</h4><p>å®‰è£…VMWare FusionæˆåŠŸåï¼ŒMac OSä¼šæ–°å¢ä¸¤å¼ ç½‘å¡vmnet1ä»¥åŠvmnet8ï¼Œå…¶ä¸­vmnet1æ˜¯Host-onlyæ¨¡å¼ï¼Œvmnet8æ˜¯NATæ¨¡å¼ï¼Œè¿™é‡Œé€‰æ‹©vmnet8ä½¿ç”¨NATè¿›è¡Œç½‘ç»œè®¾ç½®ã€‚</p><h5 id="1-ä¿®æ”¹Fusionç½‘ç»œé…ç½®"><a href="#1-ä¿®æ”¹Fusionç½‘ç»œé…ç½®" class="headerlink" title="1.ä¿®æ”¹Fusionç½‘ç»œé…ç½®"></a>1.ä¿®æ”¹Fusionç½‘ç»œé…ç½®</h5><p>ä¿®æ”¹é…ç½®æ–‡ä»¶:/Library/Preferences/VMware\ Fusion/networking</p><p><img src="/images/mac%E7%8E%AF%E5%A2%83%E4%B8%8B%E6%90%AD%E5%BB%BAhadoop%E9%9B%86%E7%BE%A4%E7%8E%AF%E5%A2%83/fusion_net.png"></p><h5 id="2-ä¿®æ”¹ç½‘å…³"><a href="#2-ä¿®æ”¹ç½‘å…³" class="headerlink" title="2.ä¿®æ”¹ç½‘å…³"></a>2.ä¿®æ”¹ç½‘å…³</h5><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š/Library/Preferences/VMware Fusion/vmnet8/nat.conf</p><p><img src="/images/mac%E7%8E%AF%E5%A2%83%E4%B8%8B%E6%90%AD%E5%BB%BAhadoop%E9%9B%86%E7%BE%A4%E7%8E%AF%E5%A2%83/net8.png"></p><h5 id="3-ä¿®æ”¹linuxè™šæ‹Ÿæœºç½‘å¡"><a href="#3-ä¿®æ”¹linuxè™šæ‹Ÿæœºç½‘å¡" class="headerlink" title="3.ä¿®æ”¹linuxè™šæ‹Ÿæœºç½‘å¡"></a>3.ä¿®æ”¹linuxè™šæ‹Ÿæœºç½‘å¡</h5><p>ä¿®æ”¹é…ç½®æ–‡ä»¶(æœåŠ¡å™¨ç‰ˆlinux):/etc/sysconfig/network-scripts/ifcfg-ens33</p><p><img src="/images/mac%E7%8E%AF%E5%A2%83%E4%B8%8B%E6%90%AD%E5%BB%BAhadoop%E9%9B%86%E7%BE%A4%E7%8E%AF%E5%A2%83/linux_net.png"></p><p>æ›´æ”¹å®Œæˆé…ç½®ï¼Œé‡å¯ç½‘ç»œæœåŠ¡</p><pre><code class="hljs shell">systemctl restart network</code></pre><p>å®‰è£…ä¸€äº›å¸¸ç”¨çš„è½¯ä»¶</p><pre><code class="hljs shell">yum -y install vimyum -y install net-tools</code></pre><p>å…³æœº</p><pre><code class="hljs angelscript">init <span class="hljs-number">0</span></code></pre><h5 id="4-å…‹éš†ç¬¬ä¸€å°linuxè™šæ‹Ÿæœº"><a href="#4-å…‹éš†ç¬¬ä¸€å°linuxè™šæ‹Ÿæœº" class="headerlink" title="4.å…‹éš†ç¬¬ä¸€å°linuxè™šæ‹Ÿæœº"></a>4.å…‹éš†ç¬¬ä¸€å°linuxè™šæ‹Ÿæœº</h5><p>ç°åœ¨å·²ç»æœ‰äº†ç§å­æœºå™¨äº†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç§å­æœºå™¨è¿›è¡Œå¤åˆ¶æˆ–è€…å…‹éš†å‡ºä¸‰å°æœºå™¨</p><h6 id="æ›´æ”¹å…‹éš†æœºå™¨çš„IPåœ°å€"><a href="#æ›´æ”¹å…‹éš†æœºå™¨çš„IPåœ°å€" class="headerlink" title="æ›´æ”¹å…‹éš†æœºå™¨çš„IPåœ°å€"></a>æ›´æ”¹å…‹éš†æœºå™¨çš„IPåœ°å€</h6><ul><li><p>ä¸‰å°æœºå™¨çš„ipåœ°å€åˆ†åˆ«æ˜¯<code>192.168.51.100ã€192.168.51.110ã€192.168.51.120</code></p></li><li><p>å…‹éš†å‡ºæ¥çš„æœºå™¨IPåœ°å€ä¸ç§å­çš„ipåœ°å€ä¸€æ ·ï¼Œæˆ‘ä»¬å°†ç¬¬äºŒå°æœºå™¨çš„IPåœ°å€æ›´æ”¹ä¸º192.168.51.110å³å¯</p></li><li><p>å¯åŠ¨è™šæ‹Ÿæœºï¼Œå¹¶é€šè¿‡rootç”¨æˆ·ï¼Œå¯†ç ******æ¥è¿›è¡Œç™»å½•ï¼Œç„¶åæ¥æ›´æ”¹linuxæœºå™¨çš„IPåœ°å€</p></li></ul><pre><code class="hljs shell">vi /etc/sysconfig/network-scripts/ifcfg-ens33</code></pre><pre><code class="hljs shell">IPADDR=192.168.51.110NETMASK=255.255.255.0GATEWAY=192.168.51.1DNS1=8.8.8.8</code></pre><ul><li><p>ä¾ç…§ä¸Šé¢æ­¥éª¤ï¼Œæ¥ç€å…‹éš†ç¬¬ä¸‰å°æœºå™¨ï¼Œå¹¶å°†ç¬¬ä¸‰å°æœºå™¨çš„IPåœ°å€è®¾ç½®ä¸º</p><p>192.168.51.120</p></li></ul><h3 id="2-å®‰è£…å¤§æ•°æ®é›†ç¾¤å‰ç¯å¢ƒå‡†å¤‡"><a href="#2-å®‰è£…å¤§æ•°æ®é›†ç¾¤å‰ç¯å¢ƒå‡†å¤‡" class="headerlink" title="2.å®‰è£…å¤§æ•°æ®é›†ç¾¤å‰ç¯å¢ƒå‡†å¤‡"></a>2.å®‰è£…å¤§æ•°æ®é›†ç¾¤å‰ç¯å¢ƒå‡†å¤‡</h3><h4 id="1-ä¸‰å°è™šæ‹Ÿæœºå…³é—­é˜²ç«å¢™"><a href="#1-ä¸‰å°è™šæ‹Ÿæœºå…³é—­é˜²ç«å¢™" class="headerlink" title="1. ä¸‰å°è™šæ‹Ÿæœºå…³é—­é˜²ç«å¢™"></a>1. ä¸‰å°è™šæ‹Ÿæœºå…³é—­é˜²ç«å¢™</h4><p>ä¸‰å°æœºå™¨æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ˆ<font color="red">root</font>ç”¨æˆ·æ¥æ‰§è¡Œï¼‰</p><pre><code class="hljs shell">systemctl stop firewalldsystemctl disable firewalld</code></pre><h4 id="2-ä¸‰å°æœºå™¨å…³é—­selinux"><a href="#2-ä¸‰å°æœºå™¨å…³é—­selinux" class="headerlink" title="2. ä¸‰å°æœºå™¨å…³é—­selinux"></a>2. ä¸‰å°æœºå™¨å…³é—­selinux</h4><p>ä¸‰å°æœºå™¨æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å…³é—­selinux</p><pre><code class="hljs shell">vim /etc/sysconfig/selinuxSELINUX=disabled</code></pre><h4 id="3-ä¸‰å°æœºå™¨æ›´æ”¹ä¸»æœºå"><a href="#3-ä¸‰å°æœºå™¨æ›´æ”¹ä¸»æœºå" class="headerlink" title="3. ä¸‰å°æœºå™¨æ›´æ”¹ä¸»æœºå"></a>3. ä¸‰å°æœºå™¨æ›´æ”¹ä¸»æœºå</h4><p>ä¸‰å°æœºå™¨æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ›´æ”¹ä¸»æœºå</p><pre><code class="hljs shell">vim /etc/hostname</code></pre><p>ç¬¬ä¸€å°æœºå™¨æ›´æ”¹å†…å®¹</p><pre><code class="hljs css"><span class="hljs-selector-tag">node01</span><span class="hljs-selector-class">.hadoop</span><span class="hljs-selector-class">.com</span></code></pre><p>ç¬¬äºŒå°æœºå™¨æ›´æ”¹å†…å®¹</p><pre><code class="hljs css"><span class="hljs-selector-tag">node02</span><span class="hljs-selector-class">.hadoop</span><span class="hljs-selector-class">.com</span></code></pre><p>ç¬¬ä¸‰å°æœºå™¨æ›´æ”¹å†…å®¹</p><pre><code class="hljs css"><span class="hljs-selector-tag">node03</span><span class="hljs-selector-class">.hadoop</span><span class="hljs-selector-class">.com</span></code></pre><h4 id="4-ä¸‰å°æœºå™¨åšä¸»æœºåä¸IPåœ°å€çš„æ˜ å°„"><a href="#4-ä¸‰å°æœºå™¨åšä¸»æœºåä¸IPåœ°å€çš„æ˜ å°„" class="headerlink" title="4. ä¸‰å°æœºå™¨åšä¸»æœºåä¸IPåœ°å€çš„æ˜ å°„"></a>4. ä¸‰å°æœºå™¨åšä¸»æœºåä¸IPåœ°å€çš„æ˜ å°„</h4><p>ä¸‰å°æœºå™¨æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ›´æ”¹ä¸»æœºåä¸IPåœ°å€çš„æ˜ å°„/etc/hosts</p><pre><code class="hljs shell">192.168.51.100 node01.hadoop.com node01192.168.51.110 node02.hadoop.com node02192.168.51.120 node03.hadoop.com node03</code></pre><h4 id="5-ä¸‰å°æœºå™¨æ—¶é’ŸåŒæ­¥"><a href="#5-ä¸‰å°æœºå™¨æ—¶é’ŸåŒæ­¥" class="headerlink" title="5. ä¸‰å°æœºå™¨æ—¶é’ŸåŒæ­¥"></a>5. ä¸‰å°æœºå™¨æ—¶é’ŸåŒæ­¥</h4><h5 id="ç¬¬ä¸€ç§åŒæ­¥æ–¹å¼ï¼šé€šè¿‡ç½‘ç»œè¿›è¡Œæ—¶é’ŸåŒæ­¥"><a href="#ç¬¬ä¸€ç§åŒæ­¥æ–¹å¼ï¼šé€šè¿‡ç½‘ç»œè¿›è¡Œæ—¶é’ŸåŒæ­¥" class="headerlink" title="ç¬¬ä¸€ç§åŒæ­¥æ–¹å¼ï¼šé€šè¿‡ç½‘ç»œè¿›è¡Œæ—¶é’ŸåŒæ­¥"></a>ç¬¬ä¸€ç§åŒæ­¥æ–¹å¼ï¼šé€šè¿‡ç½‘ç»œè¿›è¡Œæ—¶é’ŸåŒæ­¥</h5><p>é€šè¿‡ç½‘ç»œè¿æ¥å¤–ç½‘è¿›è¡Œæ—¶é’ŸåŒæ­¥,å¿…é¡»ä¿è¯è™šæ‹Ÿæœºè¿ä¸Šå¤–ç½‘</p><p>ä¸‰å°æœºå™¨éƒ½å®‰è£…ntpdate</p><pre><code class="hljs shell">yum -y install ntpdate</code></pre><p>é˜¿é‡Œäº‘æ—¶é’ŸåŒæ­¥æœåŠ¡å™¨</p><pre><code class="hljs css"><span class="hljs-selector-tag">ntpdate</span> <span class="hljs-selector-tag">ntp4</span><span class="hljs-selector-class">.aliyun</span><span class="hljs-selector-class">.com</span></code></pre><p>ä¸‰å°æœºå™¨å®šæ—¶ä»»åŠ¡</p><pre><code class="hljs shell">crontab -e</code></pre><p>æ·»åŠ å¦‚ä¸‹å†…å®¹</p><pre><code class="hljs shell">*/1 * * * * /usr/sbin/ntpdate ntp4.aliyun.com;</code></pre><h4 id="6-ä¸‰å°æœºå™¨æ·»åŠ æ™®é€šç”¨æˆ·"><a href="#6-ä¸‰å°æœºå™¨æ·»åŠ æ™®é€šç”¨æˆ·" class="headerlink" title="6. ä¸‰å°æœºå™¨æ·»åŠ æ™®é€šç”¨æˆ·"></a>6. ä¸‰å°æœºå™¨æ·»åŠ æ™®é€šç”¨æˆ·</h4><p>ä¸‰å°linuxæœåŠ¡å™¨ç»Ÿä¸€æ·»åŠ æ™®é€šç”¨æˆ·hadoopï¼Œå¹¶ç»™ä»¥sudoæƒé™ï¼Œç”¨äºä»¥åæ‰€æœ‰çš„å¤§æ•°æ®è½¯ä»¶çš„å®‰è£…</p><p>å¹¶ç»Ÿä¸€è®¾ç½®æ™®é€šç”¨æˆ·çš„å¯†ç ä¸º ==<strong>**</strong>==</p><pre><code class="hljs shell">useradd hadooppasswd hadoop</code></pre><p>æ™®é€šç”¨æˆ·çš„å¯†ç è®¾ç½®ä¸º******</p><p>ä¸‰å°æœºå™¨ä¸ºæ™®é€šç”¨æˆ·æ·»åŠ sudoæƒé™</p><pre><code class="hljs shell">visudo</code></pre><p> å¢åŠ å¦‚ä¸‹å†…å®¹</p><pre><code class="hljs shell">hadoop ALL=(ALL)    ALL</code></pre><h4 id="7-ä¸‰å°å®šä¹‰ç»Ÿä¸€ç›®å½•"><a href="#7-ä¸‰å°å®šä¹‰ç»Ÿä¸€ç›®å½•" class="headerlink" title="7. ä¸‰å°å®šä¹‰ç»Ÿä¸€ç›®å½•"></a>7. ä¸‰å°å®šä¹‰ç»Ÿä¸€ç›®å½•</h4><p>å®šä¹‰ä¸‰å°linuxæœåŠ¡å™¨è½¯ä»¶å‹ç¼©åŒ…å­˜æ”¾ç›®å½•ï¼Œä»¥åŠè§£å‹åå®‰è£…ç›®å½•ï¼Œä¸‰å°æœºå™¨æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œåˆ›å»ºä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œä¸€ä¸ªç”¨äºå­˜æ”¾è½¯ä»¶å‹ç¼©åŒ…ç›®å½•ï¼Œä¸€ä¸ªç”¨äºå­˜æ”¾è§£å‹åç›®å½•</p><pre><code class="hljs shell">mkdir -p /weitrue/soft   # è½¯ä»¶å‹ç¼©åŒ…å­˜æ”¾ç›®å½•mkdir -p /weitrue/install # è½¯ä»¶è§£å‹åå­˜æ”¾ç›®å½•chown -R hadoop:hadoop /weitrue  # å°†æ–‡ä»¶å¤¹æƒé™æ›´æ”¹ä¸ºhadoopç”¨æˆ·</code></pre><h4 id="8-ä¸‰å°æœºå™¨hadoopç”¨æˆ·å…å¯†ç ç™»å½•"><a href="#8-ä¸‰å°æœºå™¨hadoopç”¨æˆ·å…å¯†ç ç™»å½•" class="headerlink" title="8. ä¸‰å°æœºå™¨hadoopç”¨æˆ·å…å¯†ç ç™»å½•"></a>8. ä¸‰å°æœºå™¨hadoopç”¨æˆ·å…å¯†ç ç™»å½•</h4><p>åˆ‡æ¢ç”¨æˆ·ä¸ºhadoop</p><pre><code class="hljs shell">su hadoop</code></pre><p>ç¬¬ä¸€æ­¥ï¼šä¸‰å°æœºå™¨åœ¨<font color="red">hadoop</font>ç”¨æˆ·ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆå…¬é’¥ä¸ç§é’¥</p><pre><code class="hljs shell">ssh-keygen -t rsa</code></pre><p><font color="red">æ‰§è¡Œä¸Šè¿°å‘½ä»¤ä¹‹åï¼ŒæŒ‰ä¸‰æ¬¡Enteré”®å³å¯ç”Ÿæˆäº†</font></p><p>ç¬¬äºŒæ­¥ï¼šä¸‰å°æœºå™¨åœ¨hadoopç”¨æˆ·ä¸‹ï¼Œæ‰§è¡Œå‘½ä»¤æ‹·è´å…¬é’¥åˆ°node01æœåŠ¡å™¨</p><pre><code class="hljs shell">ssh-copy-id node01</code></pre><p>ç¬¬ä¸‰æ­¥ï¼šnode01æœåŠ¡å™¨å°†å…¬é’¥æ‹·è´ç»™node02ä¸node03</p><p>node01åœ¨hadoopç”¨æˆ·ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°†authorized_keysæ‹·è´åˆ°node02ä¸node03æœåŠ¡å™¨</p><pre><code class="hljs shell">cd /home/hadoop/.ssh/scp authorized_keys node02:$PWDscp authorized_keys node03:$PWD</code></pre><p>ç¬¬å››æ­¥ï¼šéªŒè¯ï¼›ä»ä»»æ„èŠ‚ç‚¹æ˜¯å¦èƒ½å…ç§˜é’¥ç™»é™†å…¶ä»–èŠ‚ç‚¹ï¼›å¦‚node01å…å¯†ç™»é™†node02</p><pre><code class="hljs sh">ssh node02</code></pre><h4 id="9-ä¸‰å°æœºå™¨å…³æœºé‡å¯"><a href="#9-ä¸‰å°æœºå™¨å…³æœºé‡å¯" class="headerlink" title="9. ä¸‰å°æœºå™¨å…³æœºé‡å¯"></a>9. ä¸‰å°æœºå™¨å…³æœºé‡å¯</h4><p>ä¸‰å°æœºå™¨åœ¨hadoopç”¨æˆ·ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå®ç°å…³æœºé‡å¯</p><pre><code class="hljs shell">sudo reboot -h now</code></pre><h4 id="10-ä¸‰å°æœºå™¨å®‰è£…jdk"><a href="#10-ä¸‰å°æœºå™¨å®‰è£…jdk" class="headerlink" title="10. ä¸‰å°æœºå™¨å®‰è£…jdk"></a>10. ä¸‰å°æœºå™¨å®‰è£…jdk</h4><ul><li><p>ä½¿ç”¨hadoopç”¨æˆ·æ¥é‡æ–°è¿æ¥ä¸‰å°æœºå™¨ï¼Œç„¶åä½¿ç”¨hadoopç”¨æˆ·æ¥å®‰è£…jdkè½¯ä»¶</p></li><li><p>ä¸Šä¼ å‹ç¼©åŒ…åˆ°ç¬¬ä¸€å°æœåŠ¡å™¨çš„/weitrue/softä¸‹é¢ï¼Œç„¶åè¿›è¡Œè§£å‹ï¼Œé…ç½®ç¯å¢ƒå˜é‡å³å¯ï¼Œä¸‰å°æœºå™¨éƒ½ä¾æ¬¡å®‰è£…å³å¯</p></li></ul><pre><code class="hljs shell">cd /weitrue/soft/tar -xzvf jdk-8u141-linux-x64.tar.gz -C /weitrue/install/sudo vim /etc/profile</code></pre><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">æ·»åŠ ä»¥ä¸‹é…ç½®å†…å®¹ï¼Œé…ç½®jdkç¯å¢ƒå˜é‡</span>export JAVA_HOME=/weitrue/install/jdk1.8.0_141export PATH=$PATH:$JAVA_HOME/bin</code></pre><p>è®©ä¿®æ”¹é©¬ä¸Šç”Ÿæ•ˆ</p><pre><code class="hljs shell">source /etc/profile</code></pre><h3 id="3-hadoopé›†ç¾¤çš„å®‰è£…"><a href="#3-hadoopé›†ç¾¤çš„å®‰è£…" class="headerlink" title="3. hadoopé›†ç¾¤çš„å®‰è£…"></a>3. hadoopé›†ç¾¤çš„å®‰è£…</h3><p>æ³¨æ„ï¼šè¿™é‡Œä½¿ç”¨æ‰“åŒ…å¥½çš„åŒ…â€œhadoop-2.6.0-cdh5.14.2_after_compile.tar.gzâ€å®‰è£…éƒ¨ç½²é›†ç¾¤</p><p>ç¼–è¯‘æ²¡æœ‰ä»€ä¹ˆæŠ€å·§ï¼Œä¸»è¦è·Ÿç½‘ç»œå¥½åæœ‰å…³</p><h4 id="1-CDHè½¯ä»¶ç‰ˆæœ¬é‡æ–°è¿›è¡Œç¼–è¯‘"><a href="#1-CDHè½¯ä»¶ç‰ˆæœ¬é‡æ–°è¿›è¡Œç¼–è¯‘" class="headerlink" title="1. CDHè½¯ä»¶ç‰ˆæœ¬é‡æ–°è¿›è¡Œç¼–è¯‘"></a>1. CDHè½¯ä»¶ç‰ˆæœ¬é‡æ–°è¿›è¡Œç¼–è¯‘</h4><h4 id="2-hadoopé›†ç¾¤çš„å®‰è£…"><a href="#2-hadoopé›†ç¾¤çš„å®‰è£…" class="headerlink" title="2. hadoopé›†ç¾¤çš„å®‰è£…"></a>2. hadoopé›†ç¾¤çš„å®‰è£…</h4><p>å®‰è£…ç¯å¢ƒæœåŠ¡éƒ¨ç½²è§„åˆ’</p><table><thead><tr><th>æœåŠ¡å™¨IP</th><th>192.168.51.100</th><th>192.168.51.110</th><th>192.168.51.120</th></tr></thead><tbody><tr><td>HDFS</td><td>NameNode</td><td></td><td></td></tr><tr><td>HDFS</td><td>SecondaryNameNode</td><td></td><td></td></tr><tr><td>HDFS</td><td>DataNode</td><td>DataNode</td><td>DataNode</td></tr><tr><td>YARN</td><td>ResourceManager</td><td></td><td></td></tr><tr><td>YARN</td><td>NodeManager</td><td>NodeManager</td><td>NodeManager</td></tr><tr><td>å†å²æ—¥å¿—æœåŠ¡å™¨</td><td>JobHistoryServer</td><td></td><td></td></tr></tbody></table><h5 id="ç¬¬ä¸€æ­¥ï¼šä¸Šä¼ å‹ç¼©åŒ…å¹¶è§£å‹"><a href="#ç¬¬ä¸€æ­¥ï¼šä¸Šä¼ å‹ç¼©åŒ…å¹¶è§£å‹" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šä¸Šä¼ å‹ç¼©åŒ…å¹¶è§£å‹"></a>ç¬¬ä¸€æ­¥ï¼šä¸Šä¼ å‹ç¼©åŒ…å¹¶è§£å‹</h5><ul><li>å°†æˆ‘ä»¬é‡æ–°ç¼–è¯‘ä¹‹åæ”¯æŒsnappyå‹ç¼©çš„hadoopåŒ…ä¸Šä¼ åˆ°ç¬¬ä¸€å°æœåŠ¡å™¨å¹¶è§£å‹ï¼›ç¬¬ä¸€å°æœºå™¨æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</li></ul><pre><code class="hljs shell">cd /weitrue/soft/tar -xzvf hadoop-2.6.0-cdh5.14.2_after_compile.tar.gz -C /weitrue/install/</code></pre><h5 id="ç¬¬äºŒæ­¥ï¼šæŸ¥çœ‹hadoopæ”¯æŒçš„å‹ç¼©æ–¹å¼ä»¥åŠæœ¬åœ°åº“"><a href="#ç¬¬äºŒæ­¥ï¼šæŸ¥çœ‹hadoopæ”¯æŒçš„å‹ç¼©æ–¹å¼ä»¥åŠæœ¬åœ°åº“" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šæŸ¥çœ‹hadoopæ”¯æŒçš„å‹ç¼©æ–¹å¼ä»¥åŠæœ¬åœ°åº“"></a>ç¬¬äºŒæ­¥ï¼šæŸ¥çœ‹hadoopæ”¯æŒçš„å‹ç¼©æ–¹å¼ä»¥åŠæœ¬åœ°åº“</h5><p>ç¬¬ä¸€å°æœºå™¨æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p><pre><code class="hljs shell">cd /weitrue/install/hadoop-2.6.0-cdh5.14.2bin/hadoop checknative</code></pre><p>å¦‚æœå‡ºç°opensslä¸ºfalseï¼Œé‚£ä¹ˆæ‰€æœ‰æœºå™¨åœ¨çº¿å®‰è£…opensslå³å¯ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œè™šæ‹Ÿæœºè”ç½‘ä¹‹åå°±å¯ä»¥åœ¨çº¿è¿›è¡Œå®‰è£…äº†</p><pre><code class="hljs shell">sudo yum -y install openssl-devel</code></pre><h5 id="ç¬¬ä¸‰æ­¥ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#ç¬¬ä¸‰æ­¥ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ç¬¬ä¸‰æ­¥ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶</h5><h6 id="ä¿®æ”¹hadoop-env-sh"><a href="#ä¿®æ”¹hadoop-env-sh" class="headerlink" title="ä¿®æ”¹hadoop-env.sh"></a>ä¿®æ”¹hadoop-env.sh</h6><p>ç¬¬ä¸€å°æœºå™¨æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p><pre><code class="hljs shell">cd /weitrue/install/hadoop-2.6.0-cdh5.14.2/etc/hadoopvim hadoop-env.sh</code></pre><pre><code class="hljs shell">export JAVA_HOME=/weitrue/install/jdk1.8.0_141</code></pre><h6 id="ä¿®æ”¹core-site-xml"><a href="#ä¿®æ”¹core-site-xml" class="headerlink" title="ä¿®æ”¹core-site.xml"></a>ä¿®æ”¹core-site.xml</h6><p>ç¬¬ä¸€å°æœºå™¨æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p><pre><code class="hljs shell">cd /weitrue/install/hadoop-2.6.0-cdh5.14.2/etc/hadoopvim core-site.xml</code></pre><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>fs.defaultFS<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>hdfs://node01:8020<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>hadoop.tmp.dir<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>/weitrue/install/hadoop-2.6.0-cdh5.14.2/hadoopDatas/tempDatas<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>    <span class="hljs-comment">&lt;!-- ç¼“å†²åŒºå¤§å°ï¼Œå®é™…å·¥ä½œä¸­æ ¹æ®æœåŠ¡å™¨æ€§èƒ½åŠ¨æ€è°ƒæ•´ --&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>io.file.buffer.size<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>4096<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>    <span class="hljs-comment">&lt;!-- å¼€å¯hdfsçš„åƒåœ¾æ¡¶æœºåˆ¶ï¼Œåˆ é™¤æ‰çš„æ•°æ®å¯ä»¥ä»åƒåœ¾æ¡¶ä¸­å›æ”¶ï¼Œå•ä½åˆ†é’Ÿ --&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>fs.trash.interval<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>10080<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span></code></pre><h6 id="ä¿®æ”¹hdfs-site-xml"><a href="#ä¿®æ”¹hdfs-site-xml" class="headerlink" title="ä¿®æ”¹hdfs-site.xml"></a>ä¿®æ”¹hdfs-site.xml</h6><p>ç¬¬ä¸€å°æœºå™¨æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p><pre><code class="hljs shell">cd /weitrue/install/hadoop-2.6.0-cdh5.14.2/etc/hadoopvim hdfs-site.xml</code></pre><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><span class="hljs-comment">&lt;!-- NameNodeå­˜å‚¨å…ƒæ•°æ®ä¿¡æ¯çš„è·¯å¾„ï¼Œå®é™…å·¥ä½œä¸­ï¼Œä¸€èˆ¬å…ˆç¡®å®šç£ç›˜çš„æŒ‚è½½ç›®å½•ï¼Œç„¶åå¤šä¸ªç›®å½•ç”¨ï¼Œè¿›è¡Œåˆ†å‰²   --&gt;</span> <span class="hljs-comment">&lt;!--   é›†ç¾¤åŠ¨æ€ä¸Šä¸‹çº¿ </span><span class="hljs-comment">&lt;property&gt;</span><span class="hljs-comment">&lt;name&gt;dfs.hosts&lt;/name&gt;</span><span class="hljs-comment">&lt;value&gt;/weitrue/install/hadoop-2.6.0-cdh5.14.2/etc/hadoop/accept_host&lt;/value&gt;</span><span class="hljs-comment">&lt;/property&gt;</span><span class="hljs-comment">&lt;property&gt;</span><span class="hljs-comment">&lt;name&gt;dfs.hosts.exclude&lt;/name&gt;</span><span class="hljs-comment">&lt;value&gt;/weitrue/install/hadoop-2.6.0-cdh5.14.2/etc/hadoop/deny_host&lt;/value&gt;</span><span class="hljs-comment">&lt;/property&gt;</span><span class="hljs-comment">--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>dfs.namenode.secondary.http-address<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>node01:50090<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>dfs.namenode.http-address<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>node01:50070<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>dfs.namenode.name.dir<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>file:///weitrue/install/hadoop-2.6.0-cdh5.14.2/hadoopDatas/namenodeDatas<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><span class="hljs-comment">&lt;!-- å®šä¹‰dataNodeæ•°æ®å­˜å‚¨çš„èŠ‚ç‚¹ä½ç½®ï¼Œå®é™…å·¥ä½œä¸­ï¼Œä¸€èˆ¬å…ˆç¡®å®šç£ç›˜çš„æŒ‚è½½ç›®å½•ï¼Œç„¶åå¤šä¸ªç›®å½•ç”¨ï¼Œè¿›è¡Œåˆ†å‰² --&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>dfs.datanode.data.dir<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>file:///weitrue/install/hadoop-2.6.0-cdh5.14.2/hadoopDatas/datanodeDatas<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>dfs.namenode.edits.dir<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>file:///weitrue/install/hadoop-2.6.0-cdh5.14.2/hadoopDatas/dfs/nn/edits<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>dfs.namenode.checkpoint.dir<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>file:///weitrue/install/hadoop-2.6.0-cdh5.14.2/hadoopDatas/dfs/snn/name<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>dfs.namenode.checkpoint.edits.dir<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>file:///weitrue/install/hadoop-2.6.0-cdh5.14.2/hadoopDatas/dfs/nn/snn/edits<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>dfs.replication<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>dfs.permissions<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>dfs.blocksize<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>134217728<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span></code></pre><h6 id="ä¿®æ”¹mapred-site-xml"><a href="#ä¿®æ”¹mapred-site-xml" class="headerlink" title="ä¿®æ”¹mapred-site.xml"></a>ä¿®æ”¹mapred-site.xml</h6><p>ç¬¬ä¸€å°æœºå™¨æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p><pre><code class="hljs shell">cd /weitrue/install/hadoop-2.6.0-cdh5.14.2/etc/hadoopmv mapred-site.xml.template mapred-site.xml vim mapred-site.xml</code></pre><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>mapreduce.framework.name<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>yarn<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>mapreduce.job.ubertask.enable<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>mapreduce.jobhistory.address<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>node01:10020<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>mapreduce.jobhistory.webapp.address<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>node01:19888<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span></code></pre><h6 id="ä¿®æ”¹yarn-site-xml"><a href="#ä¿®æ”¹yarn-site-xml" class="headerlink" title="ä¿®æ”¹yarn-site.xml"></a>ä¿®æ”¹yarn-site.xml</h6><p>ç¬¬ä¸€å°æœºå™¨æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p><pre><code class="hljs shell">cd /weitrue/install/hadoop-2.6.0-cdh5.14.2/etc/hadoopvim yarn-site.xml</code></pre><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>node01<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>mapreduce_shuffle<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span></code></pre><h6 id="ä¿®æ”¹slavesæ–‡ä»¶"><a href="#ä¿®æ”¹slavesæ–‡ä»¶" class="headerlink" title="ä¿®æ”¹slavesæ–‡ä»¶"></a>ä¿®æ”¹slavesæ–‡ä»¶</h6><p>ç¬¬ä¸€å°æœºå™¨æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p><pre><code class="hljs shell">cd /weitrue/install/hadoop-2.6.0-cdh5.14.2/etc/hadoopvim slaves</code></pre><p>åŸå†…å®¹æ›¿æ¢ä¸º</p><pre><code class="hljs gcode"><span class="hljs-symbol">node01</span><span class="hljs-symbol">node02</span><span class="hljs-symbol">node03</span></code></pre><h5 id="ç¬¬å››æ­¥ï¼šåˆ›å»ºæ–‡ä»¶å­˜æ”¾ç›®å½•"><a href="#ç¬¬å››æ­¥ï¼šåˆ›å»ºæ–‡ä»¶å­˜æ”¾ç›®å½•" class="headerlink" title="ç¬¬å››æ­¥ï¼šåˆ›å»ºæ–‡ä»¶å­˜æ”¾ç›®å½•"></a>ç¬¬å››æ­¥ï¼šåˆ›å»ºæ–‡ä»¶å­˜æ”¾ç›®å½•</h5><p>ç¬¬ä¸€å°æœºå™¨æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p><p>node01æœºå™¨ä¸Šé¢åˆ›å»ºä»¥ä¸‹ç›®å½•</p><pre><code class="hljs shell">mkdir -p /weitrue/install/hadoop-2.6.0-cdh5.14.2/hadoopDatas/tempDatasmkdir -p /weitrue/install/hadoop-2.6.0-cdh5.14.2/hadoopDatas/namenodeDatasmkdir -p /weitrue/install/hadoop-2.6.0-cdh5.14.2/hadoopDatas/datanodeDatas mkdir -p /weitrue/install/hadoop-2.6.0-cdh5.14.2/hadoopDatas/dfs/nn/editsmkdir -p /weitrue/install/hadoop-2.6.0-cdh5.14.2/hadoopDatas/dfs/snn/namemkdir -p /weitrue/install/hadoop-2.6.0-cdh5.14.2/hadoopDatas/dfs/nn/snn/edits</code></pre><h5 id="ç¬¬äº”æ­¥ï¼šå®‰è£…åŒ…çš„åˆ†å‘scpä¸rsync"><a href="#ç¬¬äº”æ­¥ï¼šå®‰è£…åŒ…çš„åˆ†å‘scpä¸rsync" class="headerlink" title="ç¬¬äº”æ­¥ï¼šå®‰è£…åŒ…çš„åˆ†å‘scpä¸rsync"></a>ç¬¬äº”æ­¥ï¼šå®‰è£…åŒ…çš„åˆ†å‘scpä¸rsync</h5><p>åœ¨linuxå½“ä¸­ï¼Œç”¨äºå‘è¿œç¨‹æœåŠ¡å™¨æ‹·è´æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹å¯ä»¥ä½¿ç”¨scpæˆ–è€…rsyncï¼Œè¿™ä¸¤ä¸ªå‘½ä»¤åŠŸèƒ½ç±»ä¼¼éƒ½æ˜¯å‘è¿œç¨‹æœåŠ¡å™¨è¿›è¡Œæ‹·è´ï¼Œåªä¸è¿‡scpæ˜¯å…¨é‡æ‹·è´ï¼Œrsyncå¯ä»¥åšåˆ°å¢é‡æ‹·è´ï¼Œrsyncçš„æ•ˆç‡æ¯”scpæ›´é«˜ä¸€äº›</p><h6 id="é€šè¿‡scpç›´æ¥æ‹·è´"><a href="#é€šè¿‡scpç›´æ¥æ‹·è´" class="headerlink" title="é€šè¿‡scpç›´æ¥æ‹·è´"></a>é€šè¿‡scpç›´æ¥æ‹·è´</h6><p>scpï¼ˆsecure copyï¼‰å®‰å…¨æ‹·è´</p><p>å¯ä»¥é€šè¿‡scpè¿›è¡Œä¸åŒæœåŠ¡å™¨ä¹‹é—´çš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹çš„å¤åˆ¶</p><p>ä½¿ç”¨è¯­æ³• </p><pre><code class="hljs shell">scp -r sourceFile  username@host:destpath</code></pre><p>ç”¨æ³•ç¤ºä¾‹</p><pre><code class="hljs shell">scp -r hadoop-lzo-0.4.20.jar hadoop@node01:/weitrue/</code></pre><p>node01æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œæ‹·è´</p><pre><code class="hljs shell">cd /weitrue/install/scp -r hadoop-2.6.0-cdh5.14.2/ node02:$PWDscp -r hadoop-2.6.0-cdh5.14.2/ node03:$PWD</code></pre><h5 id="ç¬¬å…­æ­¥ï¼šé…ç½®hadoopçš„ç¯å¢ƒå˜é‡"><a href="#ç¬¬å…­æ­¥ï¼šé…ç½®hadoopçš„ç¯å¢ƒå˜é‡" class="headerlink" title="ç¬¬å…­æ­¥ï¼šé…ç½®hadoopçš„ç¯å¢ƒå˜é‡"></a>ç¬¬å…­æ­¥ï¼šé…ç½®hadoopçš„ç¯å¢ƒå˜é‡</h5><p>ä¸‰å°æœºå™¨éƒ½è¦è¿›è¡Œé…ç½®hadoopçš„ç¯å¢ƒå˜é‡</p><p>ä¸‰å°æœºå™¨æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p><pre><code class="hljs shell">sudo vim /etc/profile</code></pre><pre><code class="hljs shell">export HADOOP_HOME=/weitrue/install/hadoop-2.6.0-cdh5.14.2export PATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbin</code></pre><p>é…ç½®å®Œæˆä¹‹åç”Ÿæ•ˆ</p><pre><code class="hljs shell">source /etc/profile</code></pre><h5 id="ç¬¬ä¸ƒæ­¥ï¼šé›†ç¾¤å¯åŠ¨"><a href="#ç¬¬ä¸ƒæ­¥ï¼šé›†ç¾¤å¯åŠ¨" class="headerlink" title="ç¬¬ä¸ƒæ­¥ï¼šé›†ç¾¤å¯åŠ¨"></a>ç¬¬ä¸ƒæ­¥ï¼šé›†ç¾¤å¯åŠ¨</h5><h6 id="1-æ ¼å¼åŒ–é›†ç¾¤"><a href="#1-æ ¼å¼åŒ–é›†ç¾¤" class="headerlink" title="1. æ ¼å¼åŒ–é›†ç¾¤"></a>1. æ ¼å¼åŒ–é›†ç¾¤</h6><p>è¦å¯åŠ¨ Hadoop é›†ç¾¤ï¼Œéœ€è¦å¯åŠ¨ HDFS å’Œ YARN ä¸¤ä¸ªé›†ç¾¤ã€‚ </p><p>æ³¨æ„ï¼šé¦–æ¬¡å¯åŠ¨HDFSæ—¶ï¼Œå¿…é¡»å¯¹å…¶è¿›è¡Œæ ¼å¼åŒ–æ“ä½œã€‚æœ¬è´¨ä¸Šæ˜¯ä¸€äº›æ¸…ç†å’Œå‡†å¤‡å·¥ä½œï¼Œå› ä¸ºæ­¤æ—¶çš„ HDFS åœ¨ç‰©ç†ä¸Šè¿˜æ˜¯ä¸å­˜åœ¨çš„ã€‚<font color="red">æ ¼å¼åŒ–æ“ä½œåªæœ‰åœ¨é¦–æ¬¡å¯åŠ¨çš„æ—¶å€™éœ€è¦ï¼Œä»¥åå†ä¹Ÿä¸éœ€è¦äº†</font></p><p><font color="red">node01æ‰§è¡Œä¸€éå³å¯</font></p><pre><code class="hljs shell">hdfs namenode -format</code></pre><p>æˆ–è€…</p><pre><code class="hljs shell">hadoop namenode â€“format</code></pre><p><img src="/images/mac%E7%8E%AF%E5%A2%83%E4%B8%8B%E6%90%AD%E5%BB%BAhadoop%E9%9B%86%E7%BE%A4%E7%8E%AF%E5%A2%83/hadoop.png"></p><p>å¯åŠ¨é›†ç¾¤æœ‰ä¸¤ç§æ–¹å¼ï¼šâ‘ è„šæœ¬ä¸€é”®å¯åŠ¨ï¼›â‘¡å•ä¸ªè¿›ç¨‹é€ä¸ªå¯åŠ¨</p><h6 id="2-è„šæœ¬ä¸€é”®å¯åŠ¨"><a href="#2-è„šæœ¬ä¸€é”®å¯åŠ¨" class="headerlink" title="2. è„šæœ¬ä¸€é”®å¯åŠ¨"></a>2. è„šæœ¬ä¸€é”®å¯åŠ¨</h6><p>å¦‚æœé…ç½®äº† etc/hadoop/slaves å’Œ ssh å…å¯†ç™»å½•ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ç¨‹åºè„šæœ¬å¯åŠ¨æ‰€æœ‰Hadoop ä¸¤ä¸ªé›†ç¾¤çš„ç›¸å…³è¿›ç¨‹ï¼Œåœ¨ä¸»èŠ‚ç‚¹æ‰€è®¾å®šçš„æœºå™¨ä¸Šæ‰§è¡Œã€‚</p><p>å¯åŠ¨é›†ç¾¤</p><p>node01èŠ‚ç‚¹ä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p><p>ç¬¬ä¸€å°æœºå™¨æ‰§è¡Œä»¥ä¸‹å‘½ä»¤(hadoop/sbinç›®å½•ä¸‹)</p><pre><code class="hljs shell">start-dfs.shstart-yarn.shmr-jobhistory-daemon.sh start historyserver</code></pre><p>åœæ­¢é›†ç¾¤ï¼š</p><pre><code class="hljs shell">stop-dfs.shstop-yarn.sh</code></pre><h6 id="3-å•ä¸ªè¿›ç¨‹é€ä¸ªå¯åŠ¨"><a href="#3-å•ä¸ªè¿›ç¨‹é€ä¸ªå¯åŠ¨" class="headerlink" title="3. å•ä¸ªè¿›ç¨‹é€ä¸ªå¯åŠ¨"></a>3. å•ä¸ªè¿›ç¨‹é€ä¸ªå¯åŠ¨</h6><pre><code class="hljs shell">åœ¨ä¸»èŠ‚ç‚¹ä¸Šä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ HDFS NameNodeï¼š hadoop-daemon.sh start namenode åœ¨æ¯ä¸ªä»èŠ‚ç‚¹ä¸Šä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ HDFS DataNodeï¼š hadoop-daemon.sh start datanodeåœ¨ä¸»èŠ‚ç‚¹ä¸Šä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ YARN ResourceManagerï¼š yarn-daemon.sh start resourcemanager åœ¨æ¯ä¸ªä»èŠ‚ç‚¹ä¸Šä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ YARN nodemanagerï¼š yarn-daemon.sh start nodemanager ä»¥ä¸Šè„šæœ¬ä½äº$HADOOP_HOME/sbin/ç›®å½•ä¸‹ã€‚å¦‚æœæƒ³è¦åœæ­¢æŸä¸ªèŠ‚ç‚¹ä¸ŠæŸä¸ªè§’è‰²ï¼Œåªéœ€è¦æŠŠå‘½ä»¤ä¸­çš„start æ”¹ä¸ºstop å³å¯ã€‚</code></pre><h6 id="4-ä¸€é”®å¯åŠ¨hadoopé›†ç¾¤çš„è„šæœ¬"><a href="#4-ä¸€é”®å¯åŠ¨hadoopé›†ç¾¤çš„è„šæœ¬" class="headerlink" title="4.ä¸€é”®å¯åŠ¨hadoopé›†ç¾¤çš„è„šæœ¬"></a>4.ä¸€é”®å¯åŠ¨hadoopé›†ç¾¤çš„è„šæœ¬</h6><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ›å»ºä¸€é”®å¯åŠ¨hadoopçš„è„šæœ¬ï¼Œä»¥åå¯åŠ¨hadoopéƒ½å¯ä»¥é€šè¿‡ä¸€ä¸ªè„šæœ¬å³å¯</p><p>åœ¨node01æœåŠ¡å™¨çš„/home/hadoop/binç›®å½•ä¸‹åˆ›å»ºè„šæœ¬</p><pre><code class="hljs shell">[hadoop@node01 bin]$ cd /home/hadoop/bin/[hadoop@node01 bin]$ vim hadoop.sh</code></pre><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">!/bin/bash</span>case $1 in&quot;start&quot; )&#123; source /etc/profile; /weitrue/install/hadoop-2.6.0-cdh5.14.2/sbin/start-dfs.sh /weitrue/install/hadoop-2.6.0-cdh5.14.2/sbin/start-yarn.sh /weitrue/install/hadoop-2.6.0-cdh5.14.2/sbin/mr-jobhistory-daemon.sh start historyserver&#125;;;&quot;stop&quot;)&#123; /weitrue/install/hadoop-2.6.0-cdh5.14.2/sbin/stop-dfs.sh /weitrue/install/hadoop-2.6.0-cdh5.14.2/sbin/stop-yarn.sh /weitrue/install/hadoop-2.6.0-cdh5.14.2/sbin/mr-jobhistory-daemon.sh stop  historyserver&#125;;;esac</code></pre><p>ä¿®æ”¹è„šæœ¬æƒé™</p><pre><code class="hljs shell">[hadoop@node01 bin]$ chmod 777 hadoop.sh[hadoop@node01 bin]$ ./hadoop.sh start  # å¯åŠ¨hadoopé›†ç¾¤[hadoop@node01 bin]$ ./hadoop.sh stop   # åœæ­¢hadoopé›†ç¾¤</code></pre><h5 id="ç¬¬å…«æ­¥ï¼šæµè§ˆå™¨æŸ¥çœ‹å¯åŠ¨é¡µé¢"><a href="#ç¬¬å…«æ­¥ï¼šæµè§ˆå™¨æŸ¥çœ‹å¯åŠ¨é¡µé¢" class="headerlink" title="ç¬¬å…«æ­¥ï¼šæµè§ˆå™¨æŸ¥çœ‹å¯åŠ¨é¡µé¢"></a>ç¬¬å…«æ­¥ï¼šæµè§ˆå™¨æŸ¥çœ‹å¯åŠ¨é¡µé¢</h5><p>hdfsé›†ç¾¤è®¿é—®åœ°å€</p><p><a href="http://192.168.51.100:50070/">http://192.168.51.100:50070/</a></p><p>yarné›†ç¾¤è®¿é—®åœ°å€</p><p><a href="http://192.168.51.100:8088/">http://192.168.51.100:8088</a></p><p>jobhistoryè®¿é—®åœ°å€ï¼š</p><p><a href="http://192.168.51.100:19888/">http://192.168.51.100:19888</a></p><p>==å¦‚æœè¦å…³é—­ç”µè„‘æ—¶ï¼Œæ¸…ä¸€å®šè¦æŒ‰ç…§ä»¥ä¸‹é¡ºåºæ“ä½œï¼Œå¦åˆ™é›†ç¾¤å¯èƒ½ä¼šå‡ºé—®é¢˜==</p><ul><li><p>å…³é—­hadoopé›†ç¾¤</p></li><li><p>å…³é—­è™šæ‹Ÿæœº</p></li><li><p>å…³é—­ç”µè„‘</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>Bdata</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hadoop</tag>
      
      <tag>å¤§æ•°æ®</tag>
      
      <tag>mac</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€Allã€‘GitåŠ¨å›¾å›¾è§£</title>
    <link href="/2020/06/14/git%E5%8A%A8%E5%9B%BE%E5%9B%BE%E8%A7%A3/"/>
    <url>/2020/06/14/git%E5%8A%A8%E5%9B%BE%E5%9B%BE%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<p><img src="/images/Windows%E4%B8%8B%E7%9A%84git%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/git.jpg"><a id="more"></a> </p><h3 id="åˆå¹¶"><a href="#åˆå¹¶" class="headerlink" title="åˆå¹¶"></a>åˆå¹¶</h3><p>æ‹¥æœ‰å¤šä¸ªåˆ†æ”¯æ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œè¿™æ ·å¯ä»¥å°†ä¸åŒçš„æ–°ä¿®æ”¹äº’ç›¸éš”ç¦»å¼€ï¼Œè€Œä¸”è¿˜èƒ½ç¡®ä¿ä½ ä¸ä¼šæ„å¤–åœ°å‘ç”Ÿäº§ä»£ç æ¨é€æœªç»è®¸å¯æˆ–ç ´æŸçš„ä»£ç ä¿®æ”¹ã€‚ä½†ä¸€æ—¦è¿™äº›ä¿®æ”¹å¾—åˆ°äº†æ‰¹å‡†è®¸å¯ï¼Œæˆ‘ä»¬å°±éœ€è¦å°†å…¶éƒ¨ç½²åˆ°æˆ‘ä»¬çš„ç”Ÿäº§åˆ†æ”¯ä¸­ï¼</p><p>å¯å°†ä¸€ä¸ªåˆ†æ”¯çš„ä¿®æ”¹èå…¥åˆ°å¦ä¸€ä¸ªåˆ†æ”¯çš„ä¸€ç§æ–¹å¼æ˜¯æ‰§è¡Œ git mergeã€‚Git å¯æ‰§è¡Œä¸¤ç§ç±»å‹çš„åˆå¹¶ï¼šfast-forward å’Œ no-fast-forwardã€‚ç°åœ¨ä½ å¯èƒ½åˆ†ä¸æ¸…ï¼Œä½†æˆ‘ä»¬é©¬ä¸Šå°±æ¥çœ‹çœ‹å®ƒä»¬çš„å·®å¼‚æ‰€åœ¨ã€‚</p><h4 id="Fast-forward-â€”ff"><a href="#Fast-forward-â€”ff" class="headerlink" title="Fast-forward (â€”ff)"></a>Fast-forward (â€”ff)</h4><p>åœ¨å½“å‰åˆ†æ”¯ç›¸æ¯”äºæˆ‘ä»¬è¦åˆå¹¶çš„åˆ†æ”¯æ²¡æœ‰é¢å¤–çš„æäº¤ï¼ˆcommitï¼‰æ—¶ï¼Œå¯ä»¥æ‰§è¡Œ fast-forward åˆå¹¶ã€‚Git å¾ˆæ‡’ï¼Œé¦–å…ˆä¼šå°è¯•æ‰§è¡Œæœ€ç®€å•çš„é€‰é¡¹ï¼šfast-forwardï¼è¿™ç±»åˆå¹¶ä¸ä¼šåˆ›å»ºæ–°çš„æäº¤ï¼Œè€Œæ˜¯ä¼šå°†æˆ‘ä»¬æ­£åœ¨åˆå¹¶çš„åˆ†æ”¯ä¸Šçš„æäº¤ç›´æ¥åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ã€‚</p><p><img src="/images/git%E5%8A%A8%E6%80%81%E5%9B%BE%E8%A7%A3/image1.gif"></p><p>å®Œç¾ï¼ç°åœ¨ï¼Œæˆ‘ä»¬åœ¨ dev åˆ†æ”¯ä¸Šæ‰€åšçš„æ‰€æœ‰æ”¹å˜éƒ½åˆå¹¶åˆ°äº† master åˆ†æ”¯ä¸Šã€‚é‚£ä¹ˆ no-fast-forward åˆæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ</p><h4 id="No-fast-foward-â€”no-ff"><a href="#No-fast-foward-â€”no-ff" class="headerlink" title="No-fast-foward (â€”no-ff)"></a>No-fast-foward (â€”no-ff)</h4><p>å¦‚æœä½ çš„å½“å‰åˆ†æ”¯ç›¸æ¯”äºä½ æƒ³è¦åˆå¹¶çš„åˆ†æ”¯æ²¡æœ‰ä»»ä½•æäº¤ï¼Œé‚£å½“ç„¶å¾ˆå¥½ï¼Œä½†å¾ˆé—æ†¾ç°å®æƒ…å†µå¾ˆå°‘å¦‚æ­¤ï¼å¦‚æœæˆ‘ä»¬åœ¨å½“å‰åˆ†æ”¯ä¸Šæäº¤æˆ‘ä»¬æƒ³è¦åˆå¹¶çš„åˆ†æ”¯ä¸å…·å¤‡çš„æ”¹å˜ï¼Œé‚£ä¹ˆ git å°†ä¼šæ‰§è¡Œ no-fast-forward åˆå¹¶ã€‚</p><p>ä½¿ç”¨ no-fast-forward åˆå¹¶æ—¶ï¼ŒGit ä¼šåœ¨å½“å‰æ´»åŠ¨åˆ†æ”¯ä¸Šåˆ›å»ºæ–°çš„ merging commitã€‚è¿™ä¸ªæäº¤çš„çˆ¶æäº¤ï¼ˆparent commitï¼‰å³æŒ‡å‘è¿™ä¸ªæ´»åŠ¨åˆ†æ”¯ï¼Œä¹ŸæŒ‡å‘æˆ‘ä»¬æƒ³è¦åˆå¹¶çš„åˆ†æ”¯ï¼</p><p><img src="/images/git%E5%8A%A8%E6%80%81%E5%9B%BE%E8%A7%A3/image2.gif"></p><p>æ²¡ä»€ä¹ˆå¤§ä¸äº†çš„ï¼Œå®Œç¾çš„åˆå¹¶ï¼ç°åœ¨ï¼Œæˆ‘ä»¬åœ¨ dev åˆ†æ”¯ä¸Šæ‰€åšçš„æ‰€æœ‰æ”¹å˜éƒ½åˆå¹¶åˆ°äº† master åˆ†æ”¯ä¸Šã€‚</p><h4 id="åˆå¹¶å†²çª"><a href="#åˆå¹¶å†²çª" class="headerlink" title="åˆå¹¶å†²çª"></a>åˆå¹¶å†²çª</h4><p>å°½ç®¡ Git èƒ½å¤Ÿå¾ˆå¥½åœ°å†³å®šå¦‚ä½•åˆå¹¶åˆ†æ”¯ä»¥åŠå¦‚ä½•å‘æ–‡ä»¶æ·»åŠ ä¿®æ”¹ï¼Œä½†å®ƒå¹¶ä¸æ€»æ˜¯èƒ½å®Œå…¨è‡ªå·±åšå†³å®šã€‚å½“æˆ‘ä»¬æƒ³è¦åˆå¹¶çš„ä¸¤ä¸ªåˆ†æ”¯çš„åŒä¸€æ–‡ä»¶ä¸­çš„åŒä¸€è¡Œä»£ç ä¸Šæœ‰ä¸åŒçš„ä¿®æ”¹ï¼Œæˆ–è€…ä¸€ä¸ªåˆ†æ”¯åˆ é™¤äº†ä¸€ä¸ªæ–‡ä»¶è€Œå¦ä¸€ä¸ªåˆ†æ”¯ä¿®æ”¹äº†è¿™ä¸ªæ–‡ä»¶æ—¶ï¼ŒGit å°±ä¸çŸ¥é“å¦‚ä½•å–èˆäº†ã€‚</p><p>åœ¨è¿™æ ·çš„æƒ…å†µä¸‹ï¼ŒGit ä¼šè¯¢é—®ä½ æƒ³è¦ä¿ç•™å“ªç§é€‰æ‹©ï¼Ÿå‡è®¾åœ¨è¿™ä¸¤ä¸ªåˆ†æ”¯ä¸­ï¼Œæˆ‘ä»¬éƒ½ç¼–è¾‘äº† README.md çš„ç¬¬ä¸€è¡Œã€‚</p><p><img src="/images/git%E5%8A%A8%E6%80%81%E5%9B%BE%E8%A7%A3/image3.png"></p><p>å¦‚æœæˆ‘ä»¬æƒ³æŠŠ dev åˆå¹¶åˆ° masterï¼Œå°±ä¼šå‡ºç°ä¸€ä¸ªåˆå¹¶å†²çªï¼šä½ æƒ³è¦æ ‡é¢˜æ˜¯ Hello! è¿˜æ˜¯ Hey!ï¼Ÿ</p><p>å½“å°è¯•åˆå¹¶è¿™äº›åˆ†æ”¯æ—¶ï¼ŒGit ä¼šå‘ä½ å±•ç¤ºå†²çªå‡ºç°çš„ä½ç½®ã€‚æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨ç§»é™¤æˆ‘ä»¬ä¸æƒ³ä¿ç•™çš„ä¿®æ”¹ï¼Œä¿å­˜è¿™äº›ä¿®æ”¹ï¼Œå†æ¬¡æ·»åŠ è¿™ä¸ªå·²ä¿®æ”¹çš„æ–‡ä»¶ï¼Œç„¶åæäº¤è¿™äº›ä¿®æ”¹ã€‚</p><p><img src="/images/git%E5%8A%A8%E6%80%81%E5%9B%BE%E8%A7%A3/image4.gif"></p><p>å®Œæˆï¼å°½ç®¡åˆå¹¶å†²çªå¾€å¾€å¾ˆè®©äººåŒçƒ¦ï¼Œä½†è¿™æ˜¯åˆç†çš„ï¼šGit ä¸åº”è¯¥ççŒœæˆ‘ä»¬æƒ³è¦ä¿ç•™å“ªäº›ä¿®æ”¹ã€‚</p><h3 id="å˜åŸºï¼ˆRebasingï¼‰"><a href="#å˜åŸºï¼ˆRebasingï¼‰" class="headerlink" title="å˜åŸºï¼ˆRebasingï¼‰"></a>å˜åŸºï¼ˆRebasingï¼‰</h3><p>æˆ‘ä»¬åˆšçœ‹åˆ°å¯é€šè¿‡æ‰§è¡Œ git merge å°†ä¸€ä¸ªåˆ†æ”¯çš„ä¿®æ”¹åº”ç”¨åˆ°å¦ä¸€ä¸ªåˆ†æ”¯ã€‚å¦ä¸€ç§å¯å°†ä¸€ä¸ªåˆ†æ”¯çš„ä¿®æ”¹èå…¥åˆ°å¦ä¸€ä¸ªåˆ†æ”¯çš„æ–¹å¼æ˜¯æ‰§è¡Œ git rebaseã€‚</p><p>git rebase ä¼šå°†å½“å‰åˆ†æ”¯çš„æäº¤å¤åˆ¶åˆ°æŒ‡å®šçš„åˆ†æ”¯ä¹‹ä¸Šã€‚</p><p><img src="/images/git%E5%8A%A8%E6%80%81%E5%9B%BE%E8%A7%A3/image5.gif"></p><p>å®Œç¾ï¼Œç°åœ¨æˆ‘ä»¬åœ¨ dev åˆ†æ”¯ä¸Šè·å–äº† master åˆ†æ”¯ä¸Šçš„æ‰€æœ‰ä¿®æ”¹ã€‚</p><p>å˜åŸºä¸åˆå¹¶æœ‰ä¸€ä¸ªé‡å¤§çš„åŒºåˆ«ï¼šGit ä¸ä¼šå°è¯•ç¡®å®šè¦ä¿ç•™æˆ–ä¸ä¿ç•™å“ªäº›æ–‡ä»¶ã€‚æˆ‘ä»¬æ‰§è¡Œ rebase çš„åˆ†æ”¯æ€»æ˜¯å«æœ‰æˆ‘ä»¬æƒ³è¦ä¿ç•™çš„æœ€æ–°è¿‘çš„ä¿®æ”¹ï¼è¿™æ ·æˆ‘ä»¬ä¸ä¼šé‡åˆ°ä»»ä½•åˆå¹¶å†²çªï¼Œè€Œä¸”å¯ä»¥ä¿ç•™ä¸€ä¸ªæ¼‚äº®çš„ã€çº¿æ€§çš„ Git å†å²è®°å½•ã€‚</p><p>ä¸Šé¢è¿™ä¸ªä¾‹å­å±•ç¤ºäº†åœ¨ master åˆ†æ”¯ä¸Šçš„å˜åŸºã€‚ä½†æ˜¯ï¼Œåœ¨æ›´å¤§å‹çš„é¡¹ç›®ä¸­ï¼Œä½ é€šå¸¸ä¸éœ€è¦è¿™æ ·çš„æ“ä½œã€‚git rebase åœ¨ä¸ºå¤åˆ¶çš„æäº¤åˆ›å»ºæ–°çš„ hash æ—¶ä¼šä¿®æ”¹é¡¹ç›®çš„å†å²è®°å½•ã€‚</p><p>å¦‚æœä½ åœ¨å¼€å‘ä¸€ä¸ª feature åˆ†æ”¯å¹¶ä¸” master åˆ†æ”¯å·²ç»æ›´æ–°è¿‡ï¼Œé‚£ä¹ˆå˜åŸºå°±å¾ˆå¥½ç”¨ã€‚ä½ å¯ä»¥åœ¨ä½ çš„åˆ†æ”¯ä¸Šè·å–æ‰€æœ‰æ›´æ–°ï¼Œè¿™èƒ½é˜²æ­¢æœªæ¥å‡ºç°åˆå¹¶å†²çªã€‚</p><h3 id="äº¤äº’å¼å˜åŸºï¼ˆInteractive-Rebaseï¼‰"><a href="#äº¤äº’å¼å˜åŸºï¼ˆInteractive-Rebaseï¼‰" class="headerlink" title="äº¤äº’å¼å˜åŸºï¼ˆInteractive Rebaseï¼‰"></a>äº¤äº’å¼å˜åŸºï¼ˆInteractive Rebaseï¼‰</h3><p>åœ¨ä¸ºæäº¤æ‰§è¡Œå˜åŸºä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹å®ƒä»¬ï¼æˆ‘ä»¬å¯ä»¥ä½¿ç”¨äº¤äº’å¼å˜åŸºæ¥å®Œæˆè¿™ä¸€ä»»åŠ¡ã€‚äº¤äº’å¼å˜åŸºåœ¨ä½ å½“å‰å¼€å‘çš„åˆ†æ”¯ä¸Šä»¥åŠæƒ³è¦ä¿®æ”¹æŸäº›æäº¤æ—¶ä¼šå¾ˆæœ‰ç”¨ã€‚</p><p>åœ¨æˆ‘ä»¬æ­£åœ¨ rebase çš„æäº¤ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œä»¥ä¸‹ 6 ä¸ªåŠ¨ä½œï¼š</p><p>rewordï¼šä¿®æ”¹æäº¤ä¿¡æ¯ï¼›</p><p>editï¼šä¿®æ”¹æ­¤æäº¤ï¼›</p><p>squashï¼šå°†æäº¤èåˆåˆ°å‰ä¸€ä¸ªæäº¤ä¸­ï¼›</p><p>fixupï¼šå°†æäº¤èåˆåˆ°å‰ä¸€ä¸ªæäº¤ä¸­ï¼Œä¸ä¿ç•™è¯¥æäº¤çš„æ—¥å¿—æ¶ˆæ¯ï¼›</p><p>execï¼šåœ¨æ¯ä¸ªæäº¤ä¸Šè¿è¡Œæˆ‘ä»¬æƒ³è¦ rebase çš„å‘½ä»¤ï¼›</p><p>dropï¼šç§»é™¤è¯¥æäº¤ã€‚</p><p>å¾ˆæ£’ï¼è¿™æ ·æˆ‘ä»¬å°±èƒ½å®Œå…¨æ§åˆ¶æˆ‘ä»¬çš„æäº¤äº†ã€‚å¦‚æœä½ æƒ³è¦ç§»é™¤ä¸€ä¸ªæäº¤ï¼Œåªéœ€ drop å³å¯ã€‚</p><p><img src="/images/git%E5%8A%A8%E6%80%81%E5%9B%BE%E8%A7%A3/image6.gif"></p><p>å¦‚æœä½ æƒ³æŠŠå¤šä¸ªæäº¤èåˆåˆ°ä¸€èµ·ä»¥ä¾¿å¾—åˆ°æ¸…æ™°çš„æäº¤å†å²ï¼Œé‚£ä¹Ÿæ²¡æœ‰é—®é¢˜ï¼</p><p><img src="/images/git%E5%8A%A8%E6%80%81%E5%9B%BE%E8%A7%A3/image7.gif"></p><p>äº¤äº’å¼å˜åŸºèƒ½ä¸ºä½ åœ¨ rebase æ—¶æä¾›å¤§é‡æ§åˆ¶ï¼Œç”šè‡³å¯ä»¥æ§åˆ¶å½“å‰çš„æ´»åŠ¨åˆ†æ”¯ã€‚</p><h3 id="é‡ç½®ï¼ˆResettingï¼‰"><a href="#é‡ç½®ï¼ˆResettingï¼‰" class="headerlink" title="é‡ç½®ï¼ˆResettingï¼‰"></a>é‡ç½®ï¼ˆResettingï¼‰</h3><p>å½“æˆ‘ä»¬ä¸æƒ³è¦ä¹‹å‰æäº¤çš„ä¿®æ”¹æ—¶ï¼Œå°±ä¼šç”¨åˆ°è¿™ä¸ªå‘½ä»¤ã€‚ä¹Ÿè®¸è¿™æ˜¯ä¸€ä¸ª WIP æäº¤æˆ–è€…å¯èƒ½æ˜¯å¼•å…¥äº† bug çš„æäº¤ï¼Œè¿™æ—¶å€™å°±è¦æ‰§è¡Œ git resetã€‚</p><p>git reset èƒ½è®©æˆ‘ä»¬ä¸å†ä½¿ç”¨å½“å‰å°é¢ä¸Šçš„æ–‡ä»¶ï¼Œè®©æˆ‘ä»¬å¯ä»¥æ§åˆ¶ HEAD åº”è¯¥æŒ‡å‘çš„ä½ç½®ã€‚</p><h4 id="è½¯é‡ç½®"><a href="#è½¯é‡ç½®" class="headerlink" title="è½¯é‡ç½®"></a>è½¯é‡ç½®</h4><p>è½¯é‡ç½®ä¼šå°† HEAD ç§»è‡³æŒ‡å®šçš„æäº¤ï¼ˆæˆ–ä¸ HEAD ç›¸æ¯”çš„æäº¤çš„ç´¢å¼•ï¼‰ï¼Œè€Œä¸ä¼šç§»é™¤è¯¥æäº¤ä¹‹ååŠ å…¥çš„ä¿®æ”¹ï¼</p><p>å‡è®¾æˆ‘ä»¬ä¸æƒ³ä¿ç•™æ·»åŠ äº†ä¸€ä¸ª style.css æ–‡ä»¶çš„æäº¤ 9e78iï¼Œè€Œä¸”æˆ‘ä»¬ä¹Ÿä¸æƒ³ä¿ç•™æ·»åŠ äº†ä¸€ä¸ª index.js æ–‡ä»¶çš„æäº¤ 035ccã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬ç¡®å®åˆæƒ³è¦ä¿ç•™æ–°æ·»åŠ çš„ style.css å’Œ index.js æ–‡ä»¶ï¼è¿™æ˜¯è½¯é‡ç½®çš„ä¸€ä¸ªå®Œç¾ç”¨ä¾‹ã€‚</p><p><img src="/images/git%E5%8A%A8%E6%80%81%E5%9B%BE%E8%A7%A3/image8.gif"></p><p>è¾“å…¥ git status åï¼Œä½ ä¼šçœ‹åˆ°æˆ‘ä»¬ä»ç„¶å¯ä»¥è®¿é—®åœ¨ä¹‹å‰çš„æäº¤ä¸Šåšè¿‡çš„æ‰€æœ‰ä¿®æ”¹ã€‚è¿™å¾ˆå¥½ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ä¿®å¤è¿™äº›æ–‡ä»¶çš„å†…å®¹ï¼Œä¹‹åå†é‡æ–°æäº¤å®ƒä»¬ï¼</p><h4 id="ç¡¬é‡ç½®"><a href="#ç¡¬é‡ç½®" class="headerlink" title="ç¡¬é‡ç½®"></a>ç¡¬é‡ç½®</h4><p>æœ‰æ—¶å€™æˆ‘ä»¬å¹¶ä¸æƒ³ä¿ç•™ç‰¹å®šæäº¤å¼•å…¥çš„ä¿®æ”¹ã€‚ä¸åŒäºè½¯é‡ç½®ï¼Œæˆ‘ä»¬åº”è¯¥å†ä¹Ÿæ— éœ€è®¿é—®å®ƒä»¬ã€‚Git åº”è¯¥ç›´æ¥å°†æ•´ä½“çŠ¶æ€ç›´æ¥é‡ç½®åˆ°ç‰¹å®šæäº¤ä¹‹å‰çš„çŠ¶æ€ï¼šè¿™ç”šè‡³åŒ…æ‹¬ä½ åœ¨å·¥ä½œç›®å½•ä¸­å’Œæš‚å­˜æ–‡ä»¶ä¸Šçš„ä¿®æ”¹ã€‚</p><p><img src="/images/git%E5%8A%A8%E6%80%81%E5%9B%BE%E8%A7%A3/image9.gif"></p><p>Git ä¸¢å¼ƒäº† 9e78i å’Œ 035cc å¼•å…¥çš„ä¿®æ”¹ï¼Œå¹¶å°†çŠ¶æ€é‡ç½®åˆ°äº† ec5be çš„çŠ¶æ€ã€‚</p><h3 id="è¿˜åŸï¼ˆRevertingï¼‰"><a href="#è¿˜åŸï¼ˆRevertingï¼‰" class="headerlink" title="è¿˜åŸï¼ˆRevertingï¼‰"></a>è¿˜åŸï¼ˆRevertingï¼‰</h3><p>å¦ä¸€ç§æ’¤é”€ä¿®æ”¹çš„æ–¹æ³•æ˜¯æ‰§è¡Œ git revertã€‚é€šè¿‡å¯¹ç‰¹å®šçš„æäº¤æ‰§è¡Œè¿˜åŸæ“ä½œï¼Œæˆ‘ä»¬ä¼šåˆ›å»ºä¸€ä¸ªåŒ…å«å·²è¿˜åŸä¿®æ”¹çš„æ–°æäº¤ã€‚</p><p>å‡è®¾ ec5be æ·»åŠ äº†ä¸€ä¸ª index.js æ–‡ä»¶ã€‚ä½†ä¹‹åæˆ‘ä»¬å‘ç°å…¶å®æˆ‘ä»¬å†ä¹Ÿä¸éœ€è¦ç”±è¿™ä¸ªæäº¤å¼•å…¥çš„ä¿®æ”¹äº†ã€‚é‚£å°±è¿˜åŸ ec5be æäº¤å§ï¼</p><p><img src="/images/git%E5%8A%A8%E6%80%81%E5%9B%BE%E8%A7%A3/image10.gif"></p><p>å®Œç¾ï¼æäº¤ 9e78i è¿˜åŸäº†ç”±æäº¤ ec5be å¼•å…¥çš„ä¿®æ”¹ã€‚åœ¨æ’¤é”€ç‰¹å®šçš„æäº¤æ—¶ï¼Œgit revert éå¸¸æœ‰ç”¨ï¼ŒåŒæ—¶ä¹Ÿä¸ä¼šä¿®æ”¹åˆ†æ”¯çš„å†å²ã€‚</p><h3 id="æ‹£é€‰ï¼ˆCherry-pickingï¼‰"><a href="#æ‹£é€‰ï¼ˆCherry-pickingï¼‰" class="headerlink" title="æ‹£é€‰ï¼ˆCherry-pickingï¼‰"></a>æ‹£é€‰ï¼ˆCherry-pickingï¼‰</h3><p>å½“ä¸€ä¸ªç‰¹å®šåˆ†æ”¯åŒ…å«æˆ‘ä»¬çš„æ´»åŠ¨åˆ†æ”¯éœ€è¦çš„æŸä¸ªæäº¤æ—¶ï¼Œæˆ‘ä»¬å¯¹é‚£ä¸ªæäº¤æ‰§è¡Œ cherry-pickï¼å¯¹ä¸€ä¸ªæäº¤æ‰§è¡Œ cherry-pick æ—¶ï¼Œæˆ‘ä»¬ä¼šåœ¨æ´»åŠ¨åˆ†æ”¯ä¸Šåˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤ï¼Œå…¶ä¸­åŒ…å«ç”±æ‹£é€‰å‡ºæ¥çš„æäº¤æ‰€å¼•å…¥çš„ä¿®æ”¹ã€‚</p><p>å‡è®¾ dev åˆ†æ”¯ä¸Šçš„æäº¤ 76d12 ä¸º index.js æ–‡ä»¶æ·»åŠ äº†ä¸€é¡¹ä¿®æ”¹ï¼Œè€Œæˆ‘ä»¬å¸Œæœ›å°†å…¶æ•´åˆåˆ° master åˆ†æ”¯ä¸­ã€‚æˆ‘ä»¬å¹¶ä¸æƒ³è¦æ•´ä¸ª dev åˆ†æ”¯ï¼Œè€Œåªéœ€è¦è¿™ä¸ªæäº¤ï¼</p><p><img src="/images/git%E5%8A%A8%E6%80%81%E5%9B%BE%E8%A7%A3/image11.gif"></p><p>ç°åœ¨ master åˆ†æ”¯åŒ…å« 76d12 å¼•å…¥çš„ä¿®æ”¹äº†ã€‚</p><h3 id="å–å›ï¼ˆFetchingï¼‰"><a href="#å–å›ï¼ˆFetchingï¼‰" class="headerlink" title="å–å›ï¼ˆFetchingï¼‰"></a>å–å›ï¼ˆFetchingï¼‰</h3><p>å¦‚æœä½ æœ‰ä¸€ä¸ªè¿œç¨‹ Git åˆ†æ”¯ï¼Œæ¯”å¦‚åœ¨ GitHub ä¸Šçš„åˆ†æ”¯ï¼Œå½“è¿œç¨‹åˆ†æ”¯ä¸ŠåŒ…å«å½“å‰åˆ†æ”¯æ²¡æœ‰çš„æäº¤æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å–å›ã€‚æ¯”å¦‚å½“åˆå¹¶äº†å¦ä¸€ä¸ªåˆ†æ”¯æˆ–ä½ çš„åŒäº‹æ¨é€äº†ä¸€ä¸ªå¿«é€Ÿä¿®å¤æ—¶ã€‚</p><p>é€šè¿‡åœ¨è¿™ä¸ªè¿œç¨‹åˆ†æ”¯ä¸Šæ‰§è¡Œ git fetchï¼Œæˆ‘ä»¬å°±å¯åœ¨æœ¬åœ°è·å–è¿™äº›ä¿®æ”¹ã€‚è¿™ä¸ä¼šä»¥ä»»ä½•æ–¹å¼å½±å“ä½ çš„æœ¬åœ°åˆ†æ”¯ï¼šfetch åªæ˜¯å•çº¯åœ°ä¸‹è½½æ–°çš„æ•°æ®è€Œå·²ã€‚</p><p><img src="/images/git%E5%8A%A8%E6%80%81%E5%9B%BE%E8%A7%A3/image12.gif"></p><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è‡ªä¸Šæ¬¡æ¨é€ä»¥æ¥çš„æ‰€æœ‰ä¿®æ”¹äº†ã€‚è¿™äº›æ–°æ•°æ®ä¹Ÿå·²ç»åœ¨æœ¬åœ°äº†ï¼Œæˆ‘ä»¬å¯ä»¥å†³å®šç”¨è¿™äº›æ–°æ•°æ®åšä»€ä¹ˆäº†ã€‚</p><h3 id="æ‹‰å–ï¼ˆPullingï¼‰"><a href="#æ‹‰å–ï¼ˆPullingï¼‰" class="headerlink" title="æ‹‰å–ï¼ˆPullingï¼‰"></a>æ‹‰å–ï¼ˆPullingï¼‰</h3><p>å°½ç®¡ git fetch å¯ç”¨äºè·å–æŸä¸ªåˆ†æ”¯çš„è¿œç¨‹ä¿¡æ¯ï¼Œä½†æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰§è¡Œ git pullã€‚git pull å®é™…ä¸Šæ˜¯ä¸¤ä¸ªå‘½ä»¤åˆæˆäº†ä¸€ä¸ªï¼šgit fetch å’Œ git mergeã€‚å½“æˆ‘ä»¬ä»æ¥æºæ‹‰å–ä¿®æ”¹æ—¶ï¼Œæˆ‘ä»¬é¦–å…ˆæ˜¯åƒ git fetch é‚£æ ·å–å›æ‰€æœ‰æ•°æ®ï¼Œç„¶åæœ€æ–°çš„ä¿®æ”¹ä¼šè‡ªåŠ¨åˆå¹¶åˆ°æœ¬åœ°åˆ†æ”¯ä¸­ã€‚</p><p><img src="/images/git%E5%8A%A8%E6%80%81%E5%9B%BE%E8%A7%A3/image13.gif"></p><p>å¾ˆå¥½ï¼Œæˆ‘ä»¬ç°åœ¨ä¸è¿œç¨‹åˆ†æ”¯å®Œç¾åŒæ­¥äº†ï¼Œå¹¶ä¸”ä¹Ÿæœ‰äº†æ‰€æœ‰æœ€æ–°çš„ä¿®æ”¹ï¼</p><h3 id="Reflog"><a href="#Reflog" class="headerlink" title="Reflog"></a>Reflog</h3><p>æ¯ä¸ªäººéƒ½ä¼šçŠ¯é”™ï¼Œä½†çŠ¯é”™å…¶å®æ²¡å•¥ï¼æœ‰æ—¶å€™ä½ å¯èƒ½æ„Ÿè§‰ä½ æŠŠ git repo å®Œå…¨æåäº†ï¼Œè®©ä½ æƒ³å®Œå…¨åˆ äº†äº†äº‹ã€‚</p><p>git reflog æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å‘½ä»¤ï¼Œå¯ä»¥å±•ç¤ºå·²ç»æ‰§è¡Œè¿‡çš„æ‰€æœ‰åŠ¨ä½œçš„æ—¥å¿—ã€‚åŒ…æ‹¬åˆå¹¶ã€é‡ç½®ã€è¿˜åŸï¼ŒåŸºæœ¬ä¸ŠåŒ…å«ä½ å¯¹ä½ çš„åˆ†æ”¯æ‰€åšçš„ä»»ä½•ä¿®æ”¹ã€‚</p><p><img src="/images/git%E5%8A%A8%E6%80%81%E5%9B%BE%E8%A7%A3/image14.gif"></p><p>å¦‚æœä½ çŠ¯äº†é”™ï¼Œä½ å¯ä»¥æ ¹æ® reflog æä¾›çš„ä¿¡æ¯é€šè¿‡é‡ç½® HEAD æ¥è½»æ¾åœ°é‡åšï¼</p><p>å‡è®¾æˆ‘ä»¬å®é™…ä¸Šå¹¶ä¸éœ€è¦åˆå¹¶åŸæœ‰åˆ†æ”¯ã€‚å½“æˆ‘ä»¬æ‰§è¡Œ git reflog å‘½ä»¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ª repo çš„çŠ¶æ€åœ¨åˆå¹¶å‰ä½äº HEAD@{1}ã€‚é‚£æˆ‘ä»¬å°±æ‰§è¡Œä¸€æ¬¡ git resetï¼Œå°† HEAD é‡æ–°æŒ‡å‘åœ¨ HEAD@{1} çš„ä½ç½®ã€‚</p><p><img src="/images/git%E5%8A%A8%E6%80%81%E5%9B%BE%E8%A7%A3/image15.gif"></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ€æ–°çš„åŠ¨ä½œå·²è¢«æ¨é€ç»™ reflogã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Develop</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€windowsã€‘Gitçš„å®‰è£…ä¸é…ç½®</title>
    <link href="/2020/06/14/Windows%E4%B8%8B%E7%9A%84git%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/"/>
    <url>/2020/06/14/Windows%E4%B8%8B%E7%9A%84git%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<p><img src="/images/Windows%E4%B8%8B%E7%9A%84git%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/git.jpg"><a id="more"></a> </p><h3 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h3><h4 id="æŸ¥çœ‹Gitæ‰€æœ‰é…ç½®"><a href="#æŸ¥çœ‹Gitæ‰€æœ‰é…ç½®" class="headerlink" title="æŸ¥çœ‹Gitæ‰€æœ‰é…ç½®"></a>æŸ¥çœ‹Gitæ‰€æœ‰é…ç½®</h4><p>git config â€“list </p><h4 id="åˆ é™¤å…¨å±€é…ç½®é¡¹"><a href="#åˆ é™¤å…¨å±€é…ç½®é¡¹" class="headerlink" title="åˆ é™¤å…¨å±€é…ç½®é¡¹"></a>åˆ é™¤å…¨å±€é…ç½®é¡¹</h4><p>(1)ç»ˆç«¯æ‰§è¡Œå‘½ä»¤ï¼š</p><p><code>git config --global --unset user.name</code></p><p>(2)ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š</p><p><code>git config --global --edit</code></p><p>æŸ¥çœ‹ç³»ç»Ÿconfig</p><p><code>git config --system --list</code></p><p>æŸ¥çœ‹å½“å‰ç”¨æˆ·ï¼ˆglobalï¼‰é…ç½®</p><p><code>git config --global --list</code></p><p>æŸ¥çœ‹å½“å‰ä»“åº“é…ç½®ä¿¡æ¯</p><p><code>git config --local --list</code></p><h4 id="åˆ‡æ¢åˆ°éœ€è¦æäº¤çš„åˆ†æ”¯"><a href="#åˆ‡æ¢åˆ°éœ€è¦æäº¤çš„åˆ†æ”¯" class="headerlink" title="åˆ‡æ¢åˆ°éœ€è¦æäº¤çš„åˆ†æ”¯"></a>åˆ‡æ¢åˆ°éœ€è¦æäº¤çš„åˆ†æ”¯</h4><pre><code class="hljs haxe">git status     <span class="hljs-meta">#  æŸ¥çœ‹gitçŠ¶æ€  </span>git branch     <span class="hljs-meta">#  æŸ¥çœ‹gitåˆ†æ”¯  </span>git checkout feature/<span class="hljs-keyword">new</span><span class="hljs-type">_branch</span> <span class="hljs-meta"># åˆ‡æ¢åˆ°feature/new_branchåˆ†æ”¯ </span></code></pre><h4 id="æäº¤ä»£ç "><a href="#æäº¤ä»£ç " class="headerlink" title="æäº¤ä»£ç "></a>æäº¤ä»£ç </h4><pre><code class="hljs dockerfile">git <span class="hljs-keyword">add</span><span class="bash"> .                                          <span class="hljs-comment"># æ·»åŠ æ•°æ®åˆ°é•œåƒä»“åº“                                             </span></span>                                                   <span class="hljs-comment"># æäº¤å•ä¸ªæ–‡ä»¶ï¼Œè¿›å…¥ä½ è¦æäº¤çš„æ–‡ä»¶ç›®å½•          </span>                                                   <span class="hljs-comment"># git add &lt;ä½ è¦æäº¤çš„æ–‡ä»¶&gt; </span>git commit -m <span class="hljs-string">&#x27;ä½ è¦å†™çš„æ³¨é‡Š&#x27;</span>                         <span class="hljs-comment"># æäº¤åˆ°æœ¬åœ°é•œåƒä»“åº“</span>git push -u origin feature/new_branch    <span class="hljs-comment"># æäº¤åˆ°è¿œç¨‹é•œåƒä»“åº“</span></code></pre><h4 id="å°†è¿œç¨‹åˆ†æ”¯æ‹‰å–åˆ°æœ¬åœ°"><a href="#å°†è¿œç¨‹åˆ†æ”¯æ‹‰å–åˆ°æœ¬åœ°" class="headerlink" title="å°†è¿œç¨‹åˆ†æ”¯æ‹‰å–åˆ°æœ¬åœ°"></a>å°†è¿œç¨‹åˆ†æ”¯æ‹‰å–åˆ°æœ¬åœ°</h4><pre><code class="hljs arduino">git branch -a                                            # æŸ¥è¯¢æ‰€æœ‰åˆ†æ”¯,åŒ…æ‹¬è¿œç¨‹åˆ†æ”¯ git checkout -b <span class="hljs-built_in">release</span> remotes/origin/<span class="hljs-built_in">release</span>  # å°†è¿œç¨‹<span class="hljs-built_in">release</span>åˆ†æ”¯æ‹‰å–åˆ°æœ¬åœ°ï¼Œå¹¶åœ¨æœ¬åœ°åˆ›å»º<span class="hljs-built_in">release</span>åˆ†æ”¯</code></pre><p>ç»¿è‰²æ˜¯å½“å‰æ‰€åœ¨æœ¬åœ°åˆ†æ”¯ï¼Œç™½è‰²æ˜¯æœ¬åœ°åˆ†æ”¯ï¼Œçº¢è‰²æ˜¯è¿œç¨‹åˆ†æ”¯<br><img src="/images/Windows%E4%B8%8B%E7%9A%84git%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/git-a.png"></p><h3 id="åˆ†æ”¯ä»£ç æ‹‰å–æäº¤æµç¨‹"><a href="#åˆ†æ”¯ä»£ç æ‹‰å–æäº¤æµç¨‹" class="headerlink" title="åˆ†æ”¯ä»£ç æ‹‰å–æäº¤æµç¨‹"></a>åˆ†æ”¯ä»£ç æ‹‰å–æäº¤æµç¨‹</h3><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> è·å–ä¸»å¹²æœ€æ–°ä»£ç  </span><span class="hljs-meta">$</span><span class="bash"> git <span class="hljs-built_in">clone</span> &lt;repo&gt; </span><span class="hljs-meta">$</span><span class="bash"> git checkout develop   <span class="hljs-comment"># å¼€å‘åˆ†æ”¯ </span></span><span class="hljs-meta">$</span><span class="bash"> git pull               <span class="hljs-comment"># åŒæ­¥åˆ†æ”¯ </span></span><span class="hljs-meta">#</span><span class="bash"> æ–°å»ºä¸€ä¸ªå¼€å‘åˆ†æ”¯my_feature </span><span class="hljs-meta">$</span><span class="bash"> git checkout -b feature/my_feature  </span><span class="hljs-meta">#</span><span class="bash"> ç¡®è®¤å·²åˆ‡æ¢åˆ°å½“å‰åˆ†æ”¯ </span><span class="hljs-meta">$</span><span class="bash"> git branch </span><span class="hljs-meta">#</span><span class="bash"> ä¿å­˜æ‰€æœ‰çš„ä¿®æ”¹å˜åŒ– </span><span class="hljs-meta">$</span><span class="bash"> git add --all æˆ–è€… git add . </span><span class="hljs-meta">#</span><span class="bash"> æŸ¥çœ‹å‘ç”Ÿå˜åŠ¨çš„æ–‡ä»¶ </span><span class="hljs-meta">$</span><span class="bash"> git status  </span><span class="hljs-meta">#</span><span class="bash"> ç¼–è¾‘å¤‡æ³¨ $ git commit -m <span class="hljs-string">&quot;implement api architecture&quot;</span> </span><span class="hljs-meta">#</span><span class="bash"> å°†åˆ†æ”¯ä»£ç pushåˆ°æœåŠ¡å™¨ $ git push origin -u feature/my_feature </span><span class="hljs-meta">#</span><span class="bash"> åˆå¹¶åˆ†æ”¯feature/my_featureåˆ°develop </span><span class="hljs-meta">$</span><span class="bash"> git checkout develop </span><span class="hljs-meta">#</span><span class="bash"> ç¡®ä¿å½“å‰åˆ†æ”¯æ˜¯æœ€æ–°çš„ </span><span class="hljs-meta">$</span><span class="bash"> git pull </span><span class="hljs-meta">$</span><span class="bash"> git merge --no-ff feature/my_feature  </span><span class="hljs-meta">#</span><span class="bash"> åˆ†æ”¯å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†å‡å°‘å†²çªï¼Œå°½é‡è¦å¤šä¸ä¸»å¹²åŒæ­¥ </span><span class="hljs-meta">$</span><span class="bash"> git fetch origin </span><span class="hljs-meta">$</span><span class="bash"> git rebase origin/develop </span><span class="hljs-meta">$</span><span class="bash"> git add .                <span class="hljs-comment"># è§£å†³å†²çªåadd </span></span><span class="hljs-meta">$</span><span class="bash"> git rebase --<span class="hljs-built_in">continue</span></span><span class="hljs-meta">#</span><span class="bash">åˆ é™¤åˆ†æ”¯ $ git branch -d feature/my_feature</span><span class="hljs-meta">#</span><span class="bash">å–æ¶ˆcommit </span><span class="hljs-meta">$</span><span class="bash"> git reset --hard &lt;commit <span class="hljs-built_in">log</span>&gt;</span></code></pre>]]></content>
    
    
    <categories>
      
      <category>Develop</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Windows</tag>
      
      <tag>Git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€windowsã€‘åŸºäºDjangoæ„å»ºä¸å¼€å‘åœ¨çº¿å­¦ä¹ é¡¹ç›®</title>
    <link href="/2020/06/14/windows%E4%B8%8B%E5%9F%BA%E4%BA%8Epycharm%E6%9E%84%E5%BB%BAdjango-web%E9%A1%B9%E7%9B%AE/"/>
    <url>/2020/06/14/windows%E4%B8%8B%E5%9F%BA%E4%BA%8Epycharm%E6%9E%84%E5%BB%BAdjango-web%E9%A1%B9%E7%9B%AE/</url>
    
    <content type="html"><![CDATA[<p><img src="/images/windows%E4%B8%8B%E5%9F%BA%E4%BA%8Epycharm%E6%9E%84%E5%BB%BAdjango-web%E9%A1%B9%E7%9B%AE/logo.jpg"><a id="more"></a> </p><h3 id="é¡¹ç›®åˆ›å»º"><a href="#é¡¹ç›®åˆ›å»º" class="headerlink" title="é¡¹ç›®åˆ›å»º"></a>é¡¹ç›®åˆ›å»º</h3><p><strong>1.å®‰è£…ç¬¬ä¸‰æ–¹åº“Django</strong></p><p><img src="/images/windows%E4%B8%8B%E5%9F%BA%E4%BA%8Epycharm%E6%9E%84%E5%BB%BAdjango-web%E9%A1%B9%E7%9B%AE/1.png"></p><p><strong>2.pycharmåˆ›å»ºDjangoé¡¹ç›®</strong></p><p><img src="/images/windows%E4%B8%8B%E5%9F%BA%E4%BA%8Epycharm%E6%9E%84%E5%BB%BAdjango-web%E9%A1%B9%E7%9B%AE/2.png"></p><h3 id="æ•°æ®åº“ç¯å¢ƒä¸èµ„æºå±‚è®¾ç½®"><a href="#æ•°æ®åº“ç¯å¢ƒä¸èµ„æºå±‚è®¾ç½®" class="headerlink" title="æ•°æ®åº“ç¯å¢ƒä¸èµ„æºå±‚è®¾ç½®"></a>æ•°æ®åº“ç¯å¢ƒä¸èµ„æºå±‚è®¾ç½®</h3><p><strong>3.å®‰è£…mysqlç¬¬ä¸‰æ–¹åº“</strong></p><p><img src="/images/windows%E4%B8%8B%E5%9F%BA%E4%BA%8Epycharm%E6%9E%84%E5%BB%BAdjango-web%E9%A1%B9%E7%9B%AE/3.png"></p><p><strong>4.é…ç½®mysqlæ•°æ®åº“ç¯å¢ƒ</strong></p><p><img src="/images/windows%E4%B8%8B%E5%9F%BA%E4%BA%8Epycharm%E6%9E%84%E5%BB%BAdjango-web%E9%A1%B9%E7%9B%AE/4.png"></p><p><strong>5.ç”Ÿæˆdjangoé»˜è®¤æ•°æ®è¡¨</strong></p><p>tool â€“&gt;Run manage.py task</p><pre><code class="hljs ebnf"><span class="hljs-attribute">makemigrations</span> <span class="hljs-attribute">migrate</span></code></pre><p><img src="/images/windows%E4%B8%8B%E5%9F%BA%E4%BA%8Epycharm%E6%9E%84%E5%BB%BAdjango-web%E9%A1%B9%E7%9B%AE/5.png"></p><p>æŸ¥çœ‹æ•°æ®è¡¨ï¼Œä¼šå‘ç°ç”Ÿæˆäº†djangoçš„æ•°æ®è¡¨</p><p><img src="/images/windows%E4%B8%8B%E5%9F%BA%E4%BA%8Epycharm%E6%9E%84%E5%BB%BAdjango-web%E9%A1%B9%E7%9B%AE/5-1.png"></p><p><strong>6.åˆ›å»ºä¸€ä¸ªapp</strong></p><p>startapp user</p><p><img src="/images/windows%E4%B8%8B%E5%9F%BA%E4%BA%8Epycharm%E6%9E%84%E5%BB%BAdjango-web%E9%A1%B9%E7%9B%AE/6-1.png"></p><p>é¡¹ç›®ç›®å½•ä¸‹ä¼šç”Ÿæˆ</p><p><img src="/images/windows%E4%B8%8B%E5%9F%BA%E4%BA%8Epycharm%E6%9E%84%E5%BB%BAdjango-web%E9%A1%B9%E7%9B%AE/6-2.png"></p><p><strong>7.è‡ªå®šä¹‰userè¡¨</strong></p><p>Djangoç”Ÿæˆçš„userè¡¨</p><ul><li>id: ä¸»é”®, password å¯†ç , last_login Djangoè‡ªåŠ¨è®°å½•ç”¨æˆ·æœ€åç™»å½•æ—¶é—´,ã€‚</li><li>is_superuser è¡¨æ˜ç”¨æˆ·æ˜¯å¦æ˜¯è¶…çº§ç”¨æˆ·(åå°ç®¡ç†ä¼šç”¨åˆ°)ã€‚</li><li>username ç”¨æˆ·åå­—æ®µä¸è¦éšä¾¿æ”¹åŠ¨, email é‚®ç®±,</li><li>is_staff è¡¨ç¤ºæ˜¯å¦æ˜¯å‘˜å·¥(åå°ç®¡ç†ä¼šç”¨åˆ°)ã€‚</li><li>is_active ç”¨æˆ·æ˜¯å¦æ˜¯æ¿€æ´»çŠ¶æ€, date_joined æ³¨å†Œæ—¶é—´ã€‚</li></ul><p>è¿™äº›å¾€å¾€ä¸èƒ½æ»¡è¶³æˆ‘ä»¬è‡ªèº«çš„éœ€æ±‚ï¼Œå› æ­¤éœ€è¦è‡ªå®šä¹‰userè¡¨ï¼Œåœ¨userä¸‹çš„models.pyæ–‡ä»¶æ·»åŠ ä»£ç </p><pre><code class="hljs python"><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime<span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models<span class="hljs-keyword">from</span> django.contrib.auth.models <span class="hljs-keyword">import</span> AbstractUser<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TbUser</span>(<span class="hljs-params">AbstractUser</span>):</span>    nickname = models.CharField(null=<span class="hljs-literal">True</span>, max_length=<span class="hljs-number">50</span>, verbose_name=<span class="hljs-string">&#x27;æ˜µç§°&#x27;</span>,)    birthday = models.DateField(null=<span class="hljs-literal">True</span>, verbose_name=<span class="hljs-string">&#x27;ç”Ÿæ—¥&#x27;</span>)    gender = models.IntegerField(choices=((<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;ç”·&#x27;</span>), (<span class="hljs-number">0</span>, <span class="hljs-string">&#x27;å¥³&#x27;</span>)), verbose_name=<span class="hljs-string">&#x27;æ€§åˆ«&#x27;</span>, default=<span class="hljs-number">1</span>)    address = models.CharField(null=<span class="hljs-literal">True</span>, max_length=<span class="hljs-number">200</span>, verbose_name=<span class="hljs-string">&#x27;åœ°å€&#x27;</span>)    phone = models.CharField(null=<span class="hljs-literal">True</span>, blank=<span class="hljs-literal">True</span>, max_length=<span class="hljs-number">11</span>, verbose_name=<span class="hljs-string">&#x27;æ‰‹æœº&#x27;</span>)    head = models.ImageField(upload_to=<span class="hljs-string">&#x27;image/%Y/%m&#x27;</span>, max_length=<span class="hljs-number">100</span>, verbose_name=<span class="hljs-string">&#x27;å¤´åƒ&#x27;</span>, default=<span class="hljs-string">&#x27;image/default_m.png&#x27;</span>) <span class="hljs-comment"># æ³¨æ„è¿™é‡Œçš„headä½¿ç”¨ImageFieldï¼Œéœ€è¦å®‰è£…ä¾èµ–åº“pip install pillow</span>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span>        db_table = <span class="hljs-string">&#x27;tb_user&#x27;</span>        verbose_name = <span class="hljs-string">&#x27;ç”¨æˆ·ä¿¡æ¯&#x27;</span>        verbose_name_plural = verbose_name    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> self.username</code></pre><p>ä¿®æ”¹settings.pyæ–‡ä»¶</p><p><img src="/images/windows%E4%B8%8B%E5%9F%BA%E4%BA%8Epycharm%E6%9E%84%E5%BB%BAdjango-web%E9%A1%B9%E7%9B%AE/7-1.png"></p><p>åœ¨è¿™é‡Œï¼Œdef <strong>str</strong>(self)ï¼šæ–¹æ³•åœ¨python3.xç‰ˆæœ¬ä½¿ç”¨ï¼Œç”¨äºåå°å±•ç¤ºæ ·å¼æ˜¯æ˜¾ç¤ºçš„æ˜¯ç”¨æˆ·åã€‚ä¿å­˜åï¼Œä½¿ç”¨djangoæ•ç²é‡æ–°ç”Ÿæˆè¡¨</p><p>tool â€“&gt;Run manage.py task</p><pre><code class="hljs routeros">makemigrations<span class="hljs-built_in"> user </span>migrate user</code></pre><p>åˆ›å»ºåå°ç®¡ç†ç”¨æˆ·</p><pre><code class="hljs ebnf"><span class="hljs-attribute">createsuperuser</span></code></pre><p>å¡«å†™ç”¨æˆ·åã€é‚®ç®±å’Œå¯†ç </p><p><img src="/images/windows%E4%B8%8B%E5%9F%BA%E4%BA%8Epycharm%E6%9E%84%E5%BB%BAdjango-web%E9%A1%B9%E7%9B%AE/7-2.png"></p><p>å¯ä»¥æŸ¥çœ‹åˆ°æ•°æ®åº“ä¸­æ–°å¢ä¸€æ¡æ•°æ®</p><p><img src="/images/windows%E4%B8%8B%E5%9F%BA%E4%BA%8Epycharm%E6%9E%84%E5%BB%BAdjango-web%E9%A1%B9%E7%9B%AE/7-3.png"></p><p>è¿™æ ·å°±å¯ä»¥ç™»å½•åå°ç®¡ç†é¡µé¢äº†</p><h3 id="åå°é›†æˆ"><a href="#åå°é›†æˆ" class="headerlink" title="åå°é›†æˆ"></a>åå°é›†æˆ</h3><p><strong>8.é›†æˆxadminç»„ä»¶</strong></p><p>python3.xæ— æ³•ç›´æ¥ä½¿ç”¨å®‰è£…åŒ…</p><pre><code class="hljs awk">pip install git+git:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/sshwsfc/</span>xadmin.git@django2</code></pre><p>æˆ–è€…è®¿é—®<code>https://github.com/sshwsfc/xadmin/tree/django2 </code>ï¼Œ</p><p>æˆ–<code>git clone -b django2  https://github.com/sshwsfc/xadmin.git </code>å°†xadminç›®å½•ä¸‹æ–‡ä»¶æ‹·è´åˆ°é¡¹ç›®ä¸‹</p><p><img src="/images/windows%E4%B8%8B%E5%9F%BA%E4%BA%8Epycharm%E6%9E%84%E5%BB%BAdjango-web%E9%A1%B9%E7%9B%AE/8-1.png"></p><p>åœ¨settings.pyæ–‡ä»¶ä¸‹æ·»åŠ ç›¸åº”é…ç½®</p><p><img src="/images/windows%E4%B8%8B%E5%9F%BA%E4%BA%8Epycharm%E6%9E%84%E5%BB%BAdjango-web%E9%A1%B9%E7%9B%AE/8-2.png"></p><p>æŠŠurlsä¸­é»˜è®¤adminæŒ‡å‘Xadmin</p><pre><code class="hljs python"><span class="hljs-comment"># å¯¼å…¥ xadminï¼Œæ›¿æ¢admin</span><span class="hljs-keyword">import</span> xadminurlpatterns = [    path(<span class="hljs-string">&#x27;xadmin/&#x27;</span>, xadmin.site.urls),, <span class="hljs-comment"># django2ä¸­ä¹Ÿå¯ä»¥æ˜¯ url(r&#x27;^xadmin/&#x27;, xadmin.site.urls)</span>]</code></pre><p>ç‚¹å‡»Tools èœå•ä¸‹ Run manage.py Task</p><pre><code class="hljs ebnf"><span class="hljs-attribute">makemigrations</span> <span class="hljs-attribute">migrate</span></code></pre><p>è®¿é—®<a href="http://127.0.0.1/admin/">http://127.0.0.1/admin/</a></p><p><img src="/images/windows%E4%B8%8B%E5%9F%BA%E4%BA%8Epycharm%E6%9E%84%E5%BB%BAdjango-web%E9%A1%B9%E7%9B%AE/8-3.png"></p><p>æ–°å»ºuser/adminx.pyï¼Œè¿›è¡Œapp modelæ³¨å†Œï¼š</p><pre><code class="hljs python"><span class="hljs-comment"># åˆ›å»ºxadminçš„å…¨å±€ç®¡ç†å™¨å¹¶ä¸viewç»‘å®šã€‚</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BaseSetting</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span>    <span class="hljs-comment"># å¼€å¯ä¸»é¢˜åŠŸèƒ½</span>    enable_themes = <span class="hljs-literal">True</span>    use_bootswatch = <span class="hljs-literal">True</span><span class="hljs-comment"># xadmin å…¨å±€é…ç½®å‚æ•°ä¿¡æ¯è®¾ç½®</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GlobalSettings</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span>    site_title = <span class="hljs-string">&quot;supe-waæ…•è¯¾å°ç«™&quot;</span>    site_footer = <span class="hljs-string">&quot;supe-waæ…•è¯¾å°ç«™|åå°ç®¡ç†ç³»ç»Ÿ&quot;</span>    <span class="hljs-comment"># æ”¶èµ·èœå•</span>    menu_style = <span class="hljs-string">&quot;accordion&quot;</span>    <span class="hljs-comment"># è‡ªå®šä¹‰å¯¼èˆªæ¥¼ç›®å½•</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_site_menu</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> (            &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;è¯¾ç¨‹ä¿¡æ¯ç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;menus&#x27;</span>: (                &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;è¯¾ç¨‹ä¿¡æ¯ç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;url&#x27;</span>: self.get_model_url(TbCourse, <span class="hljs-string">&#x27;changelist&#x27;</span>)&#125;,                &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;ç« èŠ‚ä¿¡æ¯ç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;url&#x27;</span>: self.get_model_url(TbCourseLesson, <span class="hljs-string">&#x27;changelist&#x27;</span>)&#125;,                &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;è§†é¢‘ä¿¡æ¯ç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;url&#x27;</span>: self.get_model_url(TbCourseVideo, <span class="hljs-string">&#x27;changelist&#x27;</span>)&#125;,                &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;è¯¾ç¨‹èµ„æºç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;url&#x27;</span>: self.get_model_url(TbCourseResource, <span class="hljs-string">&#x27;changelist&#x27;</span>)&#125;,                &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;è¯¾ç¨‹è¯„è®ºç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;url&#x27;</span>: self.get_model_url(TbCourseComment, <span class="hljs-string">&#x27;changelist&#x27;</span>)&#125;,            )&#125;,            &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;æœºæ„ä¿¡æ¯ç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;menus&#x27;</span>: (                &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;åŸå¸‚ä¿¡æ¯ç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;url&#x27;</span>: self.get_model_url(TcCityDict, <span class="hljs-string">&#x27;changelist&#x27;</span>)&#125;,                &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;æœºæ„ä¿¡æ¯ç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;url&#x27;</span>: self.get_model_url(TbOrg, <span class="hljs-string">&#x27;changelist&#x27;</span>)&#125;,                &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;æœºæ„è®²å¸ˆç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;url&#x27;</span>: self.get_model_url(TbOrgTeacher, <span class="hljs-string">&#x27;changelist&#x27;</span>)&#125;,            )&#125;,            &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;ç”¨æˆ·ä¿¡æ¯ç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;menus&#x27;</span>: (                &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;ç”¨æˆ·ä¿¡æ¯ç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;url&#x27;</span>: self.get_model_url(TbUser, <span class="hljs-string">&#x27;changelist&#x27;</span>)&#125;,                &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;ç”¨æˆ·éªŒè¯ç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;url&#x27;</span>: self.get_model_url(TbEmailVerifyRecord, <span class="hljs-string">&#x27;changelist&#x27;</span>)&#125;,                &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;ç”¨æˆ·è¯¾ç¨‹ç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;url&#x27;</span>: self.get_model_url(TbUserCourse, <span class="hljs-string">&#x27;changelist&#x27;</span>)&#125;,                &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;ç”¨æˆ·æ”¶è—ç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;url&#x27;</span>: self.get_model_url(TbUserFavorite, <span class="hljs-string">&#x27;changelist&#x27;</span>)&#125;,                &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;ç”¨æˆ·æ¶ˆæ¯ç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;url&#x27;</span>: self.get_model_url(TbUserMessage, <span class="hljs-string">&#x27;changelist&#x27;</span>)&#125;,            )&#125;,            &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;ç³»ç»Ÿä¿¡æ¯ç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;menus&#x27;</span>: (                &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;ç”¨æˆ·å’¨è¯¢&#x27;</span>, <span class="hljs-string">&#x27;url&#x27;</span>: self.get_model_url(TbUserAsk, <span class="hljs-string">&#x27;changelist&#x27;</span>)&#125;,                &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;é¦–é¡µè½®æ’­&#x27;</span>, <span class="hljs-string">&#x27;url&#x27;</span>: self.get_model_url(TcBanner, <span class="hljs-string">&#x27;changelist&#x27;</span>)&#125;,                &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;ç”¨æˆ·åˆ†ç»„&#x27;</span>, <span class="hljs-string">&#x27;url&#x27;</span>: self.get_model_url(Group, <span class="hljs-string">&#x27;changelist&#x27;</span>)&#125;,                &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;ç”¨æˆ·æƒé™&#x27;</span>, <span class="hljs-string">&#x27;url&#x27;</span>: self.get_model_url(Permission, <span class="hljs-string">&#x27;changelist&#x27;</span>)&#125;,                &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;æ—¥å¿—è®°å½•&#x27;</span>, <span class="hljs-string">&#x27;url&#x27;</span>: self.get_model_url(Log, <span class="hljs-string">&#x27;changelist&#x27;</span>)&#125;,            )&#125;,)            <span class="hljs-comment"># å°†å…¨å±€é…ç½®ç®¡ç†ä¸viewç»‘å®šæ³¨å†Œ</span>xadmin.site.register(views.CommAdminView, GlobalSettings)xadmin.site.register(views.BaseAdminView, BaseSetting)</code></pre><p>ç™»å½•å</p><p><img src="/images/windows%E4%B8%8B%E5%9F%BA%E4%BA%8Epycharm%E6%9E%84%E5%BB%BAdjango-web%E9%A1%B9%E7%9B%AE/8-4.png"></p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Windows</tag>
      
      <tag>Python</tag>
      
      <tag>Django</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
